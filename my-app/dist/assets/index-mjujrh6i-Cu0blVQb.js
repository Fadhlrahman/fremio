var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=e=>{let n={};for(var r in e)t(n,r,{get:e[r],enumerable:!0});return n},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),d=e=>l(t({},`__esModule`,{value:!0}),e);(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var f=s((exports=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.iterator;function p(e){return typeof e!=`object`||!e?null:(e=f&&e[f]||e[`@@iterator`],typeof e==`function`?e:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function v(){}v.prototype=_.prototype;function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}var b=y.prototype=new v;b.constructor=y,h(b,_.prototype),b.isPureReactComponent=!0;var x=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function w(e,n,r,i,a,o){return r=o.ref,{$$typeof:t,type:e,key:n,ref:r===void 0?null:r,props:o}}function T(e,t){return w(e.type,t,void 0,void 0,void 0,e.props)}function E(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function D(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var O=/\/+/g;function k(e,t){return typeof e==`object`&&e&&e.key!=null?D(``+e.key):t.toString(36)}function A(){}function j(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(A,A):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function M(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,M(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+k(e,0):a,x(o)?(i=``,c!=null&&(i=c.replace(O,`$&/`)+`/`),M(o,r,i,``,function(e){return e})):o!=null&&(E(o)&&(o=T(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(O,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(x(e))for(var u=0;u<e.length;u++)a=e[u],s=l+k(a,u),c+=M(a,r,i,s,o);else if(u=p(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+k(a,u++),c+=M(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return M(j(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function N(e,t,n){if(e==null)return e;var r=[],i=0;return M(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function P(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ee=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)};function F(){}exports.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}},exports.Component=_,exports.Fragment=r,exports.Profiler=a,exports.PureComponent=y,exports.StrictMode=i,exports.Suspense=l,exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,exports.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},exports.cache=function(e){return function(){return e.apply(null,arguments)}},exports.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=h({},e.props),i=e.key,a=void 0;if(t!=null)for(o in t.ref!==void 0&&(a=void 0),t.key!==void 0&&(i=``+t.key),t)!C.call(t,o)||o===`key`||o===`__self`||o===`__source`||o===`ref`&&t.ref===void 0||(r[o]=t[o]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];r.children=s}return w(e.type,i,void 0,void 0,a,r)},exports.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},exports.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)C.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return w(e,a,void 0,void 0,null,i)},exports.createRef=function(){return{current:null}},exports.forwardRef=function(e){return{$$typeof:c,render:e}},exports.isValidElement=E,exports.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},exports.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},exports.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(F,ee)}catch(e){ee(e)}finally{S.T=t}},exports.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},exports.use=function(e){return S.H.use(e)},exports.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},exports.useCallback=function(e,t){return S.H.useCallback(e,t)},exports.useContext=function(e){return S.H.useContext(e)},exports.useDebugValue=function(){},exports.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},exports.useEffect=function(e,t,n){var r=S.H;if(typeof n==`function`)throw Error(`useEffect CRUD overload is not enabled in this build of React.`);return r.useEffect(e,t)},exports.useId=function(){return S.H.useId()},exports.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},exports.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},exports.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},exports.useMemo=function(e,t){return S.H.useMemo(e,t)},exports.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},exports.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},exports.useRef=function(e){return S.H.useRef(e)},exports.useState=function(e){return S.H.useState(e)},exports.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},exports.useTransition=function(){return S.H.useTransition()},exports.version=`19.1.1`})),p=s(((exports,t)=>{t.exports=f()})),m=s((exports=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(exports.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;exports.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();exports.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,O());else{var t=n(l);t!==null&&j(x,t.startTime-e)}}var S=!1,C=-1,w=5,T=-1;function E(){return g?!0:!(exports.unstable_now()-T<w)}function D(){if(g=!1,S){var t=exports.unstable_now();T=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&E());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=exports.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&j(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?O():S=!1}}}var O;if(typeof y==`function`)O=function(){y(D)};else if(typeof MessageChannel<`u`){var k=new MessageChannel,A=k.port2;k.port1.onmessage=D,O=function(){A.postMessage(null)}}else O=function(){_(D,0)};function j(t,n){C=_(function(){t(exports.unstable_now())},n)}exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(e){e.callback=null},exports.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},exports.unstable_getCurrentPriorityLevel=function(){return f},exports.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},exports.unstable_requestPaint=function(){g=!0},exports.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},exports.unstable_scheduleCallback=function(r,i,a){var o=exports.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,j(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,O()))),r},exports.unstable_shouldYield=E,exports.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),h=s(((exports,t)=>{t.exports=m()})),g=s((exports=>{var t=p();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}exports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,exports.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},exports.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},exports.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},exports.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},exports.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},exports.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},exports.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},exports.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},exports.requestFormReset=function(e){i.d.r(e)},exports.unstable_batchedUpdates=function(e,t){return e(t)},exports.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},exports.useFormStatus=function(){return s.H.useHostTransitionStatus()},exports.version=`19.1.1`})),_=s(((exports,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=g()})),v=s((exports=>{var t=h(),n=p(),r=_();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(o(e)!==e)throw Error(i(188))}function l(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return c(a),e;if(s===r)return c(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var l=!1,u=a.child;u;){if(u===n){l=!0,n=a,r=s;break}if(u===r){l=!0,r=a,n=s;break}u=u.sibling}if(!l){for(u=s.child;u;){if(u===n){l=!0,n=s,r=a;break}if(u===r){l=!0,r=s,n=a;break}u=u.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function u(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=u(e),t!==null)return t;e=e.sibling}return null}var d=Object.assign,f=Symbol.for(`react.element`),m=Symbol.for(`react.transitional.element`),g=Symbol.for(`react.portal`),v=Symbol.for(`react.fragment`),y=Symbol.for(`react.strict_mode`),b=Symbol.for(`react.profiler`),x=Symbol.for(`react.provider`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),T=Symbol.for(`react.suspense`),E=Symbol.for(`react.suspense_list`),D=Symbol.for(`react.memo`),O=Symbol.for(`react.lazy`),k=Symbol.for(`react.activity`),A=Symbol.for(`react.memo_cache_sentinel`),j=Symbol.iterator;function M(e){return typeof e!=`object`||!e?null:(e=j&&e[j]||e[`@@iterator`],typeof e==`function`?e:null)}var N=Symbol.for(`react.client.reference`);function P(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case v:return`Fragment`;case b:return`Profiler`;case y:return`StrictMode`;case T:return`Suspense`;case E:return`SuspenseList`;case k:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case g:return`Portal`;case C:return(e.displayName||`Context`)+`.Provider`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case D:return t=e.displayName||null,t===null?P(e.type)||`Memo`:t;case O:t=e._payload,e=e._init;try{return P(e(t))}catch{}}return null}var ee=Array.isArray,F=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},R=[],te=-1;function z(e){return{current:e}}function B(e){0>te||(e.current=R[te],R[te]=null,te--)}function V(e,t){te++,R[te]=e.current,e.current=t}var H=z(null),ne=z(null),re=z(null),U=z(null);function ie(e,t){switch(V(re,t),V(ne,e),V(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Jd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Jd(t),e=Yd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}B(H),V(H,e)}function ae(){B(H),B(ne),B(re)}function oe(e){e.memoizedState!==null&&V(U,e);var t=H.current,n=Yd(t,e.type);t!==n&&(V(ne,e),V(H,n))}function se(e){ne.current===e&&(B(H),B(ne)),U.current===e&&(B(U),J._currentValue=L)}var ce=Object.prototype.hasOwnProperty,le=t.unstable_scheduleCallback,ue=t.unstable_cancelCallback,de=t.unstable_shouldYield,fe=t.unstable_requestPaint,pe=t.unstable_now,me=t.unstable_getCurrentPriorityLevel,he=t.unstable_ImmediatePriority,ge=t.unstable_UserBlockingPriority,_e=t.unstable_NormalPriority,ve=t.unstable_LowPriority,ye=t.unstable_IdlePriority,be=t.log,xe=t.unstable_setDisableYieldValue,Se=null,Ce=null;function we(e){if(typeof be==`function`&&xe(e),Ce&&typeof Ce.setStrictMode==`function`)try{Ce.setStrictMode(Se,e)}catch{}}var Te=Math.clz32?Math.clz32:Oe,Ee=Math.log,De=Math.LN2;function Oe(e){return e>>>=0,e===0?32:31-(Ee(e)/De|0)|0}var ke=256,Ae=4194304;function je(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Me(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=je(n))):i=je(o):i=je(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=je(n))):i=je(o)):i=je(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function Ne(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Pe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fe(){var e=ke;return ke<<=1,!(ke&4194048)&&(ke=256),e}function Ie(){var e=Ae;return Ae<<=1,!(Ae&62914560)&&(Ae=4194304),e}function Le(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ze(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Te(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&Be(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function Be(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Te(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&4194090}function Ve(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Te(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function He(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ue(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function We(){var e=I.p;return e===0?(e=window.event,e===void 0?32:_p(e.type)):e}function Ge(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}var Ke=Math.random().toString(36).slice(2),qe=`__reactFiber$`+Ke,Je=`__reactProps$`+Ke,Ye=`__reactContainer$`+Ke,Xe=`__reactEvents$`+Ke,Ze=`__reactListeners$`+Ke,Qe=`__reactHandles$`+Ke,$e=`__reactResources$`+Ke,et=`__reactMarker$`+Ke;function tt(e){delete e[qe],delete e[Je],delete e[Xe],delete e[Ze],delete e[Qe]}function nt(e){var t=e[qe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ye]||n[qe]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hf(e);e!==null;){if(n=e[qe])return n;e=hf(e)}return t}e=n,n=e.parentNode}return null}function rt(e){if(e=e[qe]||e[Ye]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function it(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function at(e){var t=e[$e];return t||=e[$e]={hoistableStyles:new Map,hoistableScripts:new Map},t}function ot(e){e[et]=!0}var st=new Set,ct={};function lt(e,t){ut(e,t),ut(e+`Capture`,t)}function ut(e,t){for(ct[e]=t,e=0;e<t.length;e++)st.add(t[e])}var dt=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),ft={},pt={};function mt(e){return ce.call(pt,e)?!0:ce.call(ft,e)?!1:dt.test(e)?pt[e]=!0:(ft[e]=!0,!1)}function ht(e,t,n){if(mt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function gt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function _t(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}var vt,yt;function bt(e){if(vt===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);vt=t&&t[1]||``,yt=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+vt+e+yt}var xt=!1;function St(e,t){if(!e||xt)return``;xt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{xt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?bt(n):``}function Ct(e){switch(e.tag){case 26:case 27:case 5:return bt(e.type);case 16:return bt(`Lazy`);case 13:return bt(`Suspense`);case 19:return bt(`SuspenseList`);case 0:case 15:return St(e.type,!1);case 11:return St(e.type.render,!1);case 1:return St(e.type,!0);case 31:return bt(`Activity`);default:return``}}function wt(e){try{var t=``;do t+=Ct(e),e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function Tt(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Et(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Dt(e){var t=Et(e)?`checked`:`value`,n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=``+e[t];if(!e.hasOwnProperty(t)&&n!==void 0&&typeof n.get==`function`&&typeof n.set==`function`){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ot(e){e._valueTracker||=Dt(e)}function kt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Et(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function At(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var jt=/[\n"\\]/g;function Mt(e){return e.replace(jt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Nt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+Tt(t)):e.value!==``+Tt(t)&&(e.value=``+Tt(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Ft(e,o,Tt(n)):Ft(e,o,Tt(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+Tt(s):e.removeAttribute(`name`)}function Pt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null))return;n=n==null?``:``+Tt(n),t=t==null?n:``+Tt(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o)}function Ft(e,t,n){t===`number`&&At(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function It(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+Tt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Lt(e,t,n){if(t!=null&&(t=``+Tt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+Tt(n)}function Rt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(ee(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=Tt(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r)}function zt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bt=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function Vt(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||Bt.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function Ht(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Vt(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Vt(e,o,t[o])}function Ut(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var Wt=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),Gt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kt(e){return Gt.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}var qt=null;function Jt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yt=null,Xt=null;function Zt(e){var t=rt(e);if(t&&(e=t.stateNode)){var n=e[Je]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Nt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Mt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Je]||null;if(!a)throw Error(i(90));Nt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&kt(r)}break a;case`textarea`:Lt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&It(e,!!n.multiple,t,!1)}}}var Qt=!1;function $t(e,t,n){if(Qt)return e(t,n);Qt=!0;try{return e(t)}finally{if(Qt=!1,(Yt!==null||Xt!==null)&&(wu(),Yt&&(t=Yt,e=Xt,Xt=Yt=null,Zt(t),e)))for(t=0;t<e.length;t++)Zt(e[t])}}function en(e,t){var n=e.stateNode;if(n===null)return null;var r=n[Je]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var tn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),nn=!1;if(tn)try{var rn={};Object.defineProperty(rn,`passive`,{get:function(){nn=!0}}),window.addEventListener(`test`,rn,rn),window.removeEventListener(`test`,rn,rn)}catch{nn=!1}var an=null,on=null,sn=null;function cn(){if(sn)return sn;var e,t=on,n=t.length,r,i=`value`in an?an.value:an.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return sn=i.slice(e,1<r?1-r:void 0)}function ln(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function un(){return!0}function dn(){return!1}function fn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?un:dn,this.isPropagationStopped=dn,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=un)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=un)},persist:function(){},isPersistent:un}),t}var pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mn=fn(pn),hn=d({},pn,{view:0,detail:0}),gn=fn(hn),_n,vn,yn,bn=d({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==yn&&(yn&&e.type===`mousemove`?(_n=e.screenX-yn.screenX,vn=e.screenY-yn.screenY):vn=_n=0,yn=e),_n)},movementY:function(e){return`movementY`in e?e.movementY:vn}}),xn=fn(bn),Sn=d({},bn,{dataTransfer:0}),Cn=fn(Sn),wn=d({},hn,{relatedTarget:0}),Tn=fn(wn),En=d({},pn,{animationName:0,elapsedTime:0,pseudoElement:0}),Dn=fn(En),On=d({},pn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}}),W=fn(On),kn=d({},pn,{data:0}),An=fn(kn),jn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Mn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},G={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=G[e])?!!t[e]:!1}function Pn(){return Nn}var Fn=d({},hn,{key:function(e){if(e.key){var t=jn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=ln(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Mn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(e){return e.type===`keypress`?ln(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?ln(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}}),In=fn(Fn),Ln=d({},bn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rn=fn(Ln),zn=d({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn}),Bn=fn(zn),Vn=d({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hn=fn(Vn),Un=d({},bn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wn=fn(Un),Gn=d({},pn,{newState:0,oldState:0}),Kn=fn(Gn),qn=[9,13,27,32],Jn=tn&&`CompositionEvent`in window,Yn=null;tn&&`documentMode`in document&&(Yn=document.documentMode);var Xn=tn&&`TextEvent`in window&&!Yn,Zn=tn&&(!Jn||Yn&&8<Yn&&11>=Yn),Qn=` `,$n=!1;function er(e,t){switch(e){case`keyup`:return qn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function tr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var nr=!1;function rr(e,t){switch(e){case`compositionend`:return tr(t);case`keypress`:return t.which===32?($n=!0,Qn):null;case`textInput`:return e=t.data,e===Qn&&$n?null:e;default:return null}}function ir(e,t){if(nr)return e===`compositionend`||!Jn&&er(e,t)?(e=cn(),sn=on=an=null,nr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return Zn&&t.locale!==`ko`?null:t.data;default:return null}}var ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!ar[e.type]:t===`textarea`}function sr(e,t,n,r){Yt?Xt?Xt.push(r):Xt=[r]:Yt=r,t=Nd(t,`onChange`),0<t.length&&(n=new mn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var cr=null,lr=null;function ur(e){Td(e,0)}function dr(e){var t=it(e);if(kt(t))return e}function fr(e,t){if(e===`change`)return t}var pr=!1;if(tn){var mr;if(tn){var hr=`oninput`in document;if(!hr){var gr=document.createElement(`div`);gr.setAttribute(`oninput`,`return;`),hr=typeof gr.oninput==`function`}mr=hr}else mr=!1;pr=mr&&(!document.documentMode||9<document.documentMode)}function _r(){cr&&(cr.detachEvent(`onpropertychange`,vr),lr=cr=null)}function vr(e){if(e.propertyName===`value`&&dr(lr)){var t=[];sr(t,lr,e,Jt(e)),$t(ur,t)}}function yr(e,t,n){e===`focusin`?(_r(),cr=t,lr=n,cr.attachEvent(`onpropertychange`,vr)):e===`focusout`&&_r()}function br(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return dr(lr)}function xr(e,t){if(e===`click`)return dr(t)}function Sr(e,t){if(e===`input`||e===`change`)return dr(t)}function Cr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var wr=typeof Object.is==`function`?Object.is:Cr;function Tr(e,t){if(wr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ce.call(t,i)||!wr(e[i],t[i]))return!1}return!0}function Er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dr(e,t){var n=Er(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Er(n)}}function Or(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Or(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=At(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=At(e.document)}return t}function Ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var jr=tn&&`documentMode`in document&&11>=document.documentMode,Mr=null,Nr=null,Pr=null,Fr=!1;function Ir(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fr||Mr==null||Mr!==At(r)||(r=Mr,`selectionStart`in r&&Ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pr&&Tr(Pr,r)||(Pr=r,r=Nd(Nr,`onSelect`),0<r.length&&(t=new mn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Mr)))}function Lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Rr={animationend:Lr(`Animation`,`AnimationEnd`),animationiteration:Lr(`Animation`,`AnimationIteration`),animationstart:Lr(`Animation`,`AnimationStart`),transitionrun:Lr(`Transition`,`TransitionRun`),transitionstart:Lr(`Transition`,`TransitionStart`),transitioncancel:Lr(`Transition`,`TransitionCancel`),transitionend:Lr(`Transition`,`TransitionEnd`)},zr={},Br={};tn&&(Br=document.createElement(`div`).style,`AnimationEvent`in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),`TransitionEvent`in window||delete Rr.transitionend.transition);function Vr(e){if(zr[e])return zr[e];if(!Rr[e])return e;var t=Rr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Br)return zr[e]=t[n];return e}var Hr=Vr(`animationend`),Ur=Vr(`animationiteration`),Wr=Vr(`animationstart`),Gr=Vr(`transitionrun`),Kr=Vr(`transitionstart`),qr=Vr(`transitioncancel`),Jr=Vr(`transitionend`),Yr=new Map,Xr=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);Xr.push(`scrollEnd`);function Zr(e,t){Yr.set(e,t),lt(t,[e])}var Qr=new WeakMap;function $r(e,t){if(typeof e==`object`&&e){var n=Qr.get(e);return n===void 0?(t={value:e,source:t,stack:wt(t)},Qr.set(e,t),t):n}return{value:e,source:t,stack:wt(t)}}var ei=[],ti=0,ni=0;function ri(){for(var e=ti,t=ni=ti=0;t<e;){var n=ei[t];ei[t++]=null;var r=ei[t];ei[t++]=null;var i=ei[t];ei[t++]=null;var a=ei[t];if(ei[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&si(n,i,a)}}function ii(e,t,n,r){ei[ti++]=e,ei[ti++]=t,ei[ti++]=n,ei[ti++]=r,ni|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ai(e,t,n,r){return ii(e,t,n,r),ci(e)}function oi(e,t){return ii(e,null,null,t),ci(e)}function si(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Te(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function ci(e){if(50<hu)throw hu=0,gu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var li={};function ui(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(e,t,n,r){return new ui(e,t,n,r)}function fi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pi(e,t){var n=e.alternate;return n===null?(n=di(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function mi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function hi(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)fi(e)&&(s=1);else if(typeof e==`string`)s=qf(e,n,H.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case k:return e=di(31,n,t,a),e.elementType=k,e.lanes=o,e;case v:return gi(n.children,a,o,t);case y:s=8,a|=24;break;case b:return e=di(12,n,t,a|2),e.elementType=b,e.lanes=o,e;case T:return e=di(13,n,t,a),e.elementType=T,e.lanes=o,e;case E:return e=di(19,n,t,a),e.elementType=E,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case x:case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case D:s=14;break a;case O:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=di(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function gi(e,t,n,r){return e=di(7,e,r,t),e.lanes=n,e}function _i(e,t,n){return e=di(6,e,null,t),e.lanes=n,e}function vi(e,t,n){return t=di(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var yi=[],bi=0,xi=null,Si=0,Ci=[],wi=0,Ti=null,Ei=1,Di=``;function Oi(e,t){yi[bi++]=Si,yi[bi++]=xi,xi=e,Si=t}function ki(e,t,n){Ci[wi++]=Ei,Ci[wi++]=Di,Ci[wi++]=Ti,Ti=e;var r=Ei;e=Di;var i=32-Te(r)-1;r&=~(1<<i),n+=1;var a=32-Te(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ei=1<<32-Te(t)+i|n<<i|r,Di=a+e}else Ei=1<<a|n<<i|r,Di=e}function Ai(e){e.return!==null&&(Oi(e,1),ki(e,1,0))}function ji(e){for(;e===xi;)xi=yi[--bi],yi[bi]=null,Si=yi[--bi],yi[bi]=null;for(;e===Ti;)Ti=Ci[--wi],Ci[wi]=null,Di=Ci[--wi],Ci[wi]=null,Ei=Ci[--wi],Ci[wi]=null}var Mi=null,Ni=null,Pi=!1,Fi=null,Ii=!1,Li=Error(i(519));function Ri(e){var t=Error(i(418,``));throw Wi($r(t,e)),Li}function zi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[qe]=e,t[Je]=r,n){case`dialog`:Ed(`cancel`,t),Ed(`close`,t);break;case`iframe`:case`object`:case`embed`:Ed(`load`,t);break;case`video`:case`audio`:for(n=0;n<Cd.length;n++)Ed(Cd[n],t);break;case`source`:Ed(`error`,t);break;case`img`:case`image`:case`link`:Ed(`error`,t),Ed(`load`,t);break;case`details`:Ed(`toggle`,t);break;case`input`:Ed(`invalid`,t),Pt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Ot(t);break;case`select`:Ed(`invalid`,t);break;case`textarea`:Ed(`invalid`,t),Rt(t,r.value,r.defaultValue,r.children),Ot(t)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||zd(t.textContent,n)?(r.popover!=null&&(Ed(`beforetoggle`,t),Ed(`toggle`,t)),r.onScroll!=null&&Ed(`scroll`,t),r.onScrollEnd!=null&&Ed(`scrollend`,t),r.onClick!=null&&(t.onclick=Bd),t=!0):t=!1,t||Ri(e)}function Bi(e){for(Mi=e.return;Mi;)switch(Mi.tag){case 5:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:Mi=Mi.return}}function Vi(e){if(e!==Mi)return!1;if(!Pi)return Bi(e),Pi=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Xd(e.type,e.memoizedProps)),n=!n),n&&Ni&&Ri(e),Bi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));a:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n===`/$`){if(t===0){Ni=pf(e.nextSibling);break a}t--}else n!==`$`&&n!==`$!`&&n!==`$?`||t++;e=e.nextSibling}Ni=null}}else t===27?(t=Ni,af(e.type)?(e=mf,mf=null,Ni=e):Ni=t):Ni=Mi?pf(e.stateNode.nextSibling):null;return!0}function Hi(){Ni=Mi=null,Pi=!1}function Ui(){var e=Fi;return e!==null&&(nu===null?nu=e:nu.push.apply(nu,e),Fi=null),e}function Wi(e){Fi===null?Fi=[e]:Fi.push(e)}var Gi=z(null),Ki=null,qi=null;function Ji(e,t,n){V(Gi,t._currentValue),t._currentValue=n}function Yi(e){e._currentValue=Gi.current,B(Gi)}function Xi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function Zi(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Xi(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Xi(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function Qi(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;wr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===U.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[J]:e.push(J))}a=a.return}e!==null&&Zi(t,e,n,r),t.flags|=262144}function $i(e){for(e=e.firstContext;e!==null;){if(!wr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ea(e){Ki=e,qi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ta(e){return ra(Ki,e)}function na(e,t){return Ki===null&&ea(e),ra(e,t)}function ra(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},qi===null){if(e===null)throw Error(i(308));qi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else qi=qi.next=t;return n}var ia=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},aa=t.unstable_scheduleCallback,oa=t.unstable_NormalPriority,sa={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ca(){return{controller:new ia,data:new Map,refCount:0}}function la(e){e.refCount--,e.refCount===0&&aa(oa,function(){e.controller.abort()})}var ua=null,da=0,fa=0,pa=null;function ma(e,t){if(ua===null){var n=ua=[];da=0,fa=hd(),pa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return da++,t.then(ha,ha),t}function ha(){if(--da===0&&ua!==null){pa!==null&&(pa.status=`fulfilled`);var e=ua;ua=null,fa=0,pa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ga(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var _a=F.S;F.S=function(e,t){typeof t==`object`&&t&&typeof t.then==`function`&&ma(e,t),_a!==null&&_a(e,t)};var va=z(null);function ya(){var e=va.current;return e===null?Bl.pooledCache:e}function ba(e,t){t===null?V(va,va.current):V(va,t.pool)}function xa(){var e=ya();return e===null?null:{parent:sa._currentValue,pool:e}}var Sa=Error(i(460)),Ca=Error(i(474)),wa=Error(i(542)),Ta={then:function(){}};function Ea(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Da(){}function Oa(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Da,Da),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ja(e),e;default:if(typeof t.status==`string`)t.then(Da,Da);else{if(e=Bl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ja(e),e}throw ka=t,Sa}}var ka=null;function Aa(){if(ka===null)throw Error(i(459));var e=ka;return ka=null,e}function ja(e){if(e===Sa||e===wa)throw Error(i(483))}var K=!1;function Ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Na(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,zl&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=ci(e),si(e,null,n),t}return ii(e,r,t,n),ci(e)}function Ia(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ve(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ra=!1;function za(){if(Ra){var e=pa;if(e!==null)throw e}}function Ba(e,t,n,r){Ra=!1;var i=e.updateQueue;K=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;o=0,u=l=c=null,s=a;do{var p=s.lane&-536870913,m=p!==s.lane;if(m?(Hl&p)===p:(r&p)===p){p!==0&&p===fa&&(Ra=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var h=e,g=s;p=t;var _=n;switch(g.tag){case 1:if(h=g.payload,typeof h==`function`){f=h.call(_,f,p);break a}f=h;break a;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,p=typeof h==`function`?h.call(_,f,p):h,p==null)break a;f=d({},f,p);break a;case 2:K=!0}}p=s.callback,p!==null&&(e.flags|=64,m&&(e.flags|=8192),m=i.callbacks,m===null?i.callbacks=[p]:m.push(p))}else m={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=m,c=f):u=u.next=m,o|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;m=s,s=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);u===null&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Xl|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function Ha(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Va(n[e],t)}var Ua=z(null),Wa=z(0);function Ga(e,t){e=Jl,V(Wa,e),V(Ua,t),Jl=e|t.baseLanes}function Ka(){V(Wa,Jl),V(Ua,Ua.current)}function qa(){Jl=Wa.current,B(Ua),B(Wa)}var Ja=0,Ya=null,Xa=null,Za=null,Qa=!1,$a=!1,eo=!1,to=0,no=0,ro=null,io=0;function ao(){throw Error(i(321))}function oo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wr(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,a){return Ja=a,Ya=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,F.H=e===null||e.memoizedState===null?Es:Ds,eo=!1,a=n(r,i),eo=!1,$a&&(a=lo(t,n,r,i)),co(e),a}function co(e){F.H=Ts;var t=Xa!==null&&Xa.next!==null;if(Ja=0,Za=Xa=Ya=null,Qa=!1,no=0,ro=null,t)throw Error(i(300));e===null||cc||(e=e.dependencies,e!==null&&$i(e)&&(cc=!0))}function lo(e,t,n,r){Ya=e;var a=0;do{if($a&&(ro=null),no=0,$a=!1,25<=a)throw Error(i(301));if(a+=1,Za=Xa=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}F.H=Os,o=t(n,r)}while($a);return o}function uo(){var e=F.H,t=e.useState()[0];return t=typeof t.then==`function`?vo(t):t,e=e.useState()[0],(Xa===null?null:Xa.memoizedState)!==e&&(Ya.flags|=1024),t}function fo(){var e=to!==0;return to=0,e}function po(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function mo(e){if(Qa){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Qa=!1}Ja=0,Za=Xa=Ya=null,$a=!1,no=to=0,ro=null}function ho(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Za===null?Ya.memoizedState=Za=e:Za=Za.next=e,Za}function go(){if(Xa===null){var e=Ya.alternate;e=e===null?null:e.memoizedState}else e=Xa.next;var t=Za===null?Ya.memoizedState:Za.next;if(t!==null)Za=t,Xa=e;else{if(e===null)throw Ya.alternate===null?Error(i(467)):Error(i(310));Xa=e,e={memoizedState:Xa.memoizedState,baseState:Xa.baseState,baseQueue:Xa.baseQueue,queue:Xa.queue,next:null},Za===null?Ya.memoizedState=Za=e:Za=Za.next=e}return Za}function _o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vo(e){var t=no;return no+=1,ro===null&&(ro=[]),e=Oa(ro,e,t),t=Ya,(Za===null?t.memoizedState:Za.next)===null&&(t=t.alternate,F.H=t===null||t.memoizedState===null?Es:Ds),e}function yo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return vo(e);if(e.$$typeof===C)return ta(e)}throw Error(i(438,String(e)))}function bo(e){var t=null,n=Ya.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=Ya.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=_o(),Ya.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function xo(e,t){return typeof t==`function`?t(e):t}function So(e){var t=go();return Co(t,Xa,e)}function Co(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(Ja&f)===f:(Hl&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===fa&&(d=!0);else if((Ja&p)===p){u=u.next,p===fa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,Ya.lanes|=p,Xl|=p;f=u.action,eo&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,Ya.lanes|=f,Xl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!wr(o,e.memoizedState)&&(cc=!0,d&&(n=pa,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function wo(e){var t=go(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);wr(o,t.memoizedState)||(cc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(e,t,n){var r=Ya,a=go(),o=Pi;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!wr((Xa||a).memoizedState,n);s&&(a.memoizedState=n,cc=!0),a=a.queue;var c=Oo.bind(null,r,a,e);if(Yo(2048,8,c,[e]),a.getSnapshot!==t||s||Za!==null&&Za.memoizedState.tag&1){if(r.flags|=2048,Go(9,Ko(),Do.bind(null,r,a,n,t),null),Bl===null)throw Error(i(349));o||Ja&124||Eo(r,t,n)}return n}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ya.updateQueue,t===null?(t=_o(),Ya.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,ko(t)&&Ao(e)}function Oo(e,t,n){return n(function(){ko(t)&&Ao(e)})}function ko(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wr(e,n)}catch{return!0}}function Ao(e){var t=oi(e,2);t!==null&&yu(t,e,2)}function jo(e){var t=ho();if(typeof e==`function`){var n=e;if(e=n(),eo){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t}function Mo(e,t,n,r){return e.baseState=n,Co(e,Xa,typeof r==`function`?r:xo)}function No(e,t,n,r,a){if(Ss(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};F.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,Po(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Po(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=F.T,o={};F.T=o;try{var s=n(i,r),c=F.S;c!==null&&c(o,s),Fo(e,t,s)}catch(n){Lo(e,t,n)}finally{F.T=a}}else try{a=n(i,r),Fo(e,t,a)}catch(n){Lo(e,t,n)}}function Fo(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Io(e,t,n)},function(n){return Lo(e,t,n)}):Io(e,t,n)}function Io(e,t,n){t.status=`fulfilled`,t.value=n,Ro(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Po(e,n)))}function Lo(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,Ro(t),t=t.next;while(t!==r)}e.action=null}function Ro(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function zo(e,t){return t}function Bo(e,t){if(Pi){var n=Bl.formState;if(n!==null){a:{var r=Ya;if(Pi){if(Ni){b:{for(var i=Ni,a=Ii;i.nodeType!==8;){if(!a){i=null;break b}if(i=pf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Ni=pf(i.nextSibling),r=i.data===`F!`;break a}}Ri(r)}r=!1}r&&(t=n[0])}}return n=ho(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:t},n.queue=r,n=ys.bind(null,Ya,r),r.dispatch=n,r=jo(!1),a=xs.bind(null,Ya,!1,r.queue),r=ho(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=No.bind(null,Ya,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Vo(e){var t=go();return Ho(t,Xa,e)}function Ho(e,t,n){if(t=Co(e,t,zo)[0],e=So(xo)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=vo(t)}catch(e){throw e===Sa?wa:e}else r=t;t=go();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(Ya.flags|=2048,Go(9,Ko(),Uo.bind(null,i,n),null)),[r,a,e]}function Uo(e,t){e.action=t}function Wo(e){var t=go(),n=Xa;if(n!==null)return Ho(t,n,e);go(),t=t.memoizedState,n=go();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Go(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=Ya.updateQueue,t===null&&(t=_o(),Ya.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ko(){return{destroy:void 0,resource:void 0}}function qo(){return go().memoizedState}function Jo(e,t,n,r){var i=ho();r=r===void 0?null:r,Ya.flags|=e,i.memoizedState=Go(1|t,Ko(),n,r)}function Yo(e,t,n,r){var i=go();r=r===void 0?null:r;var a=i.memoizedState.inst;Xa!==null&&r!==null&&oo(r,Xa.memoizedState.deps)?i.memoizedState=Go(t,a,n,r):(Ya.flags|=e,i.memoizedState=Go(1|t,a,n,r))}function Xo(e,t){Jo(8390656,8,e,t)}function Zo(e,t){Yo(2048,8,e,t)}function Qo(e,t){return Yo(4,2,e,t)}function $o(e,t){return Yo(4,4,e,t)}function es(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ts(e,t,n){n=n==null?null:n.concat([e]),Yo(4,4,es.bind(null,t,e),n)}function ns(){}function rs(e,t){var n=go();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&oo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function os(e,t){var n=go();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&oo(t,r[1]))return r[0];if(r=e(),eo){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function ss(e,t,n){return n===void 0||Ja&1073741824?e.memoizedState=t:(e.memoizedState=n,e=vu(),Ya.lanes|=e,Xl|=e,n)}function cs(e,t,n,r){return wr(n,t)?n:Ua.current===null?Ja&42?(e=vu(),Ya.lanes|=e,Xl|=e,t):(cc=!0,e.memoizedState=n):(e=ss(e,n,r),wr(e,t)||(cc=!0),e)}function ls(e,t,n,r,i){var a=I.p;I.p=a!==0&&8>a?a:8;var o=F.T,s={};F.T=s,xs(e,!1,t,n);try{var c=i(),l=F.S;if(l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`){var u=ga(c,r);bs(e,t,u,_u(e))}else bs(e,t,r,_u(e))}catch(n){bs(e,t,{then:function(){},status:`rejected`,reason:n},_u())}finally{I.p=a,F.T=o}}function us(){}function ds(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=fs(e).queue;ls(e,a,t,L,n===null?us:function(){return ps(e),n(r)})}function fs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:L},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ps(e){var t=fs(e).next.queue;bs(e,t,{},_u())}function ms(){return ta(J)}function hs(){return go().memoizedState}function gs(){return go().memoizedState}function _s(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=_u();e=Pa(n);var r=Fa(t,e,n);r!==null&&(yu(r,t,n),Ia(r,t,n)),t={cache:ca()},e.payload=t;return}t=t.return}}function vs(e,t,n){var r=_u();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ss(e)?Cs(t,n):(n=ai(e,t,n,r),n!==null&&(yu(n,e,r),ws(n,t,r)))}function ys(e,t,n){var r=_u();bs(e,t,n,r)}function bs(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ss(e))Cs(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,wr(s,o))return ii(e,t,i,0),Bl===null&&ri(),!1}catch{}if(n=ai(e,t,i,r),n!==null)return yu(n,e,r),ws(n,t,r),!0}return!1}function xs(e,t,n,r){if(r={lane:2,revertLane:hd(),action:r,hasEagerState:!1,eagerState:null,next:null},Ss(e)){if(t)throw Error(i(479))}else t=ai(e,n,r,2),t!==null&&yu(t,e,2)}function Ss(e){var t=e.alternate;return e===Ya||t!==null&&t===Ya}function Cs(e,t){$a=Qa=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ws(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ve(e,n)}}var Ts={readContext:ta,use:yo,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useLayoutEffect:ao,useInsertionEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useSyncExternalStore:ao,useId:ao,useHostTransitionStatus:ao,useFormState:ao,useActionState:ao,useOptimistic:ao,useMemoCache:ao,useCacheRefresh:ao},Es={readContext:ta,use:yo,useCallback:function(e,t){return ho().memoizedState=[e,t===void 0?null:t],e},useContext:ta,useEffect:Xo,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),Jo(4194308,4,es.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jo(4194308,4,e,t)},useInsertionEffect:function(e,t){Jo(4,2,e,t)},useMemo:function(e,t){var n=ho();t=t===void 0?null:t;var r=e();if(eo){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ho();if(n!==void 0){var i=n(t);if(eo){we(!0);try{n(t)}finally{we(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=vs.bind(null,Ya,e),[r.memoizedState,e]},useRef:function(e){var t=ho();return e={current:e},t.memoizedState=e},useState:function(e){e=jo(e);var t=e.queue,n=ys.bind(null,Ya,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ns,useDeferredValue:function(e,t){var n=ho();return ss(n,e,t)},useTransition:function(){var e=jo(!1);return e=ls.bind(null,Ya,e.queue,!0,!1),ho().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Ya,a=ho();if(Pi){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Bl===null)throw Error(i(349));Hl&124||Eo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Xo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Go(9,Ko(),Do.bind(null,r,o,n,t),null),n},useId:function(){var e=ho(),t=Bl.identifierPrefix;if(Pi){var n=Di,r=Ei;n=(r&~(1<<32-Te(r)-1)).toString(32)+n,t=``+t+`R`+n,n=to++,0<n&&(t+=`H`+n.toString(32)),t+=``}else n=io++,t=``+t+`r`+n.toString(32)+``;return e.memoizedState=t},useHostTransitionStatus:ms,useFormState:Bo,useActionState:Bo,useOptimistic:function(e){var t=ho();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=xs.bind(null,Ya,!0,n),n.dispatch=t,[e,t]},useMemoCache:bo,useCacheRefresh:function(){return ho().memoizedState=_s.bind(null,Ya)}},Ds={readContext:ta,use:yo,useCallback:rs,useContext:ta,useEffect:Zo,useImperativeHandle:ts,useInsertionEffect:Qo,useLayoutEffect:$o,useMemo:os,useReducer:So,useRef:qo,useState:function(){return So(xo)},useDebugValue:ns,useDeferredValue:function(e,t){var n=go();return cs(n,Xa.memoizedState,e,t)},useTransition:function(){var e=So(xo)[0],t=go().memoizedState;return[typeof e==`boolean`?e:vo(e),t]},useSyncExternalStore:To,useId:hs,useHostTransitionStatus:ms,useFormState:Vo,useActionState:Vo,useOptimistic:function(e,t){var n=go();return Mo(n,Xa,e,t)},useMemoCache:bo,useCacheRefresh:gs},Os={readContext:ta,use:yo,useCallback:rs,useContext:ta,useEffect:Zo,useImperativeHandle:ts,useInsertionEffect:Qo,useLayoutEffect:$o,useMemo:os,useReducer:wo,useRef:qo,useState:function(){return wo(xo)},useDebugValue:ns,useDeferredValue:function(e,t){var n=go();return Xa===null?ss(n,e,t):cs(n,Xa.memoizedState,e,t)},useTransition:function(){var e=wo(xo)[0],t=go().memoizedState;return[typeof e==`boolean`?e:vo(e),t]},useSyncExternalStore:To,useId:hs,useHostTransitionStatus:ms,useFormState:Wo,useActionState:Wo,useOptimistic:function(e,t){var n=go();return Xa===null?(n.baseState=e,[e,n.queue.dispatch]):Mo(n,Xa,e,t)},useMemoCache:bo,useCacheRefresh:gs},ks=null,As=0;function js(e){var t=As;return As+=1,ks===null&&(ks=[]),Oa(ks,e,t)}function Ms(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ns(e,t){throw t.$$typeof===f?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Ps(e){var t=e._init;return t(e._payload)}function Fs(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=pi(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=_i(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===v?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===O&&Ps(i)===t.type)?(t=a(t,n.props),Ms(t,n),t.return=e,t):(t=hi(n.type,n.key,n.props,null,e.mode,r),Ms(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=vi(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=gi(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=_i(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case m:return n=hi(t.type,t.key,t.props,null,e.mode,n),Ms(n,t),n.return=e,n;case g:return t=vi(t,e.mode,n),t.return=e,t;case O:var r=t._init;return t=r(t._payload),f(e,t,n)}if(ee(t)||M(t))return t=gi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,js(t),n);if(t.$$typeof===C)return f(e,na(e,t),n);Ns(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case m:return n.key===i?l(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case O:return i=n._init,n=i(n._payload),p(e,t,n,r)}if(ee(n)||M(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,js(n),r);if(n.$$typeof===C)return p(e,t,na(e,n),r);Ns(e,n)}return null}function h(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case m:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case g:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case O:var a=r._init;return r=a(r._payload),h(e,t,n,r,i)}if(ee(r)||M(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return h(e,t,n,js(r),i);if(r.$$typeof===C)return h(e,t,n,na(t,r),i);Ns(t,r)}return null}function _(i,a,s,c){for(var l=null,u=null,d=a,m=a=0,g=null;d!==null&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var _=p(i,d,s[m],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,m),u===null?l=_:u.sibling=_,u=_,d=g}if(m===s.length)return n(i,d),Pi&&Oi(i,m),l;if(d===null){for(;m<s.length;m++)d=f(i,s[m],c),d!==null&&(a=o(d,a,m),u===null?l=d:u.sibling=d,u=d);return Pi&&Oi(i,m),l}for(d=r(d);m<s.length;m++)g=h(d,i,m,s[m],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?m:g.key),a=o(g,a,m),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),Pi&&Oi(i,m),l}function y(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,m=s,g=s=0,_=null,v=c.next();m!==null&&!v.done;g++,v=c.next()){m.index>g?(_=m,m=null):_=m.sibling;var y=p(a,m,v.value,l);if(y===null){m===null&&(m=_);break}e&&m&&y.alternate===null&&t(a,m),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,m=_}if(v.done)return n(a,m),Pi&&Oi(a,g),u;if(m===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return Pi&&Oi(a,g),u}for(m=r(m);!v.done;g++,v=c.next())v=h(m,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&m.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),Pi&&Oi(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===v&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case m:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===v){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===O&&Ps(l)===r.type){n(e,r.sibling),c=a(r,o.props),Ms(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===v?(c=gi(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=hi(o.type,o.key,o.props,null,e.mode,c),Ms(c,o),c.return=e,e=c)}return s(e);case g:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=vi(o,e.mode,c),c.return=e,e=c}return s(e);case O:return l=o._init,o=l(o._payload),b(e,r,o,c)}if(ee(o))return _(e,r,o,c);if(M(o)){if(l=M(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),y(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,js(o),c);if(o.$$typeof===C)return b(e,r,na(e,o),c);Ns(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=_i(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{As=0;var i=b(e,t,n,r);return ks=null,i}catch(t){if(t===Sa||t===wa)throw t;var a=di(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Is=Fs(!0),Ls=Fs(!1),Rs=z(null),zs=null;function Bs(e){var t=e.alternate;V(Ws,Ws.current&1),V(Rs,e),zs===null&&(t===null||Ua.current!==null||t.memoizedState!==null)&&(zs=e)}function Vs(e){if(e.tag===22){if(V(Ws,Ws.current),V(Rs,e),zs===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(zs=e)}}else Hs(e)}function Hs(){V(Ws,Ws.current),V(Rs,Rs.current)}function Us(e){B(Rs),zs===e&&(zs=null),B(Ws)}var Ws=z(0);function Gs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data===`$?`||df(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ks(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:d({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_u(),i=Pa(r);i.payload=t,n!=null&&(i.callback=n),t=Fa(e,i,r),t!==null&&(yu(t,e,r),Ia(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_u(),i=Pa(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Fa(e,i,r),t!==null&&(yu(t,e,r),Ia(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_u(),r=Pa(n);r.tag=2,t!=null&&(r.callback=t),t=Fa(e,r,n),t!==null&&(yu(t,e,n),Ia(t,e,n))}};function Js(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Tr(n,r)||!Tr(i,a):!0}function Ys(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qs.enqueueReplaceState(t,t.state,null)}function Xs(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=d({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}var Zs=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)};function Qs(e){Zs(e)}function $s(e){console.error(e)}function ec(e){Zs(e)}function tc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function nc(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function rc(e,t,n){return n=Pa(n),n.tag=3,n.payload={element:null},n.callback=function(){tc(e,t)},n}function ic(e){return e=Pa(e),e.tag=3,e}function ac(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){nc(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){nc(t,n,r),typeof i!=`function`&&(su===null?su=new Set([this]):su.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function oc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&Qi(t,n,a,!0),n=Rs.current,n!==null){switch(n.tag){case 13:return zs===null?Au():n.alternate===null&&Yl===0&&(Yl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Ta?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Yu(e,r,a)),!1;case 22:return n.flags|=65536,r===Ta?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Yu(e,r,a)),!1}throw Error(i(435,n.tag))}return Yu(e,r,a),Au(),!1}if(Pi)return t=Rs.current,t===null?(r!==Li&&(t=Error(i(423),{cause:r}),Wi($r(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=$r(r,n),a=rc(e.stateNode,r,a),La(e,a),Yl!==4&&(Yl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Li&&(e=Error(i(422),{cause:r}),Wi($r(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=$r(o,n),tu===null?tu=[o]:tu.push(o),Yl!==4&&(Yl=2),t===null)return!0;r=$r(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=rc(n.stateNode,r,e),La(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(su===null||!su.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=ic(a),ac(a,e,n,r),La(n,a),!1}n=n.return}while(n!==null);return!1}var sc=Error(i(461)),cc=!1;function lc(e,t,n,r){t.child=e===null?Ls(t,null,n,r):Is(t,e.child,n,r)}function uc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return ea(t),r=so(e,t,n,o,a,i),s=fo(),e!==null&&!cc?(po(e,t,i),Ac(e,t,i)):(Pi&&s&&Ai(t),t.flags|=1,lc(e,t,r,i),t.child)}function dc(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!fi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,fc(e,t,a,r,i)):(e=hi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!jc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Tr:n,n(o,r)&&e.ref===t.ref)return Ac(e,t,i)}return t.flags|=1,e=pi(a,r),e.ref=t.ref,e.return=t,t.child=e}function fc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Tr(a,r)&&e.ref===t.ref)if(cc=!1,t.pendingProps=r=a,jc(e,i))e.flags&131072&&(cc=!0);else return t.lanes=e.lanes,Ac(e,t,i)}return gc(e,t,n,r,i)}function pc(e,t,n){var r=t.pendingProps,i=r.children,a=e===null?null:e.memoizedState;if(r.mode===`hidden`){if(t.flags&128){if(r=a===null?n:a.baseLanes|n,e!==null){for(i=t.child=e.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return mc(e,t,r,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ba(t,a===null?null:a.cachePool),a===null?Ka():Ga(t,a),Vs(t);else return t.lanes=t.childLanes=536870912,mc(e,t,a===null?n:a.baseLanes|n,n)}else a===null?(e!==null&&ba(t,null),Ka(),Hs(t)):(ba(t,a.cachePool),Ga(t,a),Hs(t),t.memoizedState=null);return lc(e,t,i,n),t.child}function mc(e,t,n,r){var i=ya();return i=i===null?null:{parent:sa._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&ba(t,null),Ka(),Vs(t),e!==null&&Qi(e,t,r,!0),null}function hc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function gc(e,t,n,r,i){return ea(t),n=so(e,t,n,r,void 0,i),r=fo(),e!==null&&!cc?(po(e,t,i),Ac(e,t,i)):(Pi&&r&&Ai(t),t.flags|=1,lc(e,t,n,i),t.child)}function _c(e,t,n,r,i,a){return ea(t),t.updateQueue=null,n=lo(t,r,n,i),co(e),r=fo(),e!==null&&!cc?(po(e,t,a),Ac(e,t,a)):(Pi&&r&&Ai(t),t.flags|=1,lc(e,t,n,a),t.child)}function vc(e,t,n,r,i){if(ea(t),t.stateNode===null){var a=li,o=n.contextType;typeof o==`object`&&o&&(a=ta(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=qs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Ma(t),o=n.contextType,a.context=typeof o==`object`&&o?ta(o):li,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Ks(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&qs.enqueueReplaceState(a,a.state,null),Ba(t,r,a,i),za(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Xs(n,s);a.props=c;var l=a.context,u=n.contextType;o=li,typeof u==`object`&&u&&(o=ta(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Ys(t,a,r,o),K=!1;var f=t.memoizedState;a.state=f,Ba(t,r,a,i),za(),l=t.memoizedState,s||f!==l||K?(typeof d==`function`&&(Ks(t,n,d,r),l=t.memoizedState),(c=K||Js(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Na(e,t),o=t.memoizedProps,u=Xs(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=li,typeof l==`object`&&l&&(c=ta(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Ys(t,a,r,c),K=!1,f=t.memoizedState,a.state=f,Ba(t,r,a,i),za();var p=t.memoizedState;o!==d||f!==p||K||e!==null&&e.dependencies!==null&&$i(e.dependencies)?(typeof s==`function`&&(Ks(t,n,s,r),p=t.memoizedState),(u=K||Js(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&$i(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,hc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Is(t,e.child,null,i),t.child=Is(t,null,n,i)):lc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Ac(e,t,i),e}function yc(e,t,n,r){return Hi(),t.flags|=256,lc(e,t,n,r),t.child}var bc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xc(e){return{baseLanes:e,cachePool:xa()}}function Sc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=$l),e}function Cc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(Ws.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(Pi){if(a?Bs(t):Hs(t),Pi){var c=Ni,l;if(l=c){c:{for(l=c,c=Ii;l.nodeType!==8;){if(!c){c=null;break c}if(l=pf(l.nextSibling),l===null){c=null;break c}}c=l}c===null?l=!1:(t.memoizedState={dehydrated:c,treeContext:Ti===null?null:{id:Ei,overflow:Di},retryLane:536870912,hydrationErrors:null},l=di(18,null,null,0),l.stateNode=c,l.return=t,t.child=l,Mi=t,Ni=null,l=!0)}l||Ri(t)}if(c=t.memoizedState,c!==null&&(c=c.dehydrated,c!==null))return df(c)?t.lanes=32:t.lanes=536870912,null;Us(t)}return c=r.children,r=r.fallback,a?(Hs(t),a=t.mode,c=Tc({mode:`hidden`,children:c},a),r=gi(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,a=t.child,a.memoizedState=xc(n),a.childLanes=Sc(e,s,n),t.memoizedState=bc,r):(Bs(t),wc(t,c))}if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(Bs(t),t.flags&=-257,t=Ec(e,t,n)):t.memoizedState===null?(Hs(t),a=r.fallback,c=t.mode,r=Tc({mode:`visible`,children:r.children},c),a=gi(a,c,n,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,Is(t,e.child,null,n),r=t.child,r.memoizedState=xc(n),r.childLanes=Sc(e,s,n),t.memoizedState=bc,t=a):(Hs(t),t.child=e.child,t.flags|=128,t=null);else if(Bs(t),df(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,Wi({value:r,source:null,stack:null}),t=Ec(e,t,n)}else if(cc||Qi(e,t,n,!1),s=(n&e.childLanes)!==0,cc||s){if(s=Bl,s!==null&&(r=n&-n,r=r&42?1:He(r),r=(r&(s.suspendedLanes|n))===0?r:0,r!==0&&r!==l.retryLane))throw l.retryLane=r,oi(e,r),yu(s,e,r),sc;c.data===`$?`||Au(),t=Ec(e,t,n)}else c.data===`$?`?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Ni=pf(c.nextSibling),Mi=t,Pi=!0,Fi=null,Ii=!1,e!==null&&(Ci[wi++]=Ei,Ci[wi++]=Di,Ci[wi++]=Ti,Ei=e.id,Di=e.overflow,Ti=t),t=wc(t,r.children),t.flags|=4096);return t}return a?(Hs(t),a=r.fallback,c=t.mode,l=e.child,u=l.sibling,r=pi(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(a=gi(a,c,n,null),a.flags|=2):a=pi(u,a),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,c=e.child.memoizedState,c===null?c=xc(n):(l=c.cachePool,l===null?l=xa():(u=sa._currentValue,l=l.parent===u?l:{parent:u,pool:u}),c={baseLanes:c.baseLanes|n,cachePool:l}),a.memoizedState=c,a.childLanes=Sc(e,s,n),t.memoizedState=bc,r):(Bs(t),n=e.child,e=n.sibling,n=pi(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function wc(e,t){return t=Tc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Tc(e,t){return e=di(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ec(e,t,n){return Is(t,e.child,null,n),e=wc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xi(e.return,t,n)}function Oc(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function kc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(lc(e,t,r.children,n),r=Ws.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dc(e,n,t);else if(e.tag===19)Dc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(V(Ws,r),i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Gs(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Oc(t,!1,i,n,a);break;case`backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Gs(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Oc(t,!0,n,null,a);break;case`together`:Oc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ac(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Qi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=pi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&$i(e))):!0}function Mc(e,t,n){switch(t.tag){case 3:ie(t,t.stateNode.containerInfo),Ji(t,sa,e.memoizedState.cache),Hi();break;case 27:case 5:oe(t);break;case 4:ie(t,t.stateNode.containerInfo);break;case 10:Ji(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(Bs(t),e=Ac(e,t,n),e===null?null:e.sibling):Cc(e,t,n):(Bs(t),t.flags|=128,null);Bs(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(Qi(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return kc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(Ws,Ws.current),r)break;return null;case 22:case 23:return t.lanes=0,pc(e,t,n);case 24:Ji(t,sa,e.memoizedState.cache)}return Ac(e,t,n)}function Nc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)cc=!0;else{if(!jc(e,n)&&!(t.flags&128))return cc=!1,Mc(e,t,n);cc=!!(e.flags&131072)}else cc=!1,Pi&&t.flags&1048576&&ki(t,Si,t.index);switch(t.lanes=0,t.tag){case 16:a:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,typeof r==`function`)fi(r)?(e=Xs(r,e),t.tag=1,t=vc(null,t,r,e,n)):(t.tag=0,t=gc(null,t,r,e,n));else{if(r!=null){if(a=r.$$typeof,a===w){t.tag=11,t=uc(null,t,r,e,n);break a}else if(a===D){t.tag=14,t=dc(null,t,r,e,n);break a}}throw t=P(r)||r,Error(i(306,t,``))}}return t;case 0:return gc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=Xs(r,t.pendingProps),vc(e,t,r,a,n);case 3:a:{if(ie(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Na(e,t),Ba(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Ji(t,sa,r),r!==o.cache&&Zi(t,[sa],n,!0),za(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=yc(e,t,r,n);break a}else if(r!==a){a=$r(Error(i(424)),t),Wi(a),t=yc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Ni=pf(e.firstChild),Mi=t,Pi=!0,Fi=null,Ii=!0,n=Ls(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Hi(),r===a){t=Ac(e,t,n);break a}lc(e,t,r,n)}t=t.child}return t;case 26:return hc(e,t),e===null?(n=Nf(t.type,null,t.pendingProps,null))?t.memoizedState=n:Pi||(n=t.type,e=t.pendingProps,r=qd(re.current).createElement(n),r[qe]=t,r[Je]=e,Ud(r,n,e),ot(r),t.stateNode=r):t.memoizedState=Nf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return oe(t),e===null&&Pi&&(r=t.stateNode=gf(t.type,t.pendingProps,re.current),Mi=t,Ii=!0,a=Ni,af(t.type)?(mf=a,Ni=pf(r.firstChild)):Ni=a),lc(e,t,t.pendingProps.children,n),hc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Pi&&((a=r=Ni)&&(r=lf(r,t.type,t.pendingProps,Ii),r===null?a=!1:(t.stateNode=r,Mi=t,Ni=pf(r.firstChild),Ii=!1,a=!0)),a||Ri(t)),oe(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Xd(a,o)?r=null:s!==null&&Xd(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=so(e,t,uo,null,null,n),J._currentValue=a),hc(e,t),lc(e,t,r,n),t.child;case 6:return e===null&&Pi&&((e=n=Ni)&&(n=uf(n,t.pendingProps,Ii),n===null?e=!1:(t.stateNode=n,Mi=t,Ni=null,e=!0)),e||Ri(t)),null;case 13:return Cc(e,t,n);case 4:return ie(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Is(t,null,r,n):lc(e,t,r,n),t.child;case 11:return uc(e,t,t.type,t.pendingProps,n);case 7:return lc(e,t,t.pendingProps,n),t.child;case 8:return lc(e,t,t.pendingProps.children,n),t.child;case 12:return lc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ji(t,t.type,r.value),lc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,ea(t),a=ta(a),r=r(a),t.flags|=1,lc(e,t,r,n),t.child;case 14:return dc(e,t,t.type,t.pendingProps,n);case 15:return fc(e,t,t.type,t.pendingProps,n);case 19:return kc(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},e===null?(n=Tc(r,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=pi(e.child,r),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return pc(e,t,n);case 24:return ea(t),r=ta(sa),e===null?(a=ya(),a===null&&(a=Bl,o=ca(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Ma(t),Ji(t,sa,a)):((e.lanes&n)!==0&&(Na(e,t),Ba(t,null,null,n),za()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,Ji(t,sa,r),r!==a.cache&&Zi(t,[sa],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Ji(t,sa,r))),lc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Pc(e){e.flags|=4}function Fc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Jf(t)){if(t=Rs.current,t!==null&&((Hl&4194048)===Hl?zs!==null:(Hl&62914560)!==Hl&&!(Hl&536870912)||t!==zs))throw ka=Ta,Ca;e.flags|=8192}}function Ic(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:Ie(),e.lanes|=t,eu|=t)}function Lc(e,t){if(!Pi)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function q(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Rc(e,t,n){var r=t.pendingProps;switch(ji(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return q(t),null;case 1:return q(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Yi(sa),ae(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Vi(t)?Pc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ui())),q(t),null;case 26:return n=t.memoizedState,e===null?(Pc(t),n===null?(q(t),t.flags&=-16777217):(q(t),Fc(t,n))):n?n===e.memoizedState?(q(t),t.flags&=-16777217):(Pc(t),q(t),Fc(t,n)):(e.memoizedProps!==r&&Pc(t),q(t),t.flags&=-16777217),null;case 27:se(t),n=re.current;var a=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Pc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return q(t),null}e=H.current,Vi(t)?zi(t,e):(e=gf(a,r,n),t.stateNode=e,Pc(t))}return q(t),null;case 5:if(se(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Pc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return q(t),null}if(e=H.current,Vi(t))zi(t,e);else{switch(a=qd(re.current),e){case 1:e=a.createElementNS(`http://www.w3.org/2000/svg`,n);break;case 2:e=a.createElementNS(`http://www.w3.org/1998/Math/MathML`,n);break;default:switch(n){case`svg`:e=a.createElementNS(`http://www.w3.org/2000/svg`,n);break;case`math`:e=a.createElementNS(`http://www.w3.org/1998/Math/MathML`,n);break;case`script`:e=a.createElement(`div`),e.innerHTML=`<script><\/script>`,e=e.removeChild(e.firstChild);break;case`select`:e=typeof r.is==`string`?a.createElement(`select`,{is:r.is}):a.createElement(`select`),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is==`string`?a.createElement(n,{is:r.is}):a.createElement(n)}}e[qe]=t,e[Je]=r;a:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break a;for(;a.sibling===null;){if(a.return===null||a.return===t)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;a:switch(Ud(e,n,r),n){case`button`:case`input`:case`select`:case`textarea`:e=!!r.autoFocus;break a;case`img`:e=!0;break a;default:e=!1}e&&Pc(t)}}return q(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Pc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=re.current,Vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Mi,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[qe]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||zd(e.nodeValue,n)),e||Ri(t)}else e=qd(e).createTextNode(r),e[qe]=t,t.stateNode=e}return q(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Vi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[qe]=t}else Hi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;q(t),a=!1}else a=Ui(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(Us(t),t):(Us(t),null)}if(Us(t),t.flags&128)return t.lanes=n,t;if(n=r!==null,e=e!==null&&e.memoizedState!==null,n){r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool);var o=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ic(t,t.updateQueue),q(t),null;case 4:return ae(),e===null&&kd(t.stateNode.containerInfo),q(t),null;case 10:return Yi(t.type),q(t),null;case 19:if(B(Ws),a=t.memoizedState,a===null)return q(t),null;if(r=(t.flags&128)!=0,o=a.rendering,o===null)if(r)Lc(a,!1);else{if(Yl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Gs(e),o!==null){for(t.flags|=128,Lc(a,!1),e=o.updateQueue,t.updateQueue=e,Ic(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)mi(n,e),n=n.sibling;return V(Ws,Ws.current&1|2),t.child}e=e.sibling}a.tail!==null&&pe()>au&&(t.flags|=128,r=!0,Lc(a,!1),t.lanes=4194304)}else{if(!r)if(e=Gs(o),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Ic(t,e),Lc(a,!0),a.tail===null&&a.tailMode===`hidden`&&!o.alternate&&!Pi)return q(t),null}else 2*pe()-a.renderingStartTime>au&&n!==536870912&&(t.flags|=128,r=!0,Lc(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(e=a.last,e===null?t.child=o:e.sibling=o,a.last=o)}return a.tail===null?(q(t),null):(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=pe(),t.sibling=null,e=Ws.current,V(Ws,r?e&1|2:e&1),t);case 22:case 23:return Us(t),qa(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(q(t),t.subtreeFlags&6&&(t.flags|=8192)):q(t),n=t.updateQueue,n!==null&&Ic(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&B(va),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Yi(sa),q(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function zc(e,t){switch(ji(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yi(sa),ae(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return se(t),null;case 13:if(Us(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(Ws),null;case 4:return ae(),null;case 10:return Yi(t.type),null;case 22:case 23:return Us(t),qa(),e!==null&&B(va),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Yi(sa),null;case 25:return null;default:return null}}function Bc(e,t){switch(ji(t),t.tag){case 3:Yi(sa),ae();break;case 26:case 27:case 5:se(t);break;case 4:ae();break;case 13:Us(t);break;case 19:B(Ws);break;case 10:Yi(t.type);break;case 22:case 23:Us(t),qa(),e!==null&&B(va);break;case 24:Yi(sa)}}function Vc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Ju(t,t.return,e)}}function Hc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Ju(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Ju(t,t.return,e)}}function Uc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ha(t,n)}catch(t){Ju(e,e.return,t)}}}function Wc(e,t,n){n.props=Xs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Ju(e,t,n)}}function Gc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Ju(e,t,n)}}function Kc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Ju(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Ju(e,t,n)}else n.current=null}function qc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Ju(e,e.return,t)}}function Jc(e,t,n){try{var r=e.stateNode;Wd(r,e.type,n,t),r[Je]=t}catch(t){Ju(e,e.return,t)}}function Yc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&af(e.type)||e.tag===4}function Xc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Yc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&af(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bd));else if(r!==4&&(r===27&&af(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}function Qc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&af(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Qc(e,t,n),e=e.sibling;e!==null;)Qc(e,t,n),e=e.sibling}function $c(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ud(t,r,n),t[qe]=e,t[Je]=n}catch(t){Ju(e,e.return,t)}}var el=!1,tl=!1,nl=!1,rl=typeof WeakSet==`function`?WeakSet:Set,il=null;function al(e,t){if(e=e.containerInfo,Gd=up,e=kr(e),Ar(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Kd={focusedElem:e,selectionRange:n},up=!1,il=t;il!==null;)if(t=il,e=t.child,t.subtreeFlags&1024&&e!==null)e.return=t,il=e;else for(;il!==null;){switch(t=il,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=Xs(n.type,a,n.elementType===n.type);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Ju(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)cf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:cf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,il=e;break}il=t.return}}function ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:bl(e,n),r&4&&Vc(5,n);break;case 1:if(bl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Ju(n,n.return,e)}else{var i=Xs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Ju(n,n.return,e)}}r&64&&Uc(n),r&512&&Gc(n,n.return);break;case 3:if(bl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ha(e,t)}catch(e){Ju(n,n.return,e)}}break;case 27:t===null&&r&4&&$c(n);case 26:case 5:bl(e,n),t===null&&r&4&&qc(n),r&512&&Gc(n,n.return);break;case 12:bl(e,n);break;case 13:bl(e,n),r&4&&fl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Qu.bind(null,n),ff(e,n))));break;case 22:if(r=n.memoizedState!==null||el,!r){t=t!==null&&t.memoizedState!==null||tl,i=el;var a=tl;el=r,(tl=t)&&!a?Sl(e,n,(n.subtreeFlags&8772)!=0):bl(e,n),el=i,tl=a}break;case 30:break;default:bl(e,n)}}function sl(e){var t=e.alternate;t!==null&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&tt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var cl=null,ll=!1;function ul(e,t,n){for(n=n.child;n!==null;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(Ce&&typeof Ce.onCommitFiberUnmount==`function`)try{Ce.onCommitFiberUnmount(Se,n)}catch{}switch(n.tag){case 26:tl||Kc(n,t),ul(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:tl||Kc(n,t);var r=cl,i=ll;af(n.type)&&(cl=n.stateNode,ll=!1),ul(e,t,n),_f(n.stateNode),cl=r,ll=i;break;case 5:tl||Kc(n,t);case 6:if(r=cl,i=ll,cl=null,ul(e,t,n),cl=r,ll=i,cl!==null)if(ll)try{(cl.nodeType===9?cl.body:cl.nodeName===`HTML`?cl.ownerDocument.body:cl).removeChild(n.stateNode)}catch(e){Ju(n,t,e)}else try{cl.removeChild(n.stateNode)}catch(e){Ju(n,t,e)}break;case 18:cl!==null&&(ll?(e=cl,sf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Ip(e)):sf(cl,n.stateNode));break;case 4:r=cl,i=ll,cl=n.stateNode.containerInfo,ll=!0,ul(e,t,n),cl=r,ll=i;break;case 0:case 11:case 14:case 15:tl||Hc(2,n,t),tl||Hc(4,n,t),ul(e,t,n);break;case 1:tl||(Kc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Wc(n,t,r)),ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:tl=(r=tl)||n.memoizedState!==null,ul(e,t,n),tl=r;break;default:ul(e,t,n)}}function fl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ip(e)}catch(e){Ju(t,t.return,e)}}function pl(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new rl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new rl),t;default:throw Error(i(435,e.tag))}}function ml(e,t){var n=pl(e);t.forEach(function(t){var r=$u.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function hl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(af(c.type)){cl=c.stateNode,ll=!1;break a}break;case 5:cl=c.stateNode,ll=!1;break a;case 3:case 4:cl=c.stateNode.containerInfo,ll=!0;break a}c=c.return}if(cl===null)throw Error(i(160));dl(o,s,a),cl=null,ll=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)_l(t,e),t=t.sibling}var gl=null;function _l(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),vl(e),r&4&&(Hc(3,e,e.return),Vc(3,e),Hc(5,e,e.return));break;case 1:hl(t,e),vl(e),r&512&&(tl||n===null||Kc(n,n.return)),r&64&&el&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=gl;if(hl(t,e),vl(e),r&512&&(tl||n===null||Kc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[et]||o[qe]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Ud(o,r,n),o[qe]=e,ot(o),r=o;break a;case`link`:var s=Gf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Ud(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Gf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Ud(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[qe]=e,ot(o),r=o}e.stateNode=r}else Kf(a,e.type,e.stateNode);else e.stateNode=Bf(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&Jc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Kf(a,e.type,e.stateNode):Bf(a,r,e.memoizedProps))}break;case 27:hl(t,e),vl(e),r&512&&(tl||n===null||Kc(n,n.return)),n!==null&&r&4&&Jc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(hl(t,e),vl(e),r&512&&(tl||n===null||Kc(n,n.return)),e.flags&32){a=e.stateNode;try{zt(a,``)}catch(t){Ju(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,Jc(e,a,n===null?a:n.memoizedProps)),r&1024&&(nl=!0);break;case 6:if(hl(t,e),vl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Ju(e,e.return,t)}}break;case 3:if(Wf=null,a=gl,gl=bf(t.containerInfo),hl(t,e),gl=a,vl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ip(t.containerInfo)}catch(t){Ju(e,e.return,t)}nl&&(nl=!1,yl(e));break;case 4:r=gl,gl=bf(e.stateNode.containerInfo),hl(t,e),vl(e),gl=r;break;case 12:hl(t,e),vl(e);break;case 13:hl(t,e),vl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(iu=pe()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=el,d=tl;if(el=u||a,tl=d||l,hl(t,e),tl=d,el=u,vl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||el||tl||xl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Ju(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Ju(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,ml(e,n))));break;case 19:hl(t,e),vl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 30:break;case 21:break;default:hl(t,e),vl(e)}}function vl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Yc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode,o=Xc(e);Qc(e,o,a);break;case 5:var s=n.stateNode;n.flags&32&&(zt(s,``),n.flags&=-33);var c=Xc(e);Qc(e,c,s);break;case 3:case 4:var l=n.stateNode.containerInfo,u=Xc(e);Zc(e,u,l);break;default:throw Error(i(161))}}catch(t){Ju(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;yl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function bl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ol(e,t.alternate,t),t=t.sibling}function xl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Hc(4,t,t.return),xl(t);break;case 1:Kc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Wc(t,t.return,n),xl(t);break;case 27:_f(t.stateNode);case 26:case 5:Kc(t,t.return),xl(t);break;case 22:t.memoizedState===null&&xl(t);break;case 30:xl(t);break;default:xl(t)}e=e.sibling}}function Sl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Sl(i,a,n),Vc(4,a);break;case 1:if(Sl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Ju(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Va(c[i],s)}catch(e){Ju(r,r.return,e)}}n&&o&64&&Uc(a),Gc(a,a.return);break;case 27:$c(a);case 26:case 5:Sl(i,a,n),n&&r===null&&o&4&&qc(a),Gc(a,a.return);break;case 12:Sl(i,a,n);break;case 13:Sl(i,a,n),n&&o&4&&fl(i,a);break;case 22:a.memoizedState===null&&Sl(i,a,n),Gc(a,a.return);break;case 30:break;default:Sl(i,a,n)}t=t.sibling}}function Cl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&la(n))}function wl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&la(e))}function Tl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)El(e,t,n,r),t=t.sibling}function El(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Tl(e,t,n,r),i&2048&&Vc(9,t);break;case 1:Tl(e,t,n,r);break;case 3:Tl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&la(e)));break;case 12:if(i&2048){Tl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Ju(t,t.return,e)}}else Tl(e,t,n,r);break;case 13:Tl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Tl(e,t,n,r):(a._visibility|=2,Dl(e,t,n,r,(t.subtreeFlags&10256)!=0)):a._visibility&2?Tl(e,t,n,r):Ol(e,t),i&2048&&Cl(o,t);break;case 24:Tl(e,t,n,r),i&2048&&wl(t.alternate,t);break;default:Tl(e,t,n,r)}}function Dl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Dl(a,o,s,c,i),Vc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Dl(a,o,s,c,i)):u._visibility&2?Dl(a,o,s,c,i):Ol(a,o),i&&l&2048&&Cl(o.alternate,o);break;case 24:Dl(a,o,s,c,i),i&&l&2048&&wl(o.alternate,o);break;default:Dl(a,o,s,c,i)}t=t.sibling}}function Ol(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Ol(n,r),i&2048&&Cl(r.alternate,r);break;case 24:Ol(n,r),i&2048&&wl(r.alternate,r);break;default:Ol(n,r)}t=t.sibling}}var kl=8192;function Al(e){if(e.subtreeFlags&kl)for(e=e.child;e!==null;)jl(e),e=e.sibling}function jl(e){switch(e.tag){case 26:Al(e),e.flags&kl&&e.memoizedState!==null&&Zf(gl,e.memoizedState,e.memoizedProps);break;case 5:Al(e);break;case 3:case 4:var t=gl;gl=bf(e.stateNode.containerInfo),Al(e),gl=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=kl,kl=16777216,Al(e),kl=t):Al(e));break;default:Al(e)}}function Ml(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Nl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];il=r,Il(r,e)}Ml(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Pl(e),e=e.sibling}function Pl(e){switch(e.tag){case 0:case 11:case 15:Nl(e),e.flags&2048&&Hc(9,e,e.return);break;case 3:Nl(e);break;case 12:Nl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fl(e)):Nl(e);break;default:Nl(e)}}function Fl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];il=r,Il(r,e)}Ml(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Hc(8,t,t.return),Fl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Fl(t));break;default:Fl(t)}e=e.sibling}}function Il(e,t){for(;il!==null;){var n=il;switch(n.tag){case 0:case 11:case 15:Hc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:la(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,il=r;else a:for(n=e;il!==null;){r=il;var i=r.sibling,a=r.return;if(sl(r),r===n){il=null;break a}if(i!==null){i.return=a,il=i;break a}il=a}}}var Ll={getCacheForType:function(e){var t=ta(sa),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Rl=typeof WeakMap==`function`?WeakMap:Map,zl=0,Bl=null,Vl=null,Hl=0,Ul=0,Wl=null,Gl=!1,Kl=!1,ql=!1,Jl=0,Yl=0,Xl=0,Zl=0,Ql=0,$l=0,eu=0,tu=null,nu=null,ru=!1,iu=0,au=1/0,ou=null,su=null,cu=0,lu=null,uu=null,du=0,fu=0,pu=null,mu=null,hu=0,gu=null;function _u(){if(zl&2&&Hl!==0)return Hl&-Hl;if(F.T!==null){var e=fa;return e===0?hd():e}return We()}function vu(){$l===0&&($l=!(Hl&536870912)||Pi?Fe():536870912);var e=Rs.current;return e!==null&&(e.flags|=32),$l}function yu(e,t,n){(e===Bl&&(Ul===2||Ul===9)||e.cancelPendingCommit!==null)&&(Eu(e,0),Cu(e,Hl,$l,!1)),Re(e,n),(!(zl&2)||e!==Bl)&&(e===Bl&&(!(zl&2)&&(Zl|=n),Yl===4&&Cu(e,Hl,$l,!1)),sd(e))}function bu(e,t,n){if(zl&6)throw Error(i(327));var r=!n&&(t&124)==0&&(t&e.expiredLanes)===0||Ne(e,t),a=r?Nu(e,t):ju(e,t,!0),o=r;do{if(a===0){Kl&&!r&&Cu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Su(n)){a=ju(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=tu;var l=c.current.memoizedState.isDehydrated;if(l&&(Eu(c,s).flags|=256),s=ju(c,s,!1),s!==2){if(ql&&!l){c.errorRecoveryDisabledLanes|=o,Zl|=o,a=4;break a}o=nu,nu=a,o!==null&&(nu===null?nu=o:nu.push.apply(nu,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Eu(e,0),Cu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Cu(r,t,$l,!Gl);break a;case 2:nu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=iu+300-pe(),10<a)){if(Cu(r,t,$l,!Gl),Me(r,0,!0)!==0)break a;r.timeoutHandle=$d(xu.bind(null,r,n,nu,ou,ru,t,$l,Zl,eu,Gl,o,2,-0,0),a);break a}xu(r,n,nu,ou,ru,t,$l,Zl,eu,Gl,o,0,-0,0)}}break}while(1);sd(e)}function xu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,(d&8192||(d&16785408)==16785408)&&(Yf={stylesheets:null,count:0,unsuspend:Xf},jl(t),d=Qf(),d!==null)){e.cancelPendingCommit=d(Bu.bind(null,e,t,a,n,r,i,o,s,c,u,1,f,p)),Cu(e,a,o,!l);return}Bu(e,t,a,n,r,i,o,s,c)}function Su(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!wr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cu(e,t,n,r){t&=~Ql,t&=~Zl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Te(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&Be(e,n,t)}function wu(){return zl&6?!0:(cd(0,!1),!1)}function Tu(){if(Vl!==null){if(Ul===0)var e=Vl.return;else e=Vl,qi=Ki=null,mo(e),ks=null,As=0,e=Vl;for(;e!==null;)Bc(e.alternate,e),e=e.return;Vl=null}}function Eu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,ef(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Tu(),Bl=e,Vl=n=pi(e.current,null),Hl=t,Ul=0,Wl=null,Gl=!1,Kl=Ne(e,t),ql=!1,eu=$l=Ql=Zl=Xl=Yl=0,nu=tu=null,ru=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Te(r),a=1<<i;t|=e[i],r&=~a}return Jl=t,ri(),n}function Du(e,t){Ya=null,F.H=Ts,t===Sa||t===wa?(t=Aa(),Ul=3):t===Ca?(t=Aa(),Ul=4):Ul=t===sc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Wl=t,Vl===null&&(Yl=1,tc(e,$r(t,e.current)))}function Ou(){var e=F.H;return F.H=Ts,e===null?Ts:e}function ku(){var e=F.A;return F.A=Ll,e}function Au(){Yl=4,Gl||(Hl&4194048)!==Hl&&Rs.current!==null||(Kl=!0),!(Xl&134217727)&&!(Zl&134217727)||Bl===null||Cu(Bl,Hl,$l,!1)}function ju(e,t,n){var r=zl;zl|=2;var i=Ou(),a=ku();(Bl!==e||Hl!==t)&&(ou=null,Eu(e,t)),t=!1;var o=Yl;a:do try{if(Ul!==0&&Vl!==null){var s=Vl,c=Wl;switch(Ul){case 8:Tu(),o=6;break a;case 3:case 2:case 9:case 6:Rs.current===null&&(t=!0);var l=Ul;if(Ul=0,Wl=null,Lu(e,s,c,l),n&&Kl){o=0;break a}break;default:l=Ul,Ul=0,Wl=null,Lu(e,s,c,l)}}Mu(),o=Yl;break}catch(t){Du(e,t)}while(1);return t&&e.shellSuspendCounter++,qi=Ki=null,zl=r,F.H=i,F.A=a,Vl===null&&(Bl=null,Hl=0,ri()),o}function Mu(){for(;Vl!==null;)Fu(Vl)}function Nu(e,t){var n=zl;zl|=2;var r=Ou(),a=ku();Bl!==e||Hl!==t?(ou=null,au=pe()+500,Eu(e,t)):Kl=Ne(e,t);a:do try{if(Ul!==0&&Vl!==null){t=Vl;var o=Wl;b:switch(Ul){case 1:Ul=0,Wl=null,Lu(e,t,o,1);break;case 2:case 9:if(Ea(o)){Ul=0,Wl=null,Iu(t);break}t=function(){Ul!==2&&Ul!==9||Bl!==e||(Ul=7),sd(e)},o.then(t,t);break a;case 3:Ul=7;break a;case 4:Ul=5;break a;case 7:Ea(o)?(Ul=0,Wl=null,Iu(t)):(Ul=0,Wl=null,Lu(e,t,o,7));break;case 5:var s=null;switch(Vl.tag){case 26:s=Vl.memoizedState;case 5:case 27:var c=Vl;if(!s||Jf(s)){Ul=0,Wl=null;var l=c.sibling;if(l!==null)Vl=l;else{var u=c.return;u===null?Vl=null:(Vl=u,Ru(u))}break b}}Ul=0,Wl=null,Lu(e,t,o,5);break;case 6:Ul=0,Wl=null,Lu(e,t,o,6);break;case 8:Tu(),Yl=6;break a;default:throw Error(i(462))}}Pu();break}catch(t){Du(e,t)}while(1);return qi=Ki=null,F.H=r,F.A=a,zl=n,Vl===null?(Bl=null,Hl=0,ri(),Yl):0}function Pu(){for(;Vl!==null&&!de();)Fu(Vl)}function Fu(e){var t=Nc(e.alternate,e,Jl);e.memoizedProps=e.pendingProps,t===null?Ru(e):Vl=t}function Iu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=_c(n,t,t.pendingProps,t.type,void 0,Hl);break;case 11:t=_c(n,t,t.pendingProps,t.type.render,t.ref,Hl);break;case 5:mo(t);default:Bc(n,t),t=Vl=mi(t,Jl),t=Nc(n,t,Jl)}e.memoizedProps=e.pendingProps,t===null?Ru(e):Vl=t}function Lu(e,t,n,r){qi=Ki=null,mo(t),ks=null,As=0;var i=t.return;try{if(oc(e,i,t,n,Hl)){Yl=1,tc(e,$r(n,e.current)),Vl=null;return}}catch(t){if(i!==null)throw Vl=i,t;Yl=1,tc(e,$r(n,e.current)),Vl=null;return}t.flags&32768?(Pi||r===1?e=!0:Kl||Hl&536870912?e=!1:(Gl=e=!0,(r===2||r===9||r===3||r===6)&&(r=Rs.current,r!==null&&r.tag===13&&(r.flags|=16384))),zu(t,e)):Ru(t)}function Ru(e){var t=e;do{if(t.flags&32768){zu(t,Gl);return}e=t.return;var n=Rc(t.alternate,t,Jl);if(n!==null){Vl=n;return}if(t=t.sibling,t!==null){Vl=t;return}Vl=t=e}while(t!==null);Yl===0&&(Yl=5)}function zu(e,t){do{var n=zc(e.alternate,e);if(n!==null){n.flags&=32767,Vl=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Vl=e;return}Vl=e=n}while(e!==null);Yl=6,Vl=null}function Bu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Gu();while(cu!==0);if(zl&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=ni,ze(e,n,o,s,c,l),e===Bl&&(Vl=Bl=null,Hl=0),uu=t,lu=e,du=n,fu=o,pu=a,mu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,ed(_e,function(){return Ku(!0),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=F.T,F.T=null,a=I.p,I.p=2,s=zl,zl|=4;try{al(e,t,n)}finally{zl=s,I.p=a,F.T=r}}cu=1,Vu(),Hu(),Uu()}}function Vu(){if(cu===1){cu=0;var e=lu,t=uu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=F.T,F.T=null;var r=I.p;I.p=2;var i=zl;zl|=4;try{_l(t,e);var a=Kd,o=kr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Or(s.ownerDocument.documentElement,s)){if(c!==null&&Ar(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Dr(s,h),v=Dr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}up=!!Gd,Kd=Gd=null}finally{zl=i,I.p=r,F.T=n}}e.current=t,cu=2}}function Hu(){if(cu===2){cu=0;var e=lu,t=uu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=F.T,F.T=null;var r=I.p;I.p=2;var i=zl;zl|=4;try{ol(e,t.alternate,t)}finally{zl=i,I.p=r,F.T=n}}cu=3}}function Uu(){if(cu===4||cu===3){cu=0,fe();var e=lu,t=uu,n=du,r=mu;t.subtreeFlags&10256||t.flags&10256?cu=5:(cu=0,uu=lu=null,Wu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(su=null),Ue(n),t=t.stateNode,Ce&&typeof Ce.onCommitFiberRoot==`function`)try{Ce.onCommitFiberRoot(Se,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=F.T,i=I.p,I.p=2,F.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{F.T=t,I.p=i}}du&3&&Gu(),sd(e),i=e.pendingLanes,n&4194090&&i&42?e===gu?hu++:(hu=0,gu=e):hu=0,cd(0,!1)}}function Wu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,la(t)))}function Gu(e){return Vu(),Hu(),Uu(),Ku(e)}function Ku(){if(cu!==5)return!1;var e=lu,t=fu;fu=0;var n=Ue(du),r=F.T,a=I.p;try{I.p=32>n?32:n,F.T=null,n=pu,pu=null;var o=lu,s=du;if(cu=0,uu=lu=null,du=0,zl&6)throw Error(i(331));var c=zl;if(zl|=4,Pl(o.current),El(o,o.current,s,n),zl=c,cd(0,!1),Ce&&typeof Ce.onPostCommitFiberRoot==`function`)try{Ce.onPostCommitFiberRoot(Se,o)}catch{}return!0}finally{I.p=a,F.T=r,Wu(e,t)}}function qu(e,t,n){t=$r(n,t),t=rc(e.stateNode,t,2),e=Fa(e,t,2),e!==null&&(Re(e,2),sd(e))}function Ju(e,t,n){if(e.tag===3)qu(e,e,n);else for(;t!==null;){if(t.tag===3){qu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(su===null||!su.has(r))){e=$r(n,e),n=ic(2),r=Fa(t,n,2),r!==null&&(ac(n,r,t,e),Re(r,2),sd(r));break}}t=t.return}}function Yu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Rl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(ql=!0,i.add(n),e=Xu.bind(null,e,t,n),t.then(e,e))}function Xu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Bl===e&&(Hl&n)===n&&(Yl===4||Yl===3&&(Hl&62914560)===Hl&&300>pe()-iu?!(zl&2)&&Eu(e,0):Ql|=n,eu===Hl&&(eu=0)),sd(e)}function Zu(e,t){t===0&&(t=Ie()),e=oi(e,t),e!==null&&(Re(e,t),sd(e))}function Qu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zu(e,n)}function $u(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Zu(e,n)}function ed(e,t){return le(e,t)}var td=null,nd=null,rd=!1,id=!1,ad=!1,od=0;function sd(e){e!==nd&&e.next===null&&(nd===null?td=nd=e:nd=nd.next=e),id=!0,rd||(rd=!0,md())}function cd(e,t){if(!ad&&id){ad=!0;do for(var n=!1,r=td;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Te(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,pd(r,a))}else a=Hl,a=Me(r,r===Bl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||Ne(r,a)||(n=!0,pd(r,a));r=r.next}while(n);ad=!1}}function ld(){ud()}function ud(){id=rd=!1;var e=0;od!==0&&(Qd()&&(e=od),od=0);for(var t=pe(),n=null,r=td;r!==null;){var i=r.next,a=dd(r,t);a===0?(r.next=null,n===null?td=i:n.next=i,i===null&&(nd=n)):(n=r,(e!==0||a&3)&&(id=!0)),r=i}cd(e,!1)}function dd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Te(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=Pe(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Bl,n=Hl,n=Me(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Ul===2||Ul===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&ue(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Ne(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&ue(r),Ue(n)){case 2:case 8:n=ge;break;case 32:n=_e;break;case 268435456:n=ye;break;default:n=_e}return r=fd.bind(null,e),n=le(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&ue(r),e.callbackPriority=2,e.callbackNode=null,2}function fd(e,t){if(cu!==0&&cu!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Gu(!0)&&e.callbackNode!==n)return null;var r=Hl;return r=Me(e,e===Bl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(bu(e,r,t),dd(e,pe()),e.callbackNode!=null&&e.callbackNode===n?fd.bind(null,e):null)}function pd(e,t){if(Gu())return null;bu(e,t,!0)}function md(){nf(function(){zl&6?le(he,ld):ud()})}function hd(){return od===0&&(od=Fe()),od}function gd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:Kt(``+e)}function _d(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function vd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=gd((i[Je]||null).action),o=r.submitter;o&&(t=(t=o[Je]||null)?gd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new mn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(od!==0){var e=o?_d(i,o):new FormData(i);ds(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?_d(i,o):new FormData(i),ds(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var yd=0;yd<Xr.length;yd++){var bd=Xr[yd],xd=bd.toLowerCase(),Sd=bd[0].toUpperCase()+bd.slice(1);Zr(xd,`on`+Sd)}Zr(Hr,`onAnimationEnd`),Zr(Ur,`onAnimationIteration`),Zr(Wr,`onAnimationStart`),Zr(`dblclick`,`onDoubleClick`),Zr(`focusin`,`onFocus`),Zr(`focusout`,`onBlur`),Zr(Gr,`onTransitionRun`),Zr(Kr,`onTransitionStart`),Zr(qr,`onTransitionCancel`),Zr(Jr,`onTransitionEnd`),ut(`onMouseEnter`,[`mouseout`,`mouseover`]),ut(`onMouseLeave`,[`mouseout`,`mouseover`]),ut(`onPointerEnter`,[`pointerout`,`pointerover`]),ut(`onPointerLeave`,[`pointerout`,`pointerover`]),lt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),lt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),lt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),lt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),lt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),lt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var Cd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),wd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(Cd));function Td(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Zs(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Zs(e)}i.currentTarget=null,a=c}}}}function Ed(e,t){var n=t[Xe];n===void 0&&(n=t[Xe]=new Set);var r=e+`__bubble`;n.has(r)||(Ad(t,e,2,!1),n.add(r))}function Dd(e,t,n){var r=0;t&&(r|=4),Ad(n,e,r,t)}var Od=`_reactListening`+Math.random().toString(36).slice(2);function kd(e){if(!e[Od]){e[Od]=!0,st.forEach(function(t){t!==`selectionchange`&&(wd.has(t)||Dd(t,!1,e),Dd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Od]||(t[Od]=!0,Dd(`selectionchange`,!1,t))}}function Ad(e,t,n,r){switch(_p(t)){case 2:var i=dp;break;case 8:i=fp;break;default:i=pp}n=i.bind(null,t,n,e),i=void 0,!nn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function jd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=nt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}$t(function(){var r=a,i=Jt(n),s=[];a:{var c=Yr.get(e);if(c!==void 0){var l=mn,u=e;switch(e){case`keypress`:if(ln(n)===0)break a;case`keydown`:case`keyup`:l=In;break;case`focusin`:u=`focus`,l=Tn;break;case`focusout`:u=`blur`,l=Tn;break;case`beforeblur`:case`afterblur`:l=Tn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=xn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Cn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Bn;break;case Hr:case Ur:case Wr:l=Dn;break;case Jr:l=Hn;break;case`scroll`:case`scrollend`:l=gn;break;case`wheel`:l=Wn;break;case`copy`:case`cut`:case`paste`:l=W;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Rn;break;case`toggle`:case`beforetoggle`:l=Kn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=en(m,p),g!=null&&d.push(Md(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==qt&&(u=n.relatedTarget||n.fromElement)&&(nt(u)||u[Ye]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?nt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=xn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Rn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:it(l),h=u==null?c:it(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,nt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=l,p=u,m=0,h=d;h;h=Pd(h))m++;for(h=0,g=p;g;g=Pd(g))h++;for(;0<m-h;)d=Pd(d),m--;for(;0<h-m;)p=Pd(p),h--;for(;m--;){if(d===p||p!==null&&d===p.alternate)break b;d=Pd(d),p=Pd(p)}d=null}else d=null;l!==null&&Fd(s,c,l,d,!1),u!==null&&f!==null&&Fd(s,f,u,d,!0)}}a:{if(c=r?it(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var _=fr;else if(or(c))if(pr)_=Sr;else{_=br;var v=yr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&Ut(r.elementType)&&(_=fr):_=xr;if(_&&=_(e,r)){sr(s,_,n,i);break a}v&&v(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Ft(c,`number`,c.value)}switch(v=r?it(r):window,e){case`focusin`:(or(v)||v.contentEditable===`true`)&&(Mr=v,Nr=r,Pr=null);break;case`focusout`:Pr=Nr=Mr=null;break;case`mousedown`:Fr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Fr=!1,Ir(s,n,i);break;case`selectionchange`:if(jr)break;case`keydown`:case`keyup`:Ir(s,n,i)}var y;if(Jn)b:{switch(e){case`compositionstart`:var b=`onCompositionStart`;break b;case`compositionend`:b=`onCompositionEnd`;break b;case`compositionupdate`:b=`onCompositionUpdate`;break b}b=void 0}else nr?er(e,n)&&(b=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(b=`onCompositionStart`);b&&(Zn&&n.locale!==`ko`&&(nr||b!==`onCompositionStart`?b===`onCompositionEnd`&&nr&&(y=cn()):(an=i,on=`value`in an?an.value:an.textContent,nr=!0)),v=Nd(r,b),0<v.length&&(b=new An(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:(y=tr(n),y!==null&&(b.data=y)))),(y=Xn?rr(e,n):ir(e,n))&&(b=Nd(r,`onBeforeInput`),0<b.length&&(v=new An(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:v,listeners:b}),v.data=y)),vd(s,e,r,n,i)}Td(s,t)})}function Md(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=en(e,n),i!=null&&r.unshift(Md(e,i,a)),i=en(e,t),i!=null&&r.push(Md(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Pd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Fd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=en(n,a),l!=null&&o.unshift(Md(n,l,c))):i||(l=en(n,a),l!=null&&o.push(Md(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Id=/\r\n?/g,Ld=/\u0000|\uFFFD/g;function Rd(e){return(typeof e==`string`?e:``+e).replace(Id,`
`).replace(Ld,``)}function zd(e,t){return t=Rd(t),Rd(e)===t}function Bd(){}function Vd(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||zt(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&zt(e,``+r);break;case`className`:gt(e,`class`,r);break;case`tabIndex`:gt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:gt(e,n,r);break;case`style`:Ht(e,r,o);break;case`data`:if(t!==`object`){gt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=Kt(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Vd(e,t,`name`,a.name,a,null),Vd(e,t,`formEncType`,a.formEncType,a,null),Vd(e,t,`formMethod`,a.formMethod,a,null),Vd(e,t,`formTarget`,a.formTarget,a,null)):(Vd(e,t,`encType`,a.encType,a,null),Vd(e,t,`method`,a.method,a,null),Vd(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=Kt(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=Bd);break;case`onScroll`:r!=null&&Ed(`scroll`,e);break;case`onScrollEnd`:r!=null&&Ed(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=Kt(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:Ed(`beforetoggle`,e),Ed(`toggle`,e),ht(e,`popover`,r);break;case`xlinkActuate`:_t(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:_t(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:_t(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:_t(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:_t(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:_t(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:_t(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:_t(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:_t(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:ht(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=Wt.get(n)||n,ht(e,n,r))}}function Hd(e,t,n,r,a,o){switch(n){case`style`:Ht(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?zt(e,r):(typeof r==`number`||typeof r==`bigint`)&&zt(e,``+r);break;case`onScroll`:r!=null&&Ed(`scroll`,e);break;case`onScrollEnd`:r!=null&&Ed(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=Bd);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!ct.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[Je]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):ht(e,n,r)}}}function Ud(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:Ed(`error`,e),Ed(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Vd(e,t,o,s,n,null)}}a&&Vd(e,t,`srcSet`,n.srcSet,n,null),r&&Vd(e,t,`src`,n.src,n,null);return;case`input`:Ed(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Vd(e,t,r,d,n,null)}}Pt(e,o,c,l,u,s,a,!1),Ot(e);return;case`select`:for(a in Ed(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Vd(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&It(e,!!r,n,!0):It(e,!!r,t,!1);return;case`textarea`:for(s in Ed(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Vd(e,t,s,c,n,null)}Rt(e,r,a,o),Ot(e);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Vd(e,t,l,r,n,null)}return;case`dialog`:Ed(`beforetoggle`,e),Ed(`toggle`,e),Ed(`cancel`,e),Ed(`close`,e);break;case`iframe`:case`object`:Ed(`load`,e);break;case`video`:case`audio`:for(r=0;r<Cd.length;r++)Ed(Cd[r],e);break;case`image`:Ed(`error`,e),Ed(`load`,e);break;case`details`:Ed(`toggle`,e);break;case`embed`:case`source`:case`link`:Ed(`error`,e),Ed(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Vd(e,t,u,r,n,null)}return;default:if(Ut(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Hd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Vd(e,t,c,r,n,null))}function Wd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Vd(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Vd(e,t,p,m,r,f)}}Nt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Vd(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Vd(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?It(e,!!n,n?[]:``,!1):It(e,!!n,t,!0)):It(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Vd(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Vd(e,t,s,a,r,o)}Lt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Vd(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Vd(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Vd(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Vd(e,t,u,p,r,m)}return;default:if(Ut(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Hd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Hd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Vd(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Vd(e,t,f,p,r,m)}var Gd=null,Kd=null;function qd(e){return e.nodeType===9?e:e.ownerDocument}function Jd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Yd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Xd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zd=null;function Qd(){var e=window.event;return e&&e.type===`popstate`?e===Zd?!1:(Zd=e,!0):(Zd=null,!1)}var $d=typeof setTimeout==`function`?setTimeout:void 0,ef=typeof clearTimeout==`function`?clearTimeout:void 0,tf=typeof Promise==`function`?Promise:void 0,nf=typeof queueMicrotask==`function`?queueMicrotask:tf===void 0?$d:function(e){return tf.resolve(null).then(e).catch(rf)};function rf(e){setTimeout(function(){throw e})}function af(e){return e===`head`}function sf(e,t){var n=t,r=0,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n===`/$`){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(n&1&&_f(o.documentElement),n&2&&_f(o.body),n&4)for(n=o.head,_f(n),o=n.firstChild;o;){var s=o.nextSibling,c=o.nodeName;o[et]||c===`SCRIPT`||c===`STYLE`||c===`LINK`&&o.rel.toLowerCase()===`stylesheet`||n.removeChild(o),o=s}}if(i===0){e.removeChild(a),Ip(t);return}i--}else n===`$`||n===`$?`||n===`$!`?i++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);Ip(t)}function cf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:cf(n),tt(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function lf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[et])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=pf(e.nextSibling),e===null)break}return null}function uf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=pf(e.nextSibling),e===null))return null;return e}function df(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState===`complete`}function ff(e,t){var n=e.ownerDocument;if(e.data!==`$?`||n.readyState===`complete`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function pf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`F!`||t===`F`)break;if(t===`/$`)return null}}return e}var mf=null;function hf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`){if(t===0)return e;t--}else n===`/$`&&t++}e=e.previousSibling}return null}function gf(e,t,n){switch(t=qd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function _f(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);tt(e)}var vf=new Map,yf=new Set;function bf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xf=I.d;I.d={f:Sf,r:Cf,D:Ef,C:Df,L:Of,m:kf,X:jf,S:Af,M:Mf};function Sf(){var e=xf.f(),t=wu();return e||t}function Cf(e){var t=rt(e);t!==null&&t.tag===5&&t.type===`form`?ps(t):xf.r(e)}var wf=typeof document>`u`?null:document;function Tf(e,t,n){var r=wf;if(r&&typeof t==`string`&&t){var i=Mt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),yf.has(i)||(yf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Ud(t,`link`,e),ot(t),r.head.appendChild(t)))}}function Ef(e){xf.D(e),Tf(`dns-prefetch`,e,null)}function Df(e,t){xf.C(e,t),Tf(`preconnect`,e,t)}function Of(e,t,n){xf.L(e,t,n);var r=wf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Mt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Mt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Mt(n.imageSizes)+`"]`)):i+=`[href="`+Mt(e)+`"]`;var a=i;switch(t){case`style`:a=Pf(e);break;case`script`:a=Rf(e)}vf.has(a)||(e=d({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),vf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Ff(a))||t===`script`&&r.querySelector(zf(a))||(t=r.createElement(`link`),Ud(t,`link`,e),ot(t),r.head.appendChild(t)))}}function kf(e,t){xf.m(e,t);var n=wf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Mt(r)+`"][href="`+Mt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Rf(e)}if(!vf.has(a)&&(e=d({rel:`modulepreload`,href:e},t),vf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(zf(a)))return}r=n.createElement(`link`),Ud(r,`link`,e),ot(r),n.head.appendChild(r)}}}function Af(e,t,n){xf.S(e,t,n);var r=wf;if(r&&e){var i=at(r).hoistableStyles,a=Pf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Ff(a)))s.loading=5;else{e=d({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=vf.get(a))&&Hf(e,n);var c=o=r.createElement(`link`);ot(c),Ud(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Vf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function jf(e,t){xf.X(e,t);var n=wf;if(n&&e){var r=at(n).hoistableScripts,i=Rf(e),a=r.get(i);a||(a=n.querySelector(zf(i)),a||(e=d({src:e,async:!0},t),(t=vf.get(i))&&Uf(e,t),a=n.createElement(`script`),ot(a),Ud(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Mf(e,t){xf.M(e,t);var n=wf;if(n&&e){var r=at(n).hoistableScripts,i=Rf(e),a=r.get(i);a||(a=n.querySelector(zf(i)),a||(e=d({src:e,async:!0,type:`module`},t),(t=vf.get(i))&&Uf(e,t),a=n.createElement(`script`),ot(a),Ud(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Nf(e,t,n,r){var a=(a=re.current)?bf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Pf(n.href),n=at(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Pf(n.href);var o=at(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(Ff(e)))&&!o._p&&(s.instance=o,s.state.loading=5),vf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},vf.set(e,n),o||Lf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Rf(n),n=at(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Pf(e){return`href="`+Mt(e)+`"`}function Ff(e){return`link[rel="stylesheet"][`+e+`]`}function If(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Lf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Ud(t,`link`,n),ot(t),e.head.appendChild(t))}function Rf(e){return`[src="`+Mt(e)+`"]`}function zf(e){return`script[async]`+e}function Bf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Mt(n.href)+`"]`);if(r)return t.instance=r,ot(r),r;var a=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),ot(r),Ud(r,`style`,a),Vf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Pf(n.href);var o=e.querySelector(Ff(a));if(o)return t.state.loading|=4,t.instance=o,ot(o),o;r=If(n),(a=vf.get(a))&&Hf(r,a),o=(e.ownerDocument||e).createElement(`link`),ot(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Ud(o,`link`,r),t.state.loading|=4,Vf(o,n.precedence,e),t.instance=o;case`script`:return o=Rf(n.src),(a=e.querySelector(zf(o)))?(t.instance=a,ot(a),a):(r=n,(a=vf.get(o))&&(r=d({},n),Uf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),ot(a),Ud(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Vf(r,n.precedence,e));return t.instance}function Vf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Hf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Uf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Wf=null;function Gf(e,t,n){if(Wf===null){var r=new Map,i=Wf=new Map;i.set(n,r)}else i=Wf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[et]||a[qe]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Kf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function qf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Jf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}var Yf=null;function Xf(){}function Zf(e,t,n){if(Yf===null)throw Error(i(475));var r=Yf;if(t.type===`stylesheet`&&(typeof n.media!=`string`||!1!==matchMedia(n.media).matches)&&!(t.state.loading&4)){if(t.instance===null){var a=Pf(n.href),o=e.querySelector(Ff(a));if(o){e=o._p,typeof e==`object`&&e&&typeof e.then==`function`&&(r.count++,r=$f.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,ot(o);return}o=e.ownerDocument||e,n=If(n),(a=vf.get(a))&&Hf(n,a),o=o.createElement(`link`),ot(o);var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Ud(o,`link`,n),t.instance=o}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(r.count++,t=$f.bind(r),e.addEventListener(`load`,t),e.addEventListener(`error`,t))}}function Qf(){if(Yf===null)throw Error(i(475));var e=Yf;return e.stylesheets&&e.count===0&&tp(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&tp(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function $f(){if(this.count--,this.count===0){if(this.stylesheets)tp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ep=null;function tp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ep=new Map,t.forEach(np,e),ep=null,$f.call(e))}function np(e,t){if(!(t.state.loading&4)){var n=ep.get(e);if(n)var r=n.get(null);else{n=new Map,ep.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=$f.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var J={$$typeof:C,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function rp(e,t,n,r,i,a,o,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function ip(e,t,n,r,i,a,o,s,c,l,u,d){return e=new rp(e,t,n,o,s,c,l,d),t=1,!0===a&&(t|=24),a=di(3,null,null,t),e.current=a,a.stateNode=e,t=ca(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Ma(a),e}function ap(e){return e?(e=li,e):li}function op(e,t,n,r,i,a){i=ap(i),r.context===null?r.context=i:r.pendingContext=i,r=Pa(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Fa(e,r,t),n!==null&&(yu(n,e,t),Ia(n,e,t))}function sp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function cp(e,t){sp(e,t),(e=e.alternate)&&sp(e,t)}function lp(e){if(e.tag===13){var t=oi(e,67108864);t!==null&&yu(t,e,67108864),cp(e,67108864)}}var up=!0;function dp(e,t,n,r){var i=F.T;F.T=null;var a=I.p;try{I.p=2,pp(e,t,n,r)}finally{I.p=a,F.T=i}}function fp(e,t,n,r){var i=F.T;F.T=null;var a=I.p;try{I.p=8,pp(e,t,n,r)}finally{I.p=a,F.T=i}}function pp(e,t,n,r){if(up){var i=mp(r);if(i===null)jd(e,t,r,hp,n),Ep(e,r);else if(Op(i,e,t,n,r))r.stopPropagation();else if(Ep(e,r),t&4&&-1<Tp.indexOf(e)){for(;i!==null;){var a=rt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=je(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Te(o);s.entanglements[1]|=c,o&=~c}sd(a),!(zl&6)&&(au=pe()+500,cd(0,!1))}}break;case 13:s=oi(a,2),s!==null&&yu(s,a,2),wu(),cp(a,2)}if(a=mp(r),a===null&&jd(e,t,r,hp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else jd(e,t,r,null,n)}}function mp(e){return e=Jt(e),gp(e)}var hp=null;function gp(e){if(hp=null,e=nt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return hp=e,null}function _p(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(me()){case he:return 2;case ge:return 8;case _e:case ve:return 32;case ye:return 268435456;default:return 32}default:return 32}}var vp=!1,yp=null,bp=null,xp=null,Sp=new Map,Cp=new Map,wp=[],Tp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Ep(e,t){switch(e){case`focusin`:case`focusout`:yp=null;break;case`dragenter`:case`dragleave`:bp=null;break;case`mouseover`:case`mouseout`:xp=null;break;case`pointerover`:case`pointerout`:Sp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Cp.delete(t.pointerId)}}function Dp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=rt(t),t!==null&&lp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Op(e,t,n,r,i){switch(t){case`focusin`:return yp=Dp(yp,e,t,n,r,i),!0;case`dragenter`:return bp=Dp(bp,e,t,n,r,i),!0;case`mouseover`:return xp=Dp(xp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Sp.set(a,Dp(Sp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Cp.set(a,Dp(Cp.get(a)||null,e,t,n,r,i)),!0}return!1}function kp(e){var t=nt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,Ge(e.priority,function(){if(n.tag===13){var e=_u();e=He(e);var t=oi(n,e);t!==null&&yu(t,n,e),cp(n,e)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ap(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);qt=r,n.target.dispatchEvent(r),qt=null}else return t=rt(n),t!==null&&lp(t),e.blockedOn=n,!1;t.shift()}return!0}function jp(e,t,n){Ap(e)&&n.delete(t)}function Mp(){vp=!1,yp!==null&&Ap(yp)&&(yp=null),bp!==null&&Ap(bp)&&(bp=null),xp!==null&&Ap(xp)&&(xp=null),Sp.forEach(jp),Cp.forEach(jp)}function Np(e,n){e.blockedOn===n&&(e.blockedOn=null,vp||(vp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Mp)))}var Pp=null;function Fp(e){Pp!==e&&(Pp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pp===e&&(Pp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(gp(r||n)===null)continue;break}var a=rt(n);a!==null&&(e.splice(t,3),t-=3,ds(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ip(e){function t(t){return Np(t,e)}yp!==null&&Np(yp,e),bp!==null&&Np(bp,e),xp!==null&&Np(xp,e),Sp.forEach(t),Cp.forEach(t);for(var n=0;n<wp.length;n++){var r=wp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<wp.length&&(n=wp[0],n.blockedOn===null);)kp(n),n.blockedOn===null&&wp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[Je]||null;if(typeof a==`function`)o||Fp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[Je]||null)s=o.formAction;else if(gp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Fp(n)}}}function Lp(e){this._internalRoot=e}Rp.prototype.render=Lp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current,r=_u();op(n,r,e,t,null,null)},Rp.prototype.unmount=Lp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;op(e.current,2,null,e,null,null),wu(),t[Ye]=null}};function Rp(e){this._internalRoot=e}Rp.prototype.unstable_scheduleHydration=function(e){if(e){var t=We();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wp.length&&t!==0&&t<wp[n].priority;n++);wp.splice(n,0,e),n===0&&kp(e)}};var zp=n.version;if(zp!==`19.1.1`)throw Error(i(527,zp,`19.1.1`));I.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=l(t),e=e===null?null:u(e),e=e===null?null:e.stateNode,e};var Bp={bundleType:0,version:`19.1.1`,rendererPackageName:`react-dom`,currentDispatcherRef:F,reconcilerVersion:`19.1.1`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vp.isDisabled&&Vp.supportsFiber)try{Se=Vp.inject(Bp),Ce=Vp}catch{}}exports.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=Qs,s=$s,c=ec,l=null;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=ip(e,1,!1,null,null,n,r,o,s,c,l,null),e[Ye]=t.current,kd(e),new Lp(t)}})),y=u(s(((exports,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=v()}))()),b=u(p(),1),x=`modulepreload`,S=function(e){return`/`+e},C={};const w=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=S(t,n),t in C)return;C[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:x,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[]){if(e.status!==`rejected`)continue;i(e.reason)}return e().catch(i)})};var T=`popstate`;function E(e={}){function t(e,t){let{pathname:n,search:r,hash:i}=e.location;return j(``,{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||`default`)}function n(e,t){return typeof t==`string`?t:M(t)}return P(t,n,null,e)}function D(e,t){if(e===!1||e==null)throw Error(t)}function O(e,t){if(!e){typeof console<`u`&&console.warn(t);try{throw Error(t)}catch{}}}function k(){return Math.random().toString(36).substring(2,10)}function A(e,t){return{usr:e.state,key:e.key,idx:t}}function j(e,t,n=null,r){return{pathname:typeof e==`string`?e:e.pathname,search:``,hash:``,...typeof t==`string`?N(t):t,state:n,key:t&&t.key||r||k()}}function M({pathname:e=`/`,search:t=``,hash:n=``}){return t&&t!==`?`&&(e+=t.charAt(0)===`?`?t:`?`+t),n&&n!==`#`&&(e+=n.charAt(0)===`#`?n:`#`+n),e}function N(e){let t={};if(e){let n=e.indexOf(`#`);n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf(`?`);r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function P(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=`POP`,c=null,l=u();l??(l=0,o.replaceState({...o.state,idx:l},``));function u(){return(o.state||{idx:null}).idx}function d(){s=`POP`;let e=u(),t=e==null?null:e-l;l=e,c&&c({action:s,location:h.location,delta:t})}function f(e,t){s=`PUSH`;let r=j(h.location,e,t);n&&n(r,e),l=u()+1;let d=A(r,l),f=h.createHref(r);try{o.pushState(d,``,f)}catch(e){if(e instanceof DOMException&&e.name===`DataCloneError`)throw e;i.location.assign(f)}a&&c&&c({action:s,location:h.location,delta:1})}function p(e,t){s=`REPLACE`;let r=j(h.location,e,t);n&&n(r,e),l=u();let i=A(r,l),d=h.createHref(r);o.replaceState(i,``,d),a&&c&&c({action:s,location:h.location,delta:0})}function m(e){return ee(e)}let h={get action(){return s},get location(){return e(i,o)},listen(e){if(c)throw Error(`A history only accepts one active listener`);return i.addEventListener(T,d),c=e,()=>{i.removeEventListener(T,d),c=null}},createHref(e){return t(i,e)},createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:f,replace:p,go(e){return o.go(e)}};return h}function ee(e,t=!1){let n=`http://localhost`;typeof window<`u`&&(n=window.location.origin===`null`?window.location.href:window.location.origin),D(n,`No window.location.(origin|href) available to create URL`);let r=typeof e==`string`?e:M(e);return r=r.replace(/ $/,`%20`),!t&&r.startsWith(`//`)&&(r=n+r),new URL(r,n)}function F(e,t,n=`/`){return I(e,t,n,!1)}function I(e,t,n,r){let i=typeof t==`string`?N(t):t,a=de(i.pathname||`/`,n);if(a==null)return null;let o=R(e);z(o);let s=null;for(let e=0;s==null&&e<o.length;++e){let t=ue(a);s=se(o[e],t,r)}return s}function L(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],loaderData:t[n.id],handle:n.handle}}function R(e,t=[],n=[],r=``,i=!1){let a=(e,a,o=i,s)=>{let c={relativePath:s===void 0?e.path||``:s,caseSensitive:e.caseSensitive===!0,childrenIndex:a,route:e};if(c.relativePath.startsWith(`/`)){if(!c.relativePath.startsWith(r)&&o)return;D(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let l=ve([r,c.relativePath]),u=n.concat(c);e.children&&e.children.length>0&&(D(e.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),R(e.children,t,u,l,o)),!(e.path==null&&!e.index)&&t.push({path:l,score:ae(l,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(e.path===``||!e.path?.includes(`?`))a(e,t);else for(let n of te(e.path))a(e,t,!0,n)}),t}function te(e){let t=e.split(`/`);if(t.length===0)return[];let[n,...r]=t,i=n.endsWith(`?`),a=n.replace(/\?$/,``);if(r.length===0)return i?[a,``]:[a];let o=te(r.join(`/`)),s=[];return s.push(...o.map(e=>e===``?a:[a,e].join(`/`))),i&&s.push(...o),s.map(t=>e.startsWith(`/`)&&t===``?`/`:t)}function z(e){e.sort((e,t)=>e.score===t.score?oe(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)):t.score-e.score)}var B=/^:[\w-]+$/,V=3,H=2,ne=1,re=10,U=-2,ie=e=>e===`*`;function ae(e,t){let n=e.split(`/`),r=n.length;return n.some(ie)&&(r+=U),t&&(r+=H),n.filter(e=>!ie(e)).reduce((e,t)=>e+(B.test(t)?V:t===``?ne:re),r)}function oe(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}function se(e,t,n=!1){let{routesMeta:r}=e,i={},a=`/`,o=[];for(let e=0;e<r.length;++e){let s=r[e],c=e===r.length-1,l=a===`/`?t:t.slice(a.length)||`/`,u=ce({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l),d=s.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=ce({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},l)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:ve([a,u.pathname]),pathnameBase:ye(ve([a,u.pathnameBase])),route:d}),u.pathnameBase!==`/`&&(a=ve([a,u.pathnameBase]))}return o}function ce(e,t){typeof e==`string`&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=le(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,`$1`),s=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if(t===`*`){let e=s[r]||``;o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,`$1`)}let i=s[r];return n&&!i?e[t]=void 0:e[t]=(i||``).replace(/%2F/g,`/`),e},{}),pathname:a,pathnameBase:o,pattern:e}}function le(e,t=!1,n=!0){O(e===`*`||!e.endsWith(`*`)||e.endsWith(`/*`),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,`/*`)}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,`/*`)}".`);let r=[],i=`^`+e.replace(/\/*\*?$/,``).replace(/^\/*/,`/`).replace(/[\\.*+^${}|()[\]]/g,`\\$&`).replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:n!=null}),n?`/?([^\\/]+)?`:`/([^\\/]+)`)).replace(/\/([\w-]+)\?(\/|$)/g,`(/$1)?$2`);return e.endsWith(`*`)?(r.push({paramName:`*`}),i+=e===`*`||e===`/*`?`(.*)$`:`(?:\\/(.+)|\\/*)$`):n?i+=`\\/*$`:e!==``&&e!==`/`&&(i+=`(?:(?=\\/|$))`),[new RegExp(i,t?void 0:`i`),r]}function ue(e){try{return e.split(`/`).map(e=>decodeURIComponent(e).replace(/\//g,`%2F`)).join(`/`)}catch(t){return O(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function de(e,t){if(t===`/`)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith(`/`)?t.length-1:t.length,r=e.charAt(n);return r&&r!==`/`?null:e.slice(n)||`/`}function fe(e,t=`/`){let{pathname:n,search:r=``,hash:i=``}=typeof e==`string`?N(e):e;return{pathname:n?n.startsWith(`/`)?n:pe(n,t):t,search:be(r),hash:xe(i)}}function pe(e,t){let n=t.replace(/\/+$/,``).split(`/`);return e.split(`/`).forEach(e=>{e===`..`?n.length>1&&n.pop():e!==`.`&&n.push(e)}),n.length>1?n.join(`/`):`/`}function me(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function he(e){return e.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ge(e){let t=he(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function _e(e,t,n,r=!1){let i;typeof e==`string`?i=N(e):(i={...e},D(!i.pathname||!i.pathname.includes(`?`),me(`?`,`pathname`,`search`,i)),D(!i.pathname||!i.pathname.includes(`#`),me(`#`,`pathname`,`hash`,i)),D(!i.search||!i.search.includes(`#`),me(`#`,`search`,`hash`,i)));let a=e===``||i.pathname===``,o=a?`/`:i.pathname,s;if(o==null)s=n;else{let e=t.length-1;if(!r&&o.startsWith(`..`)){let t=o.split(`/`);for(;t[0]===`..`;)t.shift(),--e;i.pathname=t.join(`/`)}s=e>=0?t[e]:`/`}let c=fe(i,s),l=o&&o!==`/`&&o.endsWith(`/`),u=(a||o===`.`)&&n.endsWith(`/`);return!c.pathname.endsWith(`/`)&&(l||u)&&(c.pathname+=`/`),c}var ve=e=>e.join(`/`).replace(/\/\/+/g,`/`),ye=e=>e.replace(/\/+$/,``).replace(/^\/*/,`/`),be=e=>!e||e===`?`?``:e.startsWith(`?`)?e:`?`+e,xe=e=>!e||e===`#`?``:e.startsWith(`#`)?e:`#`+e;function Se(e){return e!=null&&typeof e.status==`number`&&typeof e.statusText==`string`&&typeof e.internal==`boolean`&&`data`in e}var Ce=b.createContext(null);Ce.displayName=`DataRouter`;var we=b.createContext(null);we.displayName=`DataRouterState`,b.createContext(!1);var Te=b.createContext({isTransitioning:!1});Te.displayName=`ViewTransition`;var Ee=b.createContext(new Map);Ee.displayName=`Fetchers`;var De=b.createContext(null);De.displayName=`Await`;var Oe=b.createContext(null);Oe.displayName=`Navigation`;var ke=b.createContext(null);ke.displayName=`Location`;var Ae=b.createContext({outlet:null,matches:[],isDataRoute:!1});Ae.displayName=`Route`;var je=b.createContext(null);je.displayName=`RouteError`;function Me(e,{relative:t}={}){D(Ne(),`useHref() may be used only in the context of a <Router> component.`);let{basename:n,navigator:r}=b.useContext(Oe),{hash:i,pathname:a,search:o}=He(e,{relative:t}),s=a;return n!==`/`&&(s=a===`/`?n:ve([n,a])),r.createHref({pathname:s,search:o,hash:i})}function Ne(){return b.useContext(ke)!=null}function Pe(){return D(Ne(),`useLocation() may be used only in the context of a <Router> component.`),b.useContext(ke).location}var Fe=`You should call navigate() in a React.useEffect(), not when your component is first rendered.`;function Ie(e){b.useContext(Oe).static||b.useLayoutEffect(e)}function Le(){let{isDataRoute:e}=b.useContext(Ae);return e?at():Re()}function Re(){D(Ne(),`useNavigate() may be used only in the context of a <Router> component.`);let e=b.useContext(Ce),{basename:t,navigator:n}=b.useContext(Oe),{matches:r}=b.useContext(Ae),{pathname:i}=Pe(),a=JSON.stringify(ge(r)),o=b.useRef(!1);return Ie(()=>{o.current=!0}),b.useCallback((r,s={})=>{if(O(o.current,Fe),!o.current)return;if(typeof r==`number`){n.go(r);return}let c=_e(r,JSON.parse(a),i,s.relative===`path`);e==null&&t!==`/`&&(c.pathname=c.pathname===`/`?t:ve([t,c.pathname])),(s.replace?n.replace:n.push)(c,s.state,s)},[t,n,a,i,e])}var ze=b.createContext(null);function Be(e){let t=b.useContext(Ae).outlet;return b.useMemo(()=>t&&b.createElement(ze.Provider,{value:e},t),[t,e])}function Ve(){let{matches:e}=b.useContext(Ae),t=e[e.length-1];return t?t.params:{}}function He(e,{relative:t}={}){let{matches:n}=b.useContext(Ae),{pathname:r}=Pe(),i=JSON.stringify(ge(n));return b.useMemo(()=>_e(e,JSON.parse(i),r,t===`path`),[e,i,r,t])}function Ue(e,t){return We(e,t)}function We(e,t,n,r,i){D(Ne(),`useRoutes() may be used only in the context of a <Router> component.`);let{navigator:a}=b.useContext(Oe),{matches:o}=b.useContext(Ae),s=o[o.length-1],c=s?s.params:{},l=s?s.pathname:`/`,u=s?s.pathnameBase:`/`,d=s&&s.route;{let e=d&&d.path||``;st(l,!d||e.endsWith(`*`)||e.endsWith(`*?`),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${e}"> to <Route path="${e===`/`?`*`:`${e}/*`}">.`)}let f=Pe(),p;if(t){let e=typeof t==`string`?N(t):t;D(u===`/`||e.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||`/`,h=m;if(u!==`/`){let e=u.replace(/^\//,``).split(`/`);h=`/`+m.replace(/^\//,``).split(`/`).slice(e.length).join(`/`)}let g=F(e,{pathname:h});O(d||g!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),O(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Ye(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ve([u,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathname]),pathnameBase:e.pathnameBase===`/`?u:ve([u,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathnameBase])})),o,n,r,i);return t&&_?b.createElement(ke.Provider,{value:{location:{pathname:`/`,search:``,hash:``,state:null,key:`default`,...p},navigationType:`POP`}},_):_}function Ge(){let e=it(),t=Se(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r=`rgba(200,200,200, 0.5)`,i={padding:`0.5rem`,backgroundColor:r},a={padding:`2px 4px`,backgroundColor:r},o=null;return console.error(`Error handled by React Router default ErrorBoundary:`,e),o=b.createElement(b.Fragment,null,b.createElement(`p`,null,` Hey developer `),b.createElement(`p`,null,`You can provide a way better UX than this when your app throws errors by providing your own `,b.createElement(`code`,{style:a},`ErrorBoundary`),` or`,` `,b.createElement(`code`,{style:a},`errorElement`),` prop on your route.`)),b.createElement(b.Fragment,null,b.createElement(`h2`,null,`Unexpected Application Error!`),b.createElement(`h3`,{style:{fontStyle:`italic`}},t),n?b.createElement(`pre`,{style:i},n):null,o)}var Ke=b.createElement(Ge,null),qe=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!==`idle`&&e.revalidation===`idle`?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error===void 0?t.error:e.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error(`React Router caught the following error during render`,e)}render(){return this.state.error===void 0?this.props.children:b.createElement(Ae.Provider,{value:this.props.routeContext},b.createElement(je.Provider,{value:this.state.error,children:this.props.component}))}};function Je({routeContext:e,match:t,children:n}){let r=b.useContext(Ce);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(Ae.Provider,{value:e},n)}function Ye(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let e=a.findIndex(e=>e.route.id&&o?.[e.route.id]!==void 0);D(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(`,`)}`),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,c=-1;if(n)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||r[t.route.id]===void 0);if(t.route.lazy||i){s=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight((e,i,l)=>{let u,d=!1,f=null,p=null;n&&(u=o&&i.route.id?o[i.route.id]:void 0,f=i.route.errorElement||Ke,s&&(c<0&&l===0?(st(`route-fallback`,!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):c===l&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,l+1)),h=()=>{let t;return t=u?f:d?p:i.route.Component?b.createElement(i.route.Component,null):i.route.element?i.route.element:e,b.createElement(Je,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:n!=null},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||l===0)?b.createElement(qe,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:h(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:r}):h()},null)}function Xe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ze(e){let t=b.useContext(Ce);return D(t,Xe(e)),t}function Qe(e){let t=b.useContext(we);return D(t,Xe(e)),t}function $e(e){let t=b.useContext(Ae);return D(t,Xe(e)),t}function et(e){let t=$e(e),n=t.matches[t.matches.length-1];return D(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function tt(){return et(`useRouteId`)}function nt(){return Qe(`useNavigation`).navigation}function rt(){let{matches:e,loaderData:t}=Qe(`useMatches`);return b.useMemo(()=>e.map(e=>L(e,t)),[e,t])}function it(){let e=b.useContext(je),t=Qe(`useRouteError`),n=et(`useRouteError`);return e===void 0?t.errors?.[n]:e}function at(){let{router:e}=Ze(`useNavigate`),t=et(`useNavigate`),n=b.useRef(!1);return Ie(()=>{n.current=!0}),b.useCallback(async(r,i={})=>{O(n.current,Fe),n.current&&(typeof r==`number`?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var ot={};function st(e,t,n){!t&&!ot[e]&&(ot[e]=!0,O(!1,n))}b.memo(ct);function ct({routes:e,future:t,state:n,unstable_onError:r}){return We(e,void 0,n,r,t)}function lt({to:e,replace:t,state:n,relative:r}){D(Ne(),`<Navigate> may be used only in the context of a <Router> component.`);let{static:i}=b.useContext(Oe);O(!i,`<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.`);let{matches:a}=b.useContext(Ae),{pathname:o}=Pe(),s=Le(),c=_e(e,ge(a),o,r===`path`),l=JSON.stringify(c);return b.useEffect(()=>{s(JSON.parse(l),{replace:t,state:n,relative:r})},[s,l,r,t,n]),null}function ut(e){return Be(e.context)}function dt(e){D(!1,`A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.`)}function ft({basename:e=`/`,children:t=null,location:n,navigationType:r=`POP`,navigator:i,static:a=!1}){D(!Ne(),`You cannot render a <Router> inside another <Router>. You should never have more than one in your app.`);let o=e.replace(/^\/*/,`/`),s=b.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n==`string`&&(n=N(n));let{pathname:c=`/`,search:l=``,hash:u=``,state:d=null,key:f=`default`}=n,p=b.useMemo(()=>{let e=de(c,o);return e==null?null:{location:{pathname:e,search:l,hash:u,state:d,key:f},navigationType:r}},[o,c,l,u,d,f,r]);return O(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:b.createElement(Oe.Provider,{value:s},b.createElement(ke.Provider,{children:t,value:p}))}function pt({children:e,location:t}){return Ue(mt(e),t)}function mt(e,t=[]){let n=[];return b.Children.forEach(e,(e,r)=>{if(!b.isValidElement(e))return;let i=[...t,r];if(e.type===b.Fragment){n.push.apply(n,mt(e.props.children,i));return}D(e.type===dt,`[${typeof e.type==`string`?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),D(!e.props.index||!e.props.children,`An index route cannot have child routes.`);let a={id:e.props.id||i.join(`-`),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:e.props.hasErrorBoundary===!0||e.props.ErrorBoundary!=null||e.props.errorElement!=null,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=mt(e.props.children,i)),n.push(a)}),n}var ht=`get`,gt=`application/x-www-form-urlencoded`;function _t(e){return e!=null&&typeof e.tagName==`string`}function vt(e){return _t(e)&&e.tagName.toLowerCase()===`button`}function yt(e){return _t(e)&&e.tagName.toLowerCase()===`form`}function bt(e){return _t(e)&&e.tagName.toLowerCase()===`input`}function xt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function St(e,t){return e.button===0&&(!t||t===`_self`)&&!xt(e)}function Ct(e=``){return new URLSearchParams(typeof e==`string`||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}function wt(e,t){let n=Ct(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}var Tt=null;function Et(){if(Tt===null)try{new FormData(document.createElement(`form`),0),Tt=!1}catch{Tt=!0}return Tt}var Dt=new Set([`application/x-www-form-urlencoded`,`multipart/form-data`,`text/plain`]);function Ot(e){return e!=null&&!Dt.has(e)?(O(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gt}"`),null):e}function kt(e,t){let n,r,i,a,o;if(yt(e)){let o=e.getAttribute(`action`);r=o?de(o,t):null,n=e.getAttribute(`method`)||ht,i=Ot(e.getAttribute(`enctype`))||gt,a=new FormData(e)}else if(vt(e)||bt(e)&&(e.type===`submit`||e.type===`image`)){let o=e.form;if(o==null)throw Error(`Cannot submit a <button> or <input type="submit"> without a <form>`);let s=e.getAttribute(`formaction`)||o.getAttribute(`action`);if(r=s?de(s,t):null,n=e.getAttribute(`formmethod`)||o.getAttribute(`method`)||ht,i=Ot(e.getAttribute(`formenctype`))||Ot(o.getAttribute(`enctype`))||gt,a=new FormData(o,e),!Et()){let{name:t,type:n,value:r}=e;if(n===`image`){let e=t?`${t}.`:``;a.append(`${e}x`,`0`),a.append(`${e}y`,`0`)}else t&&a.append(t,r)}}else if(_t(e))throw Error(`Cannot submit element that is not <form>, <button>, or <input type="submit|image">`);else n=ht,r=null,i=gt,o=e;return a&&i===`text/plain`&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);function At(e,t){if(e===!1||e==null)throw Error(t)}function jt(e,t,n){let r=typeof e==`string`?new URL(e,typeof window>`u`?`server://singlefetch/`:window.location.origin):e;return r.pathname===`/`?r.pathname=`_root.${n}`:t&&de(r.pathname,t)===`/`?r.pathname=`${t.replace(/\/$/,``)}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,``)}.${n}`,r}async function Mt(e,t){if(e.id in t)return t[e.id];try{let n=await w(()=>import(e.module),[]);return t[e.id]=n,n}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Nt(e){return e!=null&&typeof e.page==`string`}function Pt(e){return e==null?!1:e.href==null?e.rel===`preload`&&typeof e.imageSrcSet==`string`&&typeof e.imageSizes==`string`:typeof e.rel==`string`&&typeof e.href==`string`}async function Ft(e,t,n){let r=await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Mt(r,n);return e.links?e.links():[]}return[]}));return Bt(r.flat(1).filter(Pt).filter(e=>e.rel===`stylesheet`||e.rel===`preload`).map(e=>e.rel===`stylesheet`?{...e,rel:`prefetch`,as:`style`}:{...e,rel:`prefetch`}))}function It(e,t,n,r,i,a){let o=(e,t)=>n[t]?e.route.id!==n[t].route.id:!0,s=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith(`*`)&&n[t].params[`*`]!==e.params[`*`];return a===`assets`?t.filter((e,t)=>o(e,t)||s(e,t)):a===`data`?t.filter((t,a)=>{let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,a)||s(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if(typeof r==`boolean`)return r}return!0}):[]}function Lt(e,t,{includeHydrateFallback:n}={}){return Rt(e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Rt(e){return[...new Set(e)]}function zt(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Bt(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Nt(i)&&i.as===`script`&&i.href&&r.has(i.href))return e;let a=JSON.stringify(zt(i));return n.has(a)||(n.add(a),e.push({key:a,link:i})),e},[])}function Vt(){let e=b.useContext(Ce);return At(e,`You must render this element inside a <DataRouterContext.Provider> element`),e}function Ht(){let e=b.useContext(we);return At(e,`You must render this element inside a <DataRouterStateContext.Provider> element`),e}var Ut=b.createContext(void 0);Ut.displayName=`FrameworkContext`;function Wt(){let e=b.useContext(Ut);return At(e,`You must render this element inside a <HydratedRouter> element`),e}function Gt(e,t){let n=b.useContext(Ut),[r,i]=b.useState(!1),[a,o]=b.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=b.useRef(null);b.useEffect(()=>{if(e===`render`&&o(!0),e===`viewport`){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),b.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return n?e===`intent`?[a,f,{onFocus:Kt(s,p),onBlur:Kt(c,m),onMouseEnter:Kt(l,p),onMouseLeave:Kt(u,m),onTouchStart:Kt(d,p)}]:[a,f,{}]:[!1,f,{}]}function Kt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function qt({page:e,...t}){let{router:n}=Vt(),r=b.useMemo(()=>F(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?b.createElement(Yt,{page:e,matches:r,...t}):null}function Jt(e){let{manifest:t,routeModules:n}=Wt(),[r,i]=b.useState([]);return b.useEffect(()=>{let r=!1;return Ft(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}function Yt({page:e,matches:t,...n}){let r=Pe(),{manifest:i,routeModules:a}=Wt(),{basename:o}=Vt(),{loaderData:s,matches:c}=Ht(),l=b.useMemo(()=>It(e,t,c,i,r,`data`),[e,t,c,i,r]),u=b.useMemo(()=>It(e,t,c,i,r,`assets`),[e,t,c,i,r]),d=b.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,c=!1;if(t.forEach(e=>{let t=i.routes[e.route.id];!t||!t.hasLoader||(!l.some(t=>t.route.id===e.route.id)&&e.route.id in s&&a[e.route.id]?.shouldRevalidate||t.hasClientLoader?c=!0:n.add(e.route.id))}),n.size===0)return[];let u=jt(e,o,`data`);return c&&n.size>0&&u.searchParams.set(`_routes`,t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(`,`)),[u.pathname+u.search]},[o,s,r,i,l,t,e,a]),f=b.useMemo(()=>Lt(u,i),[u,i]),p=Jt(u);return b.createElement(b.Fragment,null,d.map(e=>b.createElement(`link`,{key:e,rel:`prefetch`,as:`fetch`,href:e,...n})),f.map(e=>b.createElement(`link`,{key:e,rel:`modulepreload`,href:e,...n})),p.map(({key:e,link:t})=>b.createElement(`link`,{key:e,nonce:n.nonce,...t})))}function Xt(...e){return t=>{e.forEach(e=>{typeof e==`function`?e(t):e!=null&&(e.current=t)})}}var Zt=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;try{Zt&&(window.__reactRouterVersion=`7.9.3`)}catch{}function Qt({basename:e,children:t,window:n}){let r=b.useRef();r.current??=E({window:n,v5Compat:!0});let i=r.current,[a,o]=b.useState({action:i.action,location:i.location}),s=b.useCallback(e=>{b.startTransition(()=>o(e))},[o]);return b.useLayoutEffect(()=>i.listen(s),[i,s]),b.createElement(ft,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}function $t({basename:e,children:t,history:n}){let[r,i]=b.useState({action:n.action,location:n.location}),a=b.useCallback(e=>{b.startTransition(()=>i(e))},[i]);return b.useLayoutEffect(()=>n.listen(a),[n,a]),b.createElement(ft,{basename:e,children:t,location:r.location,navigationType:r.action,navigator:n})}$t.displayName=`unstable_HistoryRouter`;var en=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tn=b.forwardRef(function({onClick:e,discover:t=`render`,prefetch:n=`none`,relative:r,reloadDocument:i,replace:a,state:o,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},f){let{basename:p}=b.useContext(Oe),m=typeof c==`string`&&en.test(c),h,g=!1;if(typeof c==`string`&&m&&(h=c,Zt))try{let e=new URL(window.location.href),t=c.startsWith(`//`)?new URL(e.protocol+c):new URL(c),n=de(t.pathname,p);t.origin===e.origin&&n!=null?c=n+t.search+t.hash:g=!0}catch{O(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=Me(c,{relative:r}),[v,y,x]=Gt(n,d),S=ln(c,{replace:a,state:o,target:s,preventScrollReset:l,relative:r,viewTransition:u});function C(t){e&&e(t),t.defaultPrevented||S(t)}let w=b.createElement(`a`,{...d,...x,href:h||_,onClick:g||i?e:C,ref:Xt(f,y),target:s,"data-discover":!m&&t===`render`?`true`:void 0});return v&&!m?b.createElement(b.Fragment,null,w,b.createElement(qt,{page:_})):w});tn.displayName=`Link`;var nn=b.forwardRef(function({"aria-current":e=`page`,caseSensitive:t=!1,className:n=``,end:r=!1,style:i,to:a,viewTransition:o,children:s,...c},l){let u=He(a,{relative:c.relative}),d=Pe(),f=b.useContext(we),{navigator:p,basename:m}=b.useContext(Oe),h=f!=null&&bn(u)&&o===!0,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,_=d.pathname,v=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(_=_.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&m&&(v=de(v,m)||v);let y=g!==`/`&&g.endsWith(`/`)?g.length-1:g.length,x=_===g||!r&&_.startsWith(g)&&_.charAt(y)===`/`,S=v!=null&&(v===g||!r&&v.startsWith(g)&&v.charAt(g.length)===`/`),C={isActive:x,isPending:S,isTransitioning:h},w=x?e:void 0,T;T=typeof n==`function`?n(C):[n,x?`active`:null,S?`pending`:null,h?`transitioning`:null].filter(Boolean).join(` `);let E=typeof i==`function`?i(C):i;return b.createElement(tn,{...c,"aria-current":w,className:T,ref:l,style:E,to:a,viewTransition:o},typeof s==`function`?s(C):s)});nn.displayName=`NavLink`;var rn=b.forwardRef(({discover:e=`render`,fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=ht,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},p)=>{let m=pn(),h=mn(s,{relative:l}),g=o.toLowerCase()===`get`?`get`:`post`,_=typeof s==`string`&&en.test(s);return b.createElement(`form`,{ref:p,method:g,action:h,onSubmit:r?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,s=r?.getAttribute(`formmethod`)||o;m(r||e.currentTarget,{fetcherKey:t,method:s,navigate:n,replace:i,state:a,relative:l,preventScrollReset:u,viewTransition:d})},...f,"data-discover":!_&&e===`render`?`true`:void 0})});rn.displayName=`Form`;function an({getKey:e,storageKey:t,...n}){let r=b.useContext(Ut),{basename:i}=b.useContext(Oe),a=Pe(),o=rt();vn({getKey:e,storageKey:t});let s=b.useMemo(()=>{if(!r||!e)return null;let t=_n(a,o,i,e);return t===a.key?null:t},[]);if(!r||r.isSpaMode)return null;let c=((e,t)=>{if(!window.history.state||!window.history.state.key){let e=Math.random().toString(32).slice(2);window.history.replaceState({key:e},``)}try{let n=JSON.parse(sessionStorage.getItem(e)||`{}`)[t||window.history.state.key];typeof n==`number`&&window.scrollTo(0,n)}catch(t){console.error(t),sessionStorage.removeItem(e)}}).toString();return b.createElement(`script`,{...n,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${c})(${JSON.stringify(t||hn)}, ${JSON.stringify(s)})`}})}an.displayName=`ScrollRestoration`;function on(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sn(e){let t=b.useContext(Ce);return D(t,on(e)),t}function cn(e){let t=b.useContext(we);return D(t,on(e)),t}function ln(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=Le(),c=Pe(),l=He(e,{relative:a});return b.useCallback(u=>{if(St(u,t)){u.preventDefault();let t=n===void 0?M(c)===M(l):n;s(e,{replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[c,s,l,n,r,t,e,i,a,o])}function un(e){O(typeof URLSearchParams<`u`,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=b.useRef(Ct(e)),n=b.useRef(!1),r=Pe(),i=b.useMemo(()=>wt(r.search,n.current?null:t.current),[r.search]),a=Le(),o=b.useCallback((e,t)=>{let r=Ct(typeof e==`function`?e(new URLSearchParams(i)):e);n.current=!0,a(`?`+r,t)},[a,i]);return[i,o]}var dn=0,fn=()=>`__${String(++dn)}__`;function pn(){let{router:e}=sn(`useSubmit`),{basename:t}=b.useContext(Oe),n=tt();return b.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:c,body:l}=kt(r,t);if(i.navigate===!1){let t=i.fetcherKey||fn();await e.fetch(t,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function mn(e,{relative:t}={}){let{basename:n}=b.useContext(Oe),r=b.useContext(Ae);D(r,`useFormAction must be used inside a RouteContext`);let[i]=r.matches.slice(-1),a={...He(e||`.`,{relative:t})},o=Pe();if(e==null){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll(`index`);if(t.some(e=>e===``)){e.delete(`index`),t.filter(e=>e).forEach(t=>e.append(`index`,t));let n=e.toString();a.search=n?`?${n}`:``}}return(!e||e===`.`)&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,`?index&`):`?index`),n!==`/`&&(a.pathname=a.pathname===`/`?n:ve([n,a.pathname])),M(a)}var hn=`react-router-scroll-positions`,gn={};function _n(e,t,n,r){let i=null;return r&&(i=r(n===`/`?e:{...e,pathname:de(e.pathname,n)||e.pathname},t)),i??=e.key,i}function vn({getKey:e,storageKey:t}={}){let{router:n}=sn(`useScrollRestoration`),{restoreScrollPosition:r,preventScrollReset:i}=cn(`useScrollRestoration`),{basename:a}=b.useContext(Oe),o=Pe(),s=rt(),c=nt();b.useEffect(()=>(window.history.scrollRestoration=`manual`,()=>{window.history.scrollRestoration=`auto`}),[]),yn(b.useCallback(()=>{if(c.state===`idle`){let t=_n(o,s,a,e);gn[t]=window.scrollY}try{sessionStorage.setItem(t||hn,JSON.stringify(gn))}catch(e){O(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${e}).`)}window.history.scrollRestoration=`auto`},[c.state,e,a,o,s,t])),typeof document<`u`&&(b.useLayoutEffect(()=>{try{let e=sessionStorage.getItem(t||hn);e&&(gn=JSON.parse(e))}catch{}},[t]),b.useLayoutEffect(()=>{let t=n?.enableScrollRestoration(gn,()=>window.scrollY,e?(t,n)=>_n(t,n,a,e):void 0);return()=>t&&t()},[n,a,e]),b.useLayoutEffect(()=>{if(r!==!1){if(typeof r==`number`){window.scrollTo(0,r);return}try{if(o.hash){let e=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(e){e.scrollIntoView();return}}}catch{O(!1,`"${o.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}i!==!0&&window.scrollTo(0,0)}},[o,r,i]))}function yn(e,t){let{capture:n}=t||{};b.useEffect(()=>{let t=n==null?void 0:{capture:n};return window.addEventListener(`pagehide`,e,t),()=>{window.removeEventListener(`pagehide`,e,t)}},[e,n])}function bn(e,{relative:t}={}){let n=b.useContext(Te);D(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=sn(`useViewTransitionState`),i=He(e,{relative:t});if(!n.isTransitioning)return!1;let a=de(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=de(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ce(i.pathname,o)!=null||ce(i.pathname,a)!=null}var xn=u(s(((exports,t)=>{var n=(function(){var e=String.fromCharCode,t=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`,n=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$`,r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var a={compressToBase64:function(e){if(e==null)return``;var n=a._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+`===`;case 2:return n+`==`;case 3:return n+`=`}},decompressFromBase64:function(e){return e==null?``:e==``?null:a._decompress(e.length,32,function(n){return i(t,e.charAt(n))})},compressToUTF16:function(t){return t==null?``:a._compress(t,15,function(t){return e(t+32)})+` `},decompressFromUTF16:function(e){return e==null?``:e==``?null:a._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=a.compress(e),n=new Uint8Array(t.length*2),r=0,i=t.length;r<i;r++){var o=t.charCodeAt(r);n[r*2]=o>>>8,n[r*2+1]=o%256}return n},decompressFromUint8Array:function(t){if(t==null)return a.decompress(t);for(var n=Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=t[r*2]*256+t[r*2+1];var o=[];return n.forEach(function(t){o.push(e(t))}),a.decompress(o.join(``))},compressToEncodedURIComponent:function(e){return e==null?``:a._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return e==null?``:e==``?null:(e=e.replace(/ /g,`+`),a._decompress(e.length,32,function(t){return i(n,e.charAt(t))}))},compress:function(t){return a._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(e==null)return``;var r,i,a={},o={},s=``,c=``,l=``,u=2,d=3,f=2,p=[],m=0,h=0,g;for(g=0;g<e.length;g+=1)if(s=e.charAt(g),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=d++,o[s]=!0),c=l+s,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(o,l)){if(l.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,h==t-1?(h=0,p.push(n(m)),m=0):h++;for(i=l.charCodeAt(0),r=0;r<8;r++)m=m<<1|i&1,h==t-1?(h=0,p.push(n(m)),m=0):h++,i>>=1}else{for(i=1,r=0;r<f;r++)m=m<<1|i,h==t-1?(h=0,p.push(n(m)),m=0):h++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)m=m<<1|i&1,h==t-1?(h=0,p.push(n(m)),m=0):h++,i>>=1}u--,u==0&&(u=2**f,f++),delete o[l]}else for(i=a[l],r=0;r<f;r++)m=m<<1|i&1,h==t-1?(h=0,p.push(n(m)),m=0):h++,i>>=1;u--,u==0&&(u=2**f,f++),a[c]=d++,l=String(s)}if(l!==``){if(Object.prototype.hasOwnProperty.call(o,l)){if(l.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,h==t-1?(h=0,p.push(n(m)),m=0):h++;for(i=l.charCodeAt(0),r=0;r<8;r++)m=m<<1|i&1,h==t-1?(h=0,p.push(n(m)),m=0):h++,i>>=1}else{for(i=1,r=0;r<f;r++)m=m<<1|i,h==t-1?(h=0,p.push(n(m)),m=0):h++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)m=m<<1|i&1,h==t-1?(h=0,p.push(n(m)),m=0):h++,i>>=1}u--,u==0&&(u=2**f,f++),delete o[l]}else for(i=a[l],r=0;r<f;r++)m=m<<1|i&1,h==t-1?(h=0,p.push(n(m)),m=0):h++,i>>=1;u--,u==0&&(u=2**f,f++)}for(i=2,r=0;r<f;r++)m=m<<1|i&1,h==t-1?(h=0,p.push(n(m)),m=0):h++,i>>=1;for(;;)if(m<<=1,h==t-1){p.push(n(m));break}else h++;return p.join(``)},decompress:function(e){return e==null?``:e==``?null:a._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var i=[],a=4,o=4,s=3,c=``,l=[],u,d,f,p,m,h,g,_={val:r(0),position:n,index:1};for(u=0;u<3;u+=1)i[u]=u;for(f=0,m=2**2,h=1;h!=m;)p=_.val&_.position,_.position>>=1,_.position==0&&(_.position=n,_.val=r(_.index++)),f|=(p>0?1:0)*h,h<<=1;switch(f){case 0:for(f=0,m=2**8,h=1;h!=m;)p=_.val&_.position,_.position>>=1,_.position==0&&(_.position=n,_.val=r(_.index++)),f|=(p>0?1:0)*h,h<<=1;g=e(f);break;case 1:for(f=0,m=2**16,h=1;h!=m;)p=_.val&_.position,_.position>>=1,_.position==0&&(_.position=n,_.val=r(_.index++)),f|=(p>0?1:0)*h,h<<=1;g=e(f);break;case 2:return``}for(i[3]=g,d=g,l.push(g);;){if(_.index>t)return``;for(f=0,m=2**s,h=1;h!=m;)p=_.val&_.position,_.position>>=1,_.position==0&&(_.position=n,_.val=r(_.index++)),f|=(p>0?1:0)*h,h<<=1;switch(g=f){case 0:for(f=0,m=2**8,h=1;h!=m;)p=_.val&_.position,_.position>>=1,_.position==0&&(_.position=n,_.val=r(_.index++)),f|=(p>0?1:0)*h,h<<=1;i[o++]=e(f),g=o-1,a--;break;case 1:for(f=0,m=2**16,h=1;h!=m;)p=_.val&_.position,_.position>>=1,_.position==0&&(_.position=n,_.val=r(_.index++)),f|=(p>0?1:0)*h,h<<=1;i[o++]=e(f),g=o-1,a--;break;case 2:return l.join(``)}if(a==0&&(a=2**s,s++),i[g])c=i[g];else if(g===o)c=d+d.charAt(0);else return null;l.push(c),i[o++]=d+c.charAt(0),a--,d=c,a==0&&(a=2**s,s++)}}};return a})();typeof define==`function`&&define.amd?define(function(){return n}):t!==void 0&&t!=null?t.exports=n:typeof angular<`u`&&angular!=null&&angular.module(`LZString`,[]).factory(`LZString`,function(){return n})}))()),Sn=`__cmp__:`,Cn=3e4,wn=(()=>{if(typeof window>`u`)return!1;try{let e=`__storage_test__`;return window.localStorage.setItem(e,`1`),window.localStorage.removeItem(e),!0}catch{return!1}})(),Tn=e=>typeof e==`string`?e.length*2:0,En=e=>{if(typeof e!=`string`||!e.startsWith(Sn))return e;try{let t=e.slice(8),n=(0,xn.decompressFromUTF16)(t);return typeof n==`string`?n:e}catch(t){return console.warn(` Failed to decompress storage value:`,t),e}},Dn=e=>{let t={storageString:``,bytes:0,compressed:!1},n;try{n=JSON.stringify(e??null)}catch{return t}if(typeof n!=`string`)return t;let r=n,i=!1;if(n.length>=Cn)try{let e=(0,xn.compressToUTF16)(n);if(e&&e.length>0){let t=`${Sn}${e}`;t.length<n.length&&(r=t,i=!0)}}catch{}return t.storageString=r,t.bytes=Tn(r),t.compressed=i,t},On=e=>{if(!wn)return{ok:!1};try{return e(window.localStorage)}catch(e){return console.warn(` LocalStorage op failed`,e),{ok:!1,error:e}}},W={getItem(e,t=null){let n=On(t=>({ok:!0,value:t.getItem(e)}));if(!n?.ok)return t;let r=n.value;return r==null?t:En(r)??t},setItem(e,t){return!!On(n=>(n.setItem(e,t),{ok:!0}))?.ok},removeItem(e){return!!On(t=>(t.removeItem(e),{ok:!0}))?.ok},getJSON(e,t=null){let n=On(t=>({ok:!0,value:t.getItem(e)}));if(!n?.ok)return t;let r=n.value;if(r==null)return t;let i=En(r);if(typeof i!=`string`)return t;try{return JSON.parse(i)}catch{return t}},setJSON(e,t){let n=Dn(t);if(!n.storageString)return!1;try{return this.setItem(e,n.storageString)}catch(e){throw e}},isAvailable(){return wn},estimateJSONBytes(e){return Dn(e).bytes}},kn=()=>{try{let e=localStorage.getItem(`fremio_user`);if(e){let t=JSON.parse(e);return t?.email||t?.id||`guest`}}catch(e){console.error(`Failed to get current user:`,e)}return`guest`},An=e=>`${kn()}:${e}`,jn={getItem:e=>W.getItem(An(e)),setItem:(e,t)=>W.setItem(An(e),t),removeItem:e=>W.removeItem(An(e)),getJSON:(e,t)=>W.getJSON(An(e),t),setJSON:(e,t)=>W.setJSON(An(e),t),clearUserData:()=>{let e=kn(),t=[];for(let n=0;n<localStorage.length;n++){let r=localStorage.key(n);r&&r.startsWith(`${e}:`)&&t.push(r)}t.forEach(e=>{try{localStorage.removeItem(e)}catch(t){console.error(`Failed to remove ${e}:`,t)}}),console.log(` Cleared ${t.length} items for user ${e}`)}},Mn=s((exports=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}exports.Fragment=n,exports.jsx=r,exports.jsxs=r})),G=u(s(((exports,t)=>{t.exports=Mn()}))()),Nn=(0,b.createContext)(),Pn=`https://api.fremio.id/api`;function Fn({children:e}){let[t,n]=(0,b.useState)(null),[r,i]=(0,b.useState)(!0),[a,o]=(0,b.useState)(null);(0,b.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(`fremio_token`),t=localStorage.getItem(`fremio_user`);if(e&&t){let r=JSON.parse(t);o(e),n(r),console.log(` Restored user session:`,r.email);try{let t=await fetch(`${Pn}/auth/me`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=await t.json(),i={...r,id:e.id,displayName:e.displayName||r.displayName,role:e.role||r.role,photoUrl:e.photoUrl||r.photoUrl};n(i),localStorage.setItem(`fremio_user`,JSON.stringify(i)),console.log(` Token verified, user data refreshed`)}else console.warn(` Token expired or invalid, clearing session`),s()}catch{console.warn(` Could not verify token, using cached data`)}}}catch(e){console.error(`Error loading stored auth:`,e),s()}finally{i(!1)}})()},[]);let s=()=>{n(null),o(null),localStorage.removeItem(`fremio_token`),localStorage.removeItem(`fremio_user`)},c=(e,t)=>{n(e),o(t),localStorage.setItem(`fremio_token`,t),localStorage.setItem(`fremio_user`,JSON.stringify(e))};async function l(e){try{let{email:t,password:n,firstName:r,lastName:i,displayName:a}=e,o=await fetch(`${Pn}/auth/register`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email:t,password:n,firstName:r,lastName:i,displayName:a||`${r||``} ${i||``}`.trim()||t.split(`@`)[0]})}),s=await o.json();if(!o.ok)return{success:!1,message:s.error||s.message||s.errors?.[0]?.msg||`Registration failed`};if(console.log(` User registered successfully:`,s.user.email),s.token&&s.user){let e={id:s.user.id,uid:s.user.id,email:s.user.email,displayName:s.user.displayName,role:s.user.role};c(e,s.token),console.log(` Auto-login successful after registration`)}return{success:!0,message:s.message||`Registrasi berhasil!`,user:s.user}}catch(e){return console.error(` Registration error:`,e),{success:!1,message:e.message||`Network error. Please check your connection.`}}}async function u(e,t){try{let n=await fetch(`${Pn}/auth/login`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email:e,password:t})}),r=await n.json();if(!n.ok)return{success:!1,message:r.error||`Email atau password salah`};let i={id:r.user.id,uid:r.user.id,email:r.user.email,displayName:r.user.displayName,role:r.user.role,photoUrl:r.user.photoUrl};return c(i,r.token),console.log(` User logged in:`,i.email),{success:!0,message:r.message||`Login berhasil`,user:i}}catch(e){return console.error(` Login error:`,e),{success:!1,message:`Network error. Periksa koneksi internet Anda.`}}}function d(e,t=null){t?c(e,t):(n(e),localStorage.setItem(`fremio_user`,JSON.stringify(e)))}async function f(){try{s(),jn.clearUserData(),console.log(` User logged out successfully`)}catch(e){throw console.error(` Logout error:`,e),e}}async function p(e){try{if(!a){let r={...t,...e};return n(r),localStorage.setItem(`fremio_user`,JSON.stringify(r)),{success:!0}}let r=await fetch(`${Pn}/auth/profile`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${a}`},body:JSON.stringify(e)});if(await r.json(),!r.ok){let r={...t,...e};return n(r),localStorage.setItem(`fremio_user`,JSON.stringify(r)),console.warn(` API update failed, updated locally`),{success:!0,message:`Profile updated locally`}}let i={...t,...e};return n(i),localStorage.setItem(`fremio_user`,JSON.stringify(i)),console.log(` Profile updated successfully`),{success:!0,message:`Profile berhasil diupdate`}}catch(r){console.error(` Update profile error:`,r);let i={...t,...e};return n(i),localStorage.setItem(`fremio_user`,JSON.stringify(i)),{success:!0,message:`Profile updated locally`}}}async function m(e,t){try{if(!a)return{success:!1,message:`Anda belum login`};let n=await fetch(`${Pn}/auth/password`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${a}`},body:JSON.stringify({currentPassword:e,newPassword:t})}),r=await n.json();return n.ok?(console.log(` Password changed successfully`),{success:!0,message:`Password berhasil diubah`}):{success:!1,message:r.error||`Gagal mengubah password`}}catch(e){return console.error(` Change password error:`,e),{success:!1,message:`Network error`}}}async function h(e){try{let t=await fetch(`${Pn}/auth/reset-password`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email:e})}),n=await t.json();return t.ok?(console.log(` Password reset email sent`),{success:!0,message:`Instruksi reset password telah dikirim ke email Anda`}):{success:!1,message:n.error||`Gagal mengirim email reset`}}catch(e){return console.error(` Reset password error:`,e),{success:!1,message:`Fitur reset password belum tersedia. Silakan hubungi admin.`}}}function g(){return a?{Authorization:`Bearer ${a}`}:{}}let _=!!t,v=t?.role===`admin`;return(0,G.jsx)(Nn.Provider,{value:{user:t,token:a,login:d,logout:f,register:l,authenticateUser:u,updateUser:p,changePassword:m,resetPassword:h,getAuthHeaders:g,isAuthenticated:_,isAdmin:v,loading:r},children:e})}function In(){let e=(0,b.useContext)(Nn);if(!e)throw Error(`useAuth must be used within AuthProvider`);return e}var Ln=(0,b.createContext)({});function Rn(e){let t=(0,b.useRef)(null);return t.current===null&&(t.current=e()),t.current}var zn=typeof window<`u`,Bn=zn?b.useLayoutEffect:b.useEffect,Vn=(0,b.createContext)(null);function Hn(e,t){e.indexOf(t)===-1&&e.push(t)}function Un(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var Wn=(e,t,n)=>n>t?t:n<e?e:n,Gn={},Kn=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function qn(e){return typeof e==`object`&&!!e}var Jn=e=>/^0[^.\s]+$/u.test(e);function Yn(e){let t;return()=>(t===void 0&&(t=e()),t)}var Xn=e=>e,Zn=(e,t)=>n=>t(e(n)),Qn=(...e)=>e.reduce(Zn),$n=(e,t,n)=>{let r=t-e;return r===0?1:(n-e)/r},er=class{constructor(){this.subscriptions=[]}add(e){return Hn(this.subscriptions,e),()=>Un(this.subscriptions,e)}notify(e,t,n){let r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){let r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}},tr=e=>e*1e3,nr=e=>e/1e3;function rr(e,t){return t?e*(1e3/t):0}var ir=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,ar=1e-7,or=12;function sr(e,t,n,r,i){let a,o,s=0;do o=t+(n-t)/2,a=ir(o,r,i)-e,a>0?n=o:t=o;while(Math.abs(a)>ar&&++s<or);return o}function cr(e,t,n,r){if(e===t&&n===r)return Xn;let i=t=>sr(t,0,1,e,n);return e=>e===0||e===1?e:ir(i(e),t,r)}var lr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ur=e=>t=>1-e(1-t),dr=cr(.33,1.53,.69,.99),fr=ur(dr),pr=lr(fr),mr=e=>(e*=2)<1?.5*fr(e):.5*(2-2**(-10*(e-1))),hr=e=>1-Math.sin(Math.acos(e)),gr=ur(hr),_r=lr(hr),vr=cr(.42,0,1,1),yr=cr(0,0,.58,1),br=cr(.42,0,.58,1),xr=e=>Array.isArray(e)&&typeof e[0]!=`number`,Sr=e=>Array.isArray(e)&&typeof e[0]==`number`,Cr={linear:Xn,easeIn:vr,easeInOut:br,easeOut:yr,circIn:hr,circInOut:_r,circOut:gr,backIn:fr,backInOut:pr,backOut:dr,anticipate:mr},wr=e=>typeof e==`string`,Tr=e=>{if(Sr(e)){e.length;let[t,n,r,i]=e;return cr(t,n,r,i)}else if(wr(e))return Cr[e],`${e}`,Cr[e];return e},Er=[`setup`,`read`,`resolveKeyframes`,`preUpdate`,`update`,`preRender`,`render`,`postRender`],Dr={value:null,addProjectionMetrics:null};function Or(e,t){let n=new Set,r=new Set,i=!1,a=!1,o=new WeakSet,s={delta:0,timestamp:0,isProcessing:!1},c=0;function l(t){o.has(t)&&(u.schedule(t),e()),c++,t(s)}let u={schedule:(e,t=!1,a=!1)=>{let s=a&&i?n:r;return t&&o.add(e),s.has(e)||s.add(e),e},cancel:e=>{r.delete(e),o.delete(e)},process:e=>{if(s=e,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),t&&Dr.value&&Dr.value.frameloop[t].push(c),c=0,n.clear(),i=!1,a&&(a=!1,u.process(e))}};return u}var kr=40;function Ar(e,t){let n=!1,r=!0,i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Er.reduce((e,n)=>(e[n]=Or(a,t?n:void 0),e),{}),{setup:s,read:c,resolveKeyframes:l,preUpdate:u,update:d,preRender:f,render:p,postRender:m}=o,h=()=>{let a=Gn.useManualTiming?i.timestamp:performance.now();n=!1,Gn.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(a-i.timestamp,kr),1)),i.timestamp=a,i.isProcessing=!0,s.process(i),c.process(i),l.process(i),u.process(i),d.process(i),f.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(h))},g=()=>{n=!0,r=!0,i.isProcessing||e(h)};return{schedule:Er.reduce((e,t)=>{let r=o[t];return e[t]=(e,t=!1,i=!1)=>(n||g(),r.schedule(e,t,i)),e},{}),cancel:e=>{for(let t=0;t<Er.length;t++)o[Er[t]].cancel(e)},state:i,steps:o}}var{schedule:jr,cancel:Mr,state:Nr,steps:Pr}=Ar(typeof requestAnimationFrame<`u`?requestAnimationFrame:Xn,!0),Fr;function Ir(){Fr=void 0}var Lr={now:()=>(Fr===void 0&&Lr.set(Nr.isProcessing||Gn.useManualTiming?Nr.timestamp:performance.now()),Fr),set:e=>{Fr=e,queueMicrotask(Ir)}},Rr={layout:0,mainThread:0,waapi:0},zr=e=>t=>typeof t==`string`&&t.startsWith(e),Br=zr(`--`),Vr=zr(`var(--`),Hr=e=>Vr(e)?Ur.test(e.split(`/*`)[0].trim()):!1,Ur=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wr={test:e=>typeof e==`number`,parse:parseFloat,transform:e=>e},Gr={...Wr,transform:e=>Wn(0,1,e)},Kr={...Wr,default:1},qr=e=>Math.round(e*1e5)/1e5,Jr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Yr(e){return e==null}var Xr=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zr=(e,t)=>n=>!!(typeof n==`string`&&Xr.test(n)&&n.startsWith(e)||t&&!Yr(n)&&Object.prototype.hasOwnProperty.call(n,t)),Qr=(e,t,n)=>r=>{if(typeof r!=`string`)return r;let[i,a,o,s]=r.match(Jr);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:s===void 0?1:parseFloat(s)}},$r=e=>Wn(0,255,e),ei={...Wr,transform:e=>Math.round($r(e))},ti={test:Zr(`rgb`,`red`),parse:Qr(`red`,`green`,`blue`),transform:({red:e,green:t,blue:n,alpha:r=1})=>`rgba(`+ei.transform(e)+`, `+ei.transform(t)+`, `+ei.transform(n)+`, `+qr(Gr.transform(r))+`)`};function ni(e){let t=``,n=``,r=``,i=``;return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}var ri={test:Zr(`#`),parse:ni,transform:ti.transform},ii=e=>({test:t=>typeof t==`string`&&t.endsWith(e)&&t.split(` `).length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ai=ii(`deg`),oi=ii(`%`),si=ii(`px`),ci=ii(`vh`),li=ii(`vw`),ui=(()=>({...oi,parse:e=>oi.parse(e)/100,transform:e=>oi.transform(e*100)}))(),di={test:Zr(`hsl`,`hue`),parse:Qr(`hue`,`saturation`,`lightness`),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>`hsla(`+Math.round(e)+`, `+oi.transform(qr(t))+`, `+oi.transform(qr(n))+`, `+qr(Gr.transform(r))+`)`},fi={test:e=>ti.test(e)||ri.test(e)||di.test(e),parse:e=>ti.test(e)?ti.parse(e):di.test(e)?di.parse(e):ri.parse(e),transform:e=>typeof e==`string`?e:e.hasOwnProperty(`red`)?ti.transform(e):di.transform(e),getAnimatableNone:e=>{let t=fi.parse(e);return t.alpha=0,fi.transform(t)}},pi=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mi(e){return isNaN(e)&&typeof e==`string`&&(e.match(Jr)?.length||0)+(e.match(pi)?.length||0)>0}var hi=`number`,gi=`color`,_i=`var`,vi=`var(`,yi="${}",bi=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xi(e){let t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[],a=0,o=t.replace(bi,e=>(fi.test(e)?(r.color.push(a),i.push(gi),n.push(fi.parse(e))):e.startsWith(vi)?(r.var.push(a),i.push(_i),n.push(e)):(r.number.push(a),i.push(hi),n.push(parseFloat(e))),++a,yi)).split(yi);return{values:n,split:o,indexes:r,types:i}}function Si(e){return xi(e).values}function Ci(e){let{split:t,types:n}=xi(e),r=t.length;return e=>{let i=``;for(let a=0;a<r;a++)if(i+=t[a],e[a]!==void 0){let t=n[a];t===hi?i+=qr(e[a]):t===gi?i+=fi.transform(e[a]):i+=e[a]}return i}}var wi=e=>typeof e==`number`?0:fi.test(e)?fi.getAnimatableNone(e):e;function Ti(e){let t=Si(e);return Ci(e)(t.map(wi))}var Ei={test:mi,parse:Si,createTransformer:Ci,getAnimatableNone:Ti};function Di(e,t,n){return n<0&&(n+=1),n>1&&--n,n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Oi({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{let r=n<.5?n*(1+t):n+t-n*t,s=2*n-r;i=Di(s,r,e+1/3),a=Di(s,r,e),o=Di(s,r,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function ki(e,t){return n=>n>0?t:e}var Ai=(e,t,n)=>e+(t-e)*n,ji=(e,t,n)=>{let r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},Mi=[ri,ti,di],Ni=e=>Mi.find(t=>t.test(e));function Pi(e){let t=Ni(e);if(`${e}`,!t)return!1;let n=t.parse(e);return t===di&&(n=Oi(n)),n}var Fi=(e,t)=>{let n=Pi(e),r=Pi(t);if(!n||!r)return ki(e,t);let i={...n};return e=>(i.red=ji(n.red,r.red,e),i.green=ji(n.green,r.green,e),i.blue=ji(n.blue,r.blue,e),i.alpha=Ai(n.alpha,r.alpha,e),ti.transform(i))},Ii=new Set([`none`,`hidden`]);function Li(e,t){return Ii.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Ri(e,t){return n=>Ai(e,t,n)}function zi(e){return typeof e==`number`?Ri:typeof e==`string`?Hr(e)?ki:fi.test(e)?Fi:Ui:Array.isArray(e)?Bi:typeof e==`object`?fi.test(e)?Fi:Vi:ki}function Bi(e,t){let n=[...e],r=n.length,i=e.map((e,n)=>zi(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function Vi(e,t){let n={...e,...t},r={};for(let i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=zi(e[i])(e[i],t[i]));return e=>{for(let t in r)n[t]=r[t](e);return n}}function Hi(e,t){let n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){let a=t.types[i],o=e.indexes[a][r[a]];n[i]=e.values[o]??0,r[a]++}return n}var Ui=(e,t)=>{let n=Ei.createTransformer(t),r=xi(e),i=xi(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ii.has(e)&&!i.values.length||Ii.has(t)&&!r.values.length?Li(e,t):Qn(Bi(Hi(r,i),i.values),n):(`${e}${t}`,ki(e,t))};function Wi(e,t,n){return typeof e==`number`&&typeof t==`number`&&typeof n==`number`?Ai(e,t,n):zi(e)(e,t)}var Gi=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>jr.update(t,e),stop:()=>Mr(t),now:()=>Nr.isProcessing?Nr.timestamp:Lr.now()}},Ki=(e,t,n=10)=>{let r=``,i=Math.max(Math.round(t/n),2);for(let t=0;t<i;t++)r+=Math.round(e(t/(i-1))*1e4)/1e4+`, `;return`linear(${r.substring(0,r.length-2)})`},qi=2e4;function Ji(e){let t=0,n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}function Yi(e,t=100,n){let r=n({...e,keyframes:[0,t]}),i=Math.min(Ji(r),qi);return{type:`keyframes`,ease:e=>r.next(i*e).value/t,duration:nr(i)}}var Xi=5;function Zi(e,t,n){let r=Math.max(t-Xi,0);return rr(n-e(r),t-r)}var Qi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$i=.001;function ea({duration:e=Qi.duration,bounce:t=Qi.bounce,velocity:n=Qi.velocity,mass:r=Qi.mass}){let i,a;Qi.maxDuration;let o=1-t;o=Wn(Qi.minDamping,Qi.maxDamping,o),e=Wn(Qi.minDuration,Qi.maxDuration,nr(e)),o<1?(i=t=>{let r=t*o,i=r*e,a=r-n,s=ra(t,o),c=Math.exp(-i);return $i-a/s*c},a=t=>{let r=t*o*e,a=r*n+n,s=o**2*t**2*e,c=Math.exp(-r),l=ra(t**2,o);return(-i(t)+$i>0?-1:1)*((a-s)*c)/l}):(i=t=>{let r=Math.exp(-t*e),i=(t-n)*e+1;return-$i+r*i},a=t=>{let r=Math.exp(-t*e),i=(n-t)*(e*e);return r*i});let s=5/e,c=na(i,a,s);if(e=tr(e),isNaN(c))return{stiffness:Qi.stiffness,damping:Qi.damping,duration:e};{let t=c**2*r;return{stiffness:t,damping:o*2*Math.sqrt(r*t),duration:e}}}var ta=12;function na(e,t,n){let r=n;for(let n=1;n<ta;n++)r-=e(r)/t(r);return r}function ra(e,t){return e*Math.sqrt(1-t*t)}var ia=[`duration`,`bounce`],aa=[`stiffness`,`damping`,`mass`];function oa(e,t){return t.some(t=>e[t]!==void 0)}function sa(e){let t={velocity:Qi.velocity,stiffness:Qi.stiffness,damping:Qi.damping,mass:Qi.mass,isResolvedFromDuration:!1,...e};if(!oa(e,aa)&&oa(e,ia))if(e.visualDuration){let n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Wn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Qi.mass,stiffness:i,damping:a}}else{let n=ea(e);t={...t,...n,mass:Qi.mass},t.isResolvedFromDuration=!0}return t}function ca(e=Qi.visualDuration,t=Qi.bounce){let n=typeof e==`object`?e:{visualDuration:e,keyframes:[0,1],bounce:t},{restSpeed:r,restDelta:i}=n,a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],s={done:!1,value:a},{stiffness:c,damping:l,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=sa({...n,velocity:-nr(n.velocity||0)}),m=f||0,h=l/(2*Math.sqrt(c*u)),g=o-a,_=nr(Math.sqrt(c/u)),v=Math.abs(g)<5;r||=v?Qi.restSpeed.granular:Qi.restSpeed.default,i||=v?Qi.restDelta.granular:Qi.restDelta.default;let y;if(h<1){let e=ra(_,h);y=t=>{let n=Math.exp(-h*_*t);return o-n*((m+h*_*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(h===1)y=e=>o-Math.exp(-_*e)*(g+(m+_*g)*e);else{let e=_*Math.sqrt(h*h-1);y=t=>{let n=Math.exp(-h*_*t),r=Math.min(e*t,300);return o-n*((m+h*_*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}let b={calculatedDuration:p&&d||null,next:e=>{let t=y(e);if(p)s.done=e>=d;else{let n=e===0?m:0;h<1&&(n=e===0?tr(m):Zi(y,e,t));let a=Math.abs(n)<=r,c=Math.abs(o-t)<=i;s.done=a&&c}return s.value=s.done?o:t,s},toString:()=>{let e=Math.min(Ji(b),qi),t=Ki(t=>b.next(e*t).value,e,30);return e+`ms `+t},toTransition:()=>{}};return b}ca.applyToOptions=e=>{let t=Yi(e,100,ca);return e.ease=t.ease,e.duration=tr(t.duration),e.type=`keyframes`,e};function la({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:c,restDelta:l=.5,restSpeed:u}){let d=e[0],f={done:!1,value:d},p=e=>s!==void 0&&e<s||c!==void 0&&e>c,m=e=>s===void 0?c:c===void 0||Math.abs(s-e)<Math.abs(c-e)?s:c,h=n*t,g=d+h,_=o===void 0?g:o(g);_!==g&&(h=_-d);let v=e=>-h*Math.exp(-e/r),y=e=>_+v(e),b=e=>{let t=v(e),n=y(e);f.done=Math.abs(t)<=l,f.value=f.done?_:n},x,S,C=e=>{p(f.value)&&(x=e,S=ca({keyframes:[f.value,m(f.value)],velocity:Zi(y,e,f.value),damping:i,stiffness:a,restDelta:l,restSpeed:u}))};return C(0),{calculatedDuration:null,next:e=>{let t=!1;return!S&&x===void 0&&(t=!0,b(e),C(e)),x!==void 0&&e>=x?S.next(e-x):(!t&&b(e),f)}}}function ua(e,t,n){let r=[],i=n||Gn.mix||Wi,a=e.length-1;for(let n=0;n<a;n++){let a=i(e[n],e[n+1]);if(t){let e=Array.isArray(t)?t[n]||Xn:t;a=Qn(e,a)}r.push(a)}return r}function da(e,t,{clamp:n=!0,ease:r,mixer:i}={}){let a=e.length;if(t.length,a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];let o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());let s=ua(t,r,i),c=s.length,l=n=>{if(o&&n<e[0])return t[0];let r=0;if(c>1)for(;r<e.length-2&&!(n<e[r+1]);r++);let i=$n(e[r],e[r+1],n);return s[r](i)};return n?t=>l(Wn(e[0],e[a-1],t)):l}function fa(e,t){let n=e[e.length-1];for(let r=1;r<=t;r++){let i=$n(0,t,r);e.push(Ai(n,1,i))}}function pa(e){let t=[0];return fa(t,e.length-1),t}function ma(e,t){return e.map(e=>e*t)}function ha(e,t){return e.map(()=>t||br).splice(0,e.length-1)}function ga({duration:e=300,keyframes:t,times:n,ease:r=`easeInOut`}){let i=xr(r)?r.map(Tr):Tr(r),a={done:!1,value:t[0]},o=ma(n&&n.length===t.length?n:pa(t),e),s=da(o,t,{ease:Array.isArray(i)?i:ha(t,i)});return{calculatedDuration:e,next:t=>(a.value=s(t),a.done=t>=e,a)}}var _a=e=>e!==null;function va(e,{repeat:t,repeatType:n=`loop`},r,i=1){let a=e.filter(_a),o=i<0||t&&n!==`loop`&&t%2==1?0:a.length-1;return!o||r===void 0?a[o]:r}var ya={decay:la,inertia:la,tween:ga,keyframes:ga,spring:ca};function ba(e){typeof e.type==`string`&&(e.type=ya[e.type])}var xa=class{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}},Sa=e=>e/100,Ca=class extends xa{constructor(e){super(),this.state=`idle`,this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==Lr.now()&&this.tick(Lr.now()),this.isStopped=!0,this.state!==`idle`&&(this.teardown(),this.options.onStop?.())},Rr.mainThread++,this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){let{options:e}=this;ba(e);let{type:t=ga,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=e,{keyframes:o}=e,s=t||ga;s!==ga&&typeof o[0]!=`number`&&(this.mixKeyframes=Qn(Sa,Wi(o[0],o[1])),o=[0,100]);let c=s({...e,keyframes:o});i===`mirror`&&(this.mirroredGenerator=s({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=Ji(c));let{calculatedDuration:l}=c;this.calculatedDuration=l,this.resolvedDuration=l+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=c}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime===null?this.currentTime=t:this.currentTime=this.holdTime}tick(e,t=!1){let{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:s}=this;if(this.startTime===null)return n.next(0);let{delay:c=0,keyframes:l,repeat:u,repeatType:d,repeatDelay:f,type:p,onUpdate:m,finalKeyframe:h}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),this.state===`finished`&&this.holdTime===null&&(this.currentTime=r);let v=this.currentTime,y=n;if(u){let e=Math.min(this.currentTime,r)/o,t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),n===1&&t--,t=Math.min(t,u+1),t%2&&(d===`reverse`?(n=1-n,f&&(n-=f/o)):d===`mirror`&&(y=a)),v=Wn(0,1,n)*o}let b=_?{done:!1,value:l[0]}:y.next(v);i&&(b.value=i(b.value));let{done:x}=b;!_&&s!==null&&(x=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);let S=this.holdTime===null&&(this.state===`finished`||this.state===`running`&&x);return S&&p!==la&&(b.value=va(l,this.options,h,this.speed)),m&&m(b.value),S&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return nr(this.calculatedDuration)}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+nr(e)}get time(){return nr(this.currentTime)}set time(e){e=tr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Lr.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=nr(this.currentTime))}play(){if(this.isStopped)return;let{driver:e=Gi,startTime:t}=this.options;this.driver||=e(e=>this.tick(e)),this.options.onPlay?.();let n=this.driver.now();this.state===`finished`?(this.updateFinished(),this.startTime=n):this.holdTime===null?this.startTime||=t??n:this.startTime=n-this.holdTime,this.state===`finished`&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state=`running`,this.driver.start()}pause(){this.state=`paused`,this.updateTime(Lr.now()),this.holdTime=this.currentTime}complete(){this.state!==`running`&&this.play(),this.state=`finished`,this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state=`finished`,this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state=`idle`,this.stopDriver(),this.startTime=this.holdTime=null,Rr.mainThread--}stopDriver(){this.driver&&=(this.driver.stop(),void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type=`keyframes`,this.options.ease=`linear`,this.initAnimation()),this.driver?.stop(),e.observe(this)}};function wa(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}var Ta=e=>e*180/Math.PI,Ea=e=>{let t=Ta(Math.atan2(e[1],e[0]));return Oa(t)},Da={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ea,rotateZ:Ea,skewX:e=>Ta(Math.atan(e[1])),skewY:e=>Ta(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Oa=e=>(e%=360,e<0&&(e+=360),e),ka=Ea,Aa=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ja=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),K={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Aa,scaleY:ja,scale:e=>(Aa(e)+ja(e))/2,rotateX:e=>Oa(Ta(Math.atan2(e[6],e[5]))),rotateY:e=>Oa(Ta(Math.atan2(-e[2],e[0]))),rotateZ:ka,rotate:ka,skewX:e=>Ta(Math.atan(e[4])),skewY:e=>Ta(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Ma(e){return e.includes(`scale`)?1:0}function Na(e,t){if(!e||e===`none`)return Ma(t);let n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u),r,i;if(n)r=K,i=n;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Da,i=t}if(!i)return Ma(t);let a=r[t],o=i[1].split(`,`).map(Fa);return typeof a==`function`?a(o):o[a]}var Pa=(e,t)=>{let{transform:n=`none`}=getComputedStyle(e);return Na(n,t)};function Fa(e){return parseFloat(e.trim())}var Ia=[`transformPerspective`,`x`,`y`,`z`,`translateX`,`translateY`,`translateZ`,`scale`,`scaleX`,`scaleY`,`rotate`,`rotateX`,`rotateY`,`rotateZ`,`skew`,`skewX`,`skewY`],La=(()=>new Set(Ia))(),Ra=e=>e===Wr||e===si,za=new Set([`x`,`y`,`z`]),Ba=Ia.filter(e=>!za.has(e));function Va(e){let t=[];return Ba.forEach(n=>{let r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith(`scale`)?1:0))}),t}var Ha={width:({x:e},{paddingLeft:t=`0`,paddingRight:n=`0`})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t=`0`,paddingBottom:n=`0`})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Na(t,`x`),y:(e,{transform:t})=>Na(t,`y`)};Ha.translateX=Ha.x,Ha.translateY=Ha.y;var Ua=new Set,Wa=!1,Ga=!1,Ka=!1;function qa(){if(Ga){let e=Array.from(Ua).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{let t=Va(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=n.get(e);t&&t.forEach(([t,n])=>{e.getValue(t)?.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{e.suspendedScrollY!==void 0&&window.scrollTo(0,e.suspendedScrollY)})}Ga=!1,Wa=!1,Ua.forEach(e=>e.complete(Ka)),Ua.clear()}function Ja(){Ua.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ga=!0)})}function Ya(){Ka=!0,Ja(),qa(),Ka=!1}var Xa=class{constructor(e,t,n,r,i,a=!1){this.state=`pending`,this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.state=`scheduled`,this.isAsync?(Ua.add(this),Wa||(Wa=!0,jr.read(Ja),jr.resolveKeyframes(qa))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(e[0]===null){let i=r?.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&t){let r=n.readValue(t,a);r!=null&&(e[0]=r)}e[0]===void 0&&(e[0]=a),r&&i===void 0&&r.set(e[0])}wa(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state=`complete`,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ua.delete(this)}cancel(){this.state===`scheduled`&&(Ua.delete(this),this.state=`pending`)}resume(){this.state===`pending`&&this.scheduleResolve()}},Za=e=>e.startsWith(`--`);function Qa(e,t,n){Za(t)?e.style.setProperty(t,n):e.style[t]=n}var $a=Yn(()=>window.ScrollTimeline!==void 0),eo={};function to(e,t){let n=Yn(e);return()=>eo[t]??n()}var no=to(()=>{try{document.createElement(`div`).animate({opacity:0},{easing:`linear(0, 1)`})}catch{return!1}return!0},`linearEasing`),ro=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,io={linear:`linear`,ease:`ease`,easeIn:`ease-in`,easeOut:`ease-out`,easeInOut:`ease-in-out`,circIn:ro([0,.65,.55,1]),circOut:ro([.55,0,1,.45]),backIn:ro([.31,.01,.66,-.59]),backOut:ro([.33,1.53,.69,.99])};function ao(e,t){if(e)return typeof e==`function`?no()?Ki(e,t):`ease-out`:Sr(e)?ro(e):Array.isArray(e)?e.map(e=>ao(e,t)||io.easeOut):io[e]}function oo(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o=`loop`,ease:s=`easeOut`,times:c}={},l=void 0){let u={[t]:n};c&&(u.offset=c);let d=ao(s,i);Array.isArray(d)&&(u.easing=d),Dr.value&&Rr.waapi++;let f={delay:r,duration:i,easing:Array.isArray(d)?`linear`:d,fill:`both`,iterations:a+1,direction:o===`reverse`?`alternate`:`normal`};l&&(f.pseudoElement=l);let p=e.animate(u,f);return Dr.value&&p.finished.finally(()=>{Rr.waapi--}),p}function so(e){return typeof e==`function`&&`applyToOptions`in e}function co({type:e,...t}){return so(e)&&no()?e.applyToOptions(t):(t.duration??=300,t.ease??=`easeOut`,t)}var lo=class extends xa{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;let{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:s}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,e.type;let c=co(e);this.animation=oo(t,n,r,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){let e=va(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(e):Qa(t,n,e),this.animation.cancel()}s?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state===`finished`&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;e===`idle`||e===`finished`||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){let e=this.animation.effect?.getComputedTiming?.().duration||0;return nr(Number(e))}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+nr(e)}get time(){return nr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=tr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime===null?this.animation.playState:`finished`}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:`linear`}),this.animation.onfinish=null,e&&$a()?(this.animation.timeline=e,Xn):t(this)}},uo={anticipate:mr,backInOut:pr,circInOut:_r};function fo(e){return e in uo}function po(e){typeof e.ease==`string`&&fo(e.ease)&&(e.ease=uo[e.ease])}var mo=10,ho=class extends lo{constructor(e){po(e),ba(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:n,onComplete:r,element:i,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}let o=new Ca({...a,autoplay:!1}),s=tr(this.finishedTime??this.time);t.setWithVelocity(o.sample(s-mo).value,o.sample(s).value,mo),o.stop()}},go=(e,t)=>t===`zIndex`?!1:!!(typeof e==`number`||Array.isArray(e)||typeof e==`string`&&(Ei.test(e)||e===`0`)&&!e.startsWith(`url(`));function _o(e){let t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function vo(e,t,n,r){let i=e[0];if(i===null)return!1;if(t===`display`||t===`visibility`)return!0;let a=e[e.length-1],o=go(i,t),s=go(a,t);return`${t}${i}${a}${o?a:i}`,!o||!s?!1:_o(e)||(n===`spring`||so(n))&&r}function yo(e){e.duration=0,e.type=`keyframes`}var bo=new Set([`opacity`,`clipPath`,`filter`,`transform`]),xo=Yn(()=>Object.hasOwnProperty.call(Element.prototype,`animate`));function So(e){let{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:s,transformTemplate:c}=t.owner.getProps();return xo()&&n&&bo.has(n)&&(n!==`transform`||!c)&&!s&&!r&&i!==`mirror`&&a!==0&&o!==`inertia`}var Co=40,wo=class extends xa{constructor({autoplay:e=!0,delay:t=0,type:n=`keyframes`,repeat:r=0,repeatDelay:i=0,repeatType:a=`loop`,keyframes:o,name:s,motionValue:c,element:l,...u}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Lr.now();let d={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:a,name:s,motionValue:c,element:l,...u};this.keyframeResolver=new(l?.KeyframeResolver||Xa)(o,(e,t,n)=>this.onKeyframesResolved(e,t,d,!n),s,c,l),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;let{name:i,type:a,velocity:o,delay:s,isHandoff:c,onUpdate:l}=n;this.resolvedAt=Lr.now(),vo(e,i,a,o)||((Gn.instantAnimations||!s)&&l?.(va(e,n,t)),e[0]=e[e.length-1],yo(n),n.repeat=0);let u={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>Co?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!c&&So(u)?new ho({...u,element:u.motionValue.owner.current}):new Ca(u);d.finished.then(()=>this.notifyFinished()).catch(Xn),this.pendingTimeline&&=(this.stopTimeline=d.attachTimeline(this.pendingTimeline),void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Ya()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}},To=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Eo(e){let t=To.exec(e);if(!t)return[,];let[,n,r,i]=t;return[`--${n??r}`,i]}function Do(e,t,n=1){`${e}`;let[r,i]=Eo(e);if(!r)return;let a=window.getComputedStyle(t).getPropertyValue(r);if(a){let e=a.trim();return Kn(e)?parseFloat(e):e}return Hr(i)?Do(i,t,n+1):i}function Oo(e,t){return e?.[t]??e?.default??e}var ko=new Set([`width`,`height`,`top`,`left`,`right`,`bottom`,...Ia]),Ao={test:e=>e===`auto`,parse:e=>e},jo=e=>t=>t.test(e),Mo=[Wr,si,oi,ai,li,ci,Ao],No=e=>Mo.find(jo(e));function Po(e){return typeof e==`number`?e===0:e===null?!0:e===`none`||e===`0`||Jn(e)}var Fo=new Set([`brightness`,`contrast`,`saturate`,`opacity`]);function Io(e){let[t,n]=e.slice(0,-1).split(`(`);if(t===`drop-shadow`)return e;let[r]=n.match(Jr)||[];if(!r)return e;let i=n.replace(r,``),a=Fo.has(t)?1:0;return r!==n&&(a*=100),t+`(`+a+i+`)`}var Lo=/\b([a-z-]*)\(.*?\)/gu,Ro={...Ei,getAnimatableNone:e=>{let t=e.match(Lo);return t?t.map(Io).join(` `):e}},zo={...Wr,transform:Math.round},Bo={borderWidth:si,borderTopWidth:si,borderRightWidth:si,borderBottomWidth:si,borderLeftWidth:si,borderRadius:si,radius:si,borderTopLeftRadius:si,borderTopRightRadius:si,borderBottomRightRadius:si,borderBottomLeftRadius:si,width:si,maxWidth:si,height:si,maxHeight:si,top:si,right:si,bottom:si,left:si,padding:si,paddingTop:si,paddingRight:si,paddingBottom:si,paddingLeft:si,margin:si,marginTop:si,marginRight:si,marginBottom:si,marginLeft:si,backgroundPositionX:si,backgroundPositionY:si,rotate:ai,rotateX:ai,rotateY:ai,rotateZ:ai,scale:Kr,scaleX:Kr,scaleY:Kr,scaleZ:Kr,skew:ai,skewX:ai,skewY:ai,distance:si,translateX:si,translateY:si,translateZ:si,x:si,y:si,z:si,perspective:si,transformPerspective:si,opacity:Gr,originX:ui,originY:ui,originZ:si,zIndex:zo,fillOpacity:Gr,strokeOpacity:Gr,numOctaves:zo},Vo={...Bo,color:fi,backgroundColor:fi,outlineColor:fi,fill:fi,stroke:fi,borderColor:fi,borderTopColor:fi,borderRightColor:fi,borderBottomColor:fi,borderLeftColor:fi,filter:Ro,WebkitFilter:Ro},Ho=e=>Vo[e];function Uo(e,t){let n=Ho(e);return n!==Ro&&(n=Ei),n.getAnimatableNone?n.getAnimatableNone(t):void 0}var Wo=new Set([`auto`,`none`,`0`]);function Go(e,t,n){let r=0,i;for(;r<e.length&&!i;){let t=e[r];typeof t==`string`&&!Wo.has(t)&&xi(t).values.length&&(i=e[r]),r++}if(i&&n)for(let r of t)e[r]=Uo(n,i)}var Ko=class extends Xa{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let n=0;n<e.length;n++){let r=e[n];if(typeof r==`string`&&(r=r.trim(),Hr(r))){let i=Do(r,t.current);i!==void 0&&(e[n]=i),n===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!ko.has(n)||e.length!==2)return;let[r,i]=e,a=No(r),o=No(i);if(a!==o)if(Ra(a)&&Ra(o))for(let t=0;t<e.length;t++){let n=e[t];typeof n==`string`&&(e[t]=parseFloat(n))}else Ha[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,n=[];for(let t=0;t<e.length;t++)(e[t]===null||Po(e[t]))&&n.push(t);n.length&&Go(e,n,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n===`height`&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ha[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let r=t[t.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;let r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);let i=n.length-1,a=n[i];n[i]=Ha[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,n])=>{e.getValue(t).set(n)}),this.resolveNoneKeyframes()}};function qo(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e==`string`){let r=document;t&&(r=t.current);let i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}var Jo=(e,t)=>t&&typeof e==`number`?t.transform(e):e;function Yo(e){return qn(e)&&`offsetHeight`in e}var Xo=30,Zo=e=>!isNaN(parseFloat(e)),Qo={current:void 0},$o=class{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=Lr.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Lr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Zo(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on(`change`,e)}on(e,t){this.events[e]||(this.events[e]=new er);let n=this.events[e].add(t);return e===`change`?()=>{n(),jr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||=new Set,this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Qo.current&&Qo.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){let e=Lr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Xo)return 0;let t=Math.min(this.updatedAt-this.prevUpdatedAt,Xo);return rr(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function es(e,t){return new $o(e,t)}var{schedule:ts,cancel:ns}=Ar(queueMicrotask,!1),rs={x:!1,y:!1};function os(){return rs.x||rs.y}function ss(e){return e===`x`||e===`y`?rs[e]?null:(rs[e]=!0,()=>{rs[e]=!1}):rs.x||rs.y?null:(rs.x=rs.y=!0,()=>{rs.x=rs.y=!1})}function cs(e,t){let n=qo(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function ls(e){return!(e.pointerType===`touch`||os())}function us(e,t,n={}){let[r,i,a]=cs(e,n),o=e=>{if(!ls(e))return;let{target:n}=e,r=t(n,e);if(typeof r!=`function`||!n)return;let a=e=>{ls(e)&&(r(e),n.removeEventListener(`pointerleave`,a))};n.addEventListener(`pointerleave`,a,i)};return r.forEach(e=>{e.addEventListener(`pointerenter`,o,i)}),a}var ds=(e,t)=>t?e===t?!0:ds(e,t.parentElement):!1,fs=e=>e.pointerType===`mouse`?typeof e.button!=`number`||e.button<=0:e.isPrimary!==!1,ps=new Set([`BUTTON`,`INPUT`,`SELECT`,`TEXTAREA`,`A`]);function ms(e){return ps.has(e.tagName)||e.tabIndex!==-1}var hs=new WeakSet;function gs(e){return t=>{t.key===`Enter`&&e(t)}}function _s(e,t){e.dispatchEvent(new PointerEvent(`pointer`+t,{isPrimary:!0,bubbles:!0}))}var vs=(e,t)=>{let n=e.currentTarget;if(!n)return;let r=gs(()=>{if(hs.has(n))return;_s(n,`down`);let e=gs(()=>{_s(n,`up`)});n.addEventListener(`keyup`,e,t),n.addEventListener(`blur`,()=>_s(n,`cancel`),t)});n.addEventListener(`keydown`,r,t),n.addEventListener(`blur`,()=>n.removeEventListener(`keydown`,r),t)};function ys(e){return fs(e)&&!os()}function bs(e,t,n={}){let[r,i,a]=cs(e,n),o=e=>{let r=e.currentTarget;if(!ys(e))return;hs.add(r);let a=t(r,e),o=(e,t)=>{window.removeEventListener(`pointerup`,s),window.removeEventListener(`pointercancel`,c),hs.has(r)&&hs.delete(r),ys(e)&&typeof a==`function`&&a(e,{success:t})},s=e=>{o(e,r===window||r===document||n.useGlobalTarget||ds(r,e.target))},c=e=>{o(e,!1)};window.addEventListener(`pointerup`,s,i),window.addEventListener(`pointercancel`,c,i)};return r.forEach(e=>{(n.useGlobalTarget?window:e).addEventListener(`pointerdown`,o,i),Yo(e)&&(e.addEventListener(`focus`,e=>vs(e,i)),!ms(e)&&!e.hasAttribute(`tabindex`)&&(e.tabIndex=0))}),a}function xs(e){return qn(e)&&`ownerSVGElement`in e}function Ss(e){return xs(e)&&e.tagName===`svg`}var Cs=e=>!!(e&&e.getVelocity),ws=[...Mo,fi,Ei],Ts=e=>ws.find(jo(e)),Es=(0,b.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:`never`});function Ds(e,t){if(typeof e==`function`)return e(t);e!=null&&(e.current=t)}function Os(...e){return t=>{let n=!1,r=e.map(e=>{let r=Ds(e,t);return!n&&typeof r==`function`&&(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];typeof n==`function`?n():Ds(e[t],null)}}}}function ks(...e){return b.useCallback(Os(...e),e)}var As=class extends b.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=Yo(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}};function js({children:e,isPresent:t,anchorX:n,root:r}){let i=(0,b.useId)(),a=(0,b.useRef)(null),o=(0,b.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=(0,b.useContext)(Es),c=ks(a,e?.ref);return(0,b.useInsertionEffect)(()=>{let{width:e,height:c,top:l,left:u,right:d}=o.current;if(t||!a.current||!e||!c)return;let f=n===`left`?`left: ${u}`:`right: ${d}`;a.current.dataset.motionPopId=i;let p=document.createElement(`style`);s&&(p.nonce=s);let m=r??document.head;return m.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${c}px !important;
            ${f}px !important;
            top: ${l}px !important;
          }
        `),()=>{m.contains(p)&&m.removeChild(p)}},[t]),(0,G.jsx)(As,{isPresent:t,childRef:a,sizeRef:o,children:b.cloneElement(e,{ref:c})})}var Ms=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:s,root:c})=>{let l=Rn(Ns),u=(0,b.useId)(),d=!0,f=(0,b.useMemo)(()=>(d=!1,{id:u,initial:t,isPresent:n,custom:i,onExitComplete:e=>{l.set(e,!0);for(let e of l.values())if(!e)return;r&&r()},register:e=>(l.set(e,!1),()=>l.delete(e))}),[n,l,r]);return a&&d&&(f={...f}),(0,b.useMemo)(()=>{l.forEach((e,t)=>l.set(t,!1))},[n]),b.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o===`popLayout`&&(e=(0,G.jsx)(js,{isPresent:n,anchorX:s,root:c,children:e})),(0,G.jsx)(Vn.Provider,{value:f,children:e})};function Ns(){return new Map}function Ps(e=!0){let t=(0,b.useContext)(Vn);if(t===null)return[!0,null];let{isPresent:n,onExitComplete:r,register:i}=t,a=(0,b.useId)();(0,b.useEffect)(()=>{if(e)return i(a)},[e]);let o=(0,b.useCallback)(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,o]:[!0]}var Fs=e=>e.key||``;function Is(e){let t=[];return b.Children.forEach(e,e=>{(0,b.isValidElement)(e)&&t.push(e)}),t}var Ls=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a=`sync`,propagate:o=!1,anchorX:s=`left`,root:c})=>{let[l,u]=Ps(o),d=(0,b.useMemo)(()=>Is(e),[e]),f=o&&!l?[]:d.map(Fs),p=(0,b.useRef)(!0),m=(0,b.useRef)(d),h=Rn(()=>new Map),[g,_]=(0,b.useState)(d),[v,y]=(0,b.useState)(d);Bn(()=>{p.current=!1,m.current=d;for(let e=0;e<v.length;e++){let t=Fs(v[e]);f.includes(t)?h.delete(t):h.get(t)!==!0&&h.set(t,!1)}},[v,f.length,f.join(`-`)]);let x=[];if(d!==g){let e=[...d];for(let t=0;t<v.length;t++){let n=v[t],r=Fs(n);f.includes(r)||(e.splice(t,0,n),x.push(n))}return a===`wait`&&x.length&&(e=x),y(Is(e)),_(d),null}let{forceRender:S}=(0,b.useContext)(Ln);return(0,G.jsx)(G.Fragment,{children:v.map(e=>{let g=Fs(e),_=o&&!l?!1:d===v||f.includes(g);return(0,G.jsx)(Ms,{isPresent:_,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:_?void 0:()=>{if(h.has(g))h.set(g,!0);else return;let e=!0;h.forEach(t=>{t||(e=!1)}),e&&(S?.(),y(m.current),o&&u?.(),r&&r())},anchorX:s,children:e},g)})})},Rs=(0,b.createContext)({strict:!1}),zs={animation:[`animate`,`variants`,`whileHover`,`whileTap`,`exit`,`whileInView`,`whileFocus`,`whileDrag`],exit:[`exit`],drag:[`drag`,`dragControls`],focus:[`whileFocus`],hover:[`whileHover`,`onHoverStart`,`onHoverEnd`],tap:[`whileTap`,`onTap`,`onTapStart`,`onTapCancel`],pan:[`onPan`,`onPanStart`,`onPanSessionStart`,`onPanEnd`],inView:[`whileInView`,`onViewportEnter`,`onViewportLeave`],layout:[`layout`,`layoutId`]},Bs={};for(let e in zs)Bs[e]={isEnabled:t=>zs[e].some(e=>!!t[e])};function Vs(e){for(let t in e)Bs[t]={...Bs[t],...e[t]}}var Hs=new Set(`animate.exit.variants.initial.style.values.variants.transition.transformTemplate.custom.inherit.onBeforeLayoutMeasure.onAnimationStart.onAnimationComplete.onUpdate.onDragStart.onDrag.onDragEnd.onMeasureDragConstraints.onDirectionLock.onDragTransitionEnd._dragX._dragY.onHoverStart.onHoverEnd.onViewportEnter.onViewportLeave.globalTapTarget.ignoreStrict.viewport`.split(`.`));function Us(e){return e.startsWith(`while`)||e.startsWith(`drag`)&&e!==`draggable`||e.startsWith(`layout`)||e.startsWith(`onTap`)||e.startsWith(`onPan`)||e.startsWith(`onLayout`)||Hs.has(e)}var Ws=c({default:()=>Gs}),Gs,Ks=o((()=>{throw Gs={},Error(`Could not resolve "@emotion/is-prop-valid" imported by "framer-motion". Is it installed?`)})),qs=e=>!Us(e);function Js(e){typeof e==`function`&&(qs=t=>t.startsWith(`on`)?!Us(t):e(t))}try{Js((Ks(),d(Ws)).default)}catch{}function Ys(e,t,n){let r={};for(let i in e){if(i===`values`&&typeof e.values==`object`)continue;(qs(i)||n===!0&&Us(i)||!t&&!Us(i)||e.draggable&&i.startsWith(`onDrag`))&&(r[i]=e[i])}return r}var Xs=(0,b.createContext)({});function Zs(e){return typeof e==`object`&&!!e&&typeof e.start==`function`}function Qs(e){return typeof e==`string`||Array.isArray(e)}var $s=[`animate`,`whileInView`,`whileFocus`,`whileHover`,`whileTap`,`whileDrag`,`exit`],ec=[`initial`,...$s];function tc(e){return Zs(e.animate)||ec.some(t=>Qs(e[t]))}function nc(e){return!!(tc(e)||e.variants)}function rc(e,t){if(tc(e)){let{initial:t,animate:n}=e;return{initial:t===!1||Qs(t)?t:void 0,animate:Qs(n)?n:void 0}}return e.inherit===!1?{}:t}function ic(e){let{initial:t,animate:n}=rc(e,(0,b.useContext)(Xs));return(0,b.useMemo)(()=>({initial:t,animate:n}),[ac(t),ac(n)])}function ac(e){return Array.isArray(e)?e.join(` `):e}var oc={};function sc(e){for(let t in e)oc[t]=e[t],Br(t)&&(oc[t].isCSSVariable=!0)}function cc(e,{layout:t,layoutId:n}){return La.has(e)||e.startsWith(`origin`)||(t||n!==void 0)&&(!!oc[e]||e===`opacity`)}var lc={x:`translateX`,y:`translateY`,z:`translateZ`,transformPerspective:`perspective`},uc=Ia.length;function dc(e,t,n){let r=``,i=!0;for(let a=0;a<uc;a++){let o=Ia[a],s=e[o];if(s===void 0)continue;let c=!0;if(c=typeof s==`number`?s===(o.startsWith(`scale`)?1:0):parseFloat(s)===0,!c||n){let e=Jo(s,Bo[o]);if(!c){i=!1;let t=lc[o]||o;r+=`${t}(${e}) `}n&&(t[o]=e)}}return r=r.trim(),n?r=n(t,i?``:r):i&&(r=`none`),r}function fc(e,t,n){let{style:r,vars:i,transformOrigin:a}=e,o=!1,s=!1;for(let e in t){let n=t[e];if(La.has(e)){o=!0;continue}else if(Br(e)){i[e]=n;continue}else{let t=Jo(n,Bo[e]);e.startsWith(`origin`)?(s=!0,a[e]=t):r[e]=t}}if(t.transform||(o||n?r.transform=dc(t,e.transform,n):r.transform&&=`none`),s){let{originX:e=`50%`,originY:t=`50%`,originZ:n=0}=a;r.transformOrigin=`${e} ${t} ${n}`}}var pc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mc(e,t,n){for(let r in t)!Cs(t[r])&&!cc(r,n)&&(e[r]=t[r])}function hc({transformTemplate:e},t){return(0,b.useMemo)(()=>{let n=pc();return fc(n,t,e),Object.assign({},n.vars,n.style)},[t])}function gc(e,t){let n=e.style||{},r={};return mc(r,n,e),Object.assign(r,hc(e,t)),r}function _c(e,t){let n={},r=gc(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout=`none`,r.touchAction=e.drag===!0?`none`:`pan-${e.drag===`x`?`y`:`x`}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}var vc={offset:`stroke-dashoffset`,array:`stroke-dasharray`},yc={offset:`strokeDashoffset`,array:`strokeDasharray`};function bc(e,t,n=1,r=0,i=!0){e.pathLength=1;let a=i?vc:yc;e[a.offset]=si.transform(-r);let o=si.transform(t),s=si.transform(n);e[a.array]=`${o} ${s}`}function xc(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...s},c,l,u){if(fc(e,s,l),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:d,style:f}=e;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??`50% 50%`,delete d.transformOrigin),f.transform&&(f.transformBox=u?.transformBox??`fill-box`,delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&bc(d,i,a,o,!1)}var Sc=()=>({...pc(),attrs:{}}),Cc=e=>typeof e==`string`&&e.toLowerCase()===`svg`;function wc(e,t,n,r){let i=(0,b.useMemo)(()=>{let n=Sc();return xc(n,t,Cc(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){let t={};mc(t,e.style,e),i.style={...t,...i.style}}return i}var Tc=[`animate`,`circle`,`defs`,`desc`,`ellipse`,`g`,`image`,`line`,`filter`,`marker`,`mask`,`metadata`,`path`,`pattern`,`polygon`,`polyline`,`rect`,`stop`,`switch`,`symbol`,`svg`,`text`,`tspan`,`use`,`view`];function Ec(e){return typeof e!=`string`||e.includes(`-`)?!1:!!(Tc.indexOf(e)>-1||/[A-Z]/u.test(e))}function Dc(e,t,n,{latestValues:r},i,a=!1){let o=(Ec(e)?wc:_c)(t,r,i,e),s=Ys(t,typeof e==`string`,a),c=e===b.Fragment?{}:{...s,...o,ref:n},{children:l}=t,u=(0,b.useMemo)(()=>Cs(l)?l.get():l,[l]);return(0,b.createElement)(e,{...c,children:u})}function Oc(e){let t=[{},{}];return e?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function kc(e,t,n,r){if(typeof t==`function`){let[i,a]=Oc(r);t=t(n===void 0?e.custom:n,i,a)}if(typeof t==`string`&&(t=e.variants&&e.variants[t]),typeof t==`function`){let[i,a]=Oc(r);t=t(n===void 0?e.custom:n,i,a)}return t}function Ac(e){return Cs(e)?e.get():e}function jc({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:Mc(n,r,i,e),renderState:t()}}function Mc(e,t,n,r){let i={},a=r(e,{});for(let e in a)i[e]=Ac(a[e]);let{initial:o,animate:s}=e,c=tc(e),l=nc(e);t&&l&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),s===void 0&&(s=t.animate));let u=n?n.initial===!1:!1;u||=o===!1;let d=u?s:o;if(d&&typeof d!=`boolean`&&!Zs(d)){let t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){let r=kc(e,t[n]);if(r){let{transitionEnd:e,transition:t,...n}=r;for(let e in n){let t=n[e];if(Array.isArray(t)){let e=u?t.length-1:0;t=t[e]}t!==null&&(i[e]=t)}for(let t in e)i[t]=e[t]}}}return i}var Nc=e=>(t,n)=>{let r=(0,b.useContext)(Xs),i=(0,b.useContext)(Vn),a=()=>jc(e,t,r,i);return n?a():Rn(a)};function Pc(e,t,n){let{style:r}=e,i={};for(let a in r)(Cs(r[a])||t.style&&Cs(t.style[a])||cc(a,e)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}var Fc=Nc({scrapeMotionValuesFromProps:Pc,createRenderState:pc});function Ic(e,t,n){let r=Pc(e,t,n);for(let n in e)if(Cs(e[n])||Cs(t[n])){let t=Ia.indexOf(n)===-1?n:`attr`+n.charAt(0).toUpperCase()+n.substring(1);r[t]=e[n]}return r}var Lc=Nc({scrapeMotionValuesFromProps:Ic,createRenderState:Sc}),q=Symbol.for(`motionComponentSymbol`);function Rc(e){return e&&typeof e==`object`&&Object.prototype.hasOwnProperty.call(e,`current`)}function zc(e,t,n){return(0,b.useCallback)(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n==`function`?n(r):Rc(n)&&(n.current=r))},[t])}var Bc=e=>e.replace(/([a-z])([A-Z])/gu,`$1-$2`).toLowerCase(),Vc=`data-`+Bc(`framerAppearId`),Hc=(0,b.createContext)({});function Uc(e,t,n,r,i){let{visualElement:a}=(0,b.useContext)(Xs),o=(0,b.useContext)(Rs),s=(0,b.useContext)(Vn),c=(0,b.useContext)(Es).reducedMotion,l=(0,b.useRef)(null);r||=o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:a,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:c}));let u=l.current,d=(0,b.useContext)(Hc);u&&!u.projection&&i&&(u.type===`html`||u.type===`svg`)&&Wc(l.current,n,i,d);let f=(0,b.useRef)(!1);(0,b.useInsertionEffect)(()=>{u&&f.current&&u.update(n,s)});let p=n[Vc],m=(0,b.useRef)(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return Bn(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),m.current&&u.animationState&&u.animationState.animateChanges())}),(0,b.useEffect)(()=>{u&&(!m.current&&u.animationState&&u.animationState.animateChanges(),m.current&&=(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),!1),u.enteringChildren=void 0)}),u}function Wc(e,t,n,r){let{layoutId:i,layout:a,drag:o,dragConstraints:s,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t[`data-framer-portal-id`]?void 0:Gc(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||s&&Rc(s),visualElement:e,animationType:typeof a==`string`?a:`both`,initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:l})}function Gc(e){if(e)return e.options.allowProjection===!1?Gc(e.parent):e.projection}function Kc(e,{forwardMotionProps:t=!1}={},n,r){n&&Vs(n);let i=Ec(e)?Lc:Fc;function a(a,o){let s,c={...(0,b.useContext)(Es),...a,layoutId:qc(a)},{isStatic:l}=c,u=ic(a),d=i(a,l);if(!l&&zn){Jc(c,n);let t=Yc(c);s=t.MeasureLayout,u.visualElement=Uc(e,d,c,r,t.ProjectionNode)}return(0,G.jsxs)(Xs.Provider,{value:u,children:[s&&u.visualElement?(0,G.jsx)(s,{visualElement:u.visualElement,...c}):null,Dc(e,a,zc(d,u.visualElement,o),d,l,t)]})}a.displayName=`motion.${typeof e==`string`?e:`create(${e.displayName??e.name??``})`}`;let o=(0,b.forwardRef)(a);return o[q]=e,o}function qc({layoutId:e}){let t=(0,b.useContext)(Ln).id;return t&&e!==void 0?t+`-`+e:e}function Jc(e,t){(0,b.useContext)(Rs).strict}function Yc(e){let{drag:t,layout:n}=Bs;if(!t&&!n)return{};let r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Xc(e,t){if(typeof Proxy>`u`)return Kc;let n=new Map,r=(n,r)=>Kc(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,a)=>a===`create`?r:(n.has(a)||n.set(a,Kc(a,void 0,e,t)),n.get(a))})}function Zc({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Qc({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function $c(e,t){if(!t)return e;let n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function el(e){return e===void 0||e===1}function tl({scale:e,scaleX:t,scaleY:n}){return!el(e)||!el(t)||!el(n)}function nl(e){return tl(e)||rl(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function rl(e){return il(e.x)||il(e.y)}function il(e){return e&&e!==`0%`}function al(e,t,n){let r=e-n,i=t*r;return n+i}function ol(e,t,n,r,i){return i!==void 0&&(e=al(e,i,r)),al(e,n,r)+t}function sl(e,t=0,n=1,r,i){e.min=ol(e.min,t,n,r,i),e.max=ol(e.max,t,n,r,i)}function cl(e,{x:t,y:n}){sl(e.x,t.translate,t.scale,t.originPoint),sl(e.y,n.translate,n.scale,n.originPoint)}var ll=.999999999999,ul=1.0000000000001;function dl(e,t,n,r=!1){let i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let s=0;s<i;s++){a=n[s],o=a.projectionDelta;let{visualElement:i}=a.options;i&&i.props.style&&i.props.style.display===`contents`||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ml(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,cl(e,o)),r&&nl(a.latestValues)&&ml(e,a.latestValues))}t.x<ul&&t.x>ll&&(t.x=1),t.y<ul&&t.y>ll&&(t.y=1)}function fl(e,t){e.min+=t,e.max+=t}function pl(e,t,n,r,i=.5){let a=Ai(e.min,e.max,i);sl(e,t,n,a,r)}function ml(e,t){pl(e.x,t.x,t.scaleX,t.scale,t.originX),pl(e.y,t.y,t.scaleY,t.scale,t.originY)}function hl(e,t){return Zc($c(e.getBoundingClientRect(),t))}function gl(e,t,n){let r=hl(e,n),{scroll:i}=t;return i&&(fl(r.x,i.offset.x),fl(r.y,i.offset.y)),r}var _l=()=>({translate:0,scale:1,origin:0,originPoint:0}),vl=()=>({x:_l(),y:_l()}),yl=()=>({min:0,max:0}),bl=()=>({x:yl(),y:yl()}),xl={current:null},Sl={current:!1};function Cl(){if(Sl.current=!0,zn)if(window.matchMedia){let e=window.matchMedia(`(prefers-reduced-motion)`),t=()=>xl.current=e.matches;e.addEventListener(`change`,t),t()}else xl.current=!1}var wl=new WeakMap;function Tl(e,t,n){for(let r in t){let i=t[r],a=n[r];if(Cs(i))e.addValue(r,i);else if(Cs(a))e.addValue(r,es(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){let t=e.getValue(r);t.liveStyle===!0?t.jump(i):t.hasAnimated||t.set(i)}else{let t=e.getStaticValue(r);e.addValue(r,es(t===void 0?i:t,{owner:e}))}}for(let r in n)t[r]===void 0&&e.removeValue(r);return t}var El=[`AnimationStart`,`AnimationComplete`,`Update`,`BeforeLayoutMeasure`,`LayoutMeasure`,`LayoutAnimationStart`,`LayoutAnimationComplete`],Dl=class{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xa,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify(`Update`,this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=Lr.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,jr.render(this.render,!1,!0))};let{latestValues:s,renderState:c}=a;this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=tc(t),this.isVariantNode=nc(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:l,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in u){let t=u[e];s[e]!==void 0&&Cs(t)&&t.set(s[e])}}mount(e){this.current=e,wl.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Sl.current||Cl(),this.shouldReduceMotion=this.reducedMotionConfig===`never`?!1:this.reducedMotionConfig===`always`?!0:xl.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),Mr(this.notifyUpdate),Mr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??=new Set,this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let n=La.has(e);n&&this.onBindTransform&&this.onBindTransform();let r=t.on(`change`,t=>{this.latestValues[e]=t,this.props.onUpdate&&jr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()}),i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e=`animation`;for(e in Bs){let t=Bs[e];if(!t)continue;let{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bl()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<El.length;t++){let n=El[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let r=`on`+n,i=e[r];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=Tl(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=es(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n==`string`&&(Kn(n)||Jn(n))?n=parseFloat(n):!Ts(n)&&Ei.test(t)&&(n=Uo(e,t)),this.setBaseTarget(e,Cs(n)?n.get():n)),Cs(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let{initial:t}=this.props,n;if(typeof t==`string`||typeof t==`object`){let r=kc(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&n!==void 0)return n;let r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Cs(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new er),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){ts.render(this.render)}},Ol=class extends Dl{constructor(){super(...arguments),this.KeyframeResolver=Ko}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;Cs(e)&&(this.childSubscription=e.on(`change`,e=>{this.current&&(this.current.textContent=`${e}`)}))}};function kl(e,{style:t,vars:n},r,i){let a=e.style,o;for(o in t)a[o]=t[o];for(o in i?.applyProjectionStyles(a,r),n)a.setProperty(o,n[o])}function Al(e){return window.getComputedStyle(e)}var jl=class extends Ol{constructor(){super(...arguments),this.type=`html`,this.renderInstance=kl}readValueFromInstance(e,t){if(La.has(t))return this.projection?.isProjecting?Ma(t):Pa(e,t);{let n=Al(e),r=(Br(t)?n.getPropertyValue(t):n[t])||0;return typeof r==`string`?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return hl(e,t)}build(e,t,n){fc(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Pc(e,t,n)}},Ml=new Set([`baseFrequency`,`diffuseConstant`,`kernelMatrix`,`kernelUnitLength`,`keySplines`,`keyTimes`,`limitingConeAngle`,`markerHeight`,`markerWidth`,`numOctaves`,`targetX`,`targetY`,`surfaceScale`,`specularConstant`,`specularExponent`,`stdDeviation`,`tableValues`,`viewBox`,`gradientTransform`,`pathLength`,`startOffset`,`textLength`,`lengthAdjust`]);function Nl(e,t,n,r){for(let n in kl(e,t,void 0,r),t.attrs)e.setAttribute(Ml.has(n)?n:Bc(n),t.attrs[n])}var Pl=class extends Ol{constructor(){super(...arguments),this.type=`svg`,this.isSVGTag=!1,this.measureInstanceViewportBox=bl}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(La.has(t)){let e=Ho(t);return e&&e.default||0}return t=Ml.has(t)?t:Bc(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Ic(e,t,n)}build(e,t,n){xc(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){Nl(e,t,n,r)}mount(e){this.isSVGTag=Cc(e.tagName),super.mount(e)}},Fl=(e,t)=>Ec(e)?new Pl(t):new jl(t,{allowProjection:e!==b.Fragment});function Il(e,t,n){let r=e.getProps();return kc(r,t,n===void 0?r.custom:n,e)}var Ll=e=>Array.isArray(e);function Rl(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,es(n))}function zl(e){return Ll(e)?e[e.length-1]||0:e}function Bl(e,t){let{transitionEnd:n={},transition:r={},...i}=Il(e,t)||{};for(let t in i={...i,...n},i){let n=zl(i[t]);Rl(e,t,n)}}function Vl(e){return!!(Cs(e)&&e.add)}function Hl(e,t){let n=e.getValue(`willChange`);if(Vl(n))return n.add(t);if(!n&&Gn.WillChange){let n=new Gn.WillChange(`auto`);e.addValue(`willChange`,n),n.add(t)}}function Ul(e){return e.props[Vc]}var Wl=e=>e!==null;function Gl(e,{repeat:t,repeatType:n=`loop`},r){let i=e.filter(Wl),a=t&&n!==`loop`&&t%2==1?0:i.length-1;return!a||r===void 0?i[a]:r}var Kl={type:`spring`,stiffness:500,damping:25,restSpeed:10},ql=e=>({type:`spring`,stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Jl={type:`keyframes`,duration:.8},Yl={type:`keyframes`,ease:[.25,.1,.35,1],duration:.3},Xl=(e,{keyframes:t})=>t.length>2?Jl:La.has(e)?e.startsWith(`scale`)?ql(t[1]):Kl:Yl;function Zl({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:s,from:c,elapsed:l,...u}){return!!Object.keys(u).length}var Ql=(e,t,n,r={},i,a)=>o=>{let s=Oo(r,e)||{},c=s.delay||r.delay||0,{elapsed:l=0}=r;l-=tr(c);let u={keyframes:Array.isArray(n)?n:[null,n],ease:`easeOut`,velocity:t.getVelocity(),...s,delay:-l,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:a?void 0:i};Zl(s)||Object.assign(u,Xl(e,u)),u.duration&&=tr(u.duration),u.repeatDelay&&=tr(u.repeatDelay),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(yo(u),u.delay===0&&(d=!0)),(Gn.instantAnimations||Gn.skipAnimations)&&(d=!0,yo(u),u.delay=0),u.allowFlatten=!s.type&&!s.ease,d&&!a&&t.get()!==void 0){let e=Gl(u.keyframes,s);if(e!==void 0){jr.update(()=>{u.onUpdate(e),u.onComplete()});return}}return s.isSync?new Ca(u):new wo(u)};function $l({protectedKeys:e,needsAnimating:t},n){let r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function eu(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...s}=t;r&&(a=r);let c=[],l=i&&e.animationState&&e.animationState.getState()[i];for(let t in s){let r=e.getValue(t,e.latestValues[t]??null),i=s[t];if(i===void 0||l&&$l(l,t))continue;let o={delay:n,...Oo(a||{},t)},u=r.get();if(u!==void 0&&!r.isAnimating&&!Array.isArray(i)&&i===u&&!o.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){let n=Ul(e);if(n){let e=window.MotionHandoffAnimation(n,t,jr);e!==null&&(o.startTime=e,d=!0)}}Hl(e,t),r.start(Ql(t,r,i,e.shouldReduceMotion&&ko.has(t)?{type:!1}:o,e,d));let f=r.animation;f&&c.push(f)}return o&&Promise.all(c).then(()=>{jr.update(()=>{o&&Bl(e,o)})}),c}function tu(e,t,n,r=0,i=1){let a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),o=e.size,s=(o-1)*r;return typeof n==`function`?n(a,o):i===1?a*r:s-a*r}function nu(e,t,n={}){let r=Il(e,t,n.type===`exit`?e.presenceContext?.custom:void 0),{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);let a=r?()=>Promise.all(eu(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(r=0)=>{let{delayChildren:a=0,staggerChildren:o,staggerDirection:s}=i;return ru(e,t,r,a,o,s,n)}:()=>Promise.resolve(),{when:s}=i;if(s){let[e,t]=s===`beforeChildren`?[a,o]:[o,a];return e().then(()=>t())}else return Promise.all([a(),o(n.delay)])}function ru(e,t,n=0,r=0,i=0,a=1,o){let s=[];for(let c of e.variantChildren)c.notify(`AnimationStart`,t),s.push(nu(c,t,{...o,delay:n+(typeof r==`function`?0:r)+tu(e.variantChildren,c,r,i,a)}).then(()=>c.notify(`AnimationComplete`,t)));return Promise.all(s)}function iu(e,t,n={}){e.notify(`AnimationStart`,t);let r;if(Array.isArray(t)){let i=t.map(t=>nu(e,t,n));r=Promise.all(i)}else if(typeof t==`string`)r=nu(e,t,n);else{let i=typeof t==`function`?Il(e,t,n.custom):t;r=Promise.all(eu(e,i,n))}return r.then(()=>{e.notify(`AnimationComplete`,t)})}function au(e,t){if(!Array.isArray(t))return!1;let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var ou=ec.length;function su(e){if(!e)return;if(!e.isControllingVariants){let t=e.parent&&su(e.parent)||{};return e.props.initial!==void 0&&(t.initial=e.props.initial),t}let t={};for(let n=0;n<ou;n++){let r=ec[n],i=e.props[r];(Qs(i)||i===!1)&&(t[r]=i)}return t}var cu=[...$s].reverse(),lu=$s.length;function uu(e){return t=>Promise.all(t.map(({animation:t,options:n})=>iu(e,t,n)))}function du(e){let t=uu(e),n=mu(),r=!0,i=t=>(n,r)=>{let i=Il(e,r,t===`exit`?e.presenceContext?.custom:void 0);if(i){let{transition:e,transitionEnd:t,...r}=i;n={...n,...r,...t}}return n};function a(n){t=n(e)}function o(a){let{props:o}=e,s=su(e.parent)||{},c=[],l=new Set,u={},d=1/0;for(let t=0;t<lu;t++){let f=cu[t],p=n[f],m=o[f]===void 0?s[f]:o[f],h=Qs(m),g=f===a?p.isActive:null;g===!1&&(d=t);let _=m===s[f]&&m!==o[f]&&h;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),p.protectedKeys={...u},!p.isActive&&g===null||!m&&!p.prevProp||Zs(m)||typeof m==`boolean`)continue;let v=fu(p.prevProp,m),y=v||f===a&&p.isActive&&!_&&h||t>d&&h,b=!1,x=Array.isArray(m)?m:[m],S=x.reduce(i(f),{});g===!1&&(S={});let{prevResolvedValues:C={}}=p,w={...C,...S},T=t=>{y=!0,l.has(t)&&(b=!0,l.delete(t)),p.needsAnimating[t]=!0;let n=e.getValue(t);n&&(n.liveStyle=!1)};for(let e in w){let t=S[e],n=C[e];if(u.hasOwnProperty(e))continue;let r=!1;r=Ll(t)&&Ll(n)?!au(t,n):t!==n,r?t==null?l.add(e):T(e):t!==void 0&&l.has(e)?T(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=S,p.isActive&&(u={...u,...S}),r&&e.blockInitialAnimation&&(y=!1);let E=_&&v;y&&(!E||b)&&c.push(...x.map(t=>{let n={type:f};if(typeof t==`string`&&r&&!E&&e.manuallyAnimateOnMount&&e.parent){let{parent:r}=e,i=Il(r,t);if(r.enteringChildren&&i){let{delayChildren:t}=i.transition||{};n.delay=tu(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(l.size){let t={};if(typeof o.initial!=`boolean`){let n=Il(e,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(t.transition=n.transition)}l.forEach(n=>{let r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=r??null}),c.push({animation:t})}let f=!!c.length;return r&&(o.initial===!1||o.initial===o.animate)&&!e.manuallyAnimateOnMount&&(f=!1),r=!1,f?t(c):Promise.resolve()}function s(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,r)),n[t].isActive=r;let i=o(t);for(let e in n)n[e].protectedKeys={};return i}return{animateChanges:o,setActive:s,setAnimateFunction:a,getState:()=>n,reset:()=>{n=mu()}}}function fu(e,t){return typeof t==`string`?t!==e:Array.isArray(t)?!au(t,e):!1}function pu(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mu(){return{animate:pu(!0),whileInView:pu(),whileHover:pu(),whileTap:pu(),whileDrag:pu(),whileFocus:pu(),exit:pu()}}var hu=class{constructor(e){this.isMounted=!1,this.node=e}update(){}},gu=class extends hu{constructor(e){super(e),e.animationState||=du(e)}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();Zs(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}},_u=0,vu={animation:{Feature:gu},exit:{Feature:class extends hu{constructor(){super(...arguments),this.id=_u++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let r=this.node.animationState.setActive(`exit`,!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function yu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function bu(e){return{point:{x:e.pageX,y:e.pageY}}}var xu=e=>t=>fs(t)&&e(t,bu(t));function Su(e,t,n,r){return yu(e,t,xu(n),r)}var Cu=1e-4,wu=1-Cu,Tu=1+Cu,Eu=.01,Du=0-Eu,Ou=0+Eu;function ku(e){return e.max-e.min}function Au(e,t,n){return Math.abs(e-t)<=n}function ju(e,t,n,r=.5){e.origin=r,e.originPoint=Ai(t.min,t.max,e.origin),e.scale=ku(n)/ku(t),e.translate=Ai(n.min,n.max,e.origin)-e.originPoint,(e.scale>=wu&&e.scale<=Tu||isNaN(e.scale))&&(e.scale=1),(e.translate>=Du&&e.translate<=Ou||isNaN(e.translate))&&(e.translate=0)}function Mu(e,t,n,r){ju(e.x,t.x,n.x,r?r.originX:void 0),ju(e.y,t.y,n.y,r?r.originY:void 0)}function Nu(e,t,n){e.min=n.min+t.min,e.max=e.min+ku(t)}function Pu(e,t,n){Nu(e.x,t.x,n.x),Nu(e.y,t.y,n.y)}function Fu(e,t,n){e.min=t.min-n.min,e.max=e.min+ku(t)}function Iu(e,t,n){Fu(e.x,t.x,n.x),Fu(e.y,t.y,n.y)}function Lu(e){return[e(`x`),e(`y`)]}var Ru=({current:e})=>e?e.ownerDocument.defaultView:null,zu=(e,t)=>Math.abs(e-t);function Bu(e,t){let n=zu(e.x,t.x),r=zu(e.y,t.y);return Math.sqrt(n**2+r**2)}var Vu=class{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=Wu(this.lastMoveEventInfo,this.history),t=this.startEvent!==null,n=Bu(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;let{point:r}=e,{timestamp:i}=Nr;this.history.push({...r,timestamp:i});let{onStart:a,onMove:o}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Hu(t,this.transformPagePoint),jr.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let a=Wu(e.type===`pointercancel`?this.lastMoveEventInfo:Hu(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!fs(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=r||window;let o=bu(e),s=Hu(o,this.transformPagePoint),{point:c}=s,{timestamp:l}=Nr;this.history=[{...c,timestamp:l}];let{onSessionStart:u}=t;u&&u(e,Wu(s,this.history)),this.removeListeners=Qn(Su(this.contextWindow,`pointermove`,this.handlePointerMove),Su(this.contextWindow,`pointerup`,this.handlePointerUp),Su(this.contextWindow,`pointercancel`,this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Mr(this.updatePoint)}};function Hu(e,t){return t?{point:t(e.point)}:e}function Uu(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Wu({point:e},t){return{point:e,delta:Uu(e,Ku(t)),offset:Uu(e,Gu(t)),velocity:qu(t,.1)}}function Gu(e){return e[0]}function Ku(e){return e[e.length-1]}function qu(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null,i=Ku(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>tr(t)));)n--;if(!r)return{x:0,y:0};let a=nr(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};let o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ju(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ai(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ai(n,e,r.max):Math.min(e,n)),e}function Yu(e,t,n){return{min:t===void 0?void 0:e.min+t,max:n===void 0?void 0:e.max+n-(e.max-e.min)}}function Xu(e,{top:t,left:n,bottom:r,right:i}){return{x:Yu(e.x,n,i),y:Yu(e.y,t,r)}}function Zu(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Qu(e,t){return{x:Zu(e.x,t.x),y:Zu(e.y,t.y)}}function $u(e,t){let n=.5,r=ku(e),i=ku(t);return i>r?n=$n(t.min,t.max-r,e.min):r>i&&(n=$n(e.min,e.max-i,t.min)),Wn(0,1,n)}function ed(e,t){let n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}var td=.35;function nd(e=td){return e===!1?e=0:e===!0&&(e=td),{x:rd(e,`left`,`right`),y:rd(e,`top`,`bottom`)}}function rd(e,t,n){return{min:id(e,t),max:id(e,n)}}function id(e,t){return typeof e==`number`?e:e[t]||0}var ad=new WeakMap,od=class{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bl(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){let{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;let i=e=>{let{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(bu(e).point)},a=(e,t)=>{let{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ss(n),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lu(e=>{let t=this.getAxisMotionValue(e).get()||0;if(oi.test(t)){let{projection:n}=this.visualElement;if(n&&n.layout){let r=n.layout.layoutBox[e];r&&(t=ku(r)*(parseFloat(t)/100))}}this.originPoint[e]=t}),i&&jr.postRender(()=>i(e,t)),Hl(this.visualElement,`transform`);let{animationState:a}=this.visualElement;a&&a.setActive(`whileDrag`,!0)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;let{offset:o}=t;if(r&&this.currentDirection===null){this.currentDirection=cd(o),this.currentDirection!==null&&i&&i(this.currentDirection);return}this.updateAxis(`x`,t.point,o),this.updateAxis(`y`,t.point,o),this.visualElement.render(),a&&a(e,t)},s=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Lu(e=>this.getAnimationState(e)===`paused`&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:l}=this.getProps();this.panSession=new Vu(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:s,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,distanceThreshold:n,contextWindow:Ru(this.visualElement)})}stop(e,t){let n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;let{velocity:a}=r;this.startAnimation(a);let{onDragEnd:o}=this.getProps();o&&jr.postRender(()=>o(n,r))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive(`whileDrag`,!1)}updateAxis(e,t,n){let{drag:r}=this.getProps();if(!n||!sd(e,r,this.currentDirection))return;let i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=Ju(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Rc(e)?this.constraints||=this.resolveRefConstraints():e&&n?this.constraints=Xu(n.layoutBox,e):this.constraints=!1,this.elastic=nd(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Lu(e=>{this.constraints!==!1&&this.getAxisMotionValue(e)&&(this.constraints[e]=ed(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){let{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Rc(e))return!1;let n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;let i=gl(n,r.root,this.visualElement.getTransformPagePoint()),a=Qu(r.layout.layoutBox,i);if(t){let e=t(Qc(a));this.hasMutatedConstraints=!!e,e&&(a=Zc(e))}return a}startAnimation(e){let{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),s=this.constraints||{},c=Lu(o=>{if(!sd(o,t,this.currentDirection))return;let c=s&&s[o]||{};a&&(c={min:0,max:0});let l=r?200:1e6,u=r?40:1e7,d={type:`inertia`,velocity:n?e[o]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(o,d)});return Promise.all(c).then(o)}startAxisValueAnimation(e,t){let n=this.getAxisMotionValue(e);return Hl(this.visualElement,e),n.start(Ql(e,n,0,t,this.visualElement,!1))}stopAnimation(){Lu(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Lu(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps();return n[t]||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Lu(t=>{let{drag:n}=this.getProps();if(!sd(t,n,this.currentDirection))return;let{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){let{min:n,max:a}=r.layout.layoutBox[t];i.set(e[t]-Ai(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Rc(t)||!n||!this.constraints)return;this.stopAnimation();let r={x:0,y:0};Lu(e=>{let t=this.getAxisMotionValue(e);if(t&&this.constraints!==!1){let n=t.get();r[e]=$u({min:n,max:n},this.constraints[e])}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},``):`none`,n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Lu(t=>{if(!sd(t,e,null))return;let n=this.getAxisMotionValue(t),{min:i,max:a}=this.constraints[t];n.set(Ai(i,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;ad.set(this.visualElement,this);let e=this.visualElement.current,t=Su(e,`pointerdown`,e=>{let{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),n=()=>{let{dragConstraints:e}=this.getProps();Rc(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener(`measure`,n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),jr.read(n);let a=yu(window,`resize`,()=>this.scalePositionWithinConstraints()),o=r.addEventListener(`didUpdate`,(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(Lu(t=>{let n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())}));return()=>{a(),t(),i(),o&&o()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=td,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:o}}};function sd(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function cd(e,t=10){let n=null;return Math.abs(e.y)>t?n=`y`:Math.abs(e.x)>t&&(n=`x`),n}var ld=class extends hu{constructor(e){super(e),this.removeGroupControls=Xn,this.removeListeners=Xn,this.controls=new od(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xn}unmount(){this.removeGroupControls(),this.removeListeners()}},ud=e=>(t,n)=>{e&&jr.postRender(()=>e(t,n))},dd=class extends hu{constructor(){super(...arguments),this.removePointerDownListener=Xn}onPointerDown(e){this.session=new Vu(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ru(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:ud(e),onStart:ud(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&jr.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=Su(this.node.current,`pointerdown`,e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}},fd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var md={correct:(e,t)=>{if(!t.target)return e;if(typeof e==`string`)if(si.test(e))e=parseFloat(e);else return e;let n=pd(e,t.target.x),r=pd(e,t.target.y);return`${n}% ${r}%`}},hd={correct:(e,{treeScale:t,projectionDelta:n})=>{let r=e,i=Ei.parse(e);if(i.length>5)return r;let a=Ei.createTransformer(e),o=typeof i[0]==`number`?0:1,s=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=s,i[1+o]/=c;let l=Ai(s,c,.5);return typeof i[2+o]==`number`&&(i[2+o]/=l),typeof i[3+o]==`number`&&(i[3+o]/=l),a(i)}},gd=!1,_d=class extends b.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;sc(yd),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),gd&&i.root.didUpdate(),i.addEventListener(`animationComplete`,()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),fd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:a}=n;return a?(a.isPresent=i,gd=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||jr.postRender(()=>{let e=a.getStack();(!e||!e.members.length)&&this.safeToRemove()})),null):null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ts.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;gd=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}};function vd(e){let[t,n]=Ps(),r=(0,b.useContext)(Ln);return(0,G.jsx)(_d,{...e,layoutGroup:r,switchLayoutGroup:(0,b.useContext)(Hc),isPresent:t,safeToRemove:n})}var yd={borderRadius:{...md,applyTo:[`borderTopLeftRadius`,`borderTopRightRadius`,`borderBottomLeftRadius`,`borderBottomRightRadius`]},borderTopLeftRadius:md,borderTopRightRadius:md,borderBottomLeftRadius:md,borderBottomRightRadius:md,boxShadow:hd};function bd(e,t,n){let r=Cs(e)?e:es(e);return r.start(Ql(``,r,t,n)),r.animation}var xd=(e,t)=>e.depth-t.depth,Sd=class{constructor(){this.children=[],this.isDirty=!1}add(e){Hn(this.children,e),this.isDirty=!0}remove(e){Un(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(xd),this.isDirty=!1,this.children.forEach(e)}};function Cd(e,t){let n=Lr.now(),r=({timestamp:i})=>{let a=i-n;a>=t&&(Mr(r),e(a-t))};return jr.setup(r,!0),()=>Mr(r)}var wd=[`TopLeft`,`TopRight`,`BottomLeft`,`BottomRight`],Td=wd.length,Ed=e=>typeof e==`string`?parseFloat(e):e,Dd=e=>typeof e==`number`||si.test(e);function Od(e,t,n,r,i,a){i?(e.opacity=Ai(0,n.opacity??1,Ad(r)),e.opacityExit=Ai(t.opacity??1,0,jd(r))):a&&(e.opacity=Ai(t.opacity??1,n.opacity??1,r));for(let i=0;i<Td;i++){let a=`border${wd[i]}Radius`,o=kd(t,a),s=kd(n,a);o===void 0&&s===void 0||(o||=0,s||=0,o===0||s===0||Dd(o)===Dd(s)?(e[a]=Math.max(Ai(Ed(o),Ed(s),r),0),(oi.test(s)||oi.test(o))&&(e[a]+=`%`)):e[a]=s)}(t.rotate||n.rotate)&&(e.rotate=Ai(t.rotate||0,n.rotate||0,r))}function kd(e,t){return e[t]===void 0?e.borderRadius:e[t]}var Ad=Md(0,.5,gr),jd=Md(.5,.95,Xn);function Md(e,t,n){return r=>r<e?0:r>t?1:n($n(e,t,r))}function Nd(e,t){e.min=t.min,e.max=t.max}function Pd(e,t){Nd(e.x,t.x),Nd(e.y,t.y)}function Fd(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Id(e,t,n,r,i){return e-=t,e=al(e,1/n,r),i!==void 0&&(e=al(e,1/i,r)),e}function Ld(e,t=0,n=1,r=.5,i,a=e,o=e){if(oi.test(t)&&(t=parseFloat(t),t=Ai(o.min,o.max,t/100)-o.min),typeof t!=`number`)return;let s=Ai(a.min,a.max,r);e===a&&(s-=t),e.min=Id(e.min,t,n,s,i),e.max=Id(e.max,t,n,s,i)}function Rd(e,t,[n,r,i],a,o){Ld(e,t[n],t[r],t[i],t.scale,a,o)}var zd=[`x`,`scaleX`,`originX`],Bd=[`y`,`scaleY`,`originY`];function Vd(e,t,n,r){Rd(e.x,t,zd,n?n.x:void 0,r?r.x:void 0),Rd(e.y,t,Bd,n?n.y:void 0,r?r.y:void 0)}function Hd(e){return e.translate===0&&e.scale===1}function Ud(e){return Hd(e.x)&&Hd(e.y)}function Wd(e,t){return e.min===t.min&&e.max===t.max}function Gd(e,t){return Wd(e.x,t.x)&&Wd(e.y,t.y)}function Kd(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function qd(e,t){return Kd(e.x,t.x)&&Kd(e.y,t.y)}function Jd(e){return ku(e.x)/ku(e.y)}function Yd(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}var Xd=class{constructor(){this.members=[]}add(e){Hn(this.members,e),e.scheduleRender()}remove(e){if(Un(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t=this.members.findIndex(t=>e===t);if(t===0)return!1;let n;for(let e=t;e>=0;e--){let t=this.members[e];if(t.isPresent!==!1){n=t;break}}return n?(this.promote(n),!0):!1}promote(e,t){let n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}};function Zd(e,t,n){let r=``,i=e.x.translate/t.x,a=e.y.translate/t.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){let{transformPerspective:e,rotate:t,rotateX:i,rotateY:a,skewX:o,skewY:s}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),a&&(r+=`rotateY(${a}deg) `),o&&(r+=`skewX(${o}deg) `),s&&(r+=`skewY(${s}deg) `)}let s=e.x.scale*t.x,c=e.y.scale*t.y;return(s!==1||c!==1)&&(r+=`scale(${s}, ${c})`),r||`none`}var Qd={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},$d=[``,`X`,`Y`,`Z`],ef=1e3,tf=0;function nf(e,t,n,r){let{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function rf(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;let{visualElement:t}=e.options;if(!t)return;let n=Ul(t);if(window.MotionHasOptimisedAnimation(n,`transform`)){let{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,`transform`,jr,!(t||r))}let{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&rf(r)}function af({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=t?.()){this.id=tf++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Dr.value&&(Qd.nodes=Qd.calculatedTargetDeltas=Qd.calculatedProjections=0),this.nodes.forEach(lf),this.nodes.forEach(gf),this.nodes.forEach(_f),this.nodes.forEach(uf),Dr.addProjectionMetrics&&Dr.addProjectionMetrics(Qd)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new Sd)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new er),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=xs(t)&&!Ss(t),this.instance=t;let{layoutId:n,layout:r,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||n)&&(this.isLayoutDirty=!0),e){let n,r=0,i=()=>this.root.updateBlockedByResize=!1;jr.read(()=>{r=window.innerWidth}),e(t,()=>{let e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=Cd(i,250),fd.hasAnimatedSinceResize&&(fd.hasAnimatedSinceResize=!1,this.nodes.forEach(hf)))})}n&&this.root.registerSharedNode(n,this),this.options.animate!==!1&&i&&(n||r)&&this.addEventListener(`didUpdate`,({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let a=this.options.transition||i.getDefaultTransition()||wf,{onLayoutAnimationStart:o,onLayoutAnimationComplete:s}=i.getProps(),c=!this.targetLayout||!qd(this.targetLayout,r),l=!t&&n;if(this.options.layoutRoot||this.resumeFrom||l||t&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...Oo(a,`layout`),onPlay:o,onComplete:s};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,l)}else t||hf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Mr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vf),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rf(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll(`snapshot`),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:n}=this.options;if(t===void 0&&!n)return;let r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,``):void 0,this.updateSnapshot(),e&&this.notifyListeners(`willUpdate`)}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ff);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(pf);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(mf),this.nodes.forEach(sf),this.nodes.forEach(cf)):this.nodes.forEach(pf),this.clearAllSnapshots();let e=Lr.now();Nr.delta=Wn(0,1e3/60,e-Nr.timestamp),Nr.timestamp=e,Nr.isProcessing=!0,Pr.update.process(Nr),Pr.preRender.process(Nr),Pr.render.process(Nr),Nr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ts.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(df),this.sharedNodes.forEach(yf)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ku(this.snapshot.measuredBox.x)&&!ku(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bl(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners(`measure`,this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify(`LayoutMeasure`,this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e=`measure`){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Ud(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,``):void 0,a=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||nl(this.latestValues)||a)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){let t=this.measurePageBox(),n=this.removeElementScroll(t);return e&&(n=this.removeTransform(n)),Of(n),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return bl();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Af))){let{scroll:e}=this.root;e&&(fl(t.x,e.offset.x),fl(t.y,e.offset.y))}return t}removeElementScroll(e){let t=bl();if(Pd(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){let r=this.path[n],{scroll:i,options:a}=r;r!==this.root&&i&&a.layoutScroll&&(i.wasRoot&&Pd(t,e),fl(t.x,i.offset.x),fl(t.y,i.offset.y))}return t}applyTransform(e,t=!1){let n=bl();Pd(n,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&ml(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),nl(r.latestValues)&&ml(n,r.latestValues)}return nl(this.latestValues)&&ml(n,this.latestValues),n}removeTransform(e){let t=bl();Pd(t,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];if(!n.instance||!nl(n.latestValues))continue;tl(n.latestValues)&&n.updateSnapshot();let r=bl(),i=n.measurePageBox();Pd(r,i),Vd(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,r)}return nl(this.latestValues)&&Vd(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:e.crossfade===void 0?!0:e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Nr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||=t.isProjectionDirty,this.isTransformDirty||=t.isTransformDirty,this.isSharedProjectionDirty||=t.isSharedProjectionDirty;let n=!!this.resumingFrom||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:r,layoutId:i}=this.options;if(!(!this.layout||!(r||i))){if(this.resolvedRelativeTargetAt=Nr.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&this.animationProgress!==1?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bl(),this.relativeTargetOrigin=bl(),Iu(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Pd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=bl(),this.targetWithTransforms=bl()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Pu(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pd(this.target,this.layout.layoutBox),cl(this.target,this.targetDelta)):Pd(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&this.animationProgress!==1?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bl(),this.relativeTargetOrigin=bl(),Iu(this.relativeTargetOrigin,this.target,e.target),Pd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Dr.value&&Qd.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||tl(this.parent.latestValues)||rl(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===Nr.timestamp&&(n=!1),n)return;let{layout:r,layoutId:i}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(r||i))return;Pd(this.layoutCorrected,this.layout.layoutBox);let a=this.treeScale.x,o=this.treeScale.y;dl(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=bl());let{target:s}=e;if(!s){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Fd(this.prevProjectionDelta.x,this.projectionDelta.x),Fd(this.prevProjectionDelta.y,this.projectionDelta.y)),Mu(this.projectionDelta,this.layoutCorrected,s,this.latestValues),(this.treeScale.x!==a||this.treeScale.y!==o||!Yd(this.projectionDelta.x,this.prevProjectionDelta.x)||!Yd(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners(`projectionUpdate`,s)),Dr.value&&Qd.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vl(),this.projectionDelta=vl(),this.projectionDeltaWithTransform=vl()}setAnimationOrigin(e,t=!1){let n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},a=vl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=bl(),s=n?n.source:void 0,c=this.layout?this.layout.source:void 0,l=s!==c,u=this.getStack(),d=!u||u.members.length<=1,f=!!(l&&!d&&this.options.crossfade===!0&&!this.path.some(Cf));this.animationProgress=0;let p;this.mixTargetDelta=t=>{let n=t/1e3;bf(a.x,e.x,n),bf(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Iu(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Sf(this.relativeTarget,this.relativeTargetOrigin,o,n),p&&Gd(this.relativeTarget,p)&&(this.isProjectionDirty=!1),p||=bl(),Pd(p,this.relativeTarget)),l&&(this.animationValues=i,Od(i,r,this.latestValues,n,f,d)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners(`animationStart`),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&=(Mr(this.pendingAnimation),void 0),this.pendingAnimation=jr.update(()=>{fd.hasAnimatedSinceResize=!0,Rr.layout++,this.motionValue||=es(0),this.currentAnimation=bd(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{Rr.layout--},onComplete:()=>{Rr.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners(`animationComplete`)}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ef),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(!(!t||!n||!r)){if(this!==e&&this.layout&&r&&kf(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||bl();let t=ku(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;let r=ku(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Pd(t,n),ml(t,i),Mu(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Xd),this.sharedNodes.get(e).add(t);let n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return e?e.lead===this:!0}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){let r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return e?e.relegate(this):!1}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;let r={};n.z&&nf(`z`,e,r,this.animationValues);for(let t=0;t<$d.length;t++)nf(`rotate${$d[t]}`,e,r,this.animationValues),nf(`skew${$d[t]}`,e,r,this.animationValues);for(let t in e.render(),r)e.setStaticValue(t,r[t]),this.animationValues&&(this.animationValues[t]=r[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility=`hidden`;return}let n=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility=``,e.opacity=``,e.pointerEvents=Ac(t?.pointerEvents)||``,e.transform=n?n(this.latestValues,``):`none`;return}let r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){this.options.layoutId&&(e.opacity=this.latestValues.opacity===void 0?1:this.latestValues.opacity,e.pointerEvents=Ac(t?.pointerEvents)||``),this.hasProjected&&!nl(this.latestValues)&&(e.transform=n?n({},``):`none`,this.hasProjected=!1);return}e.visibility=``;let i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let a=Zd(this.projectionDeltaWithTransform,this.treeScale,i);n&&(a=n(i,a)),e.transform=a;let{x:o,y:s}=this.projectionDelta;for(let t in e.transformOrigin=`${o.origin*100}% ${s.origin*100}% 0`,r.animationValues?e.opacity=r===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?i.opacity===void 0?``:i.opacity:i.opacityExit===void 0?0:i.opacityExit,oc){if(i[t]===void 0)continue;let{correct:n,applyTo:o,isCSSVariable:s}=oc[t],c=a===`none`?i[t]:n(i[t],r);if(o){let t=o.length;for(let n=0;n<t;n++)e[o[n]]=c}else s?this.options.visualElement.renderState.vars[t]=c:e[t]=c}this.options.layoutId&&(e.pointerEvents=r===this?Ac(t?.pointerEvents)||``:`none`)}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(ff),this.root.sharedNodes.clear()}}}function sf(e){e.updateLayout()}function cf(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners(`didUpdate`)){let{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i===`size`?Lu(e=>{let r=a?t.measuredBox[e]:t.layoutBox[e],i=ku(r);r.min=n[e].min,r.max=r.min+i}):kf(i,t.layoutBox,n)&&Lu(r=>{let i=a?t.measuredBox[r]:t.layoutBox[r],o=ku(n[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});let o=vl();Mu(o,n,t.layoutBox);let s=vl();a?Mu(s,e.applyTransform(r,!0),t.measuredBox):Mu(s,n,t.layoutBox);let c=!Ud(o),l=!1;if(!e.resumeFrom){let r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){let{snapshot:i,layout:a}=r;if(i&&a){let o=bl();Iu(o,t.layoutBox,i.layoutBox);let s=bl();Iu(s,n,a.layoutBox),qd(o,s)||(l=!0),r.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners(`didUpdate`,{layout:n,snapshot:t,delta:s,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:l})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function lf(e){Dr.value&&Qd.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty),e.isTransformDirty||=e.parent.isTransformDirty)}function uf(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function df(e){e.clearSnapshot()}function ff(e){e.clearMeasurements()}function pf(e){e.isLayoutDirty=!1}function mf(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify(`BeforeLayoutMeasure`),e.resetTransform()}function hf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function gf(e){e.resolveTargetDelta()}function _f(e){e.calcProjection()}function vf(e){e.resetSkewAndRotation()}function yf(e){e.removeLeadSnapshot()}function bf(e,t,n){e.translate=Ai(t.translate,0,n),e.scale=Ai(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function xf(e,t,n,r){e.min=Ai(t.min,n.min,r),e.max=Ai(t.max,n.max,r)}function Sf(e,t,n,r){xf(e.x,t.x,n.x,r),xf(e.y,t.y,n.y,r)}function Cf(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}var wf={duration:.45,ease:[.4,0,.1,1]},Tf=e=>typeof navigator<`u`&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ef=Tf(`applewebkit/`)&&!Tf(`chrome/`)?Math.round:Xn;function Df(e){e.min=Ef(e.min),e.max=Ef(e.max)}function Of(e){Df(e.x),Df(e.y)}function kf(e,t,n){return e===`position`||e===`preserve-aspect`&&!Au(Jd(t),Jd(n),.2)}function Af(e){return e!==e.root&&e.scroll?.wasRoot}var jf=af({attachResizeListener:(e,t)=>yu(e,`resize`,t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Mf={current:void 0},Nf=af({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Mf.current){let e=new jf({});e.mount(window),e.setOptions({layoutScroll:!0}),Mf.current=e}return Mf.current},resetTransform:(e,t)=>{e.style.transform=t===void 0?`none`:t},checkIsScrollRoot:e=>window.getComputedStyle(e).position===`fixed`}),Pf={pan:{Feature:dd},drag:{Feature:ld,ProjectionNode:Nf,MeasureLayout:vd}};function Ff(e,t,n){let{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive(`whileHover`,n===`Start`);let i=`onHover`+n,a=r[i];a&&jr.postRender(()=>a(t,bu(t)))}var If=class extends hu{mount(){let{current:e}=this.node;e&&(this.unmount=us(e,(e,t)=>(Ff(this.node,t,`Start`),e=>Ff(this.node,e,`End`))))}unmount(){}},Lf=class extends hu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(`:focus-visible`)}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive(`whileFocus`,!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive(`whileFocus`,!1),this.isActive=!1)}mount(){this.unmount=Qn(yu(this.node.current,`focus`,()=>this.onFocus()),yu(this.node.current,`blur`,()=>this.onBlur()))}unmount(){}};function Rf(e,t,n){let{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive(`whileTap`,n===`Start`);let i=`onTap`+(n===`End`?``:n),a=r[i];a&&jr.postRender(()=>a(t,bu(t)))}var zf=class extends hu{mount(){let{current:e}=this.node;e&&(this.unmount=bs(e,(e,t)=>(Rf(this.node,t,`Start`),(e,{success:t})=>Rf(this.node,e,t?`End`:`Cancel`)),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}},Bf=new WeakMap,Vf=new WeakMap,Hf=e=>{let t=Bf.get(e.target);t&&t(e)},Uf=e=>{e.forEach(Hf)};function Wf({root:e,...t}){let n=e||document;Vf.has(n)||Vf.set(n,{});let r=Vf.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(Uf,{root:e,...t})),r[i]}function Gf(e,t,n){let r=Wf(t);return Bf.set(e,n),r.observe(e),()=>{Bf.delete(e),r.unobserve(e)}}var Kf={some:0,all:1},qf=class extends hu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r=`some`,once:i}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof r==`number`?r:Kf[r]};return Gf(this.node.current,a,e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,i&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive(`whileInView`,t);let{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>`u`)return;let{props:e,prevProps:t}=this.node;[`amount`,`margin`,`root`].some(Jf(e,t))&&this.startObserver()}unmount(){}};function Jf({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}var Yf={inView:{Feature:qf},tap:{Feature:zf},focus:{Feature:Lf},hover:{Feature:If}},Xf={layout:{ProjectionNode:Nf,MeasureLayout:vd}},Zf={...vu,...Yf,...Pf,...Xf},Qf=Xc(Zf,Fl),$f=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),ep=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),tp={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},np=(0,b.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,b.createElement)(`svg`,{ref:c,...tp,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ep(`lucide`,i),...s},[...o.map(([e,t])=>(0,b.createElement)(e,t)),...Array.isArray(a)?a:[a]])),J=(e,t)=>{let n=(0,b.forwardRef)(({className:n,...r},i)=>(0,b.createElement)(np,{ref:i,iconNode:t,className:ep(`lucide-${$f(e)}`,n),...r}));return n.displayName=`${e}`,n},rp=J(`Activity`,[[`path`,{d:`M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2`,key:`169zse`}]]),ip=J(`AlignCenter`,[[`path`,{d:`M17 12H7`,key:`16if0g`}],[`path`,{d:`M19 18H5`,key:`18s9l3`}],[`path`,{d:`M21 6H3`,key:`1jwq7v`}]]),ap=J(`AlignLeft`,[[`path`,{d:`M15 12H3`,key:`6jk70r`}],[`path`,{d:`M17 18H3`,key:`1amg6g`}],[`path`,{d:`M21 6H3`,key:`1jwq7v`}]]),op=J(`AlignRight`,[[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M21 18H7`,key:`1ygte8`}],[`path`,{d:`M21 6H3`,key:`1jwq7v`}]]),sp=J(`ArrowDown`,[[`path`,{d:`M12 5v14`,key:`s699le`}],[`path`,{d:`m19 12-7 7-7-7`,key:`1idqje`}]]),cp=J(`ArrowLeft`,[[`path`,{d:`m12 19-7-7 7-7`,key:`1l729n`}],[`path`,{d:`M19 12H5`,key:`x3x0zl`}]]),lp=J(`ArrowUp`,[[`path`,{d:`m5 12 7-7 7 7`,key:`hav0vg`}],[`path`,{d:`M12 19V5`,key:`x0mq9r`}]]),up=J(`Ban`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m4.9 4.9 14.2 14.2`,key:`1m5liu`}]]),dp=J(`Calendar`,[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}]]),fp=J(`ChartColumn`,[[`path`,{d:`M3 3v16a2 2 0 0 0 2 2h16`,key:`c24i48`}],[`path`,{d:`M18 17V9`,key:`2bz60n`}],[`path`,{d:`M13 17V5`,key:`1frdt8`}],[`path`,{d:`M8 17v-3`,key:`17ska0`}]]),pp=J(`ChartPie`,[[`path`,{d:`M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z`,key:`pzmjnu`}],[`path`,{d:`M21.21 15.89A10 10 0 1 1 8 2.83`,key:`k2fpak`}]]),mp=J(`Check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),hp=J(`ChevronDown`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),gp=J(`ChevronsDown`,[[`path`,{d:`m7 6 5 5 5-5`,key:`1lc07p`}],[`path`,{d:`m7 13 5 5 5-5`,key:`1d48rs`}]]),_p=J(`ChevronsUp`,[[`path`,{d:`m17 11-5-5-5 5`,key:`e8nh98`}],[`path`,{d:`m17 18-5-5-5 5`,key:`2avn1x`}]]),vp=J(`CircleAlert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),yp=J(`CircleCheckBig`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),bp=J(`CircleCheck`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]]),xp=J(`CircleX`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]]),Sp=J(`Clock`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`polyline`,{points:`12 6 12 12 16 14`,key:`68esgv`}]]),Cp=J(`CloudUpload`,[[`path`,{d:`M12 13v8`,key:`1l5pq0`}],[`path`,{d:`M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242`,key:`1pljnt`}],[`path`,{d:`m8 17 4-4 4 4`,key:`1quai1`}]]),wp=J(`Cloud`,[[`path`,{d:`M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z`,key:`p7xjir`}]]),Tp=J(`Copy`,[[`rect`,{width:`14`,height:`14`,x:`8`,y:`8`,rx:`2`,ry:`2`,key:`17jyea`}],[`path`,{d:`M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2`,key:`zix9uf`}]]),Ep=J(`CornerDownRight`,[[`polyline`,{points:`15 10 20 15 15 20`,key:`1q7qjw`}],[`path`,{d:`M4 4v7a4 4 0 0 0 4 4h12`,key:`z08zvw`}]]),Dp=J(`Crown`,[[`path`,{d:`M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z`,key:`1vdc57`}],[`path`,{d:`M5 21h14`,key:`11awu3`}]]),Op=J(`Database`,[[`ellipse`,{cx:`12`,cy:`5`,rx:`9`,ry:`3`,key:`msslwz`}],[`path`,{d:`M3 5V19A9 3 0 0 0 21 19V5`,key:`1wlel7`}],[`path`,{d:`M3 12A9 3 0 0 0 21 12`,key:`mv7ke4`}]]),kp=J(`Download`,[[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`polyline`,{points:`7 10 12 15 17 10`,key:`2ggqvy`}],[`line`,{x1:`12`,x2:`12`,y1:`15`,y2:`3`,key:`1vk2je`}]]),Ap=J(`EyeOff`,[[`path`,{d:`M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49`,key:`ct8e1f`}],[`path`,{d:`M14.084 14.158a3 3 0 0 1-4.242-4.242`,key:`151rxh`}],[`path`,{d:`M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143`,key:`13bj9a`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}]]),jp=J(`Eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),Mp=J(`FileImage`,[[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z`,key:`1rqfz7`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}],[`circle`,{cx:`10`,cy:`12`,r:`2`,key:`737tya`}],[`path`,{d:`m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22`,key:`wt3hpn`}]]),Np=J(`FolderOpen`,[[`path`,{d:`m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2`,key:`usdka0`}]]),Pp=J(`Globe`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20`,key:`13o1zl`}],[`path`,{d:`M2 12h20`,key:`9i4pu4`}]]),Fp=J(`Grid3x3`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M3 9h18`,key:`1pudct`}],[`path`,{d:`M3 15h18`,key:`5xshup`}],[`path`,{d:`M9 3v18`,key:`fh3hqa`}],[`path`,{d:`M15 3v18`,key:`14nvp0`}]]),Ip=J(`Handshake`,[[`path`,{d:`m11 17 2 2a1 1 0 1 0 3-3`,key:`efffak`}],[`path`,{d:`m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4`,key:`9pr0kb`}],[`path`,{d:`m21 3 1 11h-2`,key:`1tisrp`}],[`path`,{d:`M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3`,key:`1uvwmv`}],[`path`,{d:`M3 4h8`,key:`1ep09j`}]]),Lp=J(`Heart`,[[`path`,{d:`M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z`,key:`c3ymky`}]]),Rp=J(`Image`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,ry:`2`,key:`1m3agn`}],[`circle`,{cx:`9`,cy:`9`,r:`2`,key:`af1f0g`}],[`path`,{d:`m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21`,key:`1xmnt7`}]]),zp=J(`Info`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 16v-4`,key:`1dtifu`}],[`path`,{d:`M12 8h.01`,key:`e9boi3`}]]),Bp=J(`Layers`,[[`path`,{d:`M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z`,key:`zw3jo`}],[`path`,{d:`M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12`,key:`1wduqc`}],[`path`,{d:`M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17`,key:`kqbvx6`}]]),Vp=J(`LayoutDashboard`,[[`rect`,{width:`7`,height:`9`,x:`3`,y:`3`,rx:`1`,key:`10lvy0`}],[`rect`,{width:`7`,height:`5`,x:`14`,y:`3`,rx:`1`,key:`16une8`}],[`rect`,{width:`7`,height:`9`,x:`14`,y:`12`,rx:`1`,key:`1hutg5`}],[`rect`,{width:`7`,height:`5`,x:`3`,y:`16`,rx:`1`,key:`ldoo1y`}]]),Hp=J(`LockOpen`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 9.9-1`,key:`1mm8w8`}]]),Up=J(`Lock`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]]),Wp=J(`LogOut`,[[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}],[`polyline`,{points:`16 17 21 12 16 7`,key:`1gabdz`}],[`line`,{x1:`21`,x2:`9`,y1:`12`,y2:`12`,key:`1uyos4`}]]),Gp=J(`MailOpen`,[[`path`,{d:`M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z`,key:`1jhwl8`}],[`path`,{d:`m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10`,key:`1qfld7`}]]),Kp=J(`Mail`,[[`rect`,{width:`20`,height:`16`,x:`2`,y:`4`,rx:`2`,key:`18n3k1`}],[`path`,{d:`m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7`,key:`1ocrg3`}]]),qp=J(`Maximize2`,[[`polyline`,{points:`15 3 21 3 21 9`,key:`mznyad`}],[`polyline`,{points:`9 21 3 21 3 15`,key:`1avn1i`}],[`line`,{x1:`21`,x2:`14`,y1:`3`,y2:`10`,key:`ota7mn`}],[`line`,{x1:`3`,x2:`10`,y1:`21`,y2:`14`,key:`1atl0r`}]]),Jp=J(`Minus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}]]),Yp=J(`Package`,[[`path`,{d:`M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z`,key:`1a0edw`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}],[`polyline`,{points:`3.29 7 12 12 20.71 7`,key:`ousv84`}],[`path`,{d:`m7.5 4.27 9 5.15`,key:`1c824w`}]]),Xp=J(`Palette`,[[`circle`,{cx:`13.5`,cy:`6.5`,r:`.5`,fill:`currentColor`,key:`1okk4w`}],[`circle`,{cx:`17.5`,cy:`10.5`,r:`.5`,fill:`currentColor`,key:`f64h9f`}],[`circle`,{cx:`8.5`,cy:`7.5`,r:`.5`,fill:`currentColor`,key:`fotxhn`}],[`circle`,{cx:`6.5`,cy:`12.5`,r:`.5`,fill:`currentColor`,key:`qy21gx`}],[`path`,{d:`M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z`,key:`12rzf8`}]]),Zp=J(`PanelLeftClose`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M9 3v18`,key:`fh3hqa`}],[`path`,{d:`m16 15-3-3 3-3`,key:`14y99z`}]]),Qp=J(`PanelLeft`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M9 3v18`,key:`fh3hqa`}]]),$p=J(`Phone`,[[`path`,{d:`M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z`,key:`foiqr5`}]]),em=J(`Pipette`,[[`path`,{d:`m2 22 1-1h3l9-9`,key:`1sre89`}],[`path`,{d:`M3 21v-3l9-9`,key:`hpe2y6`}],[`path`,{d:`m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l.4.4a2.1 2.1 0 1 1-3 3l-3.8-3.8a2.1 2.1 0 1 1 3-3l.4.4Z`,key:`196du1`}]]),tm=J(`Plus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]]),nm=J(`RefreshCw`,[[`path`,{d:`M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8`,key:`v9h5vc`}],[`path`,{d:`M21 3v5h-5`,key:`1q7to0`}],[`path`,{d:`M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16`,key:`3uifl3`}],[`path`,{d:`M8 16H3v5`,key:`1cv678`}]]),rm=J(`Repeat`,[[`path`,{d:`m17 2 4 4-4 4`,key:`nntrym`}],[`path`,{d:`M3 11v-1a4 4 0 0 1 4-4h14`,key:`84bu3i`}],[`path`,{d:`m7 22-4-4 4-4`,key:`1wqhfi`}],[`path`,{d:`M21 13v1a4 4 0 0 1-4 4H3`,key:`1rx37r`}]]),im=J(`Save`,[[`path`,{d:`M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z`,key:`1c8476`}],[`path`,{d:`M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7`,key:`1ydtos`}],[`path`,{d:`M7 3v4a1 1 0 0 0 1 1h7`,key:`t51u73`}]]),am=J(`Search`,[[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}],[`path`,{d:`m21 21-4.3-4.3`,key:`1qie3q`}]]),om=J(`Send`,[[`path`,{d:`M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z`,key:`1ffxy3`}],[`path`,{d:`m21.854 2.147-10.94 10.939`,key:`12cjpa`}]]),sm=J(`Settings2`,[[`path`,{d:`M20 7h-9`,key:`3s1dr2`}],[`path`,{d:`M14 17H5`,key:`gfn3mx`}],[`circle`,{cx:`17`,cy:`17`,r:`3`,key:`18b49y`}],[`circle`,{cx:`7`,cy:`7`,r:`3`,key:`dfmy0x`}]]),cm=J(`Settings`,[[`path`,{d:`M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z`,key:`1qme2f`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),lm=J(`Shapes`,[[`path`,{d:`M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z`,key:`1bo67w`}],[`rect`,{x:`3`,y:`14`,width:`7`,height:`7`,rx:`1`,key:`1bkyp8`}],[`circle`,{cx:`17.5`,cy:`17.5`,r:`3.5`,key:`w3z12y`}]]),um=J(`Share2`,[[`circle`,{cx:`18`,cy:`5`,r:`3`,key:`gq8acd`}],[`circle`,{cx:`6`,cy:`12`,r:`3`,key:`w7nqdw`}],[`circle`,{cx:`18`,cy:`19`,r:`3`,key:`1xt0gg`}],[`line`,{x1:`8.59`,x2:`15.42`,y1:`13.51`,y2:`17.49`,key:`47mynk`}],[`line`,{x1:`15.41`,x2:`8.59`,y1:`6.51`,y2:`10.49`,key:`1n3mei`}]]),dm=J(`Shield`,[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}]]),fm=J(`SquarePen`,[[`path`,{d:`M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`,key:`1m0v6g`}],[`path`,{d:`M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z`,key:`ohrbg2`}]]),pm=J(`Square`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}]]),mm=J(`Target`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`circle`,{cx:`12`,cy:`12`,r:`6`,key:`1vlfrh`}],[`circle`,{cx:`12`,cy:`12`,r:`2`,key:`1c9p78`}]]),hm=J(`Trash2`,[[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6`,key:`4alrt4`}],[`path`,{d:`M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2`,key:`v07s0e`}],[`line`,{x1:`10`,x2:`10`,y1:`11`,y2:`17`,key:`1uufr5`}],[`line`,{x1:`14`,x2:`14`,y1:`11`,y2:`17`,key:`xtxkd`}]]),gm=J(`TrendingUp`,[[`polyline`,{points:`22 7 13.5 15.5 8.5 10.5 2 17`,key:`126l90`}],[`polyline`,{points:`16 7 22 7 22 13`,key:`kwv8wd`}]]),_m=J(`TriangleAlert`,[[`path`,{d:`m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3`,key:`wmoenq`}],[`path`,{d:`M12 9v4`,key:`juzpu7`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),vm=J(`Type`,[[`polyline`,{points:`4 7 4 4 20 4 20 7`,key:`1nosan`}],[`line`,{x1:`9`,x2:`15`,y1:`20`,y2:`20`,key:`swin9y`}],[`line`,{x1:`12`,x2:`12`,y1:`4`,y2:`20`,key:`1tx1rr`}]]),ym=J(`Upload`,[[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`polyline`,{points:`17 8 12 3 7 8`,key:`t8dd8p`}],[`line`,{x1:`12`,x2:`12`,y1:`3`,y2:`15`,key:`widbto`}]]),bm=J(`UserCheck`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}],[`polyline`,{points:`16 11 18 13 22 9`,key:`1pwet4`}]]),xm=J(`User`,[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]]),Sm=J(`Users`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}],[`path`,{d:`M22 21v-2a4 4 0 0 0-3-3.87`,key:`kshegd`}],[`path`,{d:`M16 3.13a4 4 0 0 1 0 7.75`,key:`1da9ce`}]]),Cm=J(`X`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]),wm=J(`Zap`,[[`path`,{d:`M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z`,key:`1xq2db`}]]),Tm={success:bp,error:xp,warning:_m,info:zp},Em={success:{bg:`linear-gradient(135deg, #10b981 0%, #059669 100%)`,iconBg:`rgba(255, 255, 255, 0.2)`},error:{bg:`linear-gradient(135deg, #ef4444 0%, #dc2626 100%)`,iconBg:`rgba(255, 255, 255, 0.2)`},warning:{bg:`linear-gradient(135deg, #f59e0b 0%, #d97706 100%)`,iconBg:`rgba(255, 255, 255, 0.2)`},info:{bg:`linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)`,iconBg:`rgba(255, 255, 255, 0.2)`}};function Dm({toast:e,onClose:t}){let n=Tm[e.type]||zp,r=Em[e.type]||Em.info;return(0,b.useEffect)(()=>{if(!e.persistent){let n=setTimeout(()=>{t(e.id)},e.duration||4e3);return()=>clearTimeout(n)}},[e,t]),(0,G.jsxs)(Qf.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.3,ease:`easeOut`},style:{position:`relative`,background:r.bg,borderRadius:`16px`,padding:`16px 20px`,boxShadow:`0 20px 40px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.1) inset`,maxWidth:`420px`,width:`100%`,display:`flex`,alignItems:`flex-start`,gap:`14px`,backdropFilter:`blur(10px)`},children:[(0,G.jsx)(`div`,{style:{flexShrink:0,width:`40px`,height:`40px`,borderRadius:`12px`,background:r.iconBg,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,G.jsx)(n,{size:24,color:`white`,strokeWidth:2.5})}),(0,G.jsxs)(`div`,{style:{flex:1,paddingTop:`2px`},children:[e.title&&(0,G.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:700,color:`white`,marginBottom:`4px`,lineHeight:1.3},children:e.title}),(0,G.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:500,color:`rgba(255, 255, 255, 0.95)`,lineHeight:1.4},children:e.message}),e.action&&(0,G.jsx)(`button`,{onClick:()=>{e.action.onClick(),t(e.id)},style:{marginTop:`12px`,padding:`8px 16px`,borderRadius:`8px`,border:`none`,background:`rgba(255, 255, 255, 0.25)`,color:`white`,fontSize:`13px`,fontWeight:600,cursor:`pointer`,transition:`all 0.2s ease`},onMouseEnter:e=>{e.currentTarget.style.background=`rgba(255, 255, 255, 0.35)`,e.currentTarget.style.transform=`scale(1.05)`},onMouseLeave:e=>{e.currentTarget.style.background=`rgba(255, 255, 255, 0.25)`,e.currentTarget.style.transform=`scale(1)`},children:e.action.label})]}),(0,G.jsx)(`button`,{onClick:()=>t(e.id),style:{flexShrink:0,width:`28px`,height:`28px`,borderRadius:`8px`,border:`none`,background:`rgba(255, 255, 255, 0.15)`,color:`white`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,transition:`all 0.2s ease`},onMouseEnter:e=>{e.currentTarget.style.background=`rgba(255, 255, 255, 0.25)`},onMouseLeave:e=>{e.currentTarget.style.background=`rgba(255, 255, 255, 0.15)`},children:(0,G.jsx)(Cm,{size:16,strokeWidth:2.5})})]})}function Om({toasts:e,onClose:t}){return(0,G.jsx)(`div`,{style:{position:`fixed`,bottom:`24px`,right:`24px`,zIndex:1e4,display:`flex`,flexDirection:`column`,gap:`12px`,pointerEvents:`none`},children:(0,G.jsx)(Ls,{mode:`popLayout`,children:e.map(e=>(0,G.jsx)(`div`,{style:{pointerEvents:`auto`},children:(0,G.jsx)(Dm,{toast:e,onClose:t})},e.id))})})}var km=(0,b.createContext)(null),Am=0;function jm({children:e}){let[t,n]=(0,b.useState)([]),r=(0,b.useRef)(new Map),i=(0,b.useCallback)(e=>{let t=r.current.get(e);t&&(clearTimeout(t),r.current.delete(e)),n(t=>t.filter(t=>t.id!==e))},[]),a=(0,b.useCallback)(({type:e=`info`,title:t,message:a,duration:o=4e3,action:s,persistent:c=!1})=>{let l=++Am,u={id:l,type:e,title:t,message:a,duration:o,action:s,persistent:c};if(n(e=>[...e,u]),!c&&o>0){let e=setTimeout(()=>{i(l)},o);r.current.set(l,e)}return l},[i]),o=(0,b.useCallback)((e,t={})=>a({type:`success`,message:e,...t}),[a]),s=(0,b.useCallback)((e,t={})=>a({type:`error`,message:e,duration:6e3,...t}),[a]),c=(0,b.useCallback)((e,t={})=>a({type:`warning`,message:e,duration:5e3,...t}),[a]),l=(0,b.useCallback)((e,t={})=>a({type:`info`,message:e,...t}),[a]),u=(0,b.useCallback)(()=>{r.current.forEach(e=>clearTimeout(e)),r.current.clear(),n([])},[]);return(0,G.jsxs)(km.Provider,{value:{showToast:a,success:o,error:s,warning:c,info:l,removeToast:i,clearAll:u},children:[e,(0,G.jsx)(Om,{toasts:t,onClose:i})]})}function Mm(){let e=(0,b.useContext)(km);if(!e)throw Error(`useToast must be used within ToastProvider`);return e}function Nm({children:e}){let{isAuthenticated:t,loading:n}=In(),r=Pe();return n?(0,G.jsxs)(`div`,{style:{minHeight:`60vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexDirection:`column`,gap:`1rem`},children:[(0,G.jsx)(`div`,{style:{width:`48px`,height:`48px`,border:`4px solid #f3f4f6`,borderTopColor:`#e0b7a9`,borderRadius:`50%`,animation:`spin 1s linear infinite`}}),(0,G.jsx)(`p`,{style:{color:`#666`,fontSize:`0.95rem`},children:`Checking authentication...`}),(0,G.jsx)(`style`,{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):t?e:(0,G.jsx)(lt,{to:`/login`,state:{from:r},replace:!0})}function Pm({children:e}){let{user:t,loading:n}=In();return n?(0,G.jsx)(Fm,{}):t?(t.role===`admin`||console.warn(` Not admin, but allowing access for testing`),e):(0,G.jsx)(lt,{to:`/login`,replace:!0})}function Fm(){return(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-blue-50`,children:(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`div`,{className:`inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-600 mb-4`}),(0,G.jsx)(`p`,{className:`text-gray-600`,children:`Loading...`})]})})}var Im=(0,b.createContext)(null);function Lm({children:e}){let[t,n]=(0,b.useState)(null),r=(0,b.useMemo)(()=>({branding:t,setBranding:n,clearBranding:()=>n(null)}),[t]);return(0,G.jsx)(Im.Provider,{value:r,children:e})}function Rm(){return(0,b.useContext)(Im)||{branding:null,setBranding:()=>{},clearBranding:()=>{}}}var zm=`/assets/burger-bar-mjujrh6i-Dskea4ro.png`,Bm=`/assets/page-home-mjujrh6i-CgIVjQlz.png`,Vm=`/assets/page-about-mjujrh6i-BHZmLetY.png`,Hm=`/assets/pricing-mjujrh6i-tb2KEphL.png`,Um=`/assets/page-frames-mjujrh6i-1hBET6k9.png`,Wm=`/assets/page-create-mjujrh6i-Cm4OQgm8.png`,Gm=`/assets/page-profile-mjujrh6i-KmIRh7wr.png`,Km=`/assets/page-settings-mjujrh6i-DO3sENP8.png`,qm=`/assets/logout-mjujrh6i-D_SkAiuc.png`;function Jm(){let{branding:e}=Rm(),[t,n]=(0,b.useState)(!1),[r,i]=(0,b.useState)(!1),[a,o]=(0,b.useState)(!1),s=(0,b.useRef)(null),c=(0,b.useRef)(null),l=Le(),{pathname:u,hash:d}=Pe(),{isAuthenticated:f,user:p,logout:m}=In(),h=(()=>{if(!p)return null;if(p.uid){let e=localStorage.getItem(`profilePhoto_${p.uid}`);if(e)return e}if(p.email){let e=localStorage.getItem(`profilePhoto_${p.email}`);if(e)return p.uid&&(localStorage.setItem(`profilePhoto_${p.uid}`,e),console.log(` Migrated profile photo from email to UID`)),e}return null})(),g=()=>{if(!p)return`U`;let e=p.firstName?.charAt(0)||``,t=p.lastName?.charAt(0)||``;return(e+t).toUpperCase()||p.name?.charAt(0)?.toUpperCase()||`U`},_=u===`/`&&(d===``||d===`#home`),v=u===`/`&&d===`#about`;(0,b.useEffect)(()=>{n(!1),o(!1),i(!1)},[u,d]),(0,b.useEffect)(()=>{function e(e){s.current&&(s.current.contains(e.target)||(n(!1),o(!1)))}return document.addEventListener(`click`,e),()=>document.removeEventListener(`click`,e)},[]),(0,b.useEffect)(()=>{let e=s.current,t=()=>{e&&e.classList.toggle(`elev`,window.scrollY>6)};return t(),window.addEventListener(`scroll`,t,{passive:!1}),()=>window.removeEventListener(`scroll`,t)},[]);let y=()=>{m(),o(!1),l(`/`)},x=e=>{e.stopPropagation(),o(e=>!e)},S=e?.logoSrc||`/assets/logo-salem-mjujrh6i-D7QQumWy.png`,C=e?.headerColor||null;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`header`,{ref:s,className:`site-header ${t?`open`:``}`,style:C?{background:C}:void 0,children:(0,G.jsxs)(`div`,{className:`container header-bar`,children:[(0,G.jsx)(tn,{to:`/`,className:`logo`,style:{textDecoration:`none`,cursor:`pointer`},children:(0,G.jsx)(`img`,{src:S,alt:`Fremio Logo`,className:`logo-image`})}),(0,G.jsxs)(`nav`,{className:`main-nav`,children:[(0,G.jsxs)(tn,{to:`/#home`,className:`nav-link`+(_?` active`:``),children:[(0,G.jsx)(`img`,{src:Bm,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Home`})]}),(0,G.jsxs)(tn,{to:`/#about`,className:`nav-link`+(v?` active`:``),children:[(0,G.jsx)(`img`,{src:Vm,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Join the Journey`})]}),(0,G.jsxs)(nn,{to:`/pricing`,className:({isActive:e})=>`nav-link`+(e?` active`:``),children:[(0,G.jsx)(`img`,{src:Hm,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Membership`})]}),(0,G.jsxs)(nn,{to:`/frames`,className:({isActive:e})=>`nav-link`+(e?` active`:``),children:[(0,G.jsx)(`img`,{src:Um,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Frames`})]}),(0,G.jsxs)(nn,{to:`/create`,className:({isActive:e})=>`nav-link`+(e?` active`:``),children:[(0,G.jsx)(`img`,{src:Wm,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Create`})]})]}),(0,G.jsx)(`div`,{className:`header-actions`,children:f?(0,G.jsxs)(`div`,{style:{position:`relative`},ref:c,children:[(0,G.jsxs)(`button`,{onClick:x,className:`btn-login`,style:{background:`transparent`,border:`none`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`10px`,padding:`6px 16px 6px 6px`,borderRadius:`999px`,transition:`all 0.2s`},onMouseEnter:e=>{e.currentTarget.style.background=`rgba(224, 183, 169, 0.1)`},onMouseLeave:e=>{e.currentTarget.style.background=`transparent`},children:[(0,G.jsx)(`div`,{style:{width:`36px`,height:`36px`,borderRadius:`50%`,background:h?`url(${h})`:`#E0B7A9`,backgroundSize:`cover`,backgroundPosition:`center`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:600,fontSize:`14px`,flexShrink:0},children:!h&&(0,G.jsx)(`span`,{children:g()})}),(0,G.jsx)(`span`,{style:{fontWeight:600,fontSize:`15px`},children:p?.displayName||p?.firstName||p?.name||p?.email?.split(`@`)[0]||`Profile`})]}),a&&(0,G.jsxs)(`div`,{style:{position:`absolute`,top:`calc(100% + 8px)`,right:0,background:`white`,borderRadius:`12px`,boxShadow:`0 10px 40px rgba(0,0,0,0.1), 0 2px 8px rgba(0,0,0,0.06)`,minWidth:`200px`,padding:`8px`,zIndex:1e3,border:`1px solid rgba(224, 183, 169, 0.2)`},children:[(0,G.jsxs)(tn,{to:`/profile`,onClick:()=>o(!1),style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`12px 16px`,borderRadius:`8px`,textDecoration:`none`,color:`#333`,transition:`all 0.2s`,fontSize:`14px`,fontWeight:500},onMouseEnter:e=>{e.currentTarget.style.background=`rgba(224, 183, 169, 0.1)`},onMouseLeave:e=>{e.currentTarget.style.background=`transparent`},children:[(0,G.jsx)(`img`,{src:`/assets/page-profile-mjujrh6i-KmIRh7wr.png`,alt:``,style:{width:`18px`,height:`18px`}}),(0,G.jsx)(`span`,{children:`Profile`})]}),(0,G.jsxs)(tn,{to:`/settings`,onClick:()=>o(!1),style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`12px 16px`,borderRadius:`8px`,textDecoration:`none`,color:`#333`,transition:`all 0.2s`,fontSize:`14px`,fontWeight:500},onMouseEnter:e=>{e.currentTarget.style.background=`rgba(224, 183, 169, 0.1)`},onMouseLeave:e=>{e.currentTarget.style.background=`transparent`},children:[(0,G.jsx)(`img`,{src:`/assets/page-settings-mjujrh6i-DO3sENP8.png`,alt:``,style:{width:`18px`,height:`18px`}}),(0,G.jsx)(`span`,{children:`Settings`})]}),(0,G.jsx)(`div`,{style:{height:`1px`,background:`rgba(224, 183, 169, 0.2)`,margin:`8px 0`}}),(0,G.jsxs)(`button`,{onClick:y,style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`12px 16px`,borderRadius:`8px`,border:`none`,background:`transparent`,color:`#dc2626`,transition:`all 0.2s`,fontSize:`14px`,fontWeight:500,cursor:`pointer`,width:`100%`,textAlign:`left`},onMouseEnter:e=>{e.currentTarget.style.background=`rgba(220, 38, 38, 0.1)`},onMouseLeave:e=>{e.currentTarget.style.background=`transparent`},children:[(0,G.jsx)(`img`,{src:`/assets/logout-mjujrh6i-D_SkAiuc.png`,alt:``,style:{width:`18px`,height:`18px`}}),(0,G.jsx)(`span`,{children:`Logout`})]})]})]}):(0,G.jsx)(nn,{to:`/login`,className:`btn-login`,children:`Login/Register`})}),(0,G.jsx)(`button`,{type:`button`,className:`menu-toggle`,"aria-label":r?`Close navigation`:`Open navigation`,"aria-expanded":r,onClick:()=>i(e=>!e),children:(0,G.jsx)(`img`,{src:zm,alt:`Menu`,className:`menu-toggle-icon`,draggable:!1})})]})}),(0,G.jsx)(`div`,{className:`mobile-menu-overlay ${r?`open`:``}`,onClick:()=>i(!1)}),(0,G.jsxs)(`div`,{className:`mobile-menu ${r?`open`:``}`,children:[(0,G.jsx)(`div`,{style:{padding:`24px`,borderBottom:`1px solid rgba(224, 183, 169, 0.2)`},children:(0,G.jsx)(`img`,{src:S,alt:`Fremio Logo`,style:{height:`32px`}})}),(0,G.jsxs)(`nav`,{className:`mobile-nav`,children:[(0,G.jsxs)(tn,{to:`/#home`,className:`nav-link`+(_?` active`:``),children:[(0,G.jsx)(`img`,{src:Bm,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Home`})]}),(0,G.jsxs)(tn,{to:`/#about`,className:`nav-link`+(v?` active`:``),children:[(0,G.jsx)(`img`,{src:Vm,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Join the Journey`})]}),(0,G.jsxs)(nn,{to:`/pricing`,className:({isActive:e})=>`nav-link`+(e?` active`:``),onClick:()=>i(!1),children:[(0,G.jsx)(`img`,{src:Hm,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Membership`})]}),(0,G.jsxs)(nn,{to:`/frames`,className:({isActive:e})=>`nav-link`+(e?` active`:``),children:[(0,G.jsx)(`img`,{src:Um,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Frames`})]}),(0,G.jsxs)(nn,{to:`/create`,className:({isActive:e})=>`nav-link`+(e?` active`:``),children:[(0,G.jsx)(`img`,{src:Wm,alt:``,className:`nav-icon`}),(0,G.jsx)(`span`,{children:`Create`})]})]}),f?(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`4px`,padding:`0 24px`,width:`100%`},children:[(0,G.jsxs)(nn,{to:`/profile`,onClick:()=>i(!1),className:({isActive:e})=>`nav-link`+(e?` active`:``),style:{width:`100%`},children:[(0,G.jsx)(`img`,{src:Gm,alt:``,style:{width:`22px`,height:`22px`}}),(0,G.jsx)(`span`,{children:`Profile`})]}),(0,G.jsxs)(nn,{to:`/settings`,onClick:()=>i(!1),className:({isActive:e})=>`nav-link`+(e?` active`:``),style:{width:`100%`},children:[(0,G.jsx)(`img`,{src:Km,alt:``,style:{width:`22px`,height:`22px`}}),(0,G.jsx)(`span`,{children:`Settings`})]}),(0,G.jsx)(`div`,{style:{height:`1px`,background:`rgba(224, 183, 169, 0.2)`,margin:`8px 0`}}),(0,G.jsxs)(`button`,{onClick:()=>{i(!1),y()},style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`12px 16px`,borderRadius:`8px`,border:`none`,background:`transparent`,color:`#dc2626`,fontSize:`14px`,fontWeight:500,cursor:`pointer`,width:`100%`,textAlign:`left`},children:[(0,G.jsx)(`img`,{src:qm,alt:``,style:{width:`22px`,height:`22px`}}),(0,G.jsx)(`span`,{children:`Logout`})]})]}):(0,G.jsx)(nn,{to:`/login`,className:`btn-login mobile`,children:`Login/Register`})]})]})}var Ym=s((exports=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.consumer`),r=Symbol.for(`react.context`);Symbol.iterator;var i={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a=Object.assign,o={};function s(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||i}s.prototype.isReactComponent={},s.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function c(){}c.prototype=s.prototype;function l(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||i}var u=l.prototype=new c;u.constructor=l,a(u,s.prototype),u.isPureReactComponent=!0,Array.isArray;var d=Object.prototype.hasOwnProperty;function f(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}exports.createContext=function(e){return e={$$typeof:r,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:n,_context:e},e},exports.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)d.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return f(e,a,i)}})),Xm=u(s(((exports,t)=>{t.exports=Ym()}))(),1),Zm={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qm=Xm.createContext&&Xm.createContext(Zm),$m=[`attr`,`size`,`title`];function eh(e,t){if(e==null)return{};var n=th(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function th(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nh.apply(this,arguments)}function rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ih(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?rh(Object(n),!0).forEach(function(t){ah(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ah(e,t,n){return t=oh(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oh(e){var t=sh(e,`string`);return typeof t==`symbol`?t:t+``}function sh(e,t){if(typeof e!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(typeof r!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}function ch(e){return e&&e.map((e,t)=>Xm.createElement(e.tag,ih({key:t},e.attr),ch(e.child)))}function lh(e){return t=>Xm.createElement(uh,nh({attr:ih({},e.attr)},t),ch(e.child))}function uh(e){var t=t=>{var{attr:n,size:r,title:i}=e,a=eh(e,$m),o=r||t.size||`1em`,s;return t.className&&(s=t.className),e.className&&(s=(s?s+` `:``)+e.className),Xm.createElement(`svg`,nh({stroke:`currentColor`,fill:`currentColor`,strokeWidth:`0`},t.attr,n,a,{className:s,style:ih(ih({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:`http://www.w3.org/2000/svg`}),i&&Xm.createElement(`title`,null,i),e.children)};return Qm===void 0?t(Zm):Xm.createElement(Qm.Consumer,null,e=>t(e))}function dh(e){return lh({tag:`svg`,attr:{viewBox:`0 0 448 512`},child:[{tag:`path`,attr:{d:`M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z`},child:[]}]})(e)}function fh(e){return lh({tag:`svg`,attr:{viewBox:`0 0 448 512`},child:[{tag:`path`,attr:{d:`M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z`},child:[]}]})(e)}function ph(){return(0,G.jsx)(`footer`,{className:`app-footer footer-light`,children:(0,G.jsxs)(`div`,{className:`container`,style:{display:`flex`,flexDirection:`column`,alignItems:`center`,textAlign:`center`},children:[(0,G.jsxs)(`div`,{className:`footer-brand`,style:{display:`flex`,flexDirection:`column`,alignItems:`center`},children:[(0,G.jsx)(`div`,{className:`footer-logo`,children:`fremio`}),(0,G.jsx)(`p`,{className:`footer-tagline`,style:{marginBottom:`0.5rem`},children:`Save your moments!`}),(0,G.jsx)(`ul`,{className:`contact`,style:{display:`flex`,justifyContent:`center`,padding:0,margin:0},children:(0,G.jsxs)(`li`,{style:{display:`flex`,alignItems:`center`,justifyContent:`center`},children:[(0,G.jsx)(`span`,{className:`ico`,children:(0,G.jsx)(`svg`,{viewBox:`0 0 24 24`,"aria-hidden":`true`,children:(0,G.jsx)(`path`,{d:`M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z`})})}),(0,G.jsx)(`a`,{href:`mailto:fremioid@gmail.com`,children:`fremioid@gmail.com`})]})})]}),(0,G.jsxs)(`div`,{className:`footer-col`,style:{display:`flex`,flexDirection:`column`,alignItems:`center`},children:[(0,G.jsx)(`h4`,{children:`Follow Us`}),(0,G.jsxs)(`div`,{className:`socials`,style:{display:`flex`,justifyContent:`center`,gap:`1rem`},children:[(0,G.jsx)(`a`,{className:`social-btn ig`,href:`https://instagram.com/fremio.id`,"aria-label":`Instagram`,target:`_blank`,rel:`noopener noreferrer`,children:(0,G.jsx)(dh,{size:20})}),(0,G.jsx)(`a`,{className:`social-btn tt`,href:`https://www.tiktok.com/@fremio.id`,"aria-label":`TikTok`,target:`_blank`,rel:`noopener noreferrer`,children:(0,G.jsx)(fh,{size:20})})]})]})]})})}function mh(){let{hash:e,pathname:t}=Pe();return(0,b.useEffect)(()=>{if(e){let t=e.replace(`#`,``),n=document.getElementById(t);n&&n.scrollIntoView({behavior:`smooth`,block:`start`})}else window.scrollTo({top:0,behavior:`smooth`})},[e,t]),(0,G.jsx)(Lm,{children:(0,G.jsxs)(`div`,{className:`app-shell`,children:[(0,G.jsx)(Jm,{}),(0,G.jsx)(`main`,{className:`app-main`,children:(0,G.jsx)(ut,{})}),(0,G.jsx)(ph,{})]})})}const hh=!1,gh=null,_h=null;console.log(` VPS Mode: Firebase disabled, using VPS JWT Auth`);var vh=()=>void 0,yh=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},bh=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},xh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yh(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):bh(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new Sh;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Sh=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},Ch=function(e){let t=yh(e);return xh.encodeByteArray(t,!0)},wh=function(e){return Ch(e).replace(/\./g,``)},Th=function(e){try{return xh.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Eh(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Dh=()=>Eh().__FIREBASE_DEFAULTS__,Oh=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},kh=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Th(e[1]);return t&&JSON.parse(t)},Ah=()=>{try{return vh()||Dh()||Oh()||kh()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},jh=e=>Ah()?.emulatorHosts?.[e],Mh=()=>Ah()?.config,Nh=e=>Ah()?.[`_${e}`],Ph=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Fh(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function Ih(e){return(await fetch(e,{credentials:`include`})).ok}var Lh={};function Rh(){let e={prod:[],emulator:[]};for(let t of Object.keys(Lh))Lh[t]?e.emulator.push(t):e.prod.push(t);return e}function zh(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var Bh=!1;function Vh(e,t){if(typeof window>`u`||typeof document>`u`||!Fh(window.location.host)||Lh[e]===t||Lh[e]||Bh)return;Lh[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=Rh().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{Bh=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=zh(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Hh(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function Uh(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hh())}function Wh(){let e=Ah()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function Gh(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function Kh(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function qh(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function Jh(){let e=Hh();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function Yh(){return!Wh()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function Xh(){try{return typeof indexedDB==`object`}catch{return!1}}function Zh(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Qh=`FirebaseError`,$h=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Qh,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eg.prototype.create)}},eg=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?tg(i,n):`Error`,o=`${this.serviceName}: ${a} (${r}).`;return new $h(r,o,n)}};function tg(e,t){return e.replace(ng,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var ng=/\{\$([^}]+)}/g;function rg(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ig(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(ag(n)&&ag(a)){if(!ig(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function ag(e){return typeof e==`object`&&!!e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function og(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function sg(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function cg(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function lg(e,t){let n=new ug(e,t);return n.subscribe.bind(n)}var ug=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=dg(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=fg),r.error===void 0&&(r.error=fg),r.complete===void 0&&(r.complete=fg);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function dg(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function fg(){}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function pg(e){return e&&e._delegate?e._delegate:e}var mg=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},hg=`[DEFAULT]`,gg=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new Ph;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(vg(e))try{this.getOrInitializeService({instanceIdentifier:hg})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=hg){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hg){return this.instances.has(e)}getOptions(e=hg){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);n===i&&t.resolve(r)}return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:_g(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=hg){return this.component?this.component.multipleInstances?e:hg:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function _g(e){return e===hg?void 0:e}function vg(e){return e.instantiationMode===`EAGER`}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var yg=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new gg(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},bg=[],xg;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(xg||={});var Sg={debug:xg.DEBUG,verbose:xg.VERBOSE,info:xg.INFO,warn:xg.WARN,error:xg.ERROR,silent:xg.SILENT},Cg=xg.INFO,wg={[xg.DEBUG]:`log`,[xg.VERBOSE]:`log`,[xg.INFO]:`info`,[xg.WARN]:`warn`,[xg.ERROR]:`error`},Tg=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=wg[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Eg=class{constructor(e){this.name=e,this._logLevel=Cg,this._logHandler=Tg,this._userLogHandler=null,bg.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xg))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Sg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xg.DEBUG,...e),this._logHandler(this,xg.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xg.VERBOSE,...e),this._logHandler(this,xg.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xg.INFO,...e),this._logHandler(this,xg.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xg.WARN,...e),this._logHandler(this,xg.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xg.ERROR,...e),this._logHandler(this,xg.ERROR,...e)}},Dg=(e,t)=>t.some(t=>e instanceof t),Og,kg;function Ag(){return Og||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function jg(){return kg||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var Mg=new WeakMap,Ng=new WeakMap,Pg=new WeakMap,Fg=new WeakMap,Ig=new WeakMap;function Lg(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(Ug(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&Mg.set(t,e)}).catch(()=>{}),Ig.set(t,e),t}function Rg(e){if(Ng.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});Ng.set(e,t)}var zg={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return Ng.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||Pg.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ug(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function Bg(e){zg=e(zg)}function Vg(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(Wg(this),t,...n);return Pg.set(r,t.sort?t.sort():[t]),Ug(r)}:jg().includes(e)?function(...t){return e.apply(Wg(this),t),Ug(Mg.get(this))}:function(...t){return Ug(e.apply(Wg(this),t))}}function Hg(e){return typeof e==`function`?Vg(e):(e instanceof IDBTransaction&&Rg(e),Dg(e,Ag())?new Proxy(e,zg):e)}function Ug(e){if(e instanceof IDBRequest)return Lg(e);if(Fg.has(e))return Fg.get(e);let t=Hg(e);return t!==e&&(Fg.set(e,t),Ig.set(t,e)),t}var Wg=e=>Ig.get(e);function Gg(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=Ug(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(Ug(o.result),e.oldVersion,e.newVersion,Ug(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var Kg=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],qg=[`put`,`add`,`delete`,`clear`],Jg=new Map;function Yg(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(Jg.get(t))return Jg.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=qg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Kg.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return Jg.set(t,a),a}Bg(e=>({...e,get:(t,n,r)=>Yg(t,n)||e.get(t,n,r),has:(t,n)=>!!Yg(t,n)||e.has(t,n)}));
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Zg(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function Zg(e){return e.getComponent()?.type===`VERSION`}var Qg=`@firebase/app`,$g=`0.14.6`,e_=new Eg(`@firebase/app`),t_=`@firebase/app-compat`,n_=`@firebase/analytics-compat`,r_=`@firebase/analytics`,i_=`@firebase/app-check-compat`,a_=`@firebase/app-check`,o_=`@firebase/auth`,s_=`@firebase/auth-compat`,c_=`@firebase/database`,l_=`@firebase/data-connect`,u_=`@firebase/database-compat`,d_=`@firebase/functions`,f_=`@firebase/functions-compat`,p_=`@firebase/installations`,m_=`@firebase/installations-compat`,h_=`@firebase/messaging`,g_=`@firebase/messaging-compat`,__=`@firebase/performance`,v_=`@firebase/performance-compat`,y_=`@firebase/remote-config`,b_=`@firebase/remote-config-compat`,x_=`@firebase/storage`,S_=`@firebase/storage-compat`,C_=`@firebase/firestore`,w_=`@firebase/ai`,T_=`@firebase/firestore-compat`,E_=`firebase`,D_=`12.6.0`,O_=`[DEFAULT]`,k_={[Qg]:`fire-core`,[t_]:`fire-core-compat`,[r_]:`fire-analytics`,[n_]:`fire-analytics-compat`,[a_]:`fire-app-check`,[i_]:`fire-app-check-compat`,[o_]:`fire-auth`,[s_]:`fire-auth-compat`,[c_]:`fire-rtdb`,[l_]:`fire-data-connect`,[u_]:`fire-rtdb-compat`,[d_]:`fire-fn`,[f_]:`fire-fn-compat`,[p_]:`fire-iid`,[m_]:`fire-iid-compat`,[h_]:`fire-fcm`,[g_]:`fire-fcm-compat`,[__]:`fire-perf`,[v_]:`fire-perf-compat`,[y_]:`fire-rc`,[b_]:`fire-rc-compat`,[x_]:`fire-gcs`,[S_]:`fire-gcs-compat`,[C_]:`fire-fst`,[T_]:`fire-fst-compat`,[w_]:`fire-vertex`,"fire-js":`fire-js`,[E_]:`fire-js-all`},A_=new Map,j_=new Map,M_=new Map;function N_(e,t){try{e.container.addComponent(t)}catch(n){e_.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function P_(e){let t=e.name;if(M_.has(t))return e_.debug(`There were multiple attempts to register component ${t}.`),!1;M_.set(t,e);for(let t of A_.values())N_(t,e);for(let t of j_.values())N_(t,e);return!0}function F_(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function I_(e){return e==null?!1:e.settings!==void 0}var L_=new eg(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),R_=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new mg(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw L_.create(`app-deleted`,{appName:this._name})}},z_=D_;function B_(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:O_,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw L_.create(`bad-app-name`,{appName:String(i)});if(n||=Mh(),!n)throw L_.create(`no-options`);let a=A_.get(i);if(a){if(ig(n,a.options)&&ig(r,a.config))return a;throw L_.create(`duplicate-app`,{appName:i})}let o=new yg(i);for(let e of M_.values())o.addComponent(e);let s=new R_(n,r,o);return A_.set(i,s),s}function V_(e=O_){let t=A_.get(e);if(!t&&e===`[DEFAULT]`&&Mh())return B_();if(!t)throw L_.create(`no-app`,{appName:e});return t}function H_(e,t,n){let r=k_[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),e_.warn(e.join(` `));return}P_(new mg(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var U_=`firebase-heartbeat-database`,W_=1,G_=`firebase-heartbeat-store`,K_=null;function q_(){return K_||=Gg(U_,W_,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(G_)}catch(e){console.warn(e)}}}}).catch(e=>{throw L_.create(`idb-open`,{originalErrorMessage:e.message})}),K_}async function J_(e){try{let t=(await q_()).transaction(G_),n=await t.objectStore(G_).get(X_(e));return await t.done,n}catch(e){if(e instanceof $h)e_.warn(e.message);else{let t=L_.create(`idb-get`,{originalErrorMessage:e?.message});e_.warn(t.message)}}}async function Y_(e,t){try{let n=(await q_()).transaction(G_,`readwrite`);await n.objectStore(G_).put(t,X_(e)),await n.done}catch(e){if(e instanceof $h)e_.warn(e.message);else{let t=L_.create(`idb-set`,{originalErrorMessage:e?.message});e_.warn(t.message)}}}function X_(e){return`${e.name}!${e.options.appId}`}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Z_=1024,Q_=30,$_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider(`app`).getImmediate();this._storage=new nv(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=ev();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>Q_){let e=iv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){e_.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=ev(),{heartbeatsToSend:t,unsentEntries:n}=tv(this._heartbeatsCache.heartbeats),r=wh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return e_.warn(e),``}}};function ev(){return new Date().toISOString().substring(0,10)}function tv(e,t=Z_){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),rv(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rv(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var nv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xh()?Zh().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await J_(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Y_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Y_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function rv(e){return wh(JSON.stringify({version:2,heartbeats:e})).length}function iv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function av(e){P_(new mg(`platform-logger`,e=>new Xg(e),`PRIVATE`)),P_(new mg(`heartbeat`,e=>new $_(e),`PRIVATE`)),H_(Qg,$g,e),H_(Qg,$g,`esm2020`),H_(`fire-js`,``)}av(``);var ov=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},sv={},cv,lv;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,lv=sv.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,cv=sv.Integer=o}).apply(ov===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:ov);var uv=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},dv={},fv,pv,mv,hv,gv,_v,vv,yv;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof uv==`object`&&uv];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,C=new v,w=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(T)}};function T(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}S=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function k(e){return/^[\s\xa0]*$/.test(e)}function A(e,t){D.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(A,D),A.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&A.Z.h.call(this)},A.prototype.h=function(){A.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j=`closure_listenable_`+(Math.random()*1e6|0),M=0;function N(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++M,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ee(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function F(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function I(e){let t={};for(let n in e)t[n]=e[n];return t}let L=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function R(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<L.length;t++)n=L[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function te(e){this.src=e,this.g={},this.h=0}te.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=B(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new N(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function z(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(P(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var V=`closure_lm_`+(Math.random()*1e6|0),H={};function ne(e,t,n,r,i){if(r&&r.once)return ie(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)ne(e,t[a],n,r,i);return null}return n=de(n),e&&e[j]?e.J(t,n,s(r)?!!r.capture:!!r,i):re(e,t,n,!1,r,i)}function re(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=le(e);if(c||(e[V]=c=new te(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=U(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(se(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function U(){function e(n){return t.call(e.src,e.listener,n)}let t=ce;return e}function ie(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)ie(e,t[a],n,r,i);return null}return n=de(n),e&&e[j]?e.K(t,n,s(r)?!!r.capture:!!r,i):re(e,t,n,!0,r,i)}function ae(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ae(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=de(n),e&&e[j]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=B(t,n,r,i),n>-1&&(P(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=le(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=e>-1?t[e]:null)&&oe(n))}function oe(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[j])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(se(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=le(t))?(z(n,e),n.h==0&&(n.src=null,t[V]=null)):P(e)}}}function se(e){return e in H?H[e]:H[e]=`on`+e}function ce(e,t){if(e.da)e=!0;else{t=new A(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&oe(e),e=n.call(r,t)}return e}function le(e){return e=e[V],e instanceof te?e:null}var ue=`__closure_events_fn_`+(Math.random()*1e9>>>0);function de(e){return typeof e==`function`?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function fe(){E.call(this),this.i=new te(this),this.M=this,this.G=null}d(fe,E),fe.prototype[j]=!0,fe.prototype.removeEventListener=function(e,t,n,r){ae(this,e,t,n,r)};function pe(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;t=new D(r,e),R(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=me(a,r,!0,t)&&i;if(a=t.g=e,i=me(a,r,!0,t)&&i,i=me(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=me(a,r,!1,t)&&i}fe.prototype.N=function(){if(fe.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)P(n[e]);delete e.g[t],e.h--}}this.G=null},fe.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},fe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function me(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&z(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function he(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function ge(e){e.g=he(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class _e extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(e){E.call(this),this.h=e,this.g={}}d(ve,E);var ye=[];function be(e){ee(e.g,function(e,t){this.g.hasOwnProperty(t)&&oe(e)},e),e.g={}}ve.prototype.N=function(){ve.Z.N.call(this),be(this)},ve.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var xe=o.JSON.stringify,Se=o.JSON.parse,Ce=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function we(){}function Te(){}var Ee={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function De(){D.call(this,`d`)}d(De,D);function Oe(){D.call(this,`c`)}d(Oe,D);var ke={},Ae=null;function je(){return Ae||=new fe}ke.Ia=`serverreachability`;function Me(e){D.call(this,ke.Ia,e)}d(Me,D);function Ne(e){let t=je();pe(t,new Me(t))}ke.STAT_EVENT=`statevent`;function Pe(e,t){D.call(this,ke.STAT_EVENT,e),this.stat=t}d(Pe,D);function Fe(e){let t=je();pe(t,new Pe(t,e))}ke.Ja=`timingevent`;function Ie(e,t){D.call(this,ke.Ja,e),this.size=t}d(Ie,D);function Le(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function Re(){this.g=!0}Re.prototype.ua=function(){this.g=!1};function ze(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function Be(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function Ve(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+Ue(e,n)+(r?` `+r:``)})}function He(e,t){e.info(function(){return`TIMEOUT: `+t})}Re.prototype.info=function(){};function Ue(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return xe(a)}catch{return t}}var We={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ge={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},Ke;function qe(){}d(qe,we),qe.prototype.g=function(){return new XMLHttpRequest},Ke=new qe;function Je(e){return encodeURIComponent(String(e))}function Ye(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function Xe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ve(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ze}function Ze(){this.i=null,this.g=``,this.h=!1}var Qe={},$e={};function et(e,t,n){e.M=1,e.A=Dt(St(t)),e.u=n,e.R=!0,tt(e,null)}function tt(e,t){e.F=Date.now(),at(e),e.B=St(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Vt(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new Ze,e.g=Mn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new _e(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(ye[0]=i.toString()),i=ye);for(let e=0;e<i.length;e++){let a=ne(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?I(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Ne(),ze(e.i,e.v,e.B,e.l,e.S,e.u)}Xe.prototype.ba=function(e){e=e.target;let t=this.O;t&&un(e)==3?t.j():this.Y(e)},Xe.prototype.Y=function(e){try{if(e==this.g)a:{let s=un(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||s!=4||c==7||Ne(c==8||l<=0?3:2),st(this);var t=this.g.ca();this.X=t;var n=nt(this);if(this.o=t==200,Be(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!k(r)){var a=r;break b}}a=null}if(e=a)Ve(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,ut(this,e);else{this.o=!1,this.m=3,Fe(12),lt(this),ct(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=it(this,n),t==$e){s==4&&(this.m=4,Fe(14),e=!1),Ve(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==Qe){this.m=4,Fe(15),Ve(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else Ve(this.i,this.l,t,null),ut(this,t);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Fe(16),e=!1),this.o=this.o&&e,!e)Ve(this.i,this.l,n,`[Invalid Chunked Response]`),lt(this),ct(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),Tn(o),o.P=!0,Fe(11))}}else Ve(this.i,this.l,n,null),ut(this,n);s==4&&lt(this),this.o&&!this.K&&(s==4?On(this.j,this):(this.o=!1,at(this)))}else fn(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Fe(12)):(this.m=0,Fe(13)),lt(this),ct(this)}}}catch{}};function nt(e){if(!rt(e))return e.g.la();let t=dn(e.g);if(t===``)return``;let n=``,r=t.length,i=un(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return lt(e),ct(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function rt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function it(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?$e:(n=Number(t.substring(n,r)),isNaN(n)?Qe:(r+=1,r+n>t.length?$e:(t=t.slice(r,r+n),e.C=r+n,t)))}Xe.prototype.cancel=function(){this.K=!0,lt(this)};function at(e){e.T=Date.now()+e.H,ot(e,e.H)}function ot(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=Le(l(e.aa,e),t)}function st(e){e.D&&=(o.clearTimeout(e.D),null)}Xe.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(He(this.i,this.B),this.M!=2&&(Ne(),Fe(17)),lt(this),this.m=2,ct(this)):ot(this,this.T-e)};function ct(e){e.j.I==0||e.K||On(e.j,e)}function lt(e){st(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,be(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function ut(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||ht(n.h,e))){if(!e.L&&ht(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Dn(n),gn(n);else break a;wn(n),Fe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=Le(l(n.Va,n),6e3));mt(n.h)<=1&&n.ta&&(n.ta=void 0)}else kn(n,11)}else if((e.L||n.g==e)&&Dn(n),!k(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(gt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,Et(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=jn(r,r.L?r.ba:null,r.W),o.L){_t(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(st(s),at(s)),r.g=o}else Cn(r);n.i.length>0&&vn(n)}else l[0]!=`stop`&&l[0]!=`close`||kn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?kn(n,7):hn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Ne(4)}catch{}}var dt=class{constructor(e,t){this.g=e,this.map=t}};function ft(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function mt(e){return e.h?1:e.g?e.g.size:0}function ht(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function gt(e,t){e.g?e.g.add(t):e.h=t}function _t(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}ft.prototype.cancel=function(){if(this.i=vt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function vt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var yt=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function bt(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function xt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof xt?(this.l=e.l,Ct(this,e.j),this.o=e.o,this.g=e.g,wt(this,e.u),this.h=e.h,Tt(this,Ht(e.i)),this.m=e.m):e&&(t=String(e).match(yt))?(this.l=!1,Ct(this,t[1]||``,!0),this.o=Ot(t[2]||``),this.g=Ot(t[3]||``,!0),wt(this,t[4]),this.h=Ot(t[5]||``,!0),Tt(this,t[6]||``,!0),this.m=Ot(t[7]||``)):(this.l=!1,this.i=new It(null,this.l))}xt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(kt(t,jt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(kt(t,jt,!0),`@`),e.push(Je(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(kt(n,n.charAt(0)==`/`?Nt:Mt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,kt(n,Ft)),e.join(``)},xt.prototype.resolve=function(e){let t=St(this),n=!!e.j;n?Ct(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)wt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Tt(t,Ht(e.i)):n=!!e.m,n&&(t.m=e.m),t};function St(e){return new xt(e)}function Ct(e,t,n){e.j=n?Ot(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function wt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Tt(e,t,n){t instanceof It?(e.i=t,Wt(e.i,e.l)):(n||(t=kt(t,Pt)),e.i=new It(t,e.l))}function Et(e,t,n){e.i.set(t,n)}function Dt(e){return Et(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Ot(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function kt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,At),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function At(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var jt=/[#\/\?@]/g,Mt=/[#\?:]/g,Nt=/[#\?]/g,Pt=/[#\?@]/g,Ft=/#/g;function It(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Lt(e){e.g||(e.g=new Map,e.h=0,e.i&&bt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=It.prototype,e.add=function(e,t){Lt(this),this.i=null,e=Ut(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Rt(e,t){Lt(e),t=Ut(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function zt(e,t){return Lt(e),t=Ut(e,t),e.g.has(t)}e.forEach=function(e,t){Lt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function Bt(e,t){Lt(e);let n=[];if(typeof t==`string`)zt(e,t)&&(n=n.concat(e.g.get(Ut(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Lt(this),this.i=null,e=Ut(this,e),zt(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=Bt(this,e),e.length>0?String(e[0]):t):t};function Vt(e,t,n){Rt(e,t),n.length>0&&(e.i=null,e.g.set(Ut(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=Je(n);n=Bt(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+Je(n[t])),e.push(r)}}return this.i=e.join(`&`)};function Ht(e){let t=new It;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Ut(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Wt(e,t){t&&!e.j&&(Lt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(Rt(this,t),Vt(this,n,e))},e)),e.j=t}function Gt(e,t){let n=new Re;if(o.Image){let r=new Image;r.onload=u(qt,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(qt,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(qt,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(qt,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Kt(e,t){let n=new Re,r=new AbortController,i=setTimeout(()=>{r.abort(),qt(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?qt(n,`TestPingServer: ok`,!0,t):qt(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),qt(n,`TestPingServer: error`,!1,t)})}function qt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function Jt(){this.g=new Ce}function Yt(e){this.i=e.Sb||null,this.h=e.ab||!1}d(Yt,we),Yt.prototype.g=function(){return new Xt(this.i,this.h)};function Xt(e,t){fe.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Xt,fe),e=Xt.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,$t(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$t(this)),this.g&&(this.readyState=3,$t(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;Zt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Qt(this):$t(this),this.readyState==3&&Zt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Qt(this))},e.Na=function(e){this.g&&(this.response=e,Qt(this))},e.ga=function(){this.g&&Qt(this)};function Qt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,$t(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function $t(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Xt.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function en(e){let t=``;return ee(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function tn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=en(n),typeof e==`string`||Et(e,t,n))}function nn(e){fe.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(nn,fe);var rn=/^https?$/i,an=[`POST`,`PUT`];e=nn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ke.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){on(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(an,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){on(this,e)}};function on(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,sn(e),ln(e)}function sn(e){e.A||(e.A=!0,pe(e,`complete`),pe(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,pe(this,`complete`),pe(this,`abort`),ln(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ln(this,!0)),nn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?cn(this):this.Xa())},e.Xa=function(){cn(this)};function cn(e){if(e.h&&a!==void 0){if(e.v&&un(e)==4)setTimeout(e.Ca.bind(e),0);else if(pe(e,`readystatechange`),un(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(yt)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!rn.test(t?t.toLowerCase():``)}n=r}if(n)pe(e,`complete`),pe(e,`success`);else{e.o=6;try{var i=un(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,sn(e)}}finally{ln(e)}}}}function ln(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||pe(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function un(e){return e.g?e.g.readyState:0}e.ca=function(){try{return un(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Se(t)}};function dn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function fn(e){let t={};e=(e.g&&un(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=Ye(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}F(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function pn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function mn(e){this.za=0,this.i=[],this.j=new Re,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pn(`baseRetryDelayMs`,5e3,e),this.Za=pn(`retryDelaySeedMs`,1e4,e),this.Ta=pn(`forwardChannelMaxRetries`,2,e),this.va=pn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new ft(e&&e.concurrentRequestLimit),this.Ba=new Jt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=mn.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Fe(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=jn(this,null,this.W),vn(this)};function hn(e){if(_n(e),e.I==3){var t=e.V++,n=St(e.J);if(Et(n,`SID`,e.M),Et(n,`RID`,t),Et(n,`TYPE`,`terminate`),xn(e,n),t=new Xe(e,e.j,t),t.M=2,t.A=Dt(St(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Mn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),at(t)}An(e)}function gn(e){e.g&&=(Tn(e),e.g.cancel(),null)}function _n(e){gn(e),e.v&&=(o.clearTimeout(e.v),null),Dn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function vn(e){if(!pt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||w(),S||=(x(),!0),C.add(t,e),e.D=0}}function yn(e,t){return mt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=Le(l(e.Ea,e,t),W(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new Xe(this,this.j,e),a=this.o;if(this.U&&(a?(a=I(a),R(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Sn(this,i,t),n=St(this.J),Et(n,`RID`,e),Et(n,`CVER`,22),this.G&&Et(n,`X-HTTP-Session-Id`,this.G),xn(this,n),a&&(this.R?t=`headers=`+Je(en(a))+`&`+t:this.u&&tn(n,this.u,a)),gt(this.h,i),this.Ra&&Et(n,`TYPE`,`init`),this.S?(Et(n,`$req`,t),Et(n,`SID`,`null`),i.U=!0,et(i,n,null)):et(i,n,t),this.I=2}}else this.I==3&&(e?bn(this,e):this.i.length==0||pt(this.h)||bn(this))};function bn(e,t){var n=t?t.l:e.V++;let r=St(e.J);Et(r,`SID`,e.M),Et(r,`RID`,n),Et(r,`AID`,e.K),xn(e,r),e.u&&e.o&&tn(r,e.u,e.o),n=new Xe(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Sn(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),gt(e.h,n),et(n,r,t)}function xn(e,t){e.H&&ee(e.H,function(e,n){Et(t,n,e)}),e.l&&ee({},function(e,n){Et(t,n,e)})}function Sn(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=xe(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Cn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||w(),S||=(x(),!0),C.add(t,e),e.A=0}}function wn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=Le(l(e.Da,e),W(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,En(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=Le(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Fe(10),gn(this),En(this))};function Tn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function En(e){e.g=new Xe(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=St(e.na);Et(t,`RID`,`rpc`),Et(t,`SID`,e.M),Et(t,`AID`,e.K),Et(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&Et(t,`TO`,e.ia),Et(t,`TYPE`,`xmlhttp`),xn(e,t),e.u&&e.o&&tn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Dt(St(t)),n.u=null,n.R=!0,tt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,gn(this),wn(this),Fe(19))};function Dn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function On(e,t){var n=null;if(e.g==t){Dn(e),Tn(e),e.g=null;var r=2}else if(ht(e.h,t))n=t.G,_t(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=je(),pe(r,new Ie(r,n)),vn(e)}else Cn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&yn(e,t)||r==2&&wn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:kn(e,5);break;case 4:kn(e,10);break;case 3:kn(e,6);break;default:kn(e,2)}}}function W(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function kn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new xt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Ct(r,`https`),Dt(r),t?Gt(r.toString(),n):Kt(r.toString(),n)}else Fe(2);e.I=0,e.l&&e.l.pa(t),An(e),_n(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Fe(2)):(this.j.info(`Failed to ping google.com`),Fe(1))};function An(e){if(e.I=0,e.ja=[],e.l){let t=vt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function jn(e,t,n){var r=n instanceof xt?St(n):new xt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),wt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new xt(null);r&&Ct(e,r),t&&(e.g=t),i&&wt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&Et(r,n,t),Et(r,`VER`,e.ka),xn(e,r),r}function Mn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new nn(new Yt({ab:n})):new nn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function G(){}e=G.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Nn(){}Nn.prototype.g=function(e,t){return new Pn(e,t)};function Pn(e,t){fe.call(this),this.g=new mn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!k(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!k(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Ln(this)}d(Pn,fe),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){hn(this.g)},Pn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=xe(e),e=n);t.i.push(new dt(t.Ya++,e)),t.I==3&&vn(t)},Pn.prototype.N=function(){this.g.l=null,delete this.j,hn(this.g),delete this.g,Pn.Z.N.call(this)};function Fn(e){De.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Fn,De);function In(){Oe.call(this),this.status=1}d(In,Oe);function Ln(e){this.g=e}d(Ln,G),Ln.prototype.ra=function(){pe(this.g,`a`)},Ln.prototype.qa=function(e){pe(this.g,new Fn(e))},Ln.prototype.pa=function(e){pe(this.g,new In)},Ln.prototype.oa=function(){pe(this.g,`b`)},Nn.prototype.createWebChannel=Nn.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,yv=dv.createWebChannelTransport=function(){return new Nn},vv=dv.getStatEventTarget=function(){return je()},_v=dv.Event=ke,gv=dv.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,hv=dv.ErrorCode=We,Ge.COMPLETE=`complete`,mv=dv.EventType=Ge,Te.EventType=Ee,Ee.OPEN=`a`,Ee.CLOSE=`b`,Ee.ERROR=`c`,Ee.MESSAGE=`d`,fe.prototype.listen=fe.prototype.J,pv=dv.WebChannel=Te,dv.FetchXmlHttpFactory=Yt,nn.prototype.listenOnce=nn.prototype.K,nn.prototype.getLastError=nn.prototype.Ha,nn.prototype.getLastErrorCode=nn.prototype.ya,nn.prototype.getStatus=nn.prototype.ca,nn.prototype.getResponseJson=nn.prototype.La,nn.prototype.getResponseText=nn.prototype.la,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Fa,fv=dv.XhrIo=nn}).apply(uv===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:uv);var bv=`@firebase/firestore`,xv=`4.9.2`,Sv=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Sv.UNAUTHENTICATED=new Sv(null),Sv.GOOGLE_CREDENTIALS=new Sv(`google-credentials-uid`),Sv.FIRST_PARTY=new Sv(`first-party-uid`),Sv.MOCK_USER=new Sv(`mock-user`);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Cv=`12.3.0`,wv=new Eg(`@firebase/firestore`);function Tv(){return wv.logLevel}function Y(e,...t){if(wv.logLevel<=xg.DEBUG){let n=t.map(Ov);wv.debug(`Firestore (${Cv}): ${e}`,...n)}}function Ev(e,...t){if(wv.logLevel<=xg.ERROR){let n=t.map(Ov);wv.error(`Firestore (${Cv}): ${e}`,...n)}}function Dv(e,...t){if(wv.logLevel<=xg.WARN){let n=t.map(Ov);wv.warn(`Firestore (${Cv}): ${e}`,...n)}}function Ov(e){if(typeof e==`string`)return e;try{
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
return function(e){return JSON.stringify(e)}(e)}catch{return e}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kv(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Av(e,r,n)}function Av(e,t,n){let r=`FIRESTORE (${Cv}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Ev(r),Error(r)}function jv(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Av(t,i,r)}function Mv(e,t){return e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},Z=class extends $h{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Nv=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},Pv=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Fv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Sv.UNAUTHENTICATED)))}shutdown(){}},Iv=class{constructor(e){this.t=e,this.currentUser=Sv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){jv(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Nv;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nv,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Y(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(Y(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Nv)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(jv(typeof t.accessToken==`string`,31837,{l:t}),new Pv(t.accessToken,this.currentUser)):null:(Y(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return jv(e===null||typeof e==`string`,2055,{h:e}),new Sv(e)}},Lv=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Sv.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},Rv=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Lv(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Sv.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},zv=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},Bv=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,I_(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){jv(this.o===void 0,3512);let n=e=>{e.error!=null&&Y(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,Y(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{Y(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):Y(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(jv(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new zv(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Vv(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Hv=class{static newId(){let e=``;for(;e.length<20;){let t=Vv(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function Uv(e,t){return e<t?-1:e>t?1:0}function Wv(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return qv(n)===qv(i)?Uv(n,i):qv(n)?1:-1}return Uv(e.length,t.length)}var Gv=55296,Kv=57343;function qv(e){let t=e.charCodeAt(0);return t>=Gv&&t<=Kv}function Jv(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Yv=`__name__`,Xv=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&kv(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&kv(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return Uv(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):Wv(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return cv.fromString(e.substring(4,e.length-2))}},Zv=class e extends Xv{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new Z(X.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},Qv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$v=class e extends Xv{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return Qv.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yv}static keyField(){return new e([Yv])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new Z(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new Z(X.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new Z(X.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new Z(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},ey=class e{constructor(e){this.path=e}static fromPath(t){return new e(Zv.fromString(t))}static fromName(t){return new e(Zv.fromString(t).popFirst(5))}static empty(){return new e(Zv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zv.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Zv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new Zv(t.slice()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ty(e,t,n){if(!n)throw new Z(X.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ny(e,t,n,r){if(!0===t&&!0===r)throw new Z(X.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ry(e){if(!ey.isDocumentKey(e))throw new Z(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function iy(e){if(ey.isDocumentKey(e))throw new Z(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ay(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function oy(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:kv(12329,{type:typeof e})}function sy(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Z(X.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=oy(e);throw new Z(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function cy(e,t){let n={typeString:e};return t&&(n.value=t),n}function ly(e,t){if(!ay(e))throw new Z(X.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Z(X.INVALID_ARGUMENT,n);return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var uy=-62135596800,dy=1e6,fy=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*dy);return new e(n,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new Z(X.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<uy||e>=253402300800)throw new Z(X.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dy}_compareTo(e){return this.seconds===e.seconds?Uv(this.nanoseconds,e.nanoseconds):Uv(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ly(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-uy;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};fy._jsonSchemaVersion=`firestore/timestamp/1.0`,fy._jsonSchema={type:cy(`string`,fy._jsonSchemaVersion),seconds:cy(`number`),nanoseconds:cy(`number`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var py=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new fy(0,0))}static max(){return new e(new fy(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},my=-1,hy=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};hy.UNKNOWN_ID=-1;function gy(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=py.fromTimestamp(r===1e9?new fy(n+1,0):new fy(n,r));return new vy(i,ey.empty(),t)}function _y(e){return new vy(e.readTime,e.key,my)}var vy=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(py.min(),ey.empty(),my)}static max(){return new e(py.max(),ey.empty(),my)}};function yy(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=ey.comparator(e.documentKey,t.documentKey),n===0?Uv(e.largestBatchId,t.largestBatchId):n):n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var by=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,xy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Sy(e){if(e.code!==X.FAILED_PRECONDITION||e.message!==by)throw e;Y(`LocalStore`,`Unexpectedly lost primary lease`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Q=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&kv(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function Cy(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function wy(e){return e.name===`IndexedDbTransactionError`}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ty=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Ty.ce=-1;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ey=-1;function Dy(e){return e==null}function Oy(e){return e===0&&1/e==-1/0}function ky(e){return typeof e==`number`&&Number.isInteger(e)&&!Oy(e)&&e<=2**53-1&&e>=-(2**53-1)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ay=``;function jy(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=Ny(t)),t=My(e.get(n),t);return Ny(t)}function My(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case Ay:n+=``;break;default:n+=r}}return n}function Ny(e){return e+Ay+``}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Py(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fy(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Iy(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ly=class e{constructor(e,t){this.comparator=e,this.root=t||zy.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,zy.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zy.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ry(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ry(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ry(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ry(this.root,e,this.comparator,!0)}},Ry=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},zy=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kv(43730,{key:this.key,value:this.value});if(this.right.isRed())throw kv(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw kv(27949);return e+(this.isRed()?0:1)}};zy.EMPTY=null,zy.RED=!0,zy.BLACK=!1,zy.EMPTY=new class{constructor(){this.size=0}get key(){throw kv(57766)}get value(){throw kv(16141)}get color(){throw kv(16727)}get left(){throw kv(29726)}get right(){throw kv(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new zy(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var By=class e{constructor(e){this.comparator=e,this.data=new Ly(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vy(this.data.getIterator())}getIteratorFrom(e){return new Vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},Vy=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},Hy=class e{constructor(e){this.fields=e,e.sort($v.comparator)}static empty(){return new e([])}unionWith(t){let n=new By($v.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jv(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},Uy=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},Wy=class e{constructor(e){this.binaryString=e}static fromBase64String(t){let n=function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new Uy(`Invalid base64 string: `+e):e}}(t);return new e(n)}static fromUint8Array(t){let n=function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Uv(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Wy.EMPTY_BYTE_STRING=new Wy(``);var Gy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ky(e){if(jv(!!e,39018),typeof e==`string`){let t=0,n=Gy.exec(e);if(jv(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:qy(e.seconds),nanos:qy(e.nanos)}}function qy(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Jy(e){return typeof e==`string`?Wy.fromBase64String(e):Wy.fromUint8Array(e)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Yy=`server_timestamp`,Xy=`__type__`,Zy=`__previous_value__`,Qy=`__local_write_time__`;function $y(e){return(e?.mapValue?.fields||{})[Xy]?.stringValue===Yy}function eb(e){let t=e.mapValue.fields[Zy];return $y(t)?eb(t):t}function tb(e){let t=Ky(e.mapValue.fields[Qy].timestampValue);return new fy(t.seconds,t.nanos)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nb=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},rb=`(default)`,ib=class e{constructor(e,t){this.projectId=e,this.database=t||rb}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===rb}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},ab=`__type__`,ob=`__max__`,sb={mapValue:{fields:{__type__:{stringValue:ob}}}},cb=`__vector__`,lb=`value`;function ub(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?$y(e)?4:Db(e)?9007199254740991:Tb(e)?10:11:kv(28295,{value:e})}function db(e,t){if(e===t)return!0;let n=ub(e);if(n!==ub(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tb(e).isEqual(tb(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=Ky(e.timestampValue),r=Ky(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Jy(e.bytesValue).isEqual(Jy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qy(e.geoPointValue.latitude)===qy(t.geoPointValue.latitude)&&qy(e.geoPointValue.longitude)===qy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return qy(e.integerValue)===qy(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=qy(e.doubleValue),r=qy(t.doubleValue);return n===r?Oy(n)===Oy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jv(e.arrayValue.values||[],t.arrayValue.values||[],db);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Py(n)!==Py(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!db(n[e],r[e])))return!1;return!0}(e,t);default:return kv(52216,{left:e})}}function fb(e,t){return(e.values||[]).find((e=>db(e,t)))!==void 0}function pb(e,t){if(e===t)return 0;let n=ub(e),r=ub(t);if(n!==r)return Uv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Uv(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=qy(e.integerValue||e.doubleValue),r=qy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return mb(e.timestampValue,t.timestampValue);case 4:return mb(tb(e),tb(t));case 5:return Wv(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Jy(e),r=Jy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=Uv(n[e],r[e]);if(t!==0)return t}return Uv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=Uv(qy(e.latitude),qy(t.latitude));return n===0?Uv(qy(e.longitude),qy(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return hb(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[lb]?.arrayValue,a=r[lb]?.arrayValue,o=Uv(i?.values?.length||0,a?.values?.length||0);return o===0?hb(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===sb.mapValue&&t===sb.mapValue)return 0;if(e===sb.mapValue)return 1;if(t===sb.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=Wv(r[e],a[e]);if(t!==0)return t;let o=pb(n[r[e]],i[a[e]]);if(o!==0)return o}return Uv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw kv(23264,{he:n})}}function mb(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return Uv(e,t);let n=Ky(e),r=Ky(t),i=Uv(n.seconds,r.seconds);return i===0?Uv(n.nanos,r.nanos):i}function hb(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=pb(n[e],r[e]);if(t)return t}return Uv(n.length,r.length)}function gb(e){return _b(e)}function _b(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=Ky(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Jy(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return ey.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=_b(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${_b(e.fields[i])}`;return n+`}`}(e.mapValue):kv(61005,{value:e})}function vb(e){switch(ub(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=eb(e);return t?16+vb(t):16;case 5:return 2*e.stringValue.length;case 6:return Jy(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+vb(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Fy(e.fields,((e,n)=>{t+=e.length+vb(n)})),t}(e.mapValue);default:throw kv(13486,{value:e})}}function yb(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function bb(e){return!!e&&`integerValue`in e}function xb(e){return!!e&&`arrayValue`in e}function Sb(e){return!!e&&`nullValue`in e}function Cb(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function wb(e){return!!e&&`mapValue`in e}function Tb(e){return(e?.mapValue?.fields||{})[ab]?.stringValue===cb}function Eb(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return Fy(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Eb(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Eb(e.arrayValue.values[n]);return t}return{...e}}function Db(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ob}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ob=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!wb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eb(t)}setAll(e){let t=$v.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Eb(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());wb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return db(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];wb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fy(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(Eb(this.value))}};function kb(e){let t=[];return Fy(e.fields,((e,n)=>{let r=new $v([e]);if(wb(n)){let e=kb(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new Hy(t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ab=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,py.min(),py.min(),py.min(),Ob.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,py.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,py.min(),py.min(),Ob.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,py.min(),py.min(),Ob.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(py.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ob.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ob.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=py.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},jb=class{constructor(e,t){this.position=e,this.inclusive=t}};function Mb(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ey.comparator(ey.fromName(o.referenceValue),n.key):pb(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function Nb(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!db(e.position[n],t.position[n]))return!1;return!0}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Pb=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Fb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ib=class{},Lb=class e extends Ib{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new Gb(t,n,r):n===`array-contains`?new Yb(t,r):n===`in`?new Xb(t,r):n===`not-in`?new Zb(t,r):n===`array-contains-any`?new Qb(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new Kb(e,n):new qb(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(pb(t,this.value)):t!==null&&ub(this.value)===ub(t)&&this.matchesComparison(pb(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return kv(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rb=class e extends Ib{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return zb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function zb(e){return e.op===`and`}function Bb(e){return Vb(e)&&zb(e)}function Vb(e){for(let t of e.filters)if(t instanceof Rb)return!1;return!0}function Hb(e){if(e instanceof Lb)return e.field.canonicalString()+e.op.toString()+gb(e.value);if(Bb(e))return e.filters.map((e=>Hb(e))).join(`,`);{let t=e.filters.map((e=>Hb(e))).join(`,`);return`${e.op}(${t})`}}function Ub(e,t){return e instanceof Lb?function(e,t){return t instanceof Lb&&e.op===t.op&&e.field.isEqual(t.field)&&db(e.value,t.value)}(e,t):e instanceof Rb?function(e,t){return t instanceof Rb&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&Ub(n,t.filters[r])),!0):!1}(e,t):void kv(19439)}function Wb(e){return e instanceof Lb?function(e){return`${e.field.canonicalString()} ${e.op} ${gb(e.value)}`}(e):e instanceof Rb?function(e){return e.op.toString()+` {`+e.getFilters().map(Wb).join(` ,`)+`}`}(e):`Filter`}var Gb=class extends Lb{constructor(e,t,n){super(e,t,n),this.key=ey.fromName(n.referenceValue)}matches(e){let t=ey.comparator(e.key,this.key);return this.matchesComparison(t)}},Kb=class extends Lb{constructor(e,t){super(e,`in`,t),this.keys=Jb(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},qb=class extends Lb{constructor(e,t){super(e,`not-in`,t),this.keys=Jb(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function Jb(e,t){return(t.arrayValue?.values||[]).map((e=>ey.fromName(e.referenceValue)))}var Yb=class extends Lb{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return xb(t)&&fb(t.arrayValue,this.value)}},Xb=class extends Lb{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&fb(this.value.arrayValue,t)}},Zb=class extends Lb{constructor(e,t){super(e,`not-in`,t)}matches(e){if(fb(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fb(this.value.arrayValue,t)}},Qb=class extends Lb{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!xb(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>fb(this.value.arrayValue,e)))}},$b=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function ex(e,t=null,n=[],r=[],i=null,a=null,o=null){return new $b(e,t,n,r,i,a,o)}function tx(e){let t=Mv(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>Hb(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),Dy(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>gb(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>gb(e))).join(`,`)),t.Te=e}return t.Te}function nx(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Fb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ub(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Nb(e.startAt,t.startAt)&&Nb(e.endAt,t.endAt)}function rx(e){return ey.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ix=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function ax(e,t,n,r,i,a,o,s){return new ix(e,t,n,r,i,a,o,s)}function ox(e){return new ix(e)}function sx(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function cx(e){return e.collectionGroup!==null}function lx(e){let t=Mv(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new By($v.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Pb(r,n))})),e.has($v.keyField().canonicalString())||t.Ie.push(new Pb($v.keyField(),n))}return t.Ie}function ux(e){let t=Mv(e);return t.Ee||=dx(t,lx(e)),t.Ee}function dx(e,t){if(e.limitType===`F`)return ex(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Pb(e.field,t)}));let n=e.endAt?new jb(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new jb(e.startAt.position,e.startAt.inclusive):null;return ex(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function fx(e,t){let n=e.filters.concat([t]);return new ix(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function px(e,t,n){return new ix(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mx(e,t){return nx(ux(e),ux(t))&&e.limitType===t.limitType}function hx(e){return`${tx(ux(e))}|lt:${e.limitType}`}function gx(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Wb(e))).join(`, `)}]`),Dy(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>gb(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>gb(e))).join(`,`)),`Target(${t})`}(ux(e))}; limitType=${e.limitType})`}function _x(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?ey.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of lx(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Mb(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,lx(e),t)||e.endAt&&!function(e,t,n){let r=Mb(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,lx(e),t))}(e,t)}function vx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function yx(e){return(t,n)=>{let r=!1;for(let i of lx(e)){let e=bx(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function bx(e,t,n){let r=e.field.isKeyField()?ey.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?pb(r,i):kv(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return kv(19790,{direction:e.dir})}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var xx=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fy(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return Iy(this.inner)}size(){return this.innerSize}},Sx=new Ly(ey.comparator);function Cx(){return Sx}var wx=new Ly(ey.comparator);function Tx(...e){let t=wx;for(let n of e)t=t.insert(n.key,n);return t}function Ex(e){let t=wx;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Dx(){return kx()}function Ox(){return kx()}function kx(){return new xx((e=>e.toString()),((e,t)=>e.isEqual(t)))}var Ax=new Ly(ey.comparator),jx=new By(ey.comparator);function Mx(...e){let t=jx;for(let n of e)t=t.add(n);return t}var Nx=new By(Uv);function Px(){return Nx}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Fx(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Oy(t)?`-0`:t}}function Ix(e){return{integerValue:``+e}}function Lx(e,t){return ky(t)?Ix(t):Fx(e,t)}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Rx=class{constructor(){this._=void 0}};function zx(e,t,n){return e instanceof Hx?function(e,t){let n={fields:{[Xy]:{stringValue:Yy},[Qy]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&$y(t)&&(t=eb(t)),t&&(n.fields[Zy]=t),{mapValue:n}}(n,t):e instanceof Ux?Wx(e,t):e instanceof Gx?Kx(e,t):function(e,t){let n=Vx(e,t),r=Jx(n)+Jx(e.Ae);return bb(n)&&bb(e.Ae)?Ix(r):Fx(e.serializer,r)}(e,t)}function Bx(e,t,n){return e instanceof Ux?Wx(e,t):e instanceof Gx?Kx(e,t):n}function Vx(e,t){return e instanceof qx?function(e){return bb(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var Hx=class extends Rx{},Ux=class extends Rx{constructor(e){super(),this.elements=e}};function Wx(e,t){let n=Yx(t);for(let t of e.elements)n.some((e=>db(e,t)))||n.push(t);return{arrayValue:{values:n}}}var Gx=class extends Rx{constructor(e){super(),this.elements=e}};function Kx(e,t){let n=Yx(t);for(let t of e.elements)n=n.filter((e=>!db(e,t)));return{arrayValue:{values:n}}}var qx=class extends Rx{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function Jx(e){return qy(e.integerValue||e.doubleValue)}function Yx(e){return xb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xx=class{constructor(e,t){this.field=e,this.transform=t}};function Zx(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ux&&t instanceof Ux||e instanceof Gx&&t instanceof Gx?Jv(e.elements,t.elements,db):e instanceof qx&&t instanceof qx?db(e.Ae,t.Ae):e instanceof Hx&&t instanceof Hx}(e.transform,t.transform)}var Qx=class{constructor(e,t){this.version=e,this.transformResults=t}},$x=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function eS(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var tS=class{};function nS(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new fS(e.key,$x.none()):new sS(e.key,e.data,$x.none());{let n=e.data,r=Ob.empty(),i=new By($v.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new cS(e.key,r,new Hy(i.toArray()),$x.none())}}function rS(e,t,n){e instanceof sS?function(e,t,n){let r=e.value.clone(),i=uS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cS?function(e,t,n){if(!eS(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=uS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(lS(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function iS(e,t,n,r){return e instanceof sS?function(e,t,n,r){if(!eS(e.precondition,t))return n;let i=e.value.clone(),a=dS(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof cS?function(e,t,n,r){if(!eS(e.precondition,t))return n;let i=dS(e.fieldTransforms,r,t),a=t.data;return a.setAll(lS(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return eS(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function aS(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=Vx(r.transform,e||null);i!=null&&(n===null&&(n=Ob.empty()),n.set(r.field,i))}return n||null}function oS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&Jv(e,t,((e,t)=>Zx(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var sS=class extends tS{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},cS=class extends tS{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function lS(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function uS(e,t,n){let r=new Map;jv(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Bx(o,s,n[i]))}return r}function dS(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,zx(e,a,t))}return r}var fS=class extends tS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},pS=class extends tS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},mS=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&rS(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=iS(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=iS(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Ox();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=nS(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(py.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Mx())}isEqual(e){return this.batchId===e.batchId&&Jv(this.mutations,e.mutations,((e,t)=>oS(e,t)))&&Jv(this.baseMutations,e.baseMutations,((e,t)=>oS(e,t)))}},hS=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){jv(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return Ax}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},gS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},_S=class{constructor(e,t){this.count=e,this.unchangedNames=t}},vS,yS;function bS(e){switch(e){case X.OK:return kv(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return kv(15467,{code:e})}}function xS(e){if(e===void 0)return Ev(`GRPC error has no .code`),X.UNKNOWN;switch(e){case vS.OK:return X.OK;case vS.CANCELLED:return X.CANCELLED;case vS.UNKNOWN:return X.UNKNOWN;case vS.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case vS.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case vS.INTERNAL:return X.INTERNAL;case vS.UNAVAILABLE:return X.UNAVAILABLE;case vS.UNAUTHENTICATED:return X.UNAUTHENTICATED;case vS.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case vS.NOT_FOUND:return X.NOT_FOUND;case vS.ALREADY_EXISTS:return X.ALREADY_EXISTS;case vS.PERMISSION_DENIED:return X.PERMISSION_DENIED;case vS.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case vS.ABORTED:return X.ABORTED;case vS.OUT_OF_RANGE:return X.OUT_OF_RANGE;case vS.UNIMPLEMENTED:return X.UNIMPLEMENTED;case vS.DATA_LOSS:return X.DATA_LOSS;default:return kv(39323,{code:e})}}(yS=vS||={})[yS.OK=0]=`OK`,yS[yS.CANCELLED=1]=`CANCELLED`,yS[yS.UNKNOWN=2]=`UNKNOWN`,yS[yS.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,yS[yS.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,yS[yS.NOT_FOUND=5]=`NOT_FOUND`,yS[yS.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,yS[yS.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,yS[yS.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,yS[yS.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,yS[yS.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,yS[yS.ABORTED=10]=`ABORTED`,yS[yS.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,yS[yS.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,yS[yS.INTERNAL=13]=`INTERNAL`,yS[yS.UNAVAILABLE=14]=`UNAVAILABLE`,yS[yS.DATA_LOSS=15]=`DATA_LOSS`;
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var SS=null;
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function CS(){return new TextEncoder}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wS=new cv([4294967295,4294967295],0);function TS(e){let t=CS().encode(e),n=new lv;return n.update(t),new Uint8Array(n.digest())}function ES(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new cv([n,r],0),new cv([i,a],0)]}var DS=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new OS(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new OS(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new OS(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=cv.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(cv.fromNumber(n)));return r.compare(wS)===1&&(r=new cv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=TS(e),[n,r]=ES(t);for(let e=0;e<this.hashCount;e++){let t=this.ye(n,r,e);if(!this.we(t))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),o=new e(a,i,n);return r.forEach((e=>o.insert(e))),o}insert(e){if(this.ge===0)return;let t=TS(e),[n,r]=ES(t);for(let e=0;e<this.hashCount;e++){let t=this.ye(n,r,e);this.Se(t)}}Se(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},OS=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},kS=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,AS.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(py.min(),i,new Ly(Uv),Cx(),Mx())}},AS=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,Mx(),Mx(),Mx())}},jS=class{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}},MS=class{constructor(e,t){this.targetId=e,this.Ce=t}},NS=class{constructor(e,t,n=Wy.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},PS=class{constructor(){this.ve=0,this.Fe=LS(),this.Me=Wy.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Mx(),t=Mx(),n=Mx();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:kv(38017,{changeType:i})}})),new AS(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=LS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){--this.ve,jv(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},FS=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cx(),this.Je=IS(),this.He=IS(),this.Ye=new Ly(Uv)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:kv(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(rx(i))if(n===0){let e=new ey(i.path);this.et(t,e,Ab.newNoDocument(e,py.min()))}else jv(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ye=this.Ye.insert(t,e)}SS?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=Jy(n).toUint8Array()}catch(e){if(e instanceof Uy)return Dv(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new DS(a,r,i)}catch(e){return Dv(e instanceof OS?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&rx(i.target)){let t=new ey(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Ab.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}}));let n=Mx();this.He.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new kS(e,t,this.Ye,this.je,n);return this.je=Cx(),this.Je=IS(),this.He=IS(),this.Ye=new Ly(Uv),r}Xe(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new PS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new By(Uv),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new By(Uv),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||Y(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new PS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function IS(){return new Ly(ey.comparator)}function LS(){return new Ly(ey.comparator)}var RS=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),zS=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),BS=(()=>({and:`AND`,or:`OR`}))(),VS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function HS(e,t){return e.useProto3Json||Dy(t)?t:{value:t}}function US(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function WS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function GS(e,t){return US(e,t.toTimestamp())}function KS(e){return jv(!!e,49232),py.fromTimestamp(function(e){let t=Ky(e);return new fy(t.seconds,t.nanos)}(e))}function qS(e,t){return JS(e,t).canonicalString()}function JS(e,t){let n=function(e){return new Zv([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function YS(e){let t=Zv.fromString(e);return jv(vC(t),10190,{key:t.toString()}),t}function XS(e,t){return qS(e.databaseId,t.path)}function ZS(e,t){let n=YS(t);if(n.get(1)!==e.databaseId.projectId)throw new Z(X.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Z(X.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new ey(tC(n))}function QS(e,t){return qS(e.databaseId,t)}function $S(e){let t=YS(e);return t.length===4?Zv.emptyPath():tC(t)}function eC(e){return new Zv([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function tC(e){return jv(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function nC(e,t,n){return{name:XS(e,t),fields:n.value.mapValue.fields}}function rC(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:kv(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(jv(t===void 0||typeof t==`string`,58123),Wy.fromBase64String(t||``)):(jv(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),Wy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){let t=e.code===void 0?X.UNKNOWN:xS(e.code);return new Z(t,e.message||``)}(o);n=new NS(r,i,a,s||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=ZS(e,r.document.name),a=KS(r.document.updateTime),o=r.document.createTime?KS(r.document.createTime):py.min(),s=new Ob({mapValue:{fields:r.document.fields}}),c=Ab.newFoundDocument(i,a,o,s),l=r.targetIds||[],u=r.removedTargetIds||[];n=new jS(l,u,c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=ZS(e,r.document),a=r.readTime?KS(r.readTime):py.min(),o=Ab.newNoDocument(i,a),s=r.removedTargetIds||[];n=new jS([],s,o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=ZS(e,r.document),a=r.removedTargetIds||[];n=new jS([],a,i,null)}else{if(!(`filter`in t))return kv(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new _S(r,i),o=e.targetId;n=new MS(o,a)}}return n}function iC(e,t){let n;if(t instanceof sS)n={update:nC(e,t.key,t.value)};else if(t instanceof fS)n={delete:XS(e,t.key)};else if(t instanceof cS)n={update:nC(e,t.key,t.data),updateMask:_C(t.fieldMask)};else{if(!(t instanceof pS))return kv(16599,{Vt:t.type});n={verify:XS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof Hx)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof Ux)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Gx)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qx)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw kv(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?kv(27497):{exists:t.exists}:{updateTime:GS(e,t.updateTime)}}(e,t.precondition)),n}function aC(e,t){return e&&e.length>0?(jv(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?KS(e.updateTime):KS(t);return n.isEqual(py.min())&&(n=KS(t)),new Qx(n,e.transformResults||[])}(e,t)))):[]}function oC(e,t){return{documents:[QS(e,t.path)]}}function sC(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=QS(e,i);let a=function(e){if(e.length!==0)return gC(Rb.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:mC(e.field),direction:dC(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=HS(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function cC(e){let t=$S(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){jv(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=uC(e);return t instanceof Rb&&Bb(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Pb(hC(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,Dy(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before,n=e.values||[];return new jb(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before,n=e.values||[];return new jb(n,t)}(n.endAt)),ax(t,i,o,a,s,`F`,c,l)}function lC(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return kv(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function uC(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?kv(30097,{filter:e}):function(e){return Rb.create(e.compositeFilter.filters.map((e=>uC(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return kv(1026)}}(e.compositeFilter.op))}(e):function(e){return Lb.create(hC(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return kv(58110);default:return kv(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=hC(e.unaryFilter.field);return Lb.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=hC(e.unaryFilter.field);return Lb.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=hC(e.unaryFilter.field);return Lb.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=hC(e.unaryFilter.field);return Lb.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return kv(61313);default:return kv(60726)}}(e)}function dC(e){return RS[e]}function fC(e){return zS[e]}function pC(e){return BS[e]}function mC(e){return{fieldPath:e.canonicalString()}}function hC(e){return $v.fromServerFormat(e.fieldPath)}function gC(e){return e instanceof Lb?function(e){if(e.op===`==`){if(Cb(e.value))return{unaryFilter:{field:mC(e.field),op:`IS_NAN`}};if(Sb(e.value))return{unaryFilter:{field:mC(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(Cb(e.value))return{unaryFilter:{field:mC(e.field),op:`IS_NOT_NAN`}};if(Sb(e.value))return{unaryFilter:{field:mC(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:mC(e.field),op:fC(e.op),value:e.value}}}(e):e instanceof Rb?function(e){let t=e.getFilters().map((e=>gC(e)));return t.length===1?t[0]:{compositeFilter:{op:pC(e.op),filters:t}}}(e):kv(54877,{filter:e})}function _C(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function vC(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var yC=class e{constructor(e,t,n,r,i=py.min(),a=py.min(),o=Wy.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},bC=class{constructor(e){this.yt=e}};function xC(e){let t=cC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?px(t,t.limit,`L`):t}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var SC=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(qy(e.integerValue));else if(`doubleValue`in e){let n=qy(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Oy(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=Ky(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(Jy(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?Db(e)?this.Ft(t,2**53-1):Tb(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.Qt(e.arrayValue,t),this.Nt(t)):kv(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=lb,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(qy(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),ey.fromName(e).path.forEach((e=>{this.Ft(t,60),this.Ut(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};SC.Kt=new SC;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var CC=class{constructor(){this.Cn=new wC}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(vy.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(vy.min())}updateCollectionGroup(e,t,n){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}},wC=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new By(Zv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new By(Zv.comparator)).toArray()}};new Uint8Array;
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EC=41943040,DC=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
DC.DEFAULT_COLLECTION_PERCENTILE=10,DC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,DC.DEFAULT=new DC(EC,DC.DEFAULT_COLLECTION_PERCENTILE,DC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),DC.DISABLED=new DC(-1,0,0);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var OC=class e{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new e(0)}static cr(){return new e(-1)}},kC=`LruGarbageCollector`,AC=1048576;function jC([e,t],[n,r]){let i=Uv(e,n);return i===0?Uv(t,r):i}var MC=class{constructor(e){this.Ir=e,this.buffer=new By(jC),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();jC(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},NC=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Vr(e){Y(kC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){wy(e)?Y(kC,`Ignoring IndexedDB error during garbage collection: `,e):await Sy(e)}await this.Vr(3e5)}))}},PC=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(Ty.ce);let n=new MC(t);return this.mr.forEachTarget(e,(e=>n.Ar(e.sequenceNumber))).next((()=>this.mr.pr(e,(e=>n.Ar(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Y(`LruGarbageCollector`,`Garbage collection skipped; disabled`),Q.resolve(TC)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Y(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TC):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Y(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Tv()<=xg.DEBUG&&Y(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function FC(e,t){return new PC(e,t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var IC=class{constructor(){this.changes=new xx((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ab.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):Q.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},LC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},RC=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&iS(n.mutation,e,Hy.empty(),fy.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Mx()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Mx()){let r=Dx();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Tx();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Dx();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Mx())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Cx(),a=kx(),o=function(){return kx()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof cS)?i=i.insert(t.key,t):o===void 0?a.set(t.key,Hy.empty()):(a.set(t.key,o.mutation.getFieldMask()),iS(o.mutation,t,o.mutation.getFieldMask(),fy.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new LC(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=kx(),r=new Ly(((e,t)=>e-t)),i=Mx();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||Hy.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||Mx()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Ox();c.forEach((e=>{if(!i.has(e)){let r=nS(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return Q.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ey.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Q.resolve(Dx()),o=my,s=i;return a.next((t=>Q.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Q.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Mx()))).next((e=>({batchId:o,changes:Ex(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ey(t)).next((e=>{let t=Tx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=Tx();return this.indexManager.getCollectionParents(e,i).next((o=>Q.forEach(o,(o=>{let s=function(e,t){return new ix(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Ab.newInvalidDocument(r)))}));let n=Tx();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&iS(a.mutation,r,Hy.empty(),fy.now()),_x(t,r)&&(n=n.insert(e,r))})),n}))}},zC=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:KS(e.createTime)}}(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:xC(e.bundledQuery),readTime:KS(e.readTime)}}(t)),Q.resolve()}},BC=class{constructor(){this.overlays=new Ly(ey.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Dx();return Q.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),Q.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.qr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.qr.delete(n)),Q.resolve()}getOverlaysForCollection(e,t,n){let r=Dx(),i=t.length+1,a=new ey(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ly(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Dx(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Dx(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Q.resolve(o)}St(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new gS(t,n));let i=this.qr.get(t);i===void 0&&(i=Mx(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}},VC=class{constructor(){this.sessionToken=Wy.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}},HC=class{constructor(){this.Qr=new By(UC.$r),this.Ur=new By(UC.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let n=new UC(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Gr(new UC(e,t))}zr(e,t){e.forEach((e=>this.removeReference(e,t)))}jr(e){let t=new ey(new Zv([])),n=new UC(t,e),r=new UC(t,e+1),i=[];return this.Ur.forEachInRange([n,r],(e=>{this.Gr(e),i.push(e.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new ey(new Zv([])),n=new UC(t,e),r=new UC(t,e+1),i=Mx();return this.Ur.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new UC(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},UC=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ey.comparator(e.key,t.key)||Uv(e.Yr,t.Yr)}static Kr(e,t){return Uv(e.Yr,t.Yr)||ey.comparator(e.key,t.key)}},WC=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new By(UC.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new mS(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Zr=this.Zr.add(new UC(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.ei(n),i=r<0?0:r;return Q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Ey:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new UC(t,0),r=new UC(t,1/0),i=[];return this.Zr.forEachInRange([n,r],(e=>{let t=this.Xr(e.Yr);i.push(t)})),Q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new By(Uv);return t.forEach((e=>{let t=new UC(e,0),r=new UC(e,1/0);this.Zr.forEachInRange([t,r],(e=>{n=n.add(e.Yr)}))})),Q.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;ey.isDocumentKey(i)||(i=i.child(``));let a=new UC(new ey(i),0),o=new By(Uv);return this.Zr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)}),a),Q.resolve(this.ti(o))}ti(e){let t=[];return e.forEach((e=>{let n=this.Xr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){jv(this.ni(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Zr;return Q.forEach(t.mutations,(r=>{let i=new UC(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){let n=new UC(t,0),r=this.Zr.firstAfterOrEqual(n);return Q.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},GC=class{constructor(e){this.ri=e,this.docs=function(){return new Ly(ey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return Q.resolve(n?n.document.mutableCopy():Ab.newInvalidDocument(t))}getEntries(e,t){let n=Cx();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ab.newInvalidDocument(e))})),Q.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Cx(),a=t.path,o=new ey(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||yy(_y(o),n)<=0||(r.has(o.key)||_x(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Q.resolve(i)}getAllFromCollectionGroup(e,t,n,r){kv(9500)}ii(e,t){return Q.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new KC(this)}getSize(e){return Q.resolve(this.size)}},KC=class extends IC{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}},qC=class{constructor(e){this.persistence=e,this.si=new xx((e=>tx(e)),nx),this.lastRemoteSnapshotVersion=py.min(),this.highestTargetId=0,this.oi=0,this._i=new HC,this.targetCount=0,this.ai=OC.ur()}forEachTarget(e,t){return this.si.forEach(((e,n)=>t(n))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new OC(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),--this.targetCount,Q.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Q.waitFor(i).next((()=>r))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){let n=this.si.get(t)||null;return Q.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Q.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Q.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){let n=this._i.Hr(t);return Q.resolve(n)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}},JC=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ty(0),this.li=!1,this.li=!0,this.hi=new VC,this.referenceDelegate=e(this),this.Pi=new qC(this),this.indexManager=new CC,this.remoteDocumentCache=function(e){return new GC(e)}((e=>this.referenceDelegate.Ti(e))),this.serializer=new bC(t),this.Ii=new zC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new WC(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Y(`MemoryPersistence`,`Starting transaction:`,e);let r=new YC(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return Q.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}},YC=class extends xy{constructor(e){super(),this.currentSequenceNumber=e}},XC=class e{constructor(e){this.persistence=e,this.Ri=new HC,this.Vi=null}static mi(t){return new e(t)}get fi(){if(this.Vi)return this.Vi;throw kv(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Q.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((e=>this.fi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.fi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(n=>{let r=ey.fromPath(n);return this.gi(e,r).next((e=>{e||t.removeEntry(r,py.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},ZC=class e{constructor(e,t){this.persistence=e,this.pi=new xx((e=>jy(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=FC(this,t)}static mi(t,n){return new e(t,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}pr(e,t){return Q.forEach(this.pi,((n,r)=>this.br(e,n,r).next((e=>e?Q.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(r=>this.br(e,r,t).next((e=>{e||(n++,i.removeEntry(r,py.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vb(e.data.value)),t}br(e,t,n){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return Q.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},QC=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(t,n){let r=Mx(),i=Mx();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},$C=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},ew=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Yh()?8:Cy(Hh())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ys(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ws(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new $C;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)}))})).next((()=>i.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(Tv()<=xg.DEBUG&&Y(`QueryEngine`,`SDK will not create cache indexes for query:`,gx(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.fs,`documents`),Q.resolve()):(Tv()<=xg.DEBUG&&Y(`QueryEngine`,`Query:`,gx(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.gs*r?(Tv()<=xg.DEBUG&&Y(`QueryEngine`,`The SDK decides to create cache indexes for query:`,gx(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,ux(t))):Q.resolve())}ys(e,t){if(sx(t))return Q.resolve(null);let n=ux(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=px(t,null,`F`),n=ux(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=Mx(...r);return this.ps.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,px(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ws(e,t,n,r){return sx(t)||r.isEqual(py.min())?Q.resolve(null):this.ps.getDocuments(e,n).next((i=>{let a=this.Ds(t,i);return this.Cs(t,a,n,r)?Q.resolve(null):(Tv()<=xg.DEBUG&&Y(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),gx(t)),this.vs(e,a,t,gy(r,my)).next((e=>e)))}))}Ds(e,t){let n=new By(yx(e));return t.forEach(((t,r)=>{_x(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Tv()<=xg.DEBUG&&Y(`QueryEngine`,`Using full collection scan to execute query:`,gx(t)),this.ps.getDocumentsMatchingQuery(e,t,vy.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},tw=`LocalStore`,nw=3e8,rw=class{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Ly(Uv),this.xs=new xx((e=>tx(e)),nx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Ms)))}};function iw(e,t,n,r){return new rw(e,t,n,r)}async function aw(e,t){let n=Mv(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=Mx();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ls:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function ow(e,t){let n=Mv(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=Q.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);jv(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Mx();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function sw(e){let t=Mv(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function cw(e,t){let n=Mv(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Pi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(Wy.EMPTY_BYTE_STRING,py.min()).withLastLimboFreeSnapshotVersion(py.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=nw?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.Pi.updateTargetData(e,l))}));let s=Cx(),c=Mx();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(lw(e,a,t.documentUpdates).next((e=>{s=e.ks,c=e.qs}))),!r.isEqual(py.min())){let t=n.Pi.getLastRemoteSnapshotVersion(e).next((t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Q.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Ms=i,e)))}function lw(e,t,n){let r=Mx(),i=Mx();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Cx();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(py.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Y(tw,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{ks:r,qs:i}}))}function uw(e,t){let n=Mv(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=Ey),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function dw(e,t){let n=Mv(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.Pi.getTargetData(e,t).next((i=>i?(r=i,Q.resolve(r)):n.Pi.allocateTargetId(e).next((i=>(r=new yC(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.Pi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Ms.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e}))}async function fw(e,t,n){let r=Mv(e),i=r.Ms.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!wy(e))throw e;Y(tw,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function pw(e,t,n){let r=Mv(e),i=py.min(),a=Mx();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=Mv(e),i=r.xs.get(n);return i===void 0?r.Pi.getTargetData(t,n):Q.resolve(r.Ms.get(i))}(r,e,ux(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:py.min(),n?a:Mx()))).next((e=>(mw(r,vx(t),e),{documents:e,Qs:a})))))}function mw(e,t,n){let r=e.Os.get(t)||py.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Os.set(t,r)}var hw=class{constructor(){this.activeTargetIds=Px()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},gw=class{constructor(){this.Mo=new hw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||`not-current`}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hw,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},_w=class{Oo(e){}shutdown(){}},vw=`ConnectivityMonitor`,yw=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener(`online`,this.No),window.removeEventListener(`offline`,this.Lo)}Qo(){window.addEventListener(`online`,this.No),window.addEventListener(`offline`,this.Lo)}Bo(){Y(vw,`Network connectivity changed: AVAILABLE`);for(let e of this.qo)e(0)}ko(){Y(vw,`Network connectivity changed: UNAVAILABLE`);for(let e of this.qo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},bw=null;function xw(){return bw===null?bw=function(){return 268435456+Math.round(2147483648*Math.random())}():bw++,`0x`+bw.toString(16)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sw=`RestConnection`,Cw={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},ww=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+`://`+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===rb?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){let a=xw(),o=this.zo(e,t.toUriEncodedString());Y(Sw,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);let{host:c}=new URL(o),l=Fh(c);return this.Jo(e,o,s,n,l).then((t=>(Y(Sw,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Dv(Sw,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Cv}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}zo(e,t){let n=Cw[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}},Tw=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}},Ew=`WebChannelConnection`,Dw=class extends ww{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let a=xw();return new Promise(((i,o)=>{let s=new fv;s.setWithCredentials(!0),s.listenOnce(mv.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case hv.NO_ERROR:let t=s.getResponseJson();Y(Ew,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case hv.TIMEOUT:Y(Ew,`RPC '${e}' ${a} timed out`),o(new Z(X.DEADLINE_EXCEEDED,`Request time out`));break;case hv.HTTP_ERROR:let n=s.getStatus();if(Y(Ew,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(X).indexOf(t)>=0?t:X.UNKNOWN}(t.status);o(new Z(e,t.message))}else o(new Z(X.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new Z(X.UNAVAILABLE,`Connection failed.`));break;default:kv(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{Y(Ew,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);Y(Ew,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(e,t,n){let r=xw(),i=[this.Uo,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=yv(),o=vv(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);Y(Ew,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new Tw({Yo:t=>{f?Y(Ew,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(Y(Ew,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),Y(Ew,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,pv.EventType.OPEN,(()=>{f||(Y(Ew,`RPC '${e}' stream ${r} transport opened.`),p.o_())})),m(u,pv.EventType.CLOSE,(()=>{f||(f=!0,Y(Ew,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))})),m(u,pv.EventType.ERROR,(t=>{f||(f=!0,Dv(Ew,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.a_(new Z(X.UNAVAILABLE,`The operation could not be completed`)))})),m(u,pv.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];jv(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){Y(Ew,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=vS[e];if(t!==void 0)return xS(t)}(t),i=a.message;n===void 0&&(n=X.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.a_(new Z(n,i)),u.close()}else Y(Ew,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}})),m(o,_v.STAT_EVENT,(t=>{t.stat===gv.PROXY?Y(Ew,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===gv.NOPROXY&&Y(Ew,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function Ow(){return typeof document<`u`?document:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kw(e){return new VS(e,!0)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Aw=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Y(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}},jw=`PersistentStream`,Mw=class{constructor(e,t,n,r,i,a,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Aw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===X.RESOURCE_EXHAUSTED?(Ev(t.toString()),Ev(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new Z(X.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.J_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Y(jw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Y(jw,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},Nw=class extends Mw{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=rC(this.serializer,e),n=function(e){if(!(`targetChange`in e))return py.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?py.min():t.readTime?KS(t.readTime):py.min()}(e);return this.listener.H_(t,n)}Y_(e){let t={};t.database=eC(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=rx(r)?{documents:oC(e,r)}:{query:sC(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=WS(e,t.resumeToken);let r=HS(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(py.min())>0){n.readTime=US(e,t.snapshotVersion.toTimestamp());let r=HS(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=lC(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){let t={};t.database=eC(this.serializer),t.removeTarget=e,this.q_(t)}},Pw=class extends Mw{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}J_(e){return jv(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jv(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){jv(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=aC(e.writeResults,e.commitTime),n=KS(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=eC(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>iC(this.serializer,e)))};this.q_(t)}},Fw=class{},Iw=class extends Fw{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Z(X.FAILED_PRECONDITION,`The client has already been terminated.`)}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,JS(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Z(X.UNKNOWN,e.toString())}))}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,JS(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Z(X.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},Lw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ev(t),this.aa=!1):Y(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},Rw=`RemoteStore`,zw=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((e=>{n.enqueueAndForget((async()=>{Jw(this)&&(Y(Rw,`Restarting streams for network reachability change.`),await async function(e){let t=Mv(e);t.Ea.add(4),await Vw(t),t.Ra.set(`Unknown`),t.Ea.delete(4),await Bw(t)}(this))}))})),this.Ra=new Lw(n,r)}};async function Bw(e){if(Jw(e))for(let t of e.da)await t(!0)}async function Vw(e){for(let t of e.da)await t(!1)}function Hw(e,t){let n=Mv(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),qw(n)?Kw(n):pT(n).O_()&&Ww(n,t))}function Uw(e,t){let n=Mv(e),r=pT(n);n.Ia.delete(t),r.O_()&&Gw(n,t),n.Ia.size===0&&(r.O_()?r.L_():Jw(n)&&n.Ra.set(`Unknown`))}function Ww(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(py.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pT(e).Y_(t)}function Gw(e,t){e.Va.Ue(t),pT(e).Z_(t)}function Kw(e){e.Va=new FS({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),pT(e).start(),e.Ra.ua()}function qw(e){return Jw(e)&&!pT(e).x_()&&e.Ia.size>0}function Jw(e){return Mv(e).Ea.size===0}function Yw(e){e.Va=void 0}async function Xw(e){e.Ra.set(`Online`)}async function Zw(e){e.Ia.forEach(((t,n)=>{Ww(e,t)}))}async function Qw(e,t){Yw(e),qw(e)?(e.Ra.ha(t),Kw(e)):e.Ra.set(`Unknown`)}async function $w(e,t,n){if(e.Ra.set(`Online`),t instanceof NS&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Y(Rw,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await eT(e,n)}else if(t instanceof jS?e.Va.Ze(t):t instanceof MS?e.Va.st(t):e.Va.tt(t),!n.isEqual(py.min()))try{let t=await sw(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Va.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Wy.EMPTY_BYTE_STRING,r.snapshotVersion)),Gw(e,t);let i=new yC(r.target,t,n,r.sequenceNumber);Ww(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Y(Rw,`Failed to raise snapshot:`,t),await eT(e,t)}}async function eT(e,t,n){if(!wy(t))throw t;e.Ea.add(1),await Vw(e),e.Ra.set(`Offline`),n||=()=>sw(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{Y(Rw,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await Bw(e)}))}function tT(e,t){return t().catch((n=>eT(e,n,t)))}async function nT(e){let t=Mv(e),n=mT(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ey;for(;rT(t);)try{let e=await uw(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,iT(t,e)}catch(e){await eT(t,e)}aT(t)&&oT(t)}function rT(e){return Jw(e)&&e.Ta.length<10}function iT(e,t){e.Ta.push(t);let n=mT(e);n.O_()&&n.X_&&n.ea(t.mutations)}function aT(e){return Jw(e)&&!mT(e).x_()&&e.Ta.length>0}function oT(e){mT(e).start()}async function sT(e){mT(e).ra()}async function cT(e){let t=mT(e);for(let n of e.Ta)t.ea(n.mutations)}async function lT(e,t,n){let r=e.Ta.shift(),i=hS.from(r,t,n);await tT(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await nT(e)}async function uT(e,t){t&&mT(e).X_&&await async function(e,t){if(function(e){return bS(e)&&e!==X.ABORTED}(t.code)){let n=e.Ta.shift();mT(e).B_(),await tT(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await nT(e)}}(e,t),aT(e)&&oT(e)}async function dT(e,t){let n=Mv(e);n.asyncQueue.verifyOperationInProgress(),Y(Rw,`RemoteStore received new credentials`);let r=Jw(n);n.Ea.add(3),await Vw(n),r&&n.Ra.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Bw(n)}async function fT(e,t){let n=Mv(e);t?(n.Ea.delete(2),await Bw(n)):t||(n.Ea.add(2),await Vw(n),n.Ra.set(`Unknown`))}function pT(e){return e.ma||(e.ma=function(e,t,n){let r=Mv(e);return r.sa(),new Nw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Xw.bind(null,e),t_:Zw.bind(null,e),r_:Qw.bind(null,e),H_:$w.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),qw(e)?Kw(e):e.Ra.set(`Unknown`)):(await e.ma.stop(),Yw(e))}))),e.ma}function mT(e){return e.fa||(e.fa=function(e,t,n){let r=Mv(e);return r.sa(),new Pw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:sT.bind(null,e),r_:uT.bind(null,e),ta:cT.bind(null,e),na:lT.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await nT(e)):(await e.fa.stop(),e.Ta.length>0&&(Y(Rw,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var hT=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Nv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=Date.now()+r,s=new e(t,n,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(X.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function gT(e,t){if(Ev(`AsyncQueue`,`${t}: ${e}`),wy(e))return new Z(X.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _T=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ey.comparator(t.key,n.key):(e,t)=>ey.comparator(e.key,t.key),this.keyedMap=Tx(),this.sortedSet=new Ly(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},vT=class{constructor(){this.ga=new Ly(ey.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):kv(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},yT=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,_T.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},bT=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},xT=class{constructor(){this.queries=ST(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=Mv(e),r=n.queries;n.queries=ST(),r.forEach(((e,n)=>{for(let e of n.Sa)e.onError(t)}))})(this,new Z(X.ABORTED,`Firestore shutting down`))}};function ST(){return new xx((e=>hx(e)),mx)}async function CT(e,t){let n=Mv(e),r=3,i=t.query,a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new bT,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=gT(e,`Initialization of query '${gx(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&DT(n)}async function wT(e,t){let n=Mv(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TT(e,t){let n=Mv(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&DT(n)}function ET(e,t,n){let r=Mv(e),i=r.queries.get(t);if(i)for(let e of i.Sa)e.onError(n);r.queries.delete(t)}function DT(e){e.Ca.forEach((e=>{e.next()}))}var OT,kT;(kT=OT||={}).Ma=`default`,kT.Cache=`cache`;var AT=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new yT(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=yT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==OT.Cache}},jT=class{constructor(e){this.key=e}},MT=class{constructor(e){this.key=e}},NT=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mx(),this.mutatedKeys=Mx(),this.eu=yx(e),this.tu=new _T(this.eu)}get nu(){return this.Ya}ru(e,t){let n=t?t.iu:new vT,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=_x(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kv(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,a.length!==0||c?{snapshot:new yT(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Mx(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))}));let t=[];return e.forEach((e=>{this.Xa.has(e)||t.push(new MT(e))})),this.Xa.forEach((n=>{e.has(n)||t.push(new jT(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Mx();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yT.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},PT=`SyncEngine`,FT=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},IT=class{constructor(e){this.key=e,this.hu=!1}},LT=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new xx((e=>hx(e)),mx),this.Iu=new Map,this.Eu=new Set,this.du=new Ly(ey.comparator),this.Au=new Map,this.Ru=new HC,this.Vu={},this.mu=new Map,this.fu=OC.cr(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function RT(e,t,n=!0){let r=oE(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await BT(r,t,n,!0),i}async function zT(e,t){let n=oE(e);await BT(n,t,!0,!1)}async function BT(e,t,n,r){let i=await dw(e.localStore,ux(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await VT(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&Hw(e.remoteStore,i),s}async function VT(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await pw(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return eE(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await pw(e.localStore,t,!0),o=new NT(t,a.Qs),s=o.ru(a.documents),c=AS.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);eE(e,n,l.au);let u=new FT(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function HT(e,t,n){let r=Mv(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!mx(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fw(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Uw(r.remoteStore,i.targetId),QT(r,i.targetId)})).catch(Sy)):(QT(r,i.targetId),await fw(r.localStore,i.targetId,!0))}async function UT(e,t){let n=Mv(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Uw(n.remoteStore,r.targetId))}async function WT(e,t,n){let r=sE(e);try{let e=await function(e,t){let n=Mv(e),r=fy.now(),i=t.reduce(((e,t)=>e.add(t.key)),Mx()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=Cx(),c=Mx();return n.Ns.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=aS(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new cS(e.key,t,kb(t.value.mapValue),$x.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Ex(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||=new Ly(Uv),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await rE(r,e.changes),await nT(r.remoteStore)}catch(e){let t=gT(e,`Failed to persist write`);n.reject(t)}}async function GT(e,t){let n=Mv(e);try{let e=await cw(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(jv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?jv(r.hu,14607):e.removedDocuments.size>0&&(jv(r.hu,42227),r.hu=!1))})),await rE(n,e,t)}catch(e){await Sy(e)}}function KT(e,t,n){let r=Mv(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=Mv(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.Sa)e.va(t)&&(r=!0)})),r&&DT(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function qT(e,t,n){let r=Mv(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new Ly(ey.comparator);e=e.insert(a,Ab.newNoDocument(a,py.min()));let n=Mx().add(a),i=new kS(py.min(),new Map,new Ly(Uv),e,n);await GT(r,i),r.du=r.du.remove(a),r.Au.delete(t),nE(r)}else await fw(r.localStore,t,!1).then((()=>QT(r,t,n))).catch(Sy)}async function JT(e,t){let n=Mv(e),r=t.batch.batchId;try{let e=await ow(n.localStore,t);ZT(n,r,null),XT(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await rE(n,e)}catch(e){await Sy(e)}}async function YT(e,t,n){let r=Mv(e);try{let e=await function(e,t){let n=Mv(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(jv(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ZT(r,t,n),XT(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await rE(r,e)}catch(e){await Sy(e)}}function XT(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function ZT(e,t,n){let r=Mv(e),i=r.Vu[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function QT(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((t=>{e.Ru.containsKey(t)||$T(e,t)}))}function $T(e,t){e.Eu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(Uw(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),nE(e))}function eE(e,t,n){for(let r of n)r instanceof jT?(e.Ru.addReference(r.key,t),tE(e,r)):r instanceof MT?(Y(PT,`Document no longer in limbo: `+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||$T(e,r.key)):kv(19791,{wu:r})}function tE(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Y(PT,`New document in limbo: `+n),e.Eu.add(r),nE(e))}function nE(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new ey(Zv.fromString(t)),r=e.fu.next();e.Au.set(r,new IT(n)),e.du=e.du.insert(n,r),Hw(e.remoteStore,new yC(ux(ox(n.path)),r,`TargetPurposeLimboResolution`,Ty.ce))}}async function rE(e,t,n){let r=Mv(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=QC.As(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.H_(i),await async function(e,t){let n=Mv(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>Q.forEach(t,(t=>Q.forEach(t.Es,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Q.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!wy(e))throw e;Y(tw,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,a))}async function iE(e,t){let n=Mv(e);if(!n.currentUser.isEqual(t)){Y(PT,`User change. New user:`,t.toKey());let e=await aw(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new Z(X.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await rE(n,e.Ls)}}function aE(e,t){let n=Mv(e),r=n.Au.get(t);if(r&&r.hu)return Mx().add(r.key);{let e=Mx(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function oE(e){let t=Mv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=GT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=aE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qT.bind(null,t),t.Pu.H_=TT.bind(null,t.eventManager),t.Pu.yu=ET.bind(null,t.eventManager),t}function sE(e){let t=Mv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=YT.bind(null,t),t}var cE=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=kw(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return iw(this.persistence,new ew,e.initialUser,this.serializer)}Cu(e){return new JC(XC.mi,this.serializer)}Du(e){return new gw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};cE.provider={build:()=>new cE};var lE=class extends cE{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){jv(this.persistence.referenceDelegate instanceof ZC,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new NC(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?DC.DEFAULT:DC.withCacheSize(this.cacheSizeBytes);return new JC((e=>ZC.mi(e,t)),this.serializer)}},uE=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>KT(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=iE.bind(null,this.syncEngine),await fT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xT}()}createDatastore(e){let t=kw(e.databaseInfo.databaseId),n=function(e){return new Dw(e)}(e.databaseInfo);return function(e,t,n,r){return new Iw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new zw(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>KT(this.syncEngine,e,0)),function(){return yw.v()?new yw:new _w}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new LT(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=Mv(e);Y(Rw,`RemoteStore shutting down.`),t.Ea.add(5),await Vw(t),t.Aa.shutdown(),t.Ra.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};uE.provider={build:()=>new uE};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var dE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ev(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},fE=`FirestoreClient`,pE=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Sv.UNAUTHENTICATED,this.clientId=Hv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Y(fE,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Y(fE,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Nv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=gT(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function mE(e,t){e.asyncQueue.verifyOperationInProgress(),Y(fE,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await aw(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function hE(e,t){e.asyncQueue.verifyOperationInProgress();let n=await gE(e);Y(fE,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>dT(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>dT(t.remoteStore,n))),e._onlineComponents=t}async function gE(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Y(fE,`Using user provided OfflineComponentProvider`);try{await mE(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===X.FAILED_PRECONDITION||e.code===X.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;Dv(`Error using user provided cache. Falling back to memory cache: `+n),await mE(e,new cE)}}else Y(fE,`Using default OfflineComponentProvider`),await mE(e,new lE(void 0));return e._offlineComponents}async function _E(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Y(fE,`Using user provided OnlineComponentProvider`),await hE(e,e._uninitializedComponentsProvider._online)):(Y(fE,`Using default OnlineComponentProvider`),await hE(e,new uE))),e._onlineComponents}function vE(e){return _E(e).then((e=>e.syncEngine))}async function yE(e){let t=await _E(e),n=t.eventManager;return n.onListen=RT.bind(null,t.syncEngine),n.onUnlisten=HT.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=zT.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=UT.bind(null,t.syncEngine),n}function bE(e,t,n={}){let r=new Nv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new dE({next:s=>{a.Nu(),t.enqueueAndForget((()=>wT(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new Z(X.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new Z(X.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new AT(ox(n.path),a,{includeMetadataChanges:!0,qa:!0});return CT(e,o)}(await yE(e),e.asyncQueue,t,n,r))),r.promise}function xE(e,t,n={}){let r=new Nv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new dE({next:n=>{a.Nu(),t.enqueueAndForget((()=>wT(e,o))),n.fromCache&&r.source===`server`?i.reject(new Z(X.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new AT(n,a,{includeMetadataChanges:!0,qa:!0});return CT(e,o)}(await yE(e),e.asyncQueue,t,n,r))),r.promise}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function SE(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CE=new Map,wE=`firestore.googleapis.com`,TE=!0,EE=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(X.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=wE,this.ssl=TE}else this.host=e.host,this.ssl=e.ssl??TE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AC)throw new Z(X.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}ny(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SE(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new Z(X.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Z(X.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Z(X.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},DE=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new EE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new Z(X.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new Z(X.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new EE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Fv;switch(e.type){case`firstParty`:return new Rv(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new Z(X.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=CE.get(e);t&&(Y(`ComponentProvider`,`Removing Datastore`),CE.delete(e),t.terminate())}(this),Promise.resolve()}},OE=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},kE=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new AE(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(ly(n,e._jsonSchema))return new e(t,r||null,new ey(Zv.fromString(n.referencePath)))}};kE._jsonSchemaVersion=`firestore/documentReference/1.0`,kE._jsonSchema={type:cy(`string`,kE._jsonSchemaVersion),referencePath:cy(`string`)};var AE=class e extends OE{constructor(e,t,n){super(e,t,ox(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new kE(this.firestore,null,new ey(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function jE(e,t,...n){if(e=pg(e),ty(`collection`,`path`,t),e instanceof DE){let r=Zv.fromString(t,...n);return iy(r),new AE(e,null,r)}{if(!(e instanceof kE||e instanceof AE))throw new Z(X.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Zv.fromString(t,...n));return iy(r),new AE(e.firestore,null,r)}}function ME(e,t,...n){if(e=pg(e),arguments.length===1&&(t=Hv.newId()),ty(`doc`,`path`,t),e instanceof DE){let r=Zv.fromString(t,...n);return ry(r),new kE(e,null,new ey(r))}{if(!(e instanceof kE||e instanceof AE))throw new Z(X.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Zv.fromString(t,...n));return ry(r),new kE(e.firestore,e instanceof AE?e.converter:null,new ey(r))}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NE=`AsyncQueue`,PE=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Aw(this,`async_queue_retry`),this._c=()=>{let e=Ow();e&&Y(NE,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=Ow();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Ow();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Nv;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wy(e))throw e;Y(NE,`Operation failed with retryable error: `+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Ev(`INTERNAL UNHANDLED ERROR: `,FE(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=hT.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&kv(47125,{Pc:FE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function FE(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var IE=class extends DE{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new PE,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new PE(e),this._firestoreClient=void 0,await e}}};function LE(e){if(e._terminated)throw new Z(X.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||RE(e),e._firestoreClient}function RE(e){let t=e._freezeSettings(),n=function(e,t,n,r){return new nb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,SE(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new pE(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var zE=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(Wy.fromBase64String(t))}catch(e){throw new Z(X.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(Wy.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ly(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};zE._jsonSchemaVersion=`firestore/bytes/1.0`,zE._jsonSchema={type:cy(`string`,zE._jsonSchemaVersion),bytes:cy(`string`)};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var BE=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Z(X.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new $v(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},VE=class{constructor(e){this._methodName=e}},HE=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(X.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new Z(X.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Uv(this._lat,e._lat)||Uv(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(ly(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};HE._jsonSchemaVersion=`firestore/geoPoint/1.0`,HE._jsonSchema={type:cy(`string`,HE._jsonSchemaVersion),latitude:cy(`number`),longitude:cy(`number`)};
/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var UE=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ly(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new Z(X.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};UE._jsonSchemaVersion=`firestore/vectorValue/1.0`,UE._jsonSchema={type:cy(`string`,UE._jsonSchemaVersion),vectorValues:cy(`object`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var WE=/^__.*__$/,GE=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new sS(e,this.data,t,this.fieldTransforms):new cS(e,this.data,this.fieldMask,t,this.fieldTransforms)}},KE=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new cS(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function qE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kv(40011,{Ac:e})}}var JE=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uD(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc(`Document fields must not be empty`);if(qE(this.Ac)&&WE.test(e))throw this.Sc(`Document fields cannot begin and end with "__"`)}},YE=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||kw(e)}Cc(e,t,n,r=!1){return new JE({Ac:e,methodName:t,Dc:n,path:$v.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function XE(e){let t=e._freezeSettings(),n=kw(e._databaseId);return new YE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ZE(e,t,n,r,i,a={}){let o=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);oD(`Data must be an object, but it was:`,o,r);let s=iD(r,o),c,l;if(a.merge)c=new Hy(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=sD(t,r,n);if(!o.contains(i))throw new Z(X.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);dD(e,i)||e.push(i)}c=new Hy(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new GE(new Ob(s),c,l)}var QE=class e extends VE{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}},$E=class e extends VE{_toFieldTransform(e){return new Xx(e.path,new Hx)}isEqual(t){return t instanceof e}};function eD(e,t,n,r){let i=e.Cc(1,t,n);oD(`Data must be an object, but it was:`,i,r);let a=[],o=Ob.empty();Fy(r,((e,r)=>{let s=lD(t,e,n);r=pg(r);let c=i.yc(s);if(r instanceof QE)a.push(s);else{let e=rD(r,c);e!=null&&(a.push(s),o.set(s,e))}}));let s=new Hy(a);return new KE(o,s,i.fieldTransforms)}function tD(e,t,n,r,i,a){let o=e.Cc(1,t,n),s=[sD(t,r,n)],c=[i];if(a.length%2!=0)throw new Z(X.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(sD(t,a[e])),c.push(a[e+1]);let l=[],u=Ob.empty();for(let e=s.length-1;e>=0;--e)if(!dD(l,s[e])){let t=s[e],n=c[e];n=pg(n);let r=o.yc(t);if(n instanceof QE)l.push(t);else{let e=rD(n,r);e!=null&&(l.push(t),u.set(t,e))}}let d=new Hy(l);return new KE(u,d,o.fieldTransforms)}function nD(e,t,n,r=!1){return rD(n,e.Cc(r?4:3,t))}function rD(e,t){if(aD(e=pg(e)))return oD(`Unsupported field value:`,t,e),iD(e,t);if(e instanceof VE)return function(e,t){if(!qE(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=rD(i,t.wc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=pg(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return Lx(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=fy.fromDate(e);return{timestampValue:US(t.serializer,n)}}if(e instanceof fy){let n=new fy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:US(t.serializer,n)}}if(e instanceof HE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zE)return{bytesValue:WS(t.serializer,e._byteString)};if(e instanceof kE){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:qS(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof UE)return function(e,t){return{mapValue:{fields:{[ab]:{stringValue:cb},[lb]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.Sc(`VectorValues must only contain numeric values.`);return Fx(t.serializer,e)}))}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${oy(e)}`)}(e,t)}function iD(e,t){let n={};return Iy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fy(e,((e,r)=>{let i=rD(r,t.mc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function aD(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof fy||e instanceof HE||e instanceof zE||e instanceof kE||e instanceof VE||e instanceof UE)}function oD(e,t,n){if(!aD(n)||!ay(n)){let r=oy(n);throw r===`an object`?t.Sc(e+` a custom object`):t.Sc(e+` `+r)}}function sD(e,t,n){if((t=pg(t))instanceof BE)return t._internalPath;if(typeof t==`string`)return lD(e,t);throw uD(`Field path arguments must be of type string or `,e,!1,void 0,n)}var cD=RegExp(`[~\\*/\\[\\]]`);function lD(e,t,n){if(t.search(cD)>=0)throw uD(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new BE(...t.split(`.`))._internalPath}catch{throw uD(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function uD(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new Z(X.INVALID_ARGUMENT,s+e+c)}function dD(e,t){return e.some((e=>e.isEqual(t)))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var fD=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kE(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new pD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(mD(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},pD=class extends fD{data(){return super.data()}};function mD(e,t){return typeof t==`string`?lD(e,t):t instanceof BE?t._internalPath:t._delegate._internalPath}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hD(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new Z(X.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var gD=class{},_D=class extends gD{};function vD(e,t,...n){let r=[];t instanceof gD&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof bD)).length,n=e.filter((e=>e instanceof yD)).length;if(t>1||t>0&&n>0)throw new Z(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var yD=class e extends _D{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return TD(e._query,t),new OE(e.firestore,e.converter,fx(e._query,t))}_parse(e){let t=XE(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new Z(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){wD(o,a);let t=[];for(let n of o)t.push(CD(r,e,n));s={arrayValue:{values:t}}}else s=CD(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||wD(o,a),s=nD(n,t,o,a===`in`||a===`not-in`);return Lb.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}},bD=class e extends gD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:Rb.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)TD(n,e),n=fx(n,e)}(e._query,t),new OE(e.firestore,e.converter,fx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},xD=class e extends _D{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new Z(X.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new Z(X.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new Pb(t,n)}(e._query,this._field,this._direction);return new OE(e.firestore,e.converter,function(e,t){let n=e.explicitOrderBy.concat([t]);return new ix(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}};function SD(e,t=`asc`){let n=t,r=mD(`orderBy`,e);return xD._create(r,n)}function CD(e,t,n){if(typeof(n=pg(n))==`string`){if(n===``)throw new Z(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!cx(t)&&n.indexOf(`/`)!==-1)throw new Z(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(Zv.fromString(n));if(!ey.isDocumentKey(r))throw new Z(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yb(e,new ey(r))}if(n instanceof kE)return yb(e,n._key);throw new Z(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oy(n)}.`)}function wD(e,t){if(!Array.isArray(e)||e.length===0)throw new Z(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function TD(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Z(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Z(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var ED=class{convertValue(e,t=`none`){switch(ub(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw kv(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return Fy(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[lb].arrayValue?.values?.map((e=>qy(e.doubleValue)));return new UE(t)}convertGeoPoint(e){return new HE(qy(e.latitude),qy(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=eb(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(tb(e));default:return null}}convertTimestamp(e){let t=Ky(e);return new fy(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=Zv.fromString(e);jv(vC(n),9688,{name:e});let r=new ib(n.get(1),n.get(3)),i=new ey(n.popFirst(5));return r.isEqual(t)||Ev(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function DD(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var OD=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},kD=class e extends fD{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new AD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(mD(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(X.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};kD._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,kD._jsonSchema={type:cy(`string`,kD._jsonSchemaVersion),bundleSource:cy(`string`,`DocumentSnapshot`),bundleName:cy(`string`),bundle:cy(`string`)};var AD=class extends kD{data(e={}){return super.data(e)}},jD=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new OD(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new AD(this._firestore,this._userDataWriter,n.key,n,new OD(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(X.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new AD(e._firestore,e._userDataWriter,n.doc.key,n.doc,new OD(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new AD(e._firestore,e._userDataWriter,t.doc.key,t.doc,new OD(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:MD(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(X.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=Hv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function MD(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return kv(61501,{type:e})}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ND(e){e=sy(e,kE);let t=sy(e.firestore,IE);return bE(LE(t),e._key).then((n=>BD(t,e,n)))}jD._jsonSchemaVersion=`firestore/querySnapshot/1.0`,jD._jsonSchema={type:cy(`string`,jD._jsonSchemaVersion),bundleSource:cy(`string`,`QuerySnapshot`),bundleName:cy(`string`),bundle:cy(`string`)};var PD=class extends ED{constructor(e){super(),this.firestore=e}convertBytes(e){return new zE(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new kE(this.firestore,null,t)}};function FD(e){e=sy(e,OE);let t=sy(e.firestore,IE),n=LE(t),r=new PD(t);return hD(e._query),xE(n,e._query).then((n=>new jD(t,r,e,n)))}function ID(e,t,n,...r){e=sy(e,kE);let i=sy(e.firestore,IE),a=XE(i),o;return o=typeof(t=pg(t))==`string`||t instanceof BE?tD(a,`updateDoc`,e._key,t,n,r):eD(a,`updateDoc`,e._key,t),zD(i,[o.toMutation(e._key,$x.exists(!0))])}function LD(e){return zD(sy(e.firestore,IE),[new fS(e._key,$x.none())])}function RD(e,t){let n=sy(e.firestore,IE),r=ME(e),i=DD(e.converter,t);return zD(n,[ZE(XE(e.firestore),`addDoc`,r._key,i,e.converter!==null,{}).toMutation(r._key,$x.exists(!1))]).then((()=>r))}function zD(e,t){return function(e,t){let n=new Nv;return e.asyncQueue.enqueueAndForget((async()=>WT(await vE(e),t,n))),n.promise}(LE(e),t)}function BD(e,t,n){let r=n.docs.get(t._key),i=new PD(e);return new kD(e,i,t._key,r,new OD(n.hasPendingWrites,n.fromCache),t.converter)}function VD(){return new $E(`serverTimestamp`)}(function(e,t=!0){(function(e){Cv=e})(z_),P_(new mg(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new IE(new Iv(e.getProvider(`auth-internal`)),new Bv(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new Z(X.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new ib(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),H_(bv,xv,e),H_(bv,xv,`esm2020`)})();const HD={USERS:`users`,users:`users`,KREATOR_APPLICATIONS:`kreatorApplications`,kreatorApplications:`kreatorApplications`,FRAMES:`frames`,frames:`frames`,FRAME_CATEGORIES:`frameCategories`,NOTIFICATIONS:`notifications`,ANALYTICS:`analytics`,CONTACT_MESSAGES:`contactMessages`,contactMessages:`contactMessages`},UD=[{id:`birthday`,name:`Birthday`,icon:``},{id:`wedding`,name:`Wedding`,icon:``},{id:`graduation`,name:`Graduation`,icon:``},{id:`corporate`,name:`Corporate`,icon:``},{id:`holiday`,name:`Holiday`,icon:``},{id:`party`,name:`Party`,icon:``},{id:`baby`,name:`Baby & Kids`,icon:``},{id:`anniversary`,name:`Anniversary`,icon:``},{id:`travel`,name:`Travel`,icon:``},{id:`other`,name:`Other`,icon:``}];var WD=`contact_messages`;const GD=async e=>{try{console.log(` contactMessageService: Submitting message`,e),console.log(` Firebase configured:`,!1);let t={...e,status:`new`,priority:QD(e.topic),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(` Using LocalStorage mode`);let n=ZD();console.log(` Existing messages:`,n.length);let r={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...t};return n.push(r),localStorage.setItem(WD,JSON.stringify(n)),{success:!0,id:r.id}}catch(e){throw console.error(` Error submitting contact message:`,e),e}},KD=async()=>{try{console.log(` getAllContactMessages: Fetching messages...`),console.log(` Firebase configured:`,!1);{console.log(` Reading from LocalStorage`);let e=ZD();return console.log(` Retrieved`,e.length,`messages from localStorage`),e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))}try{let e=vD(jE(null,HD.CONTACT_MESSAGES),SD(`createdAt`,`desc`));return(await FD(e)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate?.()||new Date,updatedAt:e.data().updatedAt?.toDate?.()||new Date,repliedAt:e.data().repliedAt?.toDate?.()||null}))}catch{return ZD().sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))}}catch(e){return console.error(`Error getting contact messages:`,e),[]}},qD=async()=>{try{return ZD().filter(e=>e.status===`new`).length}catch(e){return console.error(`Error getting unread count:`,e),0}},JD=async(e,t)=>{try{console.log(` Updating message status:`,e,`to`,t),console.log(` Updating in LocalStorage`);let n=ZD(),r=n.findIndex(t=>t.id===e);return r===-1?console.warn(` Message not found:`,e):(n[r].status=t,n[r].updatedAt=new Date().toISOString(),localStorage.setItem(WD,JSON.stringify(n)),console.log(` Updated in LocalStorage successfully`)),{success:!0}}catch(e){throw console.error(` Error updating message status:`,e),e}},YD=async(e,t,n)=>{try{console.log(` Replying to message:`,e),console.log(` Saving reply in LocalStorage`);let r=ZD(),i=r.findIndex(t=>t.id===e);return i===-1?console.warn(` Message not found:`,e):(r[i].reply=t,r[i].repliedBy=n||`admin`,r[i].repliedAt=new Date().toISOString(),r[i].status=`replied`,r[i].updatedAt=new Date().toISOString(),localStorage.setItem(WD,JSON.stringify(r)),console.log(` Reply saved in LocalStorage successfully`)),{success:!0}}catch(e){throw console.error(` Error replying to message:`,e),e}},XD=async e=>{try{console.log(` Deleting message:`,e),console.log(` Deleting from LocalStorage`);let t=ZD();console.log(` Total messages before delete:`,t.length);let n=t.filter(t=>t.id!==e);return console.log(` Total messages after delete:`,n.length),localStorage.setItem(WD,JSON.stringify(n)),console.log(` Deleted from LocalStorage successfully`),{success:!0}}catch(e){throw console.error(` Error deleting message:`,e),e}};var ZD=()=>{try{let e=localStorage.getItem(WD);return e?JSON.parse(e):[]}catch(e){return console.error(`Error reading messages from localStorage:`,e),[]}},QD=e=>{switch(e){case`technical`:return`high`;case`billing`:return`high`;case`account`:return`medium`;case`feedback`:return`low`;case`general`:default:return`medium`}};const $D=e=>({technical:` Technical Support`,account:` Account Issues`,billing:` Billing & Payments`,general:` General Inquiry`,feedback:` Feedback & Suggestions`})[e]||e,eO=e=>({new:`#3b82f6`,read:`#f59e0b`,replied:`#10b981`,closed:`#6b7280`})[e]||`#6b7280`,tO=e=>({low:`#10b981`,medium:`#f59e0b`,high:`#ef4444`})[e]||`#6b7280`;var nO=`fremio_affiliate_applications`,rO=()=>{try{let e=localStorage.getItem(nO);return e?JSON.parse(e):[]}catch(e){return console.error(`Error reading from localStorage:`,e),[]}},iO=e=>{try{localStorage.setItem(nO,JSON.stringify(e))}catch(e){console.error(`Error saving to localStorage:`,e)}};const aO=async e=>{console.log(` submitAffiliateApplication called with:`,e);let t=new Date().toISOString(),n=`aff_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={...e,status:`pending`,submittedAt:t,reviewedAt:null,reviewedBy:null,id:n};console.log(` New application object:`,r);try{let e=rO();console.log(` Current applications in localStorage:`,e.length),e.push(r),iO(e),console.log(` Affiliate application saved to localStorage`),console.log(` Total applications now:`,e.length)}catch(e){console.error(` Error saving to localStorage:`,e)}return{success:!0,id:n,mode:`localStorage`}},oO=async()=>{let e=rO();return console.log(` Retrieved ${e.length} affiliate applications from localStorage`),e.sort((e,t)=>new Date(t.submittedAt)-new Date(e.submittedAt))},sO=async(e,t,n)=>{let r=new Date().toISOString(),i={status:t,reviewedAt:r,reviewedBy:n};try{let t=rO(),n=t.findIndex(t=>t.id===e);if(n!==-1)t[n]={...t[n],...i},iO(t),console.log(` Application ${e} updated in localStorage`);else return console.error(` Application ${e} not found in localStorage`),{success:!1,error:`Application not found`}}catch(e){console.error(` Error updating localStorage:`,e)}return{success:!0}},cO=async e=>{try{let t=rO().filter(t=>t.id!==e);iO(t),console.log(` Application ${e} deleted from localStorage`)}catch(e){console.error(` Error deleting from localStorage:`,e)}return{success:!0}},lO=async()=>{let e=await oO();return{total:e.length,pending:e.filter(e=>e.status===`pending`).length,approved:e.filter(e=>e.status===`approved`).length,rejected:e.filter(e=>e.status===`rejected`).length}};function uO(){let{user:e,logout:t}=In(),n=Le(),r=Pe(),[i,a]=(0,b.useState)(()=>{let e=localStorage.getItem(`adminSidebarCollapsed`);return e===null?!0:JSON.parse(e)}),[o,s]=(0,b.useState)(0),[c,l]=(0,b.useState)(0);(0,b.useEffect)(()=>{localStorage.setItem(`adminSidebarCollapsed`,JSON.stringify(i))},[i]),(0,b.useEffect)(()=>{let e=async()=>{let[e,t]=await Promise.all([qD(),lO()]);s(e),l(t.pending)};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]);let u=()=>{t(),n(`/login`)},d=()=>{a(!i)},f=[{path:`/admin/dashboard`,icon:Vp,label:`Dashboard`},{path:`/admin/frames`,icon:Mp,label:`Manage Frames`},{path:`/admin/upload-frame`,icon:ym,label:`Upload Frame`},{path:`/admin/frame-creator`,icon:lm,label:`Frame Creator`},{path:`/admin/users`,icon:Sm,label:`Users`},{path:`/admin/categories`,icon:Np,label:`Categories`},{path:`/admin/analytics`,icon:fp,label:`Analytics`},{path:`/admin/messages`,icon:Kp,label:`Messages`,badge:o},{path:`/admin/affiliates`,icon:Ip,label:`Affiliates`,badge:c},{path:`/admin/maintenance`,icon:dm,label:`Maintenance`},{path:`/admin/settings`,icon:cm,label:`Settings`}],p=e=>r.pathname===e;return(0,G.jsxs)(`div`,{style:{display:`flex`,minHeight:`100vh`,backgroundColor:`#f9fafb`},children:[!i&&(0,G.jsx)(`div`,{onClick:()=>a(!0),style:{position:`fixed`,inset:0,backgroundColor:`rgba(0, 0, 0, 0.3)`,zIndex:40,transition:`opacity 0.3s ease`}}),(0,G.jsxs)(`aside`,{style:{position:`fixed`,left:0,top:0,bottom:0,width:`256px`,backgroundColor:`white`,borderRight:`1px solid #e5e7eb`,boxShadow:i?`none`:`4px 0 20px rgba(0,0,0,0.15)`,zIndex:50,display:`flex`,flexDirection:`column`,transform:i?`translateX(-100%)`:`translateX(0)`,transition:`transform 0.3s ease, box-shadow 0.3s ease`},children:[(0,G.jsxs)(`div`,{style:{padding:`20px 16px`,borderBottom:`1px solid #e5e7eb`,display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsx)(`div`,{style:{width:`36px`,height:`36px`,background:`linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%)`,borderRadius:`8px`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:`bold`,fontSize:`18px`},children:`F`}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{style:{fontWeight:`bold`,fontSize:`16px`,color:`#111827`},children:`Fremio`}),(0,G.jsx)(`div`,{style:{fontSize:`12px`,color:`#6b7280`},children:`Admin Panel`})]})]}),(0,G.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`8px`,border:`none`,background:`transparent`,cursor:`pointer`,borderRadius:`6px`,display:`flex`,alignItems:`center`,justifyContent:`center`},onMouseEnter:e=>e.currentTarget.style.backgroundColor=`#f3f4f6`,onMouseLeave:e=>e.currentTarget.style.backgroundColor=`transparent`,title:`Close sidebar`,children:(0,G.jsx)(Zp,{size:20,color:`#6b7280`})})]}),(0,G.jsx)(`nav`,{style:{flex:1,padding:`16px 12px`,overflowY:`auto`},children:f.map(e=>(0,G.jsxs)(tn,{to:e.path,onClick:()=>a(!0),style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 12px`,marginBottom:`4px`,borderRadius:`8px`,textDecoration:`none`,fontSize:`14px`,fontWeight:`500`,transition:`all 0.2s`,background:p(e.path)?`linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%)`:`transparent`,color:p(e.path)?`white`:`#374151`,boxShadow:p(e.path)?`0 2px 4px rgba(0,0,0,0.1)`:`none`,position:`relative`},onMouseEnter:t=>{p(e.path)||(t.currentTarget.style.backgroundColor=`#f3f4f6`)},onMouseLeave:t=>{p(e.path)||(t.currentTarget.style.backgroundColor=`transparent`)},children:[(0,G.jsx)(e.icon,{size:18}),(0,G.jsx)(`span`,{children:e.label}),e.badge>0&&(0,G.jsx)(`span`,{style:{marginLeft:`auto`,background:p(e.path)?`#ffffff`:`#ef4444`,color:p(e.path)?`#ec4899`:`white`,borderRadius:`12px`,padding:`2px 8px`,fontSize:`0.7rem`,fontWeight:`700`,minWidth:`20px`,textAlign:`center`},children:e.badge})]},e.path))}),(0,G.jsxs)(`div`,{style:{padding:`12px`,borderTop:`1px solid #e5e7eb`,backgroundColor:`#f9fafb`},children:[(0,G.jsxs)(`div`,{style:{padding:`12px`,backgroundColor:`white`,borderRadius:`8px`,border:`1px solid #e5e7eb`,marginBottom:`8px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`6px`},children:[(0,G.jsx)(dm,{size:14,color:`#8b5cf6`}),(0,G.jsx)(`span`,{style:{fontSize:`11px`,color:`#6b7280`,fontWeight:`500`},children:`Administrator`})]}),(0,G.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:`600`,color:`#111827`,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`},children:e?.name||e?.email})]}),(0,G.jsxs)(`button`,{onClick:u,style:{width:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`8px`,padding:`10px`,border:`none`,borderRadius:`8px`,background:`linear-gradient(135deg, #ef4444 0%, #dc2626 100%)`,color:`white`,fontSize:`14px`,fontWeight:`500`,cursor:`pointer`,transition:`all 0.2s`,boxShadow:`0 1px 2px rgba(0,0,0,0.1)`},onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-1px)`,e.currentTarget.style.boxShadow=`0 4px 6px rgba(0,0,0,0.15)`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`0 1px 2px rgba(0,0,0,0.1)`},children:[(0,G.jsx)(Wp,{size:16}),(0,G.jsx)(`span`,{children:`Logout`})]})]})]}),(0,G.jsxs)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,marginLeft:0,transition:`margin-left 0.3s ease`},children:[(0,G.jsx)(`header`,{className:`admin-top-header`,style:{backgroundColor:`white`,borderBottom:`1px solid #e5e7eb`,position:`sticky`,top:0,zIndex:30,boxShadow:`0 1px 2px rgba(0,0,0,0.05)`},children:(0,G.jsxs)(`div`,{style:{padding:`0 16px`,height:`64px`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,maxWidth:`100%`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsx)(`button`,{onClick:d,style:{padding:`10px`,border:`1px solid #e5e7eb`,background:i?`linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%)`:`#f9fafb`,cursor:`pointer`,borderRadius:`8px`,display:`flex`,alignItems:`center`,justifyContent:`center`,transition:`all 0.2s ease`,boxShadow:i?`0 2px 8px rgba(236, 72, 153, 0.3)`:`none`},onMouseEnter:e=>{e.currentTarget.style.transform=`scale(1.05)`},onMouseLeave:e=>{e.currentTarget.style.transform=`scale(1)`},title:i?`Open menu`:`Close menu`,children:i?(0,G.jsx)(Qp,{size:20,color:`white`}):(0,G.jsx)(Zp,{size:20,color:`#374151`})}),i&&(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`},children:[(0,G.jsx)(`div`,{style:{width:`32px`,height:`32px`,background:`linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%)`,borderRadius:`6px`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:`bold`,fontSize:`14px`},children:`F`}),(0,G.jsx)(`span`,{style:{fontWeight:`600`,color:`#111827`,fontSize:`15px`},children:`Fremio`})]}),(0,G.jsx)(`h1`,{style:{fontSize:`18px`,fontWeight:`bold`,color:`#111827`,margin:0,marginLeft:i?`16px`:`0`,paddingLeft:i?`16px`:`0`,borderLeft:i?`1px solid #e5e7eb`:`none`},children:f.find(e=>e.path===r.pathname)?.label||`Admin Panel`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,padding:`8px 12px`,backgroundColor:`#f5f3ff`,borderRadius:`8px`,border:`1px solid #e9d5ff`},children:[(0,G.jsx)(dm,{size:16,color:`#8b5cf6`}),(0,G.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:`600`,color:`#7c3aed`},children:e?.name||`Admin`})]})]})}),(0,G.jsx)(`main`,{style:{flex:1,overflowY:`auto`,backgroundColor:`#f9fafb`},children:(0,G.jsx)(ut,{})}),(0,G.jsx)(`footer`,{style:{backgroundColor:`white`,borderTop:`1px solid #e5e7eb`,marginTop:`auto`},children:(0,G.jsxs)(`div`,{style:{padding:`12px 16px`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,flexWrap:`wrap`,gap:`8px`,fontSize:`12px`,color:`#6b7280`},children:[(0,G.jsx)(`div`,{children:` 2024 Fremio Admin Panel`}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`16px`},children:[(0,G.jsx)(`a`,{href:`#`,style:{color:`#6b7280`,textDecoration:`none`,fontWeight:`500`},onMouseEnter:e=>e.currentTarget.style.color=`#ec4899`,onMouseLeave:e=>e.currentTarget.style.color=`#6b7280`,children:`Help`}),(0,G.jsx)(`a`,{href:`#`,style:{color:`#6b7280`,textDecoration:`none`,fontWeight:`500`},onMouseEnter:e=>e.currentTarget.style.color=`#ec4899`,onMouseLeave:e=>e.currentTarget.style.color=`#6b7280`,children:`Docs`}),(0,G.jsx)(`a`,{href:`#`,style:{color:`#6b7280`,textDecoration:`none`,fontWeight:`500`},onMouseEnter:e=>e.currentTarget.style.color=`#ec4899`,onMouseLeave:e=>e.currentTarget.style.color=`#6b7280`,children:`Settings`})]})]})})]})]})}const dO={FIREBASE:`firebase`,VPS:`vps`,HYBRID:`hybrid`},fO=(()=>`vps`)(),pO=(()=>`https://api.fremio.id/api`)(),mO=()=>fO===dO.VPS;console.log(` Backend Mode: ${fO.toUpperCase()}`),mO()&&console.log(` VPS API URL: ${pO}`);var hO=`fremio_local_events`,gO=1800*1e3,_O=null,vO=null,yO=null,bO=[],xO=null,SO=10,CO=5e3,wO=()=>{let e=pO||`/api`;return e.endsWith(`/api`)?e:`${e}/api`},TO=()=>localStorage.getItem(`token`),EO=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,DO=()=>{let e=Date.now();return _O&&yO&&e-yO>gO&&(NO(),_O=null),_O||(_O=EO(),vO=e,sessionStorage.setItem(`fremio_session_id`,_O),MO()),yO=e,_O},OO=()=>{try{let e=localStorage.getItem(`fremio_user`);if(e){let t=JSON.parse(e);return t.email||t.uid||t.id}}catch{}let e=localStorage.getItem(`fremio_visitor_id`);return e||(e=`anon_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem(`fremio_visitor_id`,e)),e},kO=async(e,t)=>{try{let n=wO(),r=TO(),i={"Content-Type":`application/json`};r&&(i.Authorization=`Bearer ${r}`);let a=await fetch(`${n}/analytics${e}`,{method:`POST`,headers:i,body:JSON.stringify(t),keepalive:!0});return a.ok?await a.json():(console.warn(`Analytics request failed:`,a.status),null)}catch(n){return console.warn(`Analytics error:`,n.message),jO(e,t),null}},AO=async(e,t={})=>{try{let n=wO(),r=TO(),i={"Content-Type":`application/json`};r&&(i.Authorization=`Bearer ${r}`);let a=new URLSearchParams(t).toString(),o=`${n}/analytics${e}${a?`?`+a:``}`,s=await fetch(o,{method:`GET`,headers:i});if(!s.ok)throw Error(`Analytics fetch failed: ${s.status}`);return await s.json()}catch(e){throw console.error(`Analytics fetch error:`,e.message),e}},jO=(e,t)=>{try{let n=JSON.parse(localStorage.getItem(hO)||`[]`);n.push({endpoint:e,data:t,timestamp:new Date().toISOString(),synced:!1}),n.length>200&&n.splice(0,n.length-200),localStorage.setItem(hO,JSON.stringify(n))}catch(e){console.warn(`Failed to save event to localStorage:`,e)}},MO=async()=>{await kO(`/track/session`,{sessionId:_O,action:`start`,referrer:document.referrer,landingPage:window.location.pathname})},NO=async()=>{if(!_O||!vO)return;let e=Math.floor((Date.now()-vO)/1e3);await kO(`/track/session`,{sessionId:_O,action:`end`,duration:e})},PO=()=>{xO||=setTimeout(()=>{FO()},CO)},FO=async()=>{if(xO&&=(clearTimeout(xO),null),bO.length===0)return;let e=[...bO];bO=[];for(let t of e)await kO(`/track/event`,t)};const IO=async()=>{DO(),console.log(` Session tracked:`,_O)},LO=async(e,t=`general`,n={})=>{let r=DO();bO.push({sessionId:r,eventName:e,eventCategory:t,eventData:n}),bO.length>=SO?FO():PO()},RO=async(e,t={})=>{await LO(e,`funnel`,{...t,userId:OO()})},zO=async(e,t,n=`png`,r=!1,i=`download`)=>{let a=DO();await kO(`/track/download`,{sessionId:a,frameId:e,frameName:t,format:n,hasWatermark:r,method:i,isMobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),deviceType:/iPhone|iPad|iPod/i.test(navigator.userAgent)?`ios`:/Android/i.test(navigator.userAgent)?`android`:`desktop`})},BO=async(e,t=null,n={})=>{let r=DO();await kO(`/track/event`,{sessionId:r,category:`camera_permission`,action:e,label:t||`user_action`,metadata:{browser:navigator.userAgent,isMobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),timestamp:new Date().toISOString(),...n}})},VO=async(e,t,n=`view`)=>{await LO(`frame_${n}`,`frame`,{frameId:e,frameName:t})},HO=(e,t)=>VO(e,t,`view`),UO=async(e=30)=>await AO(`/dashboard/overview`,{days:e}),WO=async()=>{try{let e=await UO(30),t=e.uniqueUsers>0?Math.round(e.downloads/e.uniqueUsers*100):0,n=e.totalSessions>0?Math.round(e.uniqueUsers/e.totalSessions*100):0,r=e.uniqueUsers>0?(e.downloads/e.uniqueUsers).toFixed(1):0;return{source:`firebase`,totalVisitors:e.totalSessions||0,uniqueVisitors:e.uniqueUsers||0,totalUsers:e.totalUsers||0,totalPhotosTaken:e.photosTaken||0,totalDownloads:e.downloads||0,totalShares:e.shares||0,conversionRate:e.conversionRate||0,activationRate:t,activatedUsers:e.downloads||0,retentionRate:n,weeklyGrowth:0,avgDownloadsPerUser:r,topFrames:e.topFrames||[],dailyStats:e.dailyStats||[],registeredUsers:e.totalUsers||0,registrationRate:0,registrations7Days:0,previousRegistrations7Days:0,topCreators:[],funnel:{visit:e.totalSessions||0,frameView:e.photosTaken||0,frameSelect:e.photosTaken||0,photoTaken:e.photosTaken||0,downloaded:e.downloads||0},conversionRates:{viewToSelect:100,selectToCapture:100,captureToDownload:e.photosTaken>0?Math.round(e.downloads/e.photosTaken*100):0,overallConversion:e.conversionRate||0}}}catch(e){return console.error(`Failed to get metrics from VPS:`,e),GO()}};var GO=()=>{try{let e=JSON.parse(localStorage.getItem(hO)||`[]`),t=e.filter(e=>e.data?.eventName===`page_view`||e.endpoint?.includes(`pageview`)).length,n=e.filter(e=>e.data?.eventName===`photo_taken`).length,r=e.filter(e=>e.endpoint?.includes(`download`)).length,i=e.filter(e=>e.data?.eventName===`share`).length;return{source:`local`,totalVisitors:t,uniqueVisitors:Math.round(t*.7),totalPhotosTaken:n,totalDownloads:r,totalShares:i,conversionRate:t>0?Math.round(r/t*100):0,topFrames:[],dailyStats:[]}}catch{return{source:`local`,totalVisitors:0,uniqueVisitors:0,totalPhotosTaken:0,totalDownloads:0,totalShares:0,conversionRate:0,topFrames:[],dailyStats:[]}}},KO=`/assets/frame1-mjujrh6i-DFMM74zl.png`,qO=`/assets/frame2-mjujrh6i-Bnp3d5zI.png`,JO=`/assets/frame3-mjujrh6i-BDiUIobJ.png`;function YO(){let{isAuthenticated:e}=In(),[t,n]=(0,b.useState)(`A`);(0,b.useEffect)(()=>{let e=localStorage.getItem(`heroVariant`);if(e)n(e);else{let e=Math.random()<.5?`A`:`B`;n(e),localStorage.setItem(`heroVariant`,e)}},[]),(0,b.useEffect)(()=>{(async()=>{try{console.log(` Home: Tracking visit...`),await IO(),console.log(` Home: Session tracked`),await RO(`visit`),console.log(` Home: Visit event tracked`)}catch(e){console.error(` Home: Tracking error:`,e)}})()},[]);let r={A:{headline:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`span`,{className:`accent`,children:`Momen`}),` tidak perlu dijelaskan.`,(0,G.jsx)(`br`,{}),`Cukup `,(0,G.jsx)(`span`,{className:`accent`,children:`dirasakan`}),`.`]}),subCopy:`Fremio membantu kamu mengemas momen menjadi sesuatu yang layak diingat. Dengan cara yang sederhana, indah, dan terasa milikmu.`,cta:`Ciptakan Momen`},B:{headline:(0,G.jsxs)(G.Fragment,{children:[`Setiap orang punya `,(0,G.jsx)(`span`,{className:`accent`,children:`cara sendiri`}),` merayakan `,(0,G.jsx)(`span`,{className:`accent`,children:`momen`})]}),subCopy:`Fremio bukan tentang bagaimana seharusnya momen terlihat. Ini tentang bagaimana momen itu terasa  bagi kamu.`,cta:`Rayakan Momenmu`}}[t];return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`section`,{id:`home`,className:`hero-fremio`,style:{scrollMarginTop:`64px`},children:(0,G.jsx)(`div`,{className:`container`,children:(0,G.jsxs)(`div`,{className:`hero-grid`,children:[(0,G.jsxs)(`div`,{className:`hero-left`,children:[(0,G.jsx)(`h1`,{className:`hero-h1`,children:r.headline}),(0,G.jsx)(`p`,{className:`hero-sub`,children:r.subCopy}),(0,G.jsx)(nn,{to:`/frames`,className:`cta-pink`,children:r.cta}),(0,G.jsx)(XO,{className:`deco cam-tl`}),(0,G.jsx)(ZO,{className:`deco film-tc`}),(0,G.jsx)(XO,{className:`deco cam-bl`}),(0,G.jsx)(ZO,{className:`deco film-bc`})]}),(0,G.jsxs)(`div`,{className:`hero-right`,children:[(0,G.jsx)(`img`,{src:KO,alt:`Contoh frame utama`,className:`shot main`}),(0,G.jsx)(`img`,{src:qO,alt:`Contoh frame kiri`,className:`shot left`}),(0,G.jsx)(`img`,{src:JO,alt:`Contoh frame kanan`,className:`shot right`})]})]})})}),(0,G.jsx)(`section`,{id:`about`,className:`about-section`,style:{scrollMarginTop:`64px`},children:(0,G.jsx)(`div`,{className:`container`,children:(0,G.jsxs)(`div`,{className:`about-content`,children:[(0,G.jsxs)(`div`,{className:`about-header fade-in-up`,children:[(0,G.jsx)(`span`,{className:`about-overline`,children:` fremio journey `}),(0,G.jsx)(`h2`,{className:`about-title`,children:(0,G.jsx)(`span`,{className:`about-title-main`,children:`Momen yang Kita Lewatkan`})})]}),(0,G.jsxs)(`div`,{className:`about-story`,children:[(0,G.jsx)(`div`,{className:`story-quote fade-in-up delay-1`,children:`"`}),(0,G.jsxs)(`p`,{className:`about-text fade-in-up delay-2`,children:[`Suatu hari kamu akan melihat ke belakang dan menyadari bahwa bukan `,(0,G.jsx)(`em`,{children:`momen besar`}),` yang paling penting, tapi `,(0,G.jsx)(`em`,{children:`momen sehari-hari`}),` yang mungkin biasa sajatawa keluarga, candaan teman, tatapan lembut pasangan.`]}),(0,G.jsxs)(`p`,{className:`about-text about-text-fade fade-in-up delay-3`,children:[`Suatu hari rumah akan terasa sepi. Tempat favoritmu terasa hambar. Yang paling penting adalah: `,(0,G.jsx)(`strong`,{children:`apakah kamu benar-benar ada di sana`}),` saat itu semua terjadi?`]}),(0,G.jsx)(`p`,{className:`about-closing fade-in-up delay-4`,children:` Mari berada di sana, bersama `})]}),(0,G.jsxs)(`div`,{className:`about-divider fade-in-up delay-5`,children:[(0,G.jsx)(`span`,{}),(0,G.jsx)(`span`,{className:`divider-dot`,children:``}),(0,G.jsx)(`span`,{})]}),(0,G.jsxs)(`div`,{className:`mv-grid`,children:[(0,G.jsxs)(`div`,{className:`mv-card fade-in-up delay-5`,children:[(0,G.jsx)(`span`,{className:`mv-label`,children:`Vision`}),(0,G.jsx)(`p`,{children:`Setiap orang punya cerita yang layak dirayakan. Fremio hadir sebagai teman dalam setiap cerita unik yang terjadi sehari-hari.`})]}),(0,G.jsxs)(`div`,{className:`mv-card fade-in-up delay-6`,children:[(0,G.jsx)(`span`,{className:`mv-label`,children:`Mission`}),(0,G.jsx)(`p`,{children:`Menyediakan frame yang pas untuk ceritamu setiap bulannyaagar momen kecil terasa istimewa.`})]})]})]})})})]})}function XO({className:e=``}){return(0,G.jsxs)(`svg`,{className:e,viewBox:`0 0 24 24`,"aria-hidden":`true`,children:[(0,G.jsx)(`path`,{d:`M7 6h3l1-2h2l1 2h3a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z`,fill:`currentColor`}),(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`4`,fill:`#fff`}),(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`2.6`,fill:`currentColor`})]})}function ZO({className:e=``}){return(0,G.jsxs)(`svg`,{className:e,viewBox:`0 0 64 64`,"aria-hidden":`true`,children:[(0,G.jsx)(`rect`,{x:`10`,y:`14`,width:`36`,height:`36`,rx:`4`,fill:`currentColor`}),(0,G.jsx)(`rect`,{x:`18`,y:`22`,width:`12`,height:`12`,fill:`#fff`}),(0,G.jsx)(`rect`,{x:`34`,y:`22`,width:`4`,height:`12`,fill:`#fff`}),(0,G.jsx)(`rect`,{x:`18`,y:`38`,width:`12`,height:`4`,fill:`#fff`}),(0,G.jsx)(`rect`,{x:`48`,y:`20`,width:`6`,height:`24`,rx:`2`,fill:`currentColor`}),(0,G.jsx)(`circle`,{cx:`51`,cy:`24`,r:`1.6`,fill:`#fff`}),(0,G.jsx)(`circle`,{cx:`51`,cy:`40`,r:`1.6`,fill:`#fff`})]})}var QO=`/assets/Everything%20You%20Are-mjujrh6i-CdefMaPW.png`,$O=`/assets/FremioSeries-blue-2-mjujrh6i-B5pXOU3W.png`,ek=`/assets/FremioSeries-babyblue-3-mjujrh6i-B2fJnRv7.png`,tk=`/assets/FremioSeries-black-3-mjujrh6i-CSx5W-Nn.png`,nk=`/assets/FremioSeries-blue-3-mjujrh6i-B23Qyzxk.png`,rk=`/assets/FremioSeries-cream-3-mjujrh6i-CUffidfK.png`,ik=`/assets/FremioSeries-green-3-mjujrh6i-CsjrGuhw.png`,ak=`/assets/FremioSeries-maroon-3-mjujrh6i-BqO_9j9u.png`,ok=`/assets/FremioSeries-orange-3-mjujrh6i-CCMNFmRj.png`,sk=`/assets/FremioSeries-pink-3-mjujrh6i-Nbg5RheE.png`,ck=`/assets/FremioSeries-purple-3-mjujrh6i-DeZtk4x9.png`,lk=`/assets/FremioSeries-white-3-mjujrh6i-CWTBArXr.png`,uk=`/assets/FremioSeries-blue-4-mjujrh6i-D7sHCwpI.png`,dk=`/assets/7%20Des-mjujrh6i-CG2hfBhW.png`,fk=`/assets/Abbey%20Road-mjujrh6i-DAtbj3Fj.png`,pk=`/assets/Lagipula%20Hidup%20Akan%20Berakhir-mjujrh6i-B5WiXZ1W.png`,mk=`/assets/Membangun%20_%20Menghancurkan-mjujrh6i-DDRKkt_z.png`,hk=`/assets/Menari%20dengan%20Bayangan-mjujrh6i-U97hNN0z.png`,gk=`/assets/PS.%20I%20LOVE%20YOU-mjujrh6i-B16x22QN.png`,_k=`/assets/Sal%20Priadi-mjujrh6i-D_OPShHH.png`,vk={"../assets/frames/Everything You Are.png":QO,"../assets/frames/FremioSeries/FremioSeries-2/FremioSeries-blue-2.png":$O,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-babyblue-3.png":ek,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-black-3.png":tk,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-blue-3.png":nk,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-cream-3.png":rk,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-green-3.png":ik,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-maroon-3.png":ak,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-orange-3.png":ok,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-pink-3.png":sk,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-purple-3.png":ck,"../assets/frames/FremioSeries/FremioSeries-3/FremioSeries-white-3.png":lk,"../assets/frames/FremioSeries/FremioSeries-4/FremioSeries-blue-4.png":uk,"../assets/frames/InspiredBy/7 Des.png":dk,"../assets/frames/InspiredBy/Abbey Road.png":fk,"../assets/frames/InspiredBy/Lagipula Hidup Akan Berakhir.png":pk,"../assets/frames/InspiredBy/Membangun & Menghancurkan.png":mk,"../assets/frames/InspiredBy/Menari dengan Bayangan.png":hk,"../assets/frames/InspiredBy/PS. I LOVE YOU.png":gk,"../assets/frames/InspiredBy/Sal Priadi.png":_k},yk=e=>{if(!e)return null;let t=e.replace(`/src/`,`../`);return vk[t]||(console.warn(` Frame image not found: ${e}`),null)};const bk=[`FremioSeries-blue-2`,`FremioSeries-babyblue-3`,`FremioSeries-black-3`,`FremioSeries-blue-3`,`FremioSeries-cream-3`,`FremioSeries-green-3`,`FremioSeries-maroon-3`,`FremioSeries-orange-3`,`FremioSeries-pink-3`,`FremioSeries-purple-3`,`FremioSeries-white-3`,`FremioSeries-blue-4`,`SalPriadi`,`InspiredBy-7Des`,`InspiredBy-AbbeyRoad`,`InspiredBy-LagipulaHidupAkanBerakhir`,`InspiredBy-MembangunDanMenghancurkan`,`InspiredBy-MenariDenganBayangan`,`InspiredBy-PSILOVEYOU`,`Testframe1`,`Testframe2`,`Testframe3`];var xk={};const Sk={"FremioSeries-blue-2":{id:`FremioSeries-blue-2`,name:`FremioSeries Blue 2 Foto`,maxCaptures:2,description:`2 slot foto vertikal - Blue Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-2/FremioSeries-blue-2.png`,category:`portrait`},"FremioSeries-babyblue-3":{id:`FremioSeries-babyblue-3`,name:`FremioSeries Baby Blue 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - Baby Blue Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-babyblue-3.png`,category:`photobooth`},"FremioSeries-black-3":{id:`FremioSeries-black-3`,name:`FremioSeries Black 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - Black Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-black-3.png`,category:`photobooth`},"FremioSeries-blue-3":{id:`FremioSeries-blue-3`,name:`FremioSeries Blue 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - Blue Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-blue-3.png`,category:`photobooth`},"FremioSeries-cream-3":{id:`FremioSeries-cream-3`,name:`FremioSeries Cream 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - Cream Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-cream-3.png`,category:`photobooth`},"FremioSeries-green-3":{id:`FremioSeries-green-3`,name:`FremioSeries Green 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - Green Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-green-3.png`,category:`photobooth`},"FremioSeries-maroon-3":{id:`FremioSeries-maroon-3`,name:`FremioSeries Maroon 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - Maroon Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-maroon-3.png`,category:`photobooth`},"FremioSeries-orange-3":{id:`FremioSeries-orange-3`,name:`FremioSeries Orange 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - Orange Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-orange-3.png`,category:`photobooth`},"FremioSeries-pink-3":{id:`FremioSeries-pink-3`,name:`FremioSeries Pink 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - Pink Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-pink-3.png`,category:`photobooth`},"FremioSeries-purple-3":{id:`FremioSeries-purple-3`,name:`FremioSeries Purple 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - Purple Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-purple-3.png`,category:`photobooth`},"FremioSeries-white-3":{id:`FremioSeries-white-3`,name:`FremioSeries White 6 Foto`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik - White Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-3/FremioSeries-white-3.png`,category:`photobooth`},"FremioSeries-blue-4":{id:`FremioSeries-blue-4`,name:`FremioSeries Blue 4 Foto`,maxCaptures:4,description:`4 slot foto grid 2x2 - Blue Frame`,imagePath:`/src/assets/frames/FremioSeries/FremioSeries-4/FremioSeries-blue-4.png`,category:`grid`},SalPriadi:{id:`SalPriadi`,name:`Sal Priadi 6 Foto`,maxCaptures:3,description:`Frame kolaborasi Sal Priadi dengan layout photobooth 3 x 2.`,imagePath:`/src/assets/frames/InspiredBy/Sal Priadi.png`,category:`photobooth`},"InspiredBy-7Des":{id:`InspiredBy-7Des`,name:`Inspired By 7 Des`,maxCaptures:4,description:`Frame Inspired By dengan layout photobooth 4 x 2 (8 slot).`,imagePath:`/src/assets/frames/InspiredBy/7 Des.png`,category:`photobooth`},"InspiredBy-AbbeyRoad":{id:`InspiredBy-AbbeyRoad`,name:`Inspired By Abbey Road`,maxCaptures:3,description:`Frame Inspired By dengan layout photobooth 3 x 2.`,imagePath:`/src/assets/frames/InspiredBy/Abbey Road.png`,category:`photobooth`},"InspiredBy-LagipulaHidupAkanBerakhir":{id:`InspiredBy-LagipulaHidupAkanBerakhir`,name:`Inspired By Lagipula Hidup Akan Berakhir`,maxCaptures:3,description:`Frame Inspired By dengan layout photobooth 3 x 2.`,imagePath:`/src/assets/frames/InspiredBy/Lagipula Hidup Akan Berakhir.png`,category:`photobooth`},"InspiredBy-MembangunDanMenghancurkan":{id:`InspiredBy-MembangunDanMenghancurkan`,name:`Inspired By Membangun & Menghancurkan`,maxCaptures:3,description:`Frame Inspired By dengan layout photobooth 3 x 2.`,imagePath:`/src/assets/frames/InspiredBy/Membangun & Menghancurkan.png`,category:`photobooth`},"InspiredBy-MenariDenganBayangan":{id:`InspiredBy-MenariDenganBayangan`,name:`Inspired By Menari dengan Bayangan`,maxCaptures:3,description:`Frame Inspired By dengan layout photobooth 3 x 2.`,imagePath:`/src/assets/frames/InspiredBy/Menari dengan Bayangan.png`,category:`photobooth`},"InspiredBy-PSILOVEYOU":{id:`InspiredBy-PSILOVEYOU`,name:`Inspired By PS. I LOVE YOU`,maxCaptures:3,description:`Frame Inspired By dengan layout photobooth 3 x 2.`,imagePath:`/src/assets/frames/InspiredBy/PS. I LOVE YOU.png`,category:`photobooth`},Testframe1:{id:`Testframe1`,name:`Frame 2 Foto`,maxCaptures:2,description:`2 slot foto vertikal`,imagePath:`/src/assets/frames/Testframe1.png`,category:`portrait`},Testframe2:{id:`Testframe2`,name:`Frame 6 Foto (Photobooth Style)`,maxCaptures:3,description:`3 foto x 2 = 6 slot photobooth klasik`,imagePath:`/src/assets/frames/Testframe2.png`,category:`photobooth`},Testframe3:{id:`Testframe3`,name:`Frame 4 Foto`,maxCaptures:4,description:`4 slot foto grid 2x2`,imagePath:`/src/assets/frames/Testframe3.png`,category:`grid`}};var Ck=new Map,wk=(e,t)=>{if(!Array.isArray(e)||e.length===0)return[];let n=t?.canvasWidth||1080,r=t?.canvasHeight||1920;return e.map((e,t)=>{let i=Math.round(e.left*n),a=Math.round(e.top*r),o=Math.round(e.width*n),s=Math.round(e.height*r);return{id:e.id||`photo-slot-${t}`,type:`photo`,x:i,y:a,width:o,height:s,rotation:0,zIndex:e.zIndex||100,isLocked:!1,data:{fill:`#d1e3f0`,borderRadius:24,stroke:null,strokeWidth:0,label:`Foto ${e.photoIndex+1}`,photoIndex:e.photoIndex===void 0?t:e.photoIndex}}})};const Tk=async e=>{if(Ck.has(e))return console.log(` Loading ${e} from cache`),Ck.get(e);if(!bk.includes(e))return console.warn(` Frame ${e} not found in registry`),null;try{console.log(` Loading ${e} configuration...`);let t=`./frame-configs/${e}.js`,n=xk[t];if(!n)return console.error(` No module loader found for ${t}`),null;let r=await n(),i=r.frameConfig||r.default;if(i&&i.imagePath){let e=yk(i.imagePath);e&&(i.frameImage=e)}if(i&&i.slots&&!i.designer?.elements){let t=i.layout?.canvasWidth||1080,n=i.layout?.canvasHeight||1920,r=i.layout?.backgroundColor||`#ffffff`,a=i.layout?.aspectRatio||`9:16`,o=wk(i.slots,i.layout);i.designer={elements:o,canvasBackground:r,canvasWidth:t,canvasHeight:n,aspectRatio:a},console.log(` Converted ${o.length} slots to designer elements for ${e}`)}return Ck.set(e,i),console.log(` ${e} configuration loaded successfully`),i}catch(t){return console.error(` Failed to load ${e} configuration:`,t),null}},Ek=e=>Sk[e]||null,Dk=()=>bk.map(e=>Sk[e]),Ok=e=>bk.includes(e),kk=e=>{Ck.has(e)&&(Ck.delete(e),console.log(` Cleared cache for frame: ${e}`))},Ak=async e=>{try{kk(e);let t=`./frame-configs/${e}.js`,n=xk[t];if(!n)return console.error(` No module loader found for ${t}`),null;let r=await n(),i=r.frameConfig||r.default;if(i)return Ck.set(e,i),console.log(` Reloaded frame config for ${e}`),i}catch(t){console.error(` Failed to reload frame config for ${e}:`,t)}return null},jk=async(e=bk)=>{console.log(` Preloading frame configurations...`);let t=e.map(e=>Tk(e));try{await Promise.all(t),console.log(` All frame configurations preloaded`)}catch(e){console.error(` Error preloading frame configurations:`,e)}};var Mk=null,Nk=async()=>{if(!Mk){let e=await w(()=>import(`./customFrameService-mjujrh6i-BDZlrGYn.js`),[]);Mk=e.default||e}return Mk},Pk=class{constructor(){this.baseUrl=pO}toPublicUrl(e){if(!e||typeof e!=`string`||e.startsWith(`data:`))return e;if(e.startsWith(`http://`)){if(e.includes(`72.61.210.203`)){let t=e.match(/72\.61\.210\.203(\/.*)/);if(t)return`https://fremio.id/proxy${t[1]}`}return e.replace(`http://`,`https://`)}return e.startsWith(`https://`)?e:e.startsWith(`/uploads/`)?`${this.baseUrl.replace(`/api`,``)}${e}`:e}normalizeFrameMedia(e){if(!e||typeof e!=`object`)return e;let t=e.layout&&typeof e.layout==`object`?e.layout:null;if(!t||!Array.isArray(t.elements))return e;let n=t.elements.map(e=>{if(!e||typeof e!=`object`)return e;let t=e.data&&typeof e.data==`object`?e.data:null;return t?{...e,data:{...t,image:this.toPublicUrl(t.image),originalImage:this.toPublicUrl(t.originalImage)}}:e});return{...e,layout:{...t,elements:n}}}getToken(){let e=localStorage.getItem(`fremio_token`)||localStorage.getItem(`auth_token`);return e||console.warn(` No token found in localStorage. Keys available:`,Object.keys(localStorage)),e}async request(e,t={}){let n=this.getToken();if(!n&&t.method&&t.method!==`GET`)throw console.error(` No auth token found for authenticated request:`,e),console.error(`   Please login first at /admin/login`),Error(`No token provided`);let r={...t.headers||{},...n&&{Authorization:`Bearer ${n}`}};t.body instanceof FormData||(r[`Content-Type`]=`application/json`);try{let n=await fetch(`${this.baseUrl}${e}`,{...t,headers:r});if(!n)throw Error(`Network error: No response from server`);let i;try{i=await n.json()}catch{i={error:`Server returned status ${n.status}`}}if(!n.ok)throw console.error(` Request failed (${n.status}):`,i),n.status===401?console.warn(` Authentication failed - token may be expired`):n.status===403?console.warn(` Access denied - insufficient permissions`):n.status===404?console.warn(` Resource not found`):n.status>=500&&console.error(` Server error - please try again later`),Error(i.error||i.message||`Request failed with status ${n.status}`);return i}catch(e){throw e.name===`TypeError`&&e.message.includes(`fetch`)?(console.error(` Network error: Unable to connect to server`),Error(`Tidak dapat terhubung ke server. Periksa koneksi internet Anda.`)):e}}async getAllFrames(e={}){try{let t=e=>(e||[]).map(e=>{let t=e.image_path||e.imagePath,n=e.imageUrl;return!n&&t&&(n=t.startsWith(`http`)?t:`${this.baseUrl.replace(`/api`,``)}${t}`),{...e,imageUrl:n,imagePath:n||t,rawImagePath:t,thumbnailUrl:n}}),n=String(Date.now()),r=!!e?.includeHidden,i=Number.isFinite(e?.limit)?e.limit:500,a=[],o=new Set,s=1,c=1;for(;s<=c&&s<=50&&a.length<1e4;){let e=new URLSearchParams;e.set(`ts`,n),e.set(`page`,String(s)),e.set(`limit`,String(i)),r&&e.set(`includeHidden`,`true`);let l=await this.request(`/frames?${e.toString()}`),u=Array.isArray(l)?l:l.frames||[],d=t(u).map(e=>this.normalizeFrameMedia(e));for(let e of d){let t=e?.id==null?null:String(e.id);if(t&&o.has(t))continue;t&&o.add(t),a.push(e)}let f=(!Array.isArray(l)&&l&&l.pagination?l.pagination:null)?.totalPages;if(c=Number.isFinite(f)&&f>0?f:1,c<=1||(s+=1,!u||u.length===0))break}return a}catch(t){if(console.error(`Error getting frames:`,t),e?.throwOnError)throw t;return[]}}async getFrameById(e){try{let t=await this.request(`/frames/${e}`),n=t.frame||t,r={...n,imageUrl:n.image_path?.startsWith(`http`)?n.image_path:`${this.baseUrl.replace(`/api`,``)}${n.image_path}`,imagePath:n.image_path};return this.normalizeFrameMedia(r)}catch(e){return console.error(`Error getting frame:`,e),null}}async getFrameConfig(e){try{return await this.request(`/frames/${e}/config`)}catch(e){return console.error(`Error getting frame config:`,e),null}}async createFrame(e,t=null){if(console.log(` [createFrame] ENTRY - frameData keys:`,Object.keys(e)),console.log(` [createFrame] ENTRY - frameData.layout exists:`,!!e.layout),console.log(` [createFrame] ENTRY - frameData.layout type:`,typeof e.layout),e.layout&&(console.log(` [createFrame] ENTRY - layout keys:`,Object.keys(e.layout)),console.log(` [createFrame] ENTRY - layout.elements:`,e.layout.elements)),t)try{let n=await this.uploadFrameImage(t);n.imagePath&&(e.imagePath=n.imagePath,e.image_path=n.imagePath)}catch(e){console.error(`Error uploading frame image:`,e)}console.log(` [createFrame] AFTER UPLOAD - frameData.layout exists:`,!!e.layout);let n={...e,layout:e.layout||{elements:[]}};return console.log(` [createFrame] bodyToSend.layout:`,n.layout),console.log(` [createFrame] bodyToSend.layout.elements count:`,n.layout?.elements?.length),await this.request(`/frames`,{method:`POST`,body:JSON.stringify(n)})}async updateFrame(e,t,n=null){if(n)try{let e=await this.uploadFrameImage(n);e.imagePath&&(t.imagePath=e.imagePath,t.image_path=e.imagePath)}catch(e){console.error(`Error uploading frame image:`,e)}return console.log(` [vpsClient.updateFrame] frameData.layout exists:`,!!t.layout),console.log(` [vpsClient.updateFrame] frameData.layout.elements:`,t.layout?.elements?.length),await this.request(`/frames/${e}`,{method:`PUT`,body:JSON.stringify(t)})}async deleteFrame(e){return await this.request(`/frames/${e}`,{method:`DELETE`})}async uploadFrameImage(e){let t=new FormData,n=e.name||`frame_${Date.now()}.webp`,r=e.type||`image/webp`,i=new Blob([e],{type:r});return t.append(`image`,i,n),await this.request(`/upload/frame`,{method:`POST`,body:t})}async saveFrame(e,t){if(t){let n=await this.uploadFrameImage(t);e.imagePath=n.imagePath,e.image_path=n.imagePath}return console.log(` [saveFrame] frameData.layout exists:`,!!e.layout),console.log(` [saveFrame] frameData.layout.elements:`,e.layout?.elements?.length),{success:!0,frameId:(await this.createFrame({id:e.id||`frame_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:e.name,description:e.description||``,category:e.category||`custom`,categories:e.categories,image_path:e.imagePath||e.image_path,slots:e.slots||[],max_captures:e.maxCaptures||e.slots?.length||1,maxCaptures:e.maxCaptures||e.slots?.length||1,layout:e.layout||{elements:[]},canvasBackground:e.canvasBackground,canvasWidth:e.canvasWidth,canvasHeight:e.canvasHeight,createdBy:e.createdBy,duplicatePhotos:e.duplicatePhotos})).frame?.id}}async incrementStats(e,t=`download`){try{await this.request(`/frames/${e}/${t}`,{method:`POST`})}catch(e){console.error(`Error incrementing stats:`,e)}}async uploadOverlayImage(e,t=null){let n=new FormData,r=t||e.name||`overlay_${Date.now()}.png`,i=e.type||`image/png`,a=new Blob([e],{type:i});return n.append(`image`,a,r),await this.request(`/upload/overlay`,{method:`POST`,body:n})}},Fk=new Pk,Ik={async getAllFrames(e={}){return mO()?await Fk.getAllFrames(e):await(await Nk()).getAllCustomFrames()},async uploadOverlayImage(e,t=null){return await Fk.uploadOverlayImage(e,t)},async getAllCustomFrames(){return await this.getAllFrames()},async getFrameById(e){return mO()?await Fk.getFrameById(e):await(await Nk()).getCustomFrameById(e)},async getCustomFrameById(e){return await this.getFrameById(e)},async getFrameConfig(e){return mO()?await Fk.getFrameConfig(e):await(await Nk()).getCustomFrameConfig(e)},async getCustomFrameConfig(e){return await this.getFrameConfig(e)},async saveFrame(e,t=null){return mO()?await Fk.saveFrame(e,t):await(await Nk()).saveCustomFrame(e,t)},async saveCustomFrame(e,t=null){return await this.saveFrame(e,t)},async createFrame(e,t=null){return await this.saveFrame(e,t)},async updateFrame(e,t,n=null){if(console.log(` [unified.updateFrame] updates.layout exists:`,!!t.layout),console.log(` [unified.updateFrame] updates.layout.elements:`,t.layout?.elements?.length),mO()){if(n){let e=await Fk.uploadFrameImage(n);t.image_path=e.imagePath,t.imagePath=e.imagePath}return await Fk.updateFrame(e,t)}return await(await Nk()).updateCustomFrame(e,t,n)},async updateCustomFrame(e,t,n=null){return await this.updateFrame(e,t,n)},async deleteFrame(e){return mO()?await Fk.deleteFrame(e):await(await Nk()).deleteCustomFrame(e)},async deleteCustomFrame(e){return await this.deleteFrame(e)},async incrementStats(e,t=`uses`){return mO()?await Fk.incrementStats(e,t===`uses`?`download`:t):await(await Nk()).incrementFrameStats?.(e,t)},async incrementFrameStats(e,t=`uses`){return await this.incrementStats(e,t)},async updateFramesOrder(e){if(mO())return{success:!0,results:await Promise.all(e.map(({id:e,displayOrder:t})=>Fk.updateFrame(e,{displayOrder:t})))};let t=await Nk();return{success:!0,results:await Promise.all(e.map(({id:e,displayOrder:n})=>t.updateCustomFrame(e,{displayOrder:n})))}},async clearAllFrames(){if(mO()){let e=await Fk.getAllFrames();for(let t of e)await Fk.deleteFrame(t.id);return{success:!0}}return await(await Nk()).clearAllCustomFrames?.()},getStorageInfo(){return mO()?{totalMB:`VPS`,framesMB:`VPS`,availableMB:`Unlimited`,isNearLimit:!1,isFull:!1,isVPS:!0}:{totalMB:`Cloud`,framesMB:`Cloud`,availableMB:`Unlimited`,isNearLimit:!1,isFull:!1,isFirebase:!0}},isVPSMode(){return mO()}},Lk=e=>Array.isArray(e)?e.map(e=>({...e})):[],Rk=e=>{if(!e||typeof e!=`object`)return;let t={...e};return Array.isArray(e.elements)&&(t.elements=e.elements.map(e=>!e||typeof e!=`object`?e:{...e,data:e.data?{...e.data}:void 0})),t},zk=e=>{if(!(!e||typeof e!=`object`))return{...e,storedAt:new Date().toISOString()}},Bk=e=>{if(!e||typeof e!=`object`)return;let{elements:t,...n}=e;if(!Array.isArray(t)||t.length===0)return n;let r=t.map(e=>{if(!e||typeof e!=`object`)return e;let t={...e},n=e.type===`background-photo`,r=e.type===`upload`,i=e.type===`photo`;if(t.data&&typeof t.data==`object`){let e={...t.data};!n&&!r&&!i&&(typeof e.image==`string`&&e.image.startsWith(`data:`)&&(e.image=null),typeof e.originalImage==`string`&&e.originalImage.startsWith(`data:`)&&(e.originalImage=null),typeof e.preview==`string`&&e.preview.startsWith(`data:`)&&(e.preview=null)),t.data=e}return t});return{...n,elements:r}};const Vk=e=>{if(!e||typeof e!=`object`)return null;let t={...e,slots:Lk(e.slots),layout:Rk(e.layout),metadata:zk(e.metadata),canvasWidth:e.canvasWidth,canvasHeight:e.canvasHeight};if(!(e.isCustom||e.id?.startsWith(`custom-`)||(e=>typeof e==`string`?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1)(e.id)))delete t.frameImage,delete t.preview;else{let n=e.imagePath||e.frameImage||e.thumbnailUrl||e.image_url;n&&!n.startsWith(`data:`)&&(t.imagePath=n,t.frameImage=n,t.image_url=n)}let n=Bk(e.designer);return n?t.designer=n:delete t.designer,t};var Hk=`custom-`,Uk=e=>typeof e==`string`?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1,Wk=e=>typeof e==`string`?e.startsWith(Hk)||Uk(e):!1,Gk=new class{constructor(){this.currentFrame=null,this.currentConfig=null,this.isLoading=!1}async setCustomFrame(e){if(console.log(` setCustomFrame called with:`,e),console.log(` Frame data keys:`,Object.keys(e)),console.log(` frameData.layout:`,e.layout),console.log(` frameData.layout?.elements:`,e.layout?.elements),console.log(` frameData.designer:`,e.designer),!e||!e.id)return console.error(` Frame data is required to set custom frame.`),!1;this.isLoading=!0;try{let t,n=e.slots&&(Array.isArray(e.slots))&&e.slots.length>0,r=e.imagePath||e.thumbnailUrl;if(console.log(` Frame data check:`),console.log(`  - Has slots: ${n} (${e.slots?.length||0} slots)`),console.log(`  - Has image: ${r}`),console.log(`  - Has layout.elements: ${e.layout?.elements?.length||0} elements`),n&&r){console.log(` Frame data is complete, building config directly from frameData`);let n=e.imagePath||e.thumbnailUrl||e.image_url,r=e.canvasWidth||1080,i=e.canvasHeight||1920;console.log(` Canvas dimensions: ${r}x${i}`);let a=[];n&&(a.push({id:`background-photo-1`,type:`background-photo`,x:0,y:0,width:r,height:i,zIndex:0,data:{image:n,objectFit:`cover`,label:`Frame Background`}}),console.log(` Added background-photo element with image:`,n.substring(0,80)+`...`)),e.slots&&Array.isArray(e.slots)&&e.slots.forEach((e,t)=>{a.push({id:e.id||`photo_${t+1}`,type:`photo`,x:e.left*r,y:e.top*i,width:e.width*r,height:e.height*i,rotation:Number.isFinite(e.rotation)?e.rotation:0,zIndex:e.zIndex||2,data:{photoIndex:e.photoIndex===void 0?t:e.photoIndex,image:null,aspectRatio:e.aspectRatio||`4:5`}})}),console.log(` [DEBUG] frameData.layout:`,e.layout),console.log(` [DEBUG] frameData.layout?.elements:`,e.layout?.elements),e.layout?.elements&&Array.isArray(e.layout.elements)&&(console.log(` Restoring other elements from layout.elements:`,e.layout.elements.length),e.layout.elements.forEach((e,t)=>{console.log(`   Processing layout.elements[${t}]:`,{type:e.type,id:e.id,zIndex:e.zIndex,hasImage:!!e.data?.image,__isOverlay:e.data?.__isOverlay});let n={...e,x:e.xNorm===void 0?e.x:e.xNorm*r,y:e.yNorm===void 0?e.y:e.yNorm*i,width:e.widthNorm===void 0?e.width:e.widthNorm*r,height:e.heightNorm===void 0?e.height:e.heightNorm*i};delete n.xNorm,delete n.yNorm,delete n.widthNorm,delete n.heightNorm,n.type===`upload`&&n.data?.image&&n.data?.photoIndex===void 0&&(n.zIndex=Math.max(n.zIndex||0,500+t),n.data={...n.data,__isOverlay:!0},console.log(` Marked overlay element:`,n.id,`with zIndex:`,n.zIndex)),a.push(n)})),t={id:e.id,name:e.name,description:e.description||``,maxCaptures:e.maxCaptures||3,duplicatePhotos:e.duplicatePhotos||!1,imagePath:n,frameImage:n,thumbnailUrl:e.thumbnailUrl||e.imagePath,slots:e.slots,canvasWidth:r,canvasHeight:i,designer:{elements:a,canvasWidth:r,canvasHeight:i,background:e.canvasBackground||e.designer?.background||`#ffffff`},layout:e.layout||{aspectRatio:`9:16`,orientation:`portrait`,backgroundColor:`#ffffff`},category:e.category||`custom`,...e.isCustom!==void 0&&{isCustom:e.isCustom}},console.log(` [DEBUG] designerElements built:`,a.length),a.forEach((e,t)=>{console.log(`  [${t}] type=${e.type}, id=${e.id?.slice(0,8)}, zIndex=${e.zIndex}, __isOverlay=${e.data?.__isOverlay}`)}),console.log(` Config built successfully from frameData`),console.log(`   isCustom:`,t.isCustom,`(from frameData.isCustom:`,e.isCustom,`)`)}else{if(console.log(` Incomplete data, trying to fetch from service`),t=await Ik.getFrameConfig(e.id),!t){console.error(` Frame "${e.id}" not found in service`);let t=await(Ik.getAllFrames());throw console.error(`   Available frames:`,t.map(e=>e.id)),Error(`Custom frame config for "${e.id}" not found`)}console.log(` Config retrieved from service`)}return this.currentFrame=e.id,this.currentConfig=t,console.log(` Custom frame "${e.id}" set successfully`),console.log(`  - Max captures:`,t.maxCaptures),console.log(`  - Slots count:`,t.slots?.length),console.log(`  - Image path:`,t.imagePath?``:``),console.log(`  - Designer elements:`,t.designer?.elements?.length||0),this.persistFrameSelection(e.id,t),!0}catch(e){return console.error(` Error setting custom frame:`,e),console.error(` Error stack:`,e.stack),!1}finally{this.isLoading=!1}}async setFrame(e,t={}){if(console.log(` setFrame called with: ${e}`),!e)return console.error(`Frame name is required to set frame.`),!1;let n=t.config,r=t.isCustom??n?.isCustom??(Wk(e));this.isLoading=!0;try{let t=n||null;if(!t)if(Ok(e))t=await Tk(e);else{let n=await(Ik.getFrameConfig(e));if(n)t=n,console.log(` Found custom frame: ${e}`);else{let n=(W.getJSON(`frameConfig`));n?.id===e&&(t=n)}if(!t){if(r)throw Error(`Custom frame "${e}" tidak ditemukan di storage`);return console.error(`Frame "${e}" tidak valid atau tidak ditemukan`),!1}}if(!t)throw Error(`Frame configuration for "${e}" is missing`);this.currentFrame=e,this.currentConfig=t,r?(console.log(` CUSTOM FRAME SET DEBUG:`),console.log(`  - Frame ID:`,e),console.log(`  - Config ID:`,t.id),console.log(`  - Max captures:`,t.maxCaptures),console.log(`  - Slots count:`,t.slots?.length),console.log(`  - Is custom:`,t.isCustom)):e===`Testframe3`&&(console.log(` ${e.toUpperCase()} SET FRAME DEBUG:`),console.log(`  - isValidFrame result:`,Ok(e)),console.log(`  - getFrameConfig result:`,this.currentConfig),console.log(`  - maxCaptures:`,this.currentConfig?.maxCaptures),console.log(`  - slots count:`,this.currentConfig?.slots?.length)),this.persistFrameSelection(e,t);let i=Array.isArray(t?.slots)?t.slots.length:0;return console.log(` Frame "${e}" berhasil di-set dengan ${i} slots`),!0}catch(t){return console.error(` Error setting frame "${e}":`,t),!1}finally{this.isLoading=!1}}async loadFrameFromStorage(){let e=(W.getItem(`selectedFrame`)),t=(W.getJSON(`frameConfig`));if(console.log(` Checking localStorage for frame data...`),console.log(`  - Stored frame ID:`,e),console.log(`  - Stored config exists:`,!!t),console.log(`  - Stored config ID:`,t?.id),console.log(`  - Is custom frame:`,e?.startsWith(`custom-`)),t?.id&&t?.designer?.elements)try{let e=t.id;return this.currentFrame=e,this.currentConfig=t,this.persistFrameSelection(e,t),console.log(` Frame "${e}" loaded from cached config`),!0}catch(e){console.warn(` Cached config tidak valid, mencoba ulang...`,e)}if(Wk(e)){let e=(jn.getItem(`activeDraftId`));if(e){console.log(` Custom frame without config, loading from IndexedDB draft:`,e);try{let{default:t}=await(w(async()=>{let{default:e}=await import(`./draftStorage-mjujrh6i-Di68pede.js`);return{default:e}},[])),n=await(t.getDraftById(e));if(n){console.log(` Draft found in IndexedDB, rebuilding frameConfig...`);let{buildFrameConfigFromDraft:e}=await(w(async()=>{let{buildFrameConfigFromDraft:e}=await import(`./draftHelpers-mjujrh6i-CY0F5TmK.js`);return{buildFrameConfigFromDraft:e}},[])),t=(e(n));return this.currentFrame=t.id,this.currentConfig=t,this.persistFrameSelection(t.id,t),console.log(` Frame config rebuilt from IndexedDB draft:`,{id:t.id,hasDesignerElements:!!t.designer?.elements,elementsCount:t.designer?.elements?.length}),!0}else console.warn(` Draft not found in IndexedDB:`,e)}catch(e){console.error(` Failed to load draft from IndexedDB:`,e)}}}if(e)try{if(Ok(e)){if(await this.setFrame(e))return console.log(` Frame "${e}" reloaded successfully`),!0}else if(Wk(e)){if(t?.id===e)return this.currentFrame=e,this.currentConfig=t,console.log(` Custom frame "${e}" loaded from cached config`),!0;console.warn(` Custom frame "${e}" tidak memiliki konfigurasi tersimpan`)}else console.warn(` Stored frame "${e}" tidak valid lagi`)}catch(e){console.error(` Error loading frame from storage:`,e)}return console.log(` No valid frame in storage, using default...`),await this.setFrame(`Testframe1`)}getCurrentConfig(){return this.currentConfig}getCurrentFrameName(){return this.currentFrame}getMaxCaptures(){return console.log(` getMaxCaptures called`),console.log(` currentConfig:`,this.currentConfig),console.log(` returning maxCaptures:`,this.currentConfig?this.currentConfig.maxCaptures:0),this.currentConfig?this.currentConfig.maxCaptures:0}getSlots(){return this.currentConfig?this.currentConfig.slots:[]}getFrameImagePath(){return this.currentConfig?this.currentConfig.imagePath:null}createEmptySlotPhotos(){let e=(this.getMaxCaptures());return Array(e).fill(null)}canCaptureMore(e){if(console.log(` canCaptureMore called`),console.log(` currentConfig:`,this.currentConfig),console.log(` currentSlotPhotos:`,e),!this.currentConfig)return console.log(` No currentConfig, returning false`),!1;let t=(e.filter(e=>e!==null)).length,n=this.currentConfig.maxCaptures,r=t<n;return console.log(` filledSlots: ${t}, maxCaptures: ${n}, canCapture: ${r}`),r}getNextEmptySlotIndex(e){return e.findIndex(e=>e===null)}getCaptureProgress(e){let t=(e.filter(e=>e!==null)).length,n=(this.getMaxCaptures());return{current:t,max:n,percentage:n>0?t/n*100:0,isComplete:t===n}}clearFrame(){this.currentFrame=null,this.currentConfig=null,W.removeItem(`selectedFrame`),W.removeItem(`frameConfig`),jn.removeItem(`activeDraftId`),jn.removeItem(`activeDraftSignature`),console.log(` Frame data berhasil dihapus`)}async getAllFrames(){return Dk()}getFrameMetadata(e){return Ek(e)}isFrameLoading(){return this.isLoading}async preloadFrames(e){return console.log(` Preloading frames for better performance...`),await jk(e)}getFrameImagePath(){return this.currentConfig?this.currentConfig.imagePath:null}persistFrameSelection(e,t){try{let n=(W.setItem(`selectedFrame`,e)),r={...t,__timestamp:Date.now(),__selectedAt:new Date().toISOString()},i=t.isCustom||(e?.startsWith(`custom-`))||t.category===`custom`;console.log(` [persistFrameSelection] Checking frame type:`),console.log(`  - frameName:`,e),console.log(`  - config.isCustom:`,t.isCustom),console.log(`  - config.category:`,t.category),console.log(`  - isCustomFrame:`,i);let a=!1;if(i){console.log(` [persistFrameSelection] Attempting to save FULL custom frame config...`),console.log(`  - Has designer.elements:`,!!r.designer?.elements),console.log(`  - Elements count:`,r.designer?.elements?.length),console.log(`  - Has frameImage:`,!!r.frameImage),console.log(`  - Has imagePath:`,!!r.imagePath);try{a=W.setJSON(`frameConfig`,r),a&&console.log(` [persistFrameSelection] Full custom frame config saved successfully`)}catch(e){console.warn(` [persistFrameSelection] Full config too large for localStorage:`,e.message)}}if(!a){console.log(` [persistFrameSelection] Saving sanitized frame config...`);let e=(Vk(r));if(e&&(a=W.setJSON(`frameConfig`,e)),!a&&e){console.warn(` Failed to store sanitized frame config, attempting fallback without large image data`);let t={...e};t.imagePath?.startsWith(`data:`)&&delete t.imagePath,t.frameImage?.startsWith(`data:`)&&delete t.frameImage,t.thumbnailUrl?.startsWith(`data:`)&&delete t.thumbnailUrl,a=W.setJSON(`frameConfig`,t)}if(!a){console.warn(` Saving minimal config as last resort...`);let e=([t.imagePath,t.frameImage,t.thumbnailUrl,t.image_url].find(e=>e&&!e.startsWith(`data:`))),n={id:t.id,name:t.name,maxCaptures:t.maxCaptures,slots:t.slots,isCustom:!0,__timestamp:Date.now(),...e&&{imagePath:e,frameImage:e,image_url:e}};a=W.setJSON(`frameConfig`,n)}}if(!n)throw Error(`Failed to save frame ID to localStorage`);if(!a&&!i)throw Error(`Failed to persist frame selection`);a||console.warn(` Config not fully saved, but proceeding since frame is in custom_frames storage`),W.setItem(`frameConfigTimestamp`,String(r.__timestamp)),t?.metadata?.draftId?jn.setItem(`activeDraftId`,t.metadata.draftId):jn.removeItem(`activeDraftId`),t?.metadata?.signature?jn.setItem(`activeDraftSignature`,t.metadata.signature):jn.removeItem(`activeDraftSignature`),console.log(` Frame selection persisted with timestamp:`,r.__timestamp)}catch(e){throw console.error(` Error persisting frame selection:`,e),e}}getFrameConfigSync(e){return console.warn(` getFrameConfigSync is deprecated. Use async methods instead.`),Ek(e)}getFrameInfo(){return this.currentConfig?{name:this.currentConfig.name,description:this.currentConfig.description,maxCaptures:this.currentConfig.maxCaptures,slotsCount:this.currentConfig.slots.length,aspectRatio:this.currentConfig.layout.aspectRatio,orientation:this.currentConfig.layout.orientation}:null}generatePreviewSlots(e){return this.getSlots().map((t,n)=>({...t,index:n,hasPhoto:e[n]!==null,photo:e[n],isEmpty:e[n]===null}))}},Kk=pO,qk=new class{constructor(){this.baseUrl=Kk}getToken(){return localStorage.getItem(`fremio_token`)||localStorage.getItem(`auth_token`)}setToken(e){localStorage.setItem(`fremio_token`,e),localStorage.setItem(`auth_token`,e)}removeToken(){localStorage.removeItem(`fremio_token`),localStorage.removeItem(`auth_token`)}getHeaders(e=!0,t=!1){let n={};if(t||(n[`Content-Type`]=`application/json`),e){let e=(this.getToken());e&&(n.Authorization=`Bearer ${e}`)}return n}async handleResponse(e){let t=(e.headers.get(`content-type`)),n=t&&t.includes(`application/json`)?await e.json():await e.text();if(!e.ok)throw e.status===401&&(this.removeToken(),window.location.href=`/login`),Error(n.error||n.message||`Request failed`);return n}async get(e,t=!0){let n=await(fetch(`${this.baseUrl}${e}`,{method:`GET`,headers:this.getHeaders(t)}));return this.handleResponse(n)}async post(e,t,n=!0){let r=await(fetch(`${this.baseUrl}${e}`,{method:`POST`,headers:this.getHeaders(n),body:JSON.stringify(t)}));return this.handleResponse(r)}async put(e,t,n=!0){let r=await(fetch(`${this.baseUrl}${e}`,{method:`PUT`,headers:this.getHeaders(n),body:JSON.stringify(t)}));return this.handleResponse(r)}async delete(e,t=!0){let n=await(fetch(`${this.baseUrl}${e}`,{method:`DELETE`,headers:this.getHeaders(t)}));return this.handleResponse(n)}async upload(e,t,n=!0){let r=(this.getHeaders(n,!0)),i=await(fetch(`${this.baseUrl}${e}`,{method:`POST`,headers:r,body:t}));return this.handleResponse(i)}},Jk=new class{async createPayment(e={}){try{console.log(` Sending payment request:`,e);let t=await(qk.post(`/payment/create`,e));return console.log(` Payment response received:`,t),t}catch(e){throw console.error(` Create payment error:`,e),e}}async checkStatus(e){try{return await qk.get(`/payment/status/${e}`)}catch(e){throw console.error(`Check status error:`,e),e}}async getHistory(){try{return await qk.get(`/payment/history`)}catch(e){throw console.error(`Get history error:`,e),e}}async getAccess(){try{return await qk.get(`/payment/access`)}catch(e){throw console.error(`Get access error:`,e),e}}async canPurchase(){try{return await qk.get(`/payment/can-purchase`)}catch(e){throw console.error(`Can purchase check error:`,e),e}}async getPending(){try{return await qk.get(`/payment/pending`)}catch(e){throw console.error(`Get pending payment error:`,e),e}}async cancelLatestPending(){try{return await qk.post(`/payment/pending/cancel`,{})}catch(e){throw console.error(`Cancel pending payment error:`,e),e}}async reconcileLatest(){try{return await qk.post(`/payment/reconcile-latest`,{})}catch(e){throw console.error(`Reconcile latest error:`,e),e}}openSnapPayment(e,{onSuccess:t,onPending:n,onError:r}){if(!window.snap){console.error(`Midtrans Snap is not loaded`),r&&r(Error(`Payment system not ready`));return}window.snap.pay(e,{onSuccess:e=>{console.log(`Payment success:`,e),t&&t(e)},onPending:e=>{console.log(`Payment pending:`,e),n&&n(e)},onError:e=>{console.error(`Payment error:`,e),r&&r(e)},onClose:()=>{console.log(`Payment popup closed`)}})}loadSnapScript(){return new Promise((e,t)=>{if(window.snap){e();return}let n=document.createElement(`script`);n.src=`https://app.midtrans.com/snap/snap.js`,n.setAttribute(`data-client-key`,`Mid-client-jyhfGU7aHoJc6SE3`),n.onload=()=>{console.log(` Midtrans Snap script loaded`),e()},n.onerror=()=>{console.error(` Failed to load Midtrans Snap script`),t(Error(`Failed to load payment system`))},document.head.appendChild(n)})}},Yk=e=>{let t=e.imageUrl||e.thumbnailUrl||e.imagePath;return t?t.startsWith(`http://`)||t.startsWith(`https://`)?t:`https://api.fremio.id${t}`:null};function Xk({frame:e,onSelect:t,imageError:n,onImageError:r,getImageUrl:i,isLocked:a}){let[o,s]=(0,b.useState)(!1),c=e.description||``,l=c.length>50,u=o?c:c.slice(0,50);return(0,G.jsxs)(`div`,{className:`frame-card`,style:{display:`flex`,flexDirection:`column`,overflow:`hidden`,borderRadius:`8px`,backgroundColor:`white`,boxShadow:`0 1px 3px rgba(0,0,0,0.12)`,border:`2px solid transparent`,cursor:`pointer`,transition:`transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease`,position:`relative`,opacity:a?.7:1},onClick:()=>t(e),onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-3px)`,e.currentTarget.style.boxShadow=`0 8px 20px rgba(0,0,0,0.15)`,e.currentTarget.style.borderColor=a?`#94a3b8`:`#e0a899`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`0 1px 3px rgba(0,0,0,0.12)`,e.currentTarget.style.borderColor=`transparent`},children:[a&&(0,G.jsx)(`div`,{style:{position:`absolute`,top:`8px`,right:`8px`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,color:`white`,padding:`4px 8px`,borderRadius:`4px`,fontSize:`10px`,fontWeight:`600`,zIndex:10,display:`flex`,alignItems:`center`,gap:`4px`},children:` Member Only`}),(0,G.jsx)(`div`,{style:{position:`relative`,overflow:`hidden`,backgroundColor:`#f9fafb`,aspectRatio:`9/16`,width:`100%`,padding:`12px`,boxSizing:`border-box`},children:n?(0,G.jsx)(`div`,{style:{position:`absolute`,inset:`12px`,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,color:`#9ca3af`},children:(0,G.jsx)(`span`,{style:{fontSize:`12px`},children:`Gambar tidak tersedia`})}):(0,G.jsx)(`img`,{src:i(e),alt:e.name,style:{width:`100%`,height:`100%`,objectFit:`contain`,borderRadius:`4px`},onError:()=>r(e.id)})}),(0,G.jsx)(`div`,{style:{padding:`8px 8px 4px 8px`,textAlign:`center`,fontSize:e.name&&e.name.length>25?`10px`:`12px`,fontWeight:600,color:`#1e293b`,lineHeight:`1.3`,wordWrap:`break-word`,overflowWrap:`break-word`,hyphens:`auto`,minHeight:`32px`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:e.name}),c&&(0,G.jsxs)(`div`,{style:{padding:`0 8px 8px 8px`,textAlign:`center`,fontSize:`10px`,color:`#64748b`,lineHeight:`1.4`},children:[(0,G.jsxs)(`span`,{children:[u,l&&!o&&`...`]}),l&&(0,G.jsx)(`button`,{onClick:e=>{e.stopPropagation(),s(!o)},style:{display:`inline`,marginLeft:`4px`,padding:0,border:`none`,background:`none`,color:`#c89585`,fontSize:`10px`,fontWeight:600,cursor:`pointer`},children:o?`Sembunyikan`:`Selengkapnya`})]})]})}function Zk(){let e=Le(),{user:t}=In(),[n,r]=(0,b.useState)([]),[i,a]=(0,b.useState)({}),[o,s]=(0,b.useState)([]),[c,l]=(0,b.useState)(!1),[u,d]=(0,b.useState)(!0),f=(()=>{let e=n.reduce((e,t)=>{let n=t.category||`Uncategorized`;return e[n]||(e[n]=[]),e[n].push(t),e},{});Object.keys(e).forEach(t=>{e[t].sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999))});let t=Object.keys(e).map(t=>({category:t,minDisplayOrder:Math.min(...e[t].map(e=>e.displayOrder??999))}));t.sort((e,t)=>e.minDisplayOrder-t.minDisplayOrder);let r={};return t.forEach(({category:t})=>{r[t]=e[t]}),r})();(0,b.useEffect)(()=>{W.removeItem(`frameConfig`),W.removeItem(`frameConfigTimestamp`),W.removeItem(`selectedFrame`),W.removeItem(`capturedPhotos`),W.removeItem(`capturedVideos`),(async()=>{d(!0);try{console.log(` Loading custom frames...`),console.log(` Backend mode: ${Ik.isVPSMode()?`VPS`:`Firebase`}`);let e=await Ik.getAllFrames();console.log(` Custom frames loaded:`,e.length);let n=(e||[]).filter(e=>!(e?.isHidden??e?.is_hidden));if(n.sort((e,t)=>(e.displayOrder||999)-(t.displayOrder||999)),n.length>0?n.forEach((e,t)=>{console.log(`  ${t+1}. ${e.name} (ID: ${e.id}, Order: ${e.displayOrder??`N/A`})`),console.log(`     - imagePath: ${(e.imagePath||e.imageUrl||``)?.substring(0,60)}...`)}):console.warn(` NO CUSTOM FRAMES FOUND!`),r(n),t)try{let e=await Jk.getAccess();e.success&&e.hasAccess?(l(!0),s(e.data.frameIds||[]),console.log(` User has access to frames:`,e.data.frameIds?.length)):(l(!1),s([]),console.log(` User has no active access`))}catch(e){console.error(`Error checking access:`,e),l(!1),s([])}else l(!1),s([])}catch(e){console.error(` Error loading frames:`,e),r([])}finally{d(!1)}})()},[t]);let p=e=>{console.error(` Image failed to load for frame: ${e}`),a(t=>({...t,[e]:!0}))},m=async t=>{console.log(` User clicked frame:`,t.name),console.log(` Frame data:`,t);let n=!!(t?.isPremium??t?.is_premium),r=new Set((o||[]).map(e=>String(e)));if(!(!n||c&&((o||[]).length===0||r.has(String(t.id))))){e(`/pricing?reason=locked&frameId=${encodeURIComponent(String(t.id))}`);return}if(!t.slots||t.slots.length===0){alert(`Error: Frame ini tidak memiliki slot foto.`);return}if(!t.imagePath&&!t.thumbnailUrl&&!t.imageUrl){alert(`Error: Frame ini tidak memiliki gambar.`);return}await HO(t.id,null,t.name);let i=t?.flowType??t?.flow_type;if(String(i||`fixed`).toLowerCase().trim()===`personalized`){e(`/create/editor`,{state:{prefillFromBaseFrame:!0,baseFrame:t}});return}try{await Gk.setCustomFrame(t)===!1?alert(`Error: Gagal memilih frame`):e(`/take-moment`)}catch(e){console.error(`Error in setCustomFrame:`,e),alert(`Error: Gagal memilih frame - `+e.message)}};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`style`,{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        .frames-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 12px;
        }
        .frames-grid .frame-card {
          width: 100%;
          max-width: 220px;
        }
        @media (min-width: 768px) {
          .frames-grid {
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
          }
          .frames-grid .frame-card {
            width: 100%;
            max-width: 220px;
          }
        }
      `}),(0,G.jsx)(`section`,{style:{minHeight:`100vh`,background:`linear-gradient(to bottom, #fdf7f4, white, #f7f1ed)`,paddingTop:`48px`,paddingBottom:`48px`},children:(0,G.jsxs)(`div`,{style:{maxWidth:`1280px`,margin:`0 auto`,padding:`0 16px`},children:[(0,G.jsxs)(`h2`,{style:{marginBottom:`32px`,textAlign:`center`,fontSize:`24px`,fontWeight:`bold`,color:`#1e293b`},children:[`Pilihan Frame dari`,` `,(0,G.jsx)(`span`,{style:{background:`linear-gradient(to right, #e0b7a9, #c89585)`,WebkitBackgroundClip:`text`,WebkitTextFillColor:`transparent`},children:`Designer fremio`})]}),t&&!c&&!u&&(0,G.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #f7e3da 0%, #e0b7a9 55%, #c89585 100%)`,color:`#4a302b`,padding:`24px`,borderRadius:`16px`,marginBottom:`30px`,textAlign:`center`,border:`1px solid rgba(224, 183, 169, 0.35)`,boxShadow:`0 12px 32px rgba(224, 183, 169, 0.22)`},children:[(0,G.jsx)(`h3`,{style:{fontSize:`18px`,fontWeight:`800`,marginBottom:`8px`},children:` Unlock Premium Frames!`}),(0,G.jsx)(`p`,{style:{marginBottom:`16px`,opacity:.9},children:`Gabung sebagai member dan dapatkan akses unlimited hanya Rp 10.000 selama 30 hari`}),(0,G.jsx)(`button`,{onClick:()=>e(`/pricing`),style:{background:`linear-gradient(to right, #e0b7a9, #d4a99a)`,color:`white`,border:`none`,padding:`10px 22px`,borderRadius:`12px`,fontWeight:`700`,cursor:`pointer`,fontSize:`14px`,boxShadow:`0 10px 22px rgba(224, 183, 169, 0.35)`},children:`Lihat Keanggotaan `})]}),u&&(0,G.jsxs)(`div`,{style:{textAlign:`center`,padding:`60px 20px`},children:[(0,G.jsx)(`div`,{style:{width:`50px`,height:`50px`,border:`4px solid #f3f3f3`,borderTop:`4px solid #c89585`,borderRadius:`50%`,animation:`spin 1s linear infinite`,margin:`0 auto 20px`}}),(0,G.jsx)(`p`,{style:{color:`#666`},children:`Memuat frames...`})]}),!u&&Object.keys(f).length>0?Object.entries(f).map(([e,t])=>(0,G.jsxs)(`div`,{style:{marginBottom:`40px`},children:[(0,G.jsxs)(`h3`,{style:{fontSize:`16px`,fontWeight:`bold`,color:`#1e293b`,marginBottom:`16px`},children:[e,` (`,t.length,`)`]}),(0,G.jsx)(`div`,{className:`frames-grid`,children:t.map(e=>{let t=!!(e?.isPremium??e?.is_premium),n=new Set((o||[]).map(e=>String(e))),r=t&&!(c&&n.has(String(e.id)));return(0,G.jsx)(Xk,{frame:e,onSelect:m,imageError:i[e.id],onImageError:p,getImageUrl:Yk,isLocked:r},e.id)})})]},e)):!u&&(0,G.jsxs)(`div`,{style:{padding:`48px`,background:`linear-gradient(to bottom right, #f8fafc, #f1f5f9)`,border:`2px solid #e2e8f0`,borderRadius:`16px`,textAlign:`center`},children:[(0,G.jsx)(`h3`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#1e293b`,marginBottom:`12px`},children:`Belum Ada Frame Tersedia`}),(0,G.jsx)(`p`,{style:{color:`#64748b`},children:`Frame sedang dalam proses penambahan oleh admin.`})]})]})})]})}var Qk=u(_()),$k=(e,t=0)=>{if(typeof e==`number`&&Number.isFinite(e))return e;if(typeof e==`string`&&e.trim().length>0){let t=Number.parseFloat(e);if(Number.isFinite(t))return t}return t},eA=(e,t)=>{if(e==null)return t;let n=$k(e);return Number.isFinite(n)?n:t},tA=({version:e,sourceFrameId:t,sourceSignature:n,slotCount:r,slotOrder:i,minZIndex:a,maxZIndex:o})=>[`v${e}`,t??`unknown`,n??``,r??0,Array.isArray(i)?i.join(`,`):``,Number.isFinite(a)?a:``,Number.isFinite(o)?o:``].join(`|`);const nA=e=>{if(!e||typeof e!=`object`)return null;let t=Array.isArray(e.slots)?e.slots:[];if(t.length===0)return null;let n=[...t.map((e,t)=>{let n=eA(e?.zIndex,t);return{slotIndex:t,slotId:e?.id??`slot-${t}`,zIndex:n}})].sort((e,t)=>e.zIndex===t.zIndex?e.slotIndex-t.slotIndex:e.zIndex-t.zIndex),r=n.map(e=>e.slotIndex),i=n.reduce((e,t)=>(e[t.slotIndex]=t.zIndex,e),{}),a=n.map(e=>e.zIndex),o=a.reduce((e,t)=>t<e?t:e,1/0),s=a.reduce((e,t)=>t>e?t:e,-1/0),c=Number.isFinite(o)?o:null,l=Number.isFinite(s)?s:null,u=typeof e?.metadata?.signature==`string`?e.metadata.signature:null,d=e?.id??null,f={version:1,sourceFrameId:d,sourceSignature:u,slotCount:t.length,slotOrder:r,slots:n,zIndexLookup:i,minZIndex:c,maxZIndex:l,photoBaseZIndex:c,signature:null};return f.signature=tA({version:1,sourceFrameId:d,sourceSignature:u,slotCount:t.length,slotOrder:r,minZIndex:c,maxZIndex:l}),f},rA=(e={})=>{let{keepDraftId:t=!1,keepPhotos:n=!1,clearAll:r=!1}=e;console.log(` Clearing frame cache with options:`,e);let i=[`frameConfig`,`frameConfigTimestamp`,`selectedFrame`];(!n||r)&&i.push(`capturedPhotos`,`capturedVideos`),(!t||r)&&i.push(`activeDraftId`,`activeDraftSignature`),i.forEach(e=>{W.removeItem(e)}),console.log(` Frame cache cleared:`,i)},iA=(e=1440*60*1e3)=>{let t=W.getItem(`frameConfigTimestamp`);return t?Date.now()-parseInt(t)>e:!1},aA=()=>iA()?(console.log(` Frame cache is stale, clearing...`),rA({clearAll:!0}),!0):!1;var oA=new Map;const sA=(e,t)=>{if(!e||!t)return console.warn(` storeVideoBlob: Invalid id or blob`),null;let n=oA.get(e);if(n?.previewUrl?.startsWith(`blob:`))try{URL.revokeObjectURL(n.previewUrl)}catch{}let r=URL.createObjectURL(t);oA.set(e,{blob:t,previewUrl:r,storedAt:Date.now(),sizeBytes:t.size});let i=pA();return console.log(` Stored video: ${e.slice(-8)} (${(t.size/1024).toFixed(1)}KB) | Total: ${i.count} videos, ${i.totalMB}MB`),r},cA=e=>oA.get(e)?.blob||null,lA=e=>new Promise((t,n)=>{if(!e||!(e instanceof Blob)){n(Error(`Invalid blob provided`));return}let r=new FileReader;r.onloadend=()=>{r.result?t(r.result):n(Error(`FileReader returned null`))},r.onerror=e=>{n(e)},r.readAsDataURL(e)}),uA=async(e,t)=>{if(!Array.isArray(e))return console.warn(` convertAllVideosToDataUrl: Invalid entries`),[];let n=[],r=e.length;console.log(` Starting sequential conversion of ${r} videos...`);for(let i=0;i<r;i++){let a=e[i];if(t&&t(i+1,r,a?.id),!a){n.push(null);continue}if(a.dataUrl&&typeof a.dataUrl==`string`&&a.dataUrl.startsWith(`data:`)){console.log(` Video ${i+1}: Already converted`),n.push({...a,blob:null,previewUrl:null});continue}let o=a.blob instanceof Blob?a.blob:cA(a.id);if(!o){console.warn(` Video ${i+1}: No blob found for ${a.id?.slice(-8)}`),n.push(a);continue}try{console.log(` Converting video ${i+1}/${r} (${(o.size/1024).toFixed(1)}KB)...`);let e=await lA(o);if(a.previewUrl&&a.previewUrl.startsWith(`blob:`))try{URL.revokeObjectURL(a.previewUrl)}catch{}dA(a.id),n.push({...a,dataUrl:e,blob:null,previewUrl:null}),console.log(` Video ${i+1} converted: ${(e.length/1024).toFixed(0)}KB dataUrl`),await new Promise(e=>setTimeout(e,100))}catch(e){console.error(` Video ${i+1} conversion failed:`,e),n.push(a)}}return console.log(` Conversion complete: ${n.filter(e=>e?.dataUrl).length}/${r} videos converted`),n},dA=e=>{if(!e||!oA.has(e))return;let t=oA.get(e);if(t?.previewUrl&&t.previewUrl.startsWith(`blob:`))try{URL.revokeObjectURL(t.previewUrl)}catch{}oA.delete(e),console.log(` Cleaned up video: ${e.slice(-8)}`)},fA=()=>{let e=0;oA.forEach((t,n)=>{if(t?.previewUrl&&t.previewUrl.startsWith(`blob:`))try{URL.revokeObjectURL(t.previewUrl)}catch{}e++}),oA.clear(),console.log(` Cleaned up all ${e} video blobs`)},pA=()=>{let e=0;return oA.forEach(t=>{t?.sizeBytes?e+=t.sizeBytes:t?.blob&&(e+=t.blob.size)}),{count:oA.size,totalBytes:e,totalKB:(e/1024).toFixed(1),totalMB:(e/1024/1024).toFixed(2)}},mA=()=>!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),hA=()=>window.isSecureContext||window.location.protocol===`https:`||window.location.hostname===`localhost`||window.location.hostname===`127.0.0.1`,gA=async()=>{try{return navigator.permissions?{status:(await navigator.permissions.query({name:`camera`})).state,supported:!0}:{status:`prompt`,supported:!1}}catch(e){return{status:`unknown`,supported:!1,error:e.message}}},_A=async(e={})=>{try{if(!mA())return{granted:!1,error:`Camera API not available`,message:`Browser Anda tidak mendukung akses kamera`};if(!hA())return{granted:!1,error:`Insecure context`,message:`Kamera hanya dapat diakses melalui HTTPS atau localhost`};if((await gA()).status===`denied`)return{granted:!1,error:`Permission denied`,message:`Izin kamera ditolak. Silakan aktifkan di pengaturan browser:

 Chrome: Klik ikon kunci  Izin situs  Kamera  Izinkan
 Safari: Safari  Pengaturan  Situs Web  Kamera  Izinkan`};let t={video:{facingMode:e.facingMode||`user`,width:e.width||{ideal:1920},height:e.height||{ideal:1080}},audio:!1};console.log(` Requesting camera access with constraints:`,t);let n=await navigator.mediaDevices.getUserMedia(t);return e.keepStream||n.getTracks().forEach(e=>e.stop()),console.log(` Camera permission granted`),{granted:!0,stream:e.keepStream?n:null,message:`Kamera berhasil diakses`}}catch(e){console.error(` Camera permission error:`,e);let t=`Tidak dapat mengakses kamera`;return e.name===`NotAllowedError`?t=`Izin kamera ditolak. Silakan izinkan akses kamera di pengaturan browser.`:e.name===`NotFoundError`?t=`Kamera tidak ditemukan. Pastikan perangkat Anda memiliki kamera.`:e.name===`NotReadableError`?t=`Kamera sedang digunakan oleh aplikasi lain. Silakan tutup aplikasi lain terlebih dahulu.`:e.name===`OverconstrainedError`?t=`Pengaturan kamera tidak didukung. Mencoba dengan pengaturan default...`:e.name===`SecurityError`?t=`Akses kamera diblokir karena alasan keamanan. Pastikan Anda menggunakan HTTPS.`:e.name===`TypeError`&&(t=`Browser tidak mendukung akses kamera atau parameter tidak valid.`),{granted:!1,error:e.name,message:t,details:e.message}}},vA=async(e={})=>{let t=await _A(e);return!t.granted&&t.error===`OverconstrainedError`&&(console.log(` Retrying with default constraints...`),t=await _A({...e,width:void 0,height:void 0})),t};var yA=`fremio_camera_permission_asked`,bA=`fremio_camera_permission_granted`;const xA=()=>{localStorage.setItem(yA,`true`),localStorage.setItem(bA+`_time`,Date.now().toString())},SA=()=>localStorage.getItem(bA)===`true`,CA=()=>{localStorage.setItem(bA,`true`),localStorage.setItem(bA+`_time`,Date.now().toString())},wA=()=>{localStorage.setItem(bA,`false`),localStorage.setItem(bA+`_time`,Date.now().toString())},TA=async(e={})=>{xA();let t=await vA(e);return t.granted?CA():wA(),t};var EA=({onRequestPermission:e,onSkip:t})=>{let[n,r]=b.useState(!1),[i,a]=b.useState(null);return(0,G.jsx)(`div`,{className:`permission-primer-overlay`,children:(0,G.jsxs)(`div`,{className:`permission-primer-content`,children:[(0,G.jsx)(`div`,{className:`permission-icon`,children:(0,G.jsxs)(`svg`,{width:`40`,height:`40`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z`}),(0,G.jsx)(`circle`,{cx:`12`,cy:`13`,r:`4`})]})}),(0,G.jsx)(`h2`,{children:`Izinkan Akses Kamera`}),(0,G.jsx)(`p`,{className:`permission-description`,children:`Fremio membutuhkan akses ke kamera untuk mengambil foto Anda dengan frame yang dipilih.`}),(0,G.jsxs)(`div`,{className:`permission-benefits`,children:[(0,G.jsxs)(`div`,{className:`benefit-item`,children:[(0,G.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M22 11.08V12a10 10 0 1 1-5.93-9.14`}),(0,G.jsx)(`polyline`,{points:`22 4 12 14.01 9 11.01`})]}),(0,G.jsx)(`span`,{children:`Ambil foto langsung dari browser`})]}),(0,G.jsxs)(`div`,{className:`benefit-item`,children:[(0,G.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`path`,{d:`M22 11.08V12a10 10 0 1 1-5.93-9.14`}),(0,G.jsx)(`polyline`,{points:`22 4 12 14.01 9 11.01`})]}),(0,G.jsx)(`span`,{children:`Preview real-time dengan frame`})]}),(0,G.jsxs)(`div`,{className:`benefit-item`,children:[(0,G.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`rect`,{x:`3`,y:`11`,width:`18`,height:`11`,rx:`2`,ry:`2`}),(0,G.jsx)(`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`})]}),(0,G.jsx)(`span`,{children:`Privasi terjaga - foto tidak disimpan di server`})]})]}),i&&(0,G.jsxs)(`div`,{className:`permission-error-message`,children:[` `,i]}),(0,G.jsx)(`button`,{className:`permission-primer-primary`,onClick:async()=>{if(n){console.log(` Already requesting, skipping`);return}console.log(` Camera permission button clicked`),r(!0),a(null);try{await e(),console.log(` Permission request completed`)}catch(e){console.error(` Permission request error:`,e),a(e.message||`Gagal meminta izin kamera. Silakan coba lagi.`)}finally{r(!1),console.log(` Request state reset`)}},disabled:n,style:{opacity:n?.6:1,cursor:n?`not-allowed`:`pointer`,pointerEvents:`auto`},children:n?` Meminta Izin...`:`Izinkan Kamera`}),(0,G.jsx)(`button`,{className:`permission-primer-secondary`,onClick:()=>{console.log(` Skip button clicked`);try{t()}catch(e){console.error(` Error in skip handler:`,e)}},disabled:n,style:{pointerEvents:`auto`},children:`Upload Foto Saja`}),(0,G.jsxs)(`div`,{className:`permission-note`,children:[` `,(0,G.jsx)(`strong`,{children:`Tip:`}),` Pilih "Allow" atau "Izinkan" saat browser meminta izin kamera`]})]})})},DA=s(((exports,t)=>{t.exports=`SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED`})),OA=s(((exports,t)=>{var n=DA();function r(){}function i(){}i.resetWarningCache=r,t.exports=function(){function e(e,t,r,i,a,o){if(o!==n){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name=`Invariant Violation`,s}}e.isRequired=e;function t(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return a.PropTypes=a,a}})),kA=s(((exports,t)=>{t.exports=OA()()})),AA=c({clsx:()=>MA,default:()=>NA});function jA(e){var t,n,r=``;if(typeof e==`string`||typeof e==`number`)r+=e;else if(typeof e==`object`)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=jA(e[t]))&&(r&&(r+=` `),r+=n);else for(t in e)e[t]&&(r&&(r+=` `),r+=t);return r}function MA(){for(var e,t,n=0,r=``;n<arguments.length;)(e=arguments[n++])&&(t=jA(e))&&(r&&(r+=` `),r+=t);return r}var NA,PA=o((()=>{NA=MA})),FA=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.dontSetMe=a,exports.findInArray=t,exports.int=i,exports.isFunction=n,exports.isNum=r;function t(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function n(e){return typeof e==`function`||Object.prototype.toString.call(e)===`[object Function]`}function r(e){return typeof e==`number`&&!isNaN(e)}function i(e){return parseInt(e,10)}function a(e,t,n){if(e[t])return Error(`Invalid prop ${t} passed to ${n} - do not set this, set it on the child.`)}})),IA=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.browserPrefixToKey=r,exports.browserPrefixToStyle=i,exports.getPrefix=n;var t=[`Moz`,`Webkit`,`O`,`ms`];function n(){var e;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:`transform`;if(typeof window>`u`)return``;let i=(e=window.document)==null||(e=e.documentElement)==null?void 0:e.style;if(!i||n in i)return``;for(let e=0;e<t.length;e++)if(r(n,t[e])in i)return t[e];return``}function r(e,t){return t?`${t}${a(e)}`:e}function i(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function a(e){let t=``,n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]===`-`?n=!0:t+=e[r];return t}exports.default=n()})),LA=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.addClassName=S,exports.addEvent=c,exports.addUserSelectStyles=b,exports.createCSSTransform=h,exports.createSVGTransform=g,exports.getTouch=v,exports.getTouchIdentifier=y,exports.getTranslation=_,exports.innerHeight=f,exports.innerWidth=p,exports.matchesSelector=o,exports.matchesSelectorAndParentsTo=s,exports.offsetXYFromParent=m,exports.outerHeight=u,exports.outerWidth=d,exports.removeClassName=C,exports.removeEvent=l,exports.removeUserSelectStyles=x;var t=FA(),n=i(IA());function r(e){if(typeof WeakMap!=`function`)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!=`object`&&typeof e!=`function`)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!==`default`&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}var a=``;function o(e,n){return a||=(0,t.findInArray)([`matches`,`webkitMatchesSelector`,`mozMatchesSelector`,`msMatchesSelector`,`oMatchesSelector`],function(n){return(0,t.isFunction)(e[n])}),(0,t.isFunction)(e[a])?e[a](n):!1}function s(e,t,n){let r=e;do{if(o(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function c(e,t,n,r){if(!e)return;let i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent(`on`+t,n):e[`on`+t]=n}function l(e,t,n,r){if(!e)return;let i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent(`on`+t,n):e[`on`+t]=null}function u(e){let n=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return n+=(0,t.int)(r.borderTopWidth),n+=(0,t.int)(r.borderBottomWidth),n}function d(e){let n=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return n+=(0,t.int)(r.borderLeftWidth),n+=(0,t.int)(r.borderRightWidth),n}function f(e){let n=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return n-=(0,t.int)(r.paddingTop),n-=(0,t.int)(r.paddingBottom),n}function p(e){let n=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return n-=(0,t.int)(r.paddingLeft),n-=(0,t.int)(r.paddingRight),n}function m(e,t,n){let r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-r.left)/n,a=(e.clientY+t.scrollTop-r.top)/n;return{x:i,y:a}}function h(e,t){let r=_(e,t,`px`);return{[(0,n.browserPrefixToKey)(`transform`,n.default)]:r}}function g(e,t){return _(e,t,``)}function _(e,t,n){let{x:r,y:i}=e,a=`translate(${r}${n},${i}${n})`;if(t){let e=`${typeof t.x==`string`?t.x:t.x+n}`,r=`${typeof t.y==`string`?t.y:t.y+n}`;a=`translate(${e}, ${r})`+a}return a}function v(e,n){return e.targetTouches&&(0,t.findInArray)(e.targetTouches,e=>n===e.identifier)||e.changedTouches&&(0,t.findInArray)(e.changedTouches,e=>n===e.identifier)}function y(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function b(e){if(!e)return;let t=e.getElementById(`react-draggable-style-el`);t||(t=e.createElement(`style`),t.type=`text/css`,t.id=`react-draggable-style-el`,t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName(`head`)[0].appendChild(t)),e.body&&S(e.body,`react-draggable-transparent-selection`)}function x(e){if(e)try{if(e.body&&C(e.body,`react-draggable-transparent-selection`),e.selection)e.selection.empty();else{let t=(e.defaultView||window).getSelection();t&&t.type!==`Caret`&&t.removeAllRanges()}}catch{}}function S(e,t){e.classList?e.classList.add(t):e.className.match(RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function C(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp(`(?:^|\\s)${t}(?!\\S)`,`g`),``)}})),RA=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.canDragX=a,exports.canDragY=o,exports.createCoreData=c,exports.createDraggableData=l,exports.getBoundPosition=r,exports.getControlPosition=s,exports.snapToGrid=i;var t=FA(),n=LA();function r(e,r,i){if(!e.props.bounds)return[r,i];let{bounds:a}=e.props;a=typeof a==`string`?a:u(a);let o=d(e);if(typeof a==`string`){let{ownerDocument:e}=o,r=e.defaultView,i;if(i=a===`parent`?o.parentNode:e.querySelector(a),!(i instanceof r.HTMLElement))throw Error(`Bounds selector "`+a+`" could not find an element.`);let s=i,c=r.getComputedStyle(o),l=r.getComputedStyle(s);a={left:-o.offsetLeft+(0,t.int)(l.paddingLeft)+(0,t.int)(c.marginLeft),top:-o.offsetTop+(0,t.int)(l.paddingTop)+(0,t.int)(c.marginTop),right:(0,n.innerWidth)(s)-(0,n.outerWidth)(o)-o.offsetLeft+(0,t.int)(l.paddingRight)-(0,t.int)(c.marginRight),bottom:(0,n.innerHeight)(s)-(0,n.outerHeight)(o)-o.offsetTop+(0,t.int)(l.paddingBottom)-(0,t.int)(c.marginBottom)}}return(0,t.isNum)(a.right)&&(r=Math.min(r,a.right)),(0,t.isNum)(a.bottom)&&(i=Math.min(i,a.bottom)),(0,t.isNum)(a.left)&&(r=Math.max(r,a.left)),(0,t.isNum)(a.top)&&(i=Math.max(i,a.top)),[r,i]}function i(e,t,n){let r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]}function a(e){return e.props.axis===`both`||e.props.axis===`x`}function o(e){return e.props.axis===`both`||e.props.axis===`y`}function s(e,t,r){let i=typeof t==`number`?(0,n.getTouch)(e,t):null;if(typeof t==`number`&&!i)return null;let a=d(r),o=r.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,n.offsetXYFromParent)(i||e,o,r.props.scale)}function c(e,n,r){let i=!(0,t.isNum)(e.lastX),a=d(e);return i?{node:a,deltaX:0,deltaY:0,lastX:n,lastY:r,x:n,y:r}:{node:a,deltaX:n-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:n,y:r}}function l(e,t){let n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function u(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function d(e){let t=e.findDOMNode();if(!t)throw Error(`<DraggableCore>: Unmounted during event!`);return t}})),zA=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.default=t;function t(){}})),BA=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});var t=u(p()),n=c(kA()),r=c(_()),i=LA(),a=RA(),o=FA(),s=c(zA());function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(typeof WeakMap!=`function`)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!=`object`&&typeof e!=`function`)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!==`default`&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function d(e,t,n){return t=f(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=m(e,`string`);return typeof t==`symbol`?t:String(t)}function m(e,t){if(typeof e!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(typeof r!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}var h={touch:{start:`touchstart`,move:`touchmove`,stop:`touchend`},mouse:{start:`mousedown`,move:`mousemove`,stop:`mouseup`}},g=h.mouse,v=class extends t.Component{constructor(){super(...arguments),d(this,`dragging`,!1),d(this,`lastX`,NaN),d(this,`lastY`,NaN),d(this,`touchIdentifier`,null),d(this,`mounted`,!1),d(this,`handleDragStart`,e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button==`number`&&e.button!==0)return!1;let t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw Error(`<DraggableCore> not mounted on DragStart!`);let{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,i.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,i.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;e.type===`touchstart`&&e.preventDefault();let r=(0,i.getTouchIdentifier)(e);this.touchIdentifier=r;let o=(0,a.getControlPosition)(e,r,this);if(o==null)return;let{x:c,y:l}=o,u=(0,a.createCoreData)(this,c,l);(0,s.default)(`DraggableCore: handleDragStart: %j`,u),(0,s.default)(`calling`,this.props.onStart),!(this.props.onStart(e,u)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,i.addUserSelectStyles)(n),this.dragging=!0,this.lastX=c,this.lastY=l,(0,i.addEvent)(n,g.move,this.handleDrag),(0,i.addEvent)(n,g.stop,this.handleDragStop))}),d(this,`handleDrag`,e=>{let t=(0,a.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX,t=r-this.lastY;if([e,t]=(0,a.snapToGrid)(this.props.grid,e,t),!e&&!t)return;n=this.lastX+e,r=this.lastY+t}let i=(0,a.createCoreData)(this,n,r);if((0,s.default)(`DraggableCore: handleDrag: %j`,i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent(`mouseup`))}catch{let e=document.createEvent(`MouseEvents`);e.initMouseEvent(`mouseup`,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}return}this.lastX=n,this.lastY=r}),d(this,`handleDragStop`,e=>{if(!this.dragging)return;let t=(0,a.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX||0,t=r-this.lastY||0;[e,t]=(0,a.snapToGrid)(this.props.grid,e,t),n=this.lastX+e,r=this.lastY+t}let o=(0,a.createCoreData)(this,n,r);if(this.props.onStop(e,o)===!1||this.mounted===!1)return!1;let c=this.findDOMNode();c&&this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(c.ownerDocument),(0,s.default)(`DraggableCore: handleDragStop: %j`,o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,c&&((0,s.default)(`DraggableCore: Removing handlers`),(0,i.removeEvent)(c.ownerDocument,g.move,this.handleDrag),(0,i.removeEvent)(c.ownerDocument,g.stop,this.handleDragStop))}),d(this,`onMouseDown`,e=>(g=h.mouse,this.handleDragStart(e))),d(this,`onMouseUp`,e=>(g=h.mouse,this.handleDragStop(e))),d(this,`onTouchStart`,e=>(g=h.touch,this.handleDragStart(e))),d(this,`onTouchEnd`,e=>(g=h.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;let e=this.findDOMNode();e&&(0,i.addEvent)(e,h.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;let e=this.findDOMNode();if(e){let{ownerDocument:t}=e;(0,i.removeEvent)(t,h.mouse.move,this.handleDrag),(0,i.removeEvent)(t,h.touch.move,this.handleDrag),(0,i.removeEvent)(t,h.mouse.stop,this.handleDragStop),(0,i.removeEvent)(t,h.touch.stop,this.handleDragStop),(0,i.removeEvent)(e,h.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return(e=this.props)!=null&&e.nodeRef?(t=this.props)==null||(t=t.nodeRef)==null?void 0:t.current:r.default.findDOMNode(this)}render(){return t.cloneElement(t.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};exports.default=v,d(v,`displayName`,`DraggableCore`),d(v,`propTypes`,{allowAnyClick:n.default.bool,children:n.default.node.isRequired,disabled:n.default.bool,enableUserSelectHack:n.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw Error(`Draggable's offsetParent must be a DOM Node.`)},grid:n.default.arrayOf(n.default.number),handle:n.default.string,cancel:n.default.string,nodeRef:n.default.object,onStart:n.default.func,onDrag:n.default.func,onStop:n.default.func,onMouseDown:n.default.func,scale:n.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),d(v,`defaultProps`,{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})})),VA=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),Object.defineProperty(exports,`DraggableCore`,{enumerable:!0,get:function(){return c.default}});var t=m(p()),n=u(kA()),r=u(_()),i=u((PA(),d(AA))),a=LA(),o=RA(),s=FA(),c=u(BA()),l=u(zA());function u(e){return e&&e.__esModule?e:{default:e}}function f(e){if(typeof WeakMap!=`function`)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!=`object`&&typeof e!=`function`)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!==`default`&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function g(e,t,n){return t=v(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=y(e,`string`);return typeof t==`symbol`?t:String(t)}function y(e,t){if(typeof e!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(typeof r!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}var b=class extends t.Component{static getDerivedStateFromProps(e,t){let{position:n}=e,{prevPropsPosition:r}=t;return n&&(!r||n.x!==r.x||n.y!==r.y)?((0,l.default)(`Draggable: getDerivedStateFromProps %j`,{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:{...n}}):null}constructor(e){super(e),g(this,`onDragStart`,(e,t)=>{if((0,l.default)(`Draggable: onDragStart: %j`,t),this.props.onStart(e,(0,o.createDraggableData)(this,t))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),g(this,`onDrag`,(e,t)=>{if(!this.state.dragging)return!1;(0,l.default)(`Draggable: onDrag: %j`,t);let n=(0,o.createDraggableData)(this,t),r={x:n.x,y:n.y,slackX:0,slackY:0};if(this.props.bounds){let{x:e,y:t}=r;r.x+=this.state.slackX,r.y+=this.state.slackY;let[i,a]=(0,o.getBoundPosition)(this,r.x,r.y);r.x=i,r.y=a,r.slackX=this.state.slackX+(e-r.x),r.slackY=this.state.slackY+(t-r.y),n.x=r.x,n.y=r.y,n.deltaX=r.x-this.state.x,n.deltaY=r.y-this.state.y}if(this.props.onDrag(e,n)===!1)return!1;this.setState(r)}),g(this,`onDragStop`,(e,t)=>{if(!this.state.dragging||this.props.onStop(e,(0,o.createDraggableData)(this,t))===!1)return!1;(0,l.default)(`Draggable: onDragStop: %j`,t);let n={dragging:!1,slackX:0,slackY:0};if(this.props.position){let{x:e,y:t}=this.props.position;n.x=e,n.y=t}this.setState(n)}),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},e.position&&!(e.onDrag||e.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){window.SVGElement!==void 0&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e;return((e=this.props)==null||(e=e.nodeRef)==null?void 0:e.current)??r.default.findDOMNode(this)}render(){let{axis:e,bounds:n,children:r,defaultPosition:s,defaultClassName:l,defaultClassNameDragging:u,defaultClassNameDragged:d,position:f,positionOffset:p,scale:m,...g}=this.props,_={},v=null,y=!f||this.state.dragging,b=f||s,x={x:(0,o.canDragX)(this)&&y?this.state.x:b.x,y:(0,o.canDragY)(this)&&y?this.state.y:b.y};this.state.isElementSVG?v=(0,a.createSVGTransform)(x,p):_=(0,a.createCSSTransform)(x,p);let S=(0,i.default)(r.props.className||``,l,{[u]:this.state.dragging,[d]:this.state.dragged});return t.createElement(c.default,h({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(r),{className:S,style:{...r.props.style,..._},transform:v}))}};exports.default=b,g(b,`displayName`,`Draggable`),g(b,`propTypes`,{...c.default.propTypes,axis:n.default.oneOf([`both`,`x`,`y`,`none`]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),g(b,`defaultProps`,{...c.default.defaultProps,axis:`both`,bounds:!1,defaultClassName:`react-draggable`,defaultClassNameDragging:`react-draggable-dragging`,defaultClassNameDragged:`react-draggable-dragged`,defaultPosition:{x:0,y:0},scale:1})})),HA=u(s(((exports,t)=>{var{default:n,DraggableCore:r}=VA();t.exports=n,t.exports.default=n,t.exports.DraggableCore=r}))()),UA=function(){return UA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},UA.apply(this,arguments)},WA={width:`100%`,height:`10px`,top:`0px`,left:`0px`,cursor:`row-resize`},GA={width:`10px`,height:`100%`,top:`0px`,left:`0px`,cursor:`col-resize`},KA={width:`20px`,height:`20px`,position:`absolute`,zIndex:1},qA={top:UA(UA({},WA),{top:`-5px`}),right:UA(UA({},GA),{left:void 0,right:`-5px`}),bottom:UA(UA({},WA),{top:void 0,bottom:`-5px`}),left:UA(UA({},GA),{left:`-5px`}),topRight:UA(UA({},KA),{right:`-10px`,top:`-10px`,cursor:`ne-resize`}),bottomRight:UA(UA({},KA),{right:`-10px`,bottom:`-10px`,cursor:`se-resize`}),bottomLeft:UA(UA({},KA),{left:`-10px`,bottom:`-10px`,cursor:`sw-resize`}),topLeft:UA(UA({},KA),{left:`-10px`,top:`-10px`,cursor:`nw-resize`})},JA=(0,b.memo)(function(e){var t=e.onResizeStart,n=e.direction,r=e.children,i=e.replaceStyles,a=e.className,o=(0,b.useCallback)(function(e){t(e,n)},[t,n]),s=(0,b.useCallback)(function(e){t(e,n)},[t,n]),c=(0,b.useMemo)(function(){return UA(UA({position:`absolute`,userSelect:`none`},qA[n]),i??{})},[i,n]);return(0,G.jsx)(`div`,{className:a||void 0,style:c,onMouseDown:o,onTouchStart:s,children:r})}),YA=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),XA=function(){return XA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},XA.apply(this,arguments)},ZA={width:`auto`,height:`auto`},QA=function(e,t,n){return Math.max(Math.min(e,n),t)},$A=function(e,t,n){var r=Math.round(e/t);return r*t+n*(r-1)},ej=function(e,t){return new RegExp(e,`i`).test(t)},tj=function(e){return!!(e.touches&&e.touches.length)},nj=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},rj=function(e,t,n){n===void 0&&(n=0);var r=t.reduce(function(n,r,i){return Math.abs(r-e)<Math.abs(t[n]-e)?i:n},0),i=Math.abs(t[r]-e);return n===0||i<n?t[r]:e},ij=function(e){return e=e.toString(),e===`auto`||e.endsWith(`px`)||e.endsWith(`%`)||e.endsWith(`vh`)||e.endsWith(`vw`)||e.endsWith(`vmax`)||e.endsWith(`vmin`)?e:`${e}px`},aj=function(e,t,n,r){if(e&&typeof e==`string`){if(e.endsWith(`px`))return Number(e.replace(`px`,``));if(e.endsWith(`%`)){var i=Number(e.replace(`%`,``))/100;return t*i}if(e.endsWith(`vw`)){var i=Number(e.replace(`vw`,``))/100;return n*i}if(e.endsWith(`vh`)){var i=Number(e.replace(`vh`,``))/100;return r*i}}return e},oj=function(e,t,n,r,i,a,o){return r=aj(r,e.width,t,n),i=aj(i,e.height,t,n),a=aj(a,e.width,t,n),o=aj(o,e.height,t,n),{maxWidth:r===void 0?void 0:Number(r),maxHeight:i===void 0?void 0:Number(i),minWidth:a===void 0?void 0:Number(a),minHeight:o===void 0?void 0:Number(o)}},sj=function(e){return Array.isArray(e)?e:[e,e]},cj=`as.ref.style.className.grid.gridGap.snap.bounds.boundsByDirection.size.defaultSize.minWidth.minHeight.maxWidth.maxHeight.lockAspectRatio.lockAspectRatioExtraWidth.lockAspectRatioExtraHeight.enable.handleStyles.handleClasses.handleWrapperStyle.handleWrapperClass.children.onResizeStart.onResize.onResizeStop.handleComponent.scale.resizeRatio.snapGap`.split(`.`),lj=`__resizable_base__`,uj=function(e){YA(t,e);function t(t){var n=e.call(this,t)||this;return n.ratio=1,n.resizable=null,n.parentLeft=0,n.parentTop=0,n.resizableLeft=0,n.resizableRight=0,n.resizableTop=0,n.resizableBottom=0,n.targetLeft=0,n.targetTop=0,n.delta={width:0,height:0},n.appendBase=function(){if(!n.resizable||!n.window)return null;var e=n.parentNode;if(!e)return null;var t=n.window.document.createElement(`div`);return t.style.width=`100%`,t.style.height=`100%`,t.style.position=`absolute`,t.style.transform=`scale(0, 0)`,t.style.left=`0`,t.style.flex=`0 0 100%`,t.classList?t.classList.add(lj):t.className+=lj,e.appendChild(t),t},n.removeBase=function(e){var t=n.parentNode;t&&t.removeChild(e)},n.state={isResizing:!1,width:n.propsSize?.width??`auto`,height:n.propsSize?.height??`auto`,direction:`right`,original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:`100%`,width:`100%`,backgroundColor:`rgba(0,0,0,0)`,cursor:`auto`,opacity:0,position:`fixed`,zIndex:9999,top:`0`,left:`0`,bottom:`0`,right:`0`},flexBasis:void 0},n.onResizeStart=n.onResizeStart.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n}return Object.defineProperty(t.prototype,`parentNode`,{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`window`,{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`propsSize`,{get:function(){return this.props.size||this.props.defaultSize||ZA},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`size`,{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,i=this.resizable.style.position;i!==`relative`&&(this.resizable.style.position=`relative`),e=this.resizable.style.width===`auto`?n:this.resizable.offsetWidth,t=this.resizable.style.height===`auto`?r:this.resizable.offsetHeight,this.resizable.style.position=i}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`sizeStyle`,{get:function(){var e=this,t=this.props.size,n=function(t){if(e.state[t]===void 0||e.state[t]===`auto`)return`auto`;if(e.propsSize&&e.propsSize[t]&&e.propsSize[t]?.toString().endsWith(`%`)){if(e.state[t].toString().endsWith(`%`))return e.state[t].toString();var n=e.getParentSize();return`${Number(e.state[t].toString().replace(`px`,``))/n[t]*100}%`}return ij(e.state[t])},r=t&&t.width!==void 0&&!this.state.isResizing?ij(t.width):n(`width`),i=t&&t.height!==void 0&&!this.state.isResizing?ij(t.height):n(`height`);return{width:r,height:i}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;n!==`wrap`&&(t=!0,this.parentNode.style.flexWrap=`wrap`),e.style.position=`relative`,e.style.minWidth=`100%`,e.style.minHeight=`100%`;var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener(`mouseup`,this.onMouseUp),this.window.addEventListener(`mousemove`,this.onMouseMove),this.window.addEventListener(`mouseleave`,this.onMouseUp),this.window.addEventListener(`touchmove`,this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener(`touchend`,this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener(`mouseup`,this.onMouseUp),this.window.removeEventListener(`mousemove`,this.onMouseMove),this.window.removeEventListener(`mouseleave`,this.onMouseUp),this.window.removeEventListener(`touchmove`,this.onMouseMove,!0),this.window.removeEventListener(`touchend`,this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:e.flexBasis===`auto`?void 0:e.flexBasis})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return this.state[t]===`auto`&&this.state.original[t]===e&&(n===void 0||n===`auto`)?`auto`:e},t.prototype.calculateNewMaxFromBoundary=function(e,t){var n=this.props.boundsByDirection,r=this.state.direction,i=n&&ej(`left`,r),a=n&&ej(`top`,r),o,s;if(this.props.bounds===`parent`){var c=this.parentNode;c&&(o=i?this.resizableRight-this.parentLeft:c.offsetWidth+(this.parentLeft-this.resizableLeft),s=a?this.resizableBottom-this.parentTop:c.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds===`window`?this.window&&(o=i?this.resizableRight:this.window.innerWidth-this.resizableLeft,s=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(o=i?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),s=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return o&&Number.isFinite(o)&&(e=e&&e<o?e:o),s&&Number.isFinite(s)&&(t=t&&t<s?t:s),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n=this.props.scale||1,r=sj(this.props.resizeRatio||1),i=r[0],a=r[1],o=this.state,s=o.direction,c=o.original,l=this.props,u=l.lockAspectRatio,d=l.lockAspectRatioExtraHeight,f=l.lockAspectRatioExtraWidth,p=c.width,m=c.height,h=d||0,g=f||0;return ej(`right`,s)&&(p=c.width+(e-c.x)*i/n,u&&(m=(p-g)/this.ratio+h)),ej(`left`,s)&&(p=c.width-(e-c.x)*i/n,u&&(m=(p-g)/this.ratio+h)),ej(`bottom`,s)&&(m=c.height+(t-c.y)*a/n,u&&(p=(m-h)*this.ratio+g)),ej(`top`,s)&&(m=c.height-(t-c.y)*a/n,u&&(p=(m-h)*this.ratio+g)),{newWidth:p,newHeight:m}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,r){var i=this.props,a=i.lockAspectRatio,o=i.lockAspectRatioExtraHeight,s=i.lockAspectRatioExtraWidth,c=r.width===void 0?10:r.width,l=n.width===void 0||n.width<0?e:n.width,u=r.height===void 0?10:r.height,d=n.height===void 0||n.height<0?t:n.height,f=o||0,p=s||0;if(a){var m=(u-f)*this.ratio+p,h=(d-f)*this.ratio+p,g=(c-p)/this.ratio+f,_=(l-p)/this.ratio+f,v=Math.max(c,m),y=Math.min(l,h),b=Math.max(u,g),x=Math.min(d,_);e=QA(e,v,y),t=QA(t,b,x)}else e=QA(e,c,l),t=QA(t,u,d);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){var e=1/(this.props.scale||1);if(this.props.bounds===`parent`){var t=this.parentNode;if(t){var n=t.getBoundingClientRect();this.parentLeft=n.left*e,this.parentTop=n.top*e}}if(this.props.bounds&&typeof this.props.bounds!=`string`){var r=this.props.bounds.getBoundingClientRect();this.targetLeft=r.left*e,this.targetTop=r.top*e}if(this.resizable){var i=this.resizable.getBoundingClientRect(),a=i.left,o=i.top,s=i.right,c=i.bottom;this.resizableLeft=a*e,this.resizableRight=s*e,this.resizableTop=o*e,this.resizableBottom=c*e}},t.prototype.onResizeStart=function(e,t){if(!(!this.resizable||!this.window)){var n=0,r=0;if(e.nativeEvent&&nj(e.nativeEvent)?(n=e.nativeEvent.clientX,r=e.nativeEvent.clientY):e.nativeEvent&&tj(e.nativeEvent)&&(n=e.nativeEvent.touches[0].clientX,r=e.nativeEvent.touches[0].clientY),!(this.props.onResizeStart&&this.resizable&&this.props.onResizeStart(e,t,this.resizable)===!1)){this.props.size&&(this.props.size.height!==void 0&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),this.props.size.width!==void 0&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio==`number`?this.props.lockAspectRatio:this.size.width/this.size.height;var i,a=this.window.getComputedStyle(this.resizable);if(a.flexBasis!==`auto`){var o=this.parentNode;o&&(this.flexDir=this.window.getComputedStyle(o).flexDirection.startsWith(`row`)?`row`:`column`,i=a.flexBasis)}this.setBoundingClientRect(),this.bindEvents();var s={original:{x:n,y:r,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:XA(XA({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||`auto`}),direction:t,flexBasis:i};this.setState(s)}}},t.prototype.onMouseMove=function(e){var t=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&tj(e))try{e.preventDefault(),e.stopPropagation()}catch{}var n=this.props,r=n.maxWidth,i=n.maxHeight,a=n.minWidth,o=n.minHeight,s=tj(e)?e.touches[0].clientX:e.clientX,c=tj(e)?e.touches[0].clientY:e.clientY,l=this.state,u=l.direction,d=l.original,f=l.width,p=l.height,m=this.getParentSize(),h=oj(m,this.window.innerWidth,this.window.innerHeight,r,i,a,o);r=h.maxWidth,i=h.maxHeight,a=h.minWidth,o=h.minHeight;var g=this.calculateNewSizeFromDirection(s,c),_=g.newHeight,v=g.newWidth,y=this.calculateNewMaxFromBoundary(r,i);this.props.snap&&this.props.snap.x&&(v=rj(v,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(_=rj(_,this.props.snap.y,this.props.snapGap));var b=this.calculateNewSizeFromAspectRatio(v,_,{width:y.maxWidth,height:y.maxHeight},{width:a,height:o});if(v=b.newWidth,_=b.newHeight,this.props.grid){var x=$A(v,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),S=$A(_,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0,w=C===0||Math.abs(x-v)<=C?x:v,T=C===0||Math.abs(S-_)<=C?S:_;v=w,_=T}var E={width:v-d.width,height:_-d.height};if(this.delta=E,f&&typeof f==`string`){if(f.endsWith(`%`)){var D=v/m.width*100;v=`${D}%`}else if(f.endsWith(`vw`)){var O=v/this.window.innerWidth*100;v=`${O}vw`}else if(f.endsWith(`vh`)){var k=v/this.window.innerHeight*100;v=`${k}vh`}}if(p&&typeof p==`string`){if(p.endsWith(`%`)){var D=_/m.height*100;_=`${D}%`}else if(p.endsWith(`vw`)){var O=_/this.window.innerWidth*100;_=`${O}vw`}else if(p.endsWith(`vh`)){var k=_/this.window.innerHeight*100;_=`${k}vh`}}var A={width:this.createSizeForCssProperty(v,`width`),height:this.createSizeForCssProperty(_,`height`)};this.flexDir===`row`?A.flexBasis=A.width:this.flexDir===`column`&&(A.flexBasis=A.height);var j=this.state.width!==A.width,M=this.state.height!==A.height,N=this.state.flexBasis!==A.flexBasis,P=j||M||N;P&&(0,Qk.flushSync)(function(){t.setState(A)}),this.props.onResize&&P&&this.props.onResize(e,u,this.resizable,E)}},t.prototype.onMouseUp=function(e){var t=this.state,n=t.isResizing,r=t.direction;t.original,!(!n||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(e,r,this.resizable,this.delta),this.props.size&&this.setState({width:this.props.size.width??`auto`,height:this.props.size.height??`auto`}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:XA(XA({},this.state.backgroundStyle),{cursor:`auto`})}))},t.prototype.updateSize=function(e){this.setState({width:e.width??`auto`,height:e.height??`auto`})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,i=t.handleClasses,a=t.handleWrapperStyle,o=t.handleWrapperClass,s=t.handleComponent;if(!n)return null;var c=Object.keys(n).map(function(t){return n[t]===!1?null:(0,G.jsx)(JA,{direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:i&&i[t],children:s&&s[t]?s[t]:null},t)});return(0,G.jsx)(`div`,{className:o,style:a,children:c})},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce(function(t,n){return cj.indexOf(n)===-1&&(t[n]=e.props[n]),t},{}),n=XA(XA(XA({position:`relative`,userSelect:this.state.isResizing?`none`:`auto`},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:`border-box`,flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||`div`;return(0,G.jsxs)(r,XA({style:n,className:this.props.className},t,{ref:function(t){t&&(e.resizable=t)},children:[this.state.isResizing&&(0,G.jsx)(`div`,{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:`div`,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(b.PureComponent),dj=u(_()),fj=function(e,t){return fj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},fj(e,t)};function pj(e,t){fj(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var mj=function(){return mj=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},mj.apply(this,arguments)};function hj(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var gj={width:`auto`,height:`auto`,display:`inline-block`,position:`absolute`,top:0,left:0},_j=function(e){return{bottom:e,bottomLeft:e,bottomRight:e,left:e,right:e,top:e,topLeft:e,topRight:e}},vj=function(e){pj(t,e);function t(t){var n=e.call(this,t)||this;return n.resizingPosition={x:0,y:0},n.offsetFromParent={left:0,top:0},n.resizableElement={current:null},n.originalPosition={x:0,y:0},n.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.getMaxSizesFromProps=n.getMaxSizesFromProps.bind(n),n}return t.prototype.componentDidMount=function(){this.updateOffsetFromParent();var e=this.offsetFromParent,t=e.left,n=e.top,r=this.getDraggablePosition(),i=r.x,a=r.y;this.draggable.setState({x:i-t,y:a-n}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var e=this.draggable.state,t=e.x,n=e.y;return{x:t,y:n}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){var e=this.props.maxWidth===void 0?2**53-1:this.props.maxWidth,t=this.props.maxHeight===void 0?2**53-1:this.props.maxHeight;return{maxWidth:e,maxHeight:t}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(e){var t=this.props.scale;switch(this.props.bounds){case`window`:return window.innerHeight/t;case`body`:return document.body.offsetHeight/t;default:return e.offsetHeight}},t.prototype.getOffsetWidth=function(e){var t=this.props.scale;switch(this.props.bounds){case`window`:return window.innerWidth/t;case`body`:return document.body.offsetWidth/t;default:return e.offsetWidth}},t.prototype.onDragStart=function(e,t){if(this.props.onDragStart&&this.props.onDragStart(e,t),this.originalPosition=this.getDraggablePosition(),this.props.bounds){var n=this.getParent(),r=this.props.scale,i;if(this.props.bounds===`parent`)i=n;else if(this.props.bounds===`body`){var a=n.getBoundingClientRect(),o=a.left,s=a.top,c=document.body.getBoundingClientRect(),l=-(o-n.offsetLeft*r-c.left)/r,u=-(s-n.offsetTop*r-c.top)/r,d=(document.body.offsetWidth-this.resizable.size.width*r)/r+l,f=(document.body.offsetHeight-this.resizable.size.height*r)/r+u;return this.setState({bounds:{top:u,right:d,bottom:f,left:l}})}else if(this.props.bounds===`window`){if(!this.resizable)return;var p=n.getBoundingClientRect(),m=p.left,h=p.top,g=-(m-n.offsetLeft*r)/r,_=-(h-n.offsetTop*r)/r,d=(window.innerWidth-this.resizable.size.width*r)/r+g,f=(window.innerHeight-this.resizable.size.height*r)/r+_;return this.setState({bounds:{top:_,right:d,bottom:f,left:g}})}else typeof this.props.bounds==`string`?i=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(i=this.props.bounds);if(!(!(i instanceof HTMLElement)||!(n instanceof HTMLElement))){var v=i.getBoundingClientRect(),y=v.left,b=v.top,x=n.getBoundingClientRect(),S=x.left,C=x.top,w=(y-S)/r,T=b-C;if(this.resizable){this.updateOffsetFromParent();var E=this.offsetFromParent;this.setState({bounds:{top:T-E.top,right:w+(i.offsetWidth-this.resizable.size.width)-E.left/r,bottom:T+(i.offsetHeight-this.resizable.size.height)-E.top,left:w-E.left/r}})}}}},t.prototype.onDrag=function(e,t){if(this.props.onDrag){var n=this.offsetFromParent,r=n.left,i=n.top;if(!this.props.dragAxis||this.props.dragAxis===`both`)return this.props.onDrag(e,mj(mj({},t),{x:t.x+r,y:t.y+i}));if(this.props.dragAxis===`x`)return this.props.onDrag(e,mj(mj({},t),{x:t.x+r,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis===`y`)return this.props.onDrag(e,mj(mj({},t),{x:this.originalPosition.x+r,y:t.y+i,deltaX:0}))}},t.prototype.onDragStop=function(e,t){if(this.props.onDragStop){var n=this.offsetFromParent,r=n.left,i=n.top;if(!this.props.dragAxis||this.props.dragAxis===`both`)return this.props.onDragStop(e,mj(mj({},t),{x:t.x+r,y:t.y+i}));if(this.props.dragAxis===`x`)return this.props.onDragStop(e,mj(mj({},t),{x:t.x+r,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis===`y`)return this.props.onDragStop(e,mj(mj({},t),{x:this.originalPosition.x+r,y:t.y+i,deltaX:0}))}},t.prototype.onResizeStart=function(e,t,n){e.stopPropagation(),this.setState({resizing:!0});var r=this.props.scale,i=this.offsetFromParent,a=this.getDraggablePosition();if(this.resizingPosition={x:a.x+i.left,y:a.y+i.top},this.originalPosition=a,this.props.bounds){var o=this.getParent(),s=void 0;this.props.bounds===`parent`?s=o:this.props.bounds===`body`?s=document.body:this.props.bounds===`window`?s=window:typeof this.props.bounds==`string`?s=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(s=this.props.bounds);var c=this.getSelfElement();if(c instanceof Element&&(s instanceof HTMLElement||s===window)&&o instanceof HTMLElement){var l=this.getMaxSizesFromProps(),u=l.maxWidth,d=l.maxHeight,f=this.getParentSize();if(u&&typeof u==`string`)if(u.endsWith(`%`)){var p=Number(u.replace(`%`,``))/100;u=f.width*p}else u.endsWith(`px`)&&(u=Number(u.replace(`px`,``)));if(d&&typeof d==`string`)if(d.endsWith(`%`)){var p=Number(d.replace(`%`,``))/100;d=f.height*p}else d.endsWith(`px`)&&(d=Number(d.replace(`px`,``)));var m=c.getBoundingClientRect(),h=m.left,g=m.top,_=this.props.bounds===`window`?{left:0,top:0}:s.getBoundingClientRect(),v=_.left,y=_.top,b=this.getOffsetWidth(s),x=this.getOffsetHeight(s),S=t.toLowerCase().endsWith(`left`),C=t.toLowerCase().endsWith(`right`),w=t.startsWith(`top`),T=t.startsWith(`bottom`);if((S||w)&&this.resizable){var E=(h-v)/r+this.resizable.size.width;this.setState({maxWidth:E>Number(u)?u:E})}if(C||this.props.lockAspectRatio&&!S&&!w){var E=b+(v-h)/r;this.setState({maxWidth:E>Number(u)?u:E})}if((w||S)&&this.resizable){var E=(g-y)/r+this.resizable.size.height;this.setState({maxHeight:E>Number(d)?d:E})}if(T||this.props.lockAspectRatio&&!w&&!S){var E=x+(y-g)/r;this.setState({maxHeight:E>Number(d)?d:E})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(e,t,n)},t.prototype.onResize=function(e,t,n,r){var i=this,a={x:this.originalPosition.x,y:this.originalPosition.y},o=-r.width,s=-r.height;[`top`,`left`,`topLeft`,`bottomLeft`,`topRight`].includes(t)&&(t===`bottomLeft`?a.x+=o:(t===`topRight`||(a.x+=o),a.y+=s));var c=this.draggable.state;(a.x!==c.x||a.y!==c.y)&&(0,dj.flushSync)(function(){i.draggable.setState(a)}),this.updateOffsetFromParent();var l=this.offsetFromParent,u=this.getDraggablePosition().x+l.left,d=this.getDraggablePosition().y+l.top;this.resizingPosition={x:u,y:d},this.props.onResize&&this.props.onResize(e,t,n,r,{x:u,y:d})},t.prototype.onResizeStop=function(e,t,n,r){this.setState({resizing:!1});var i=this.getMaxSizesFromProps(),a=i.maxWidth,o=i.maxHeight;this.setState({maxWidth:a,maxHeight:o}),this.props.onResizeStop&&this.props.onResizeStop(e,t,n,r,this.resizingPosition)},t.prototype.updateSize=function(e){this.resizable&&this.resizable.updateSize({width:e.width,height:e.height})},t.prototype.updatePosition=function(e){this.draggable.setState(e)},t.prototype.updateOffsetFromParent=function(){var e=this.props.scale,t=this.getParent(),n=this.getSelfElement();if(!t||n===null)return{top:0,left:0};var r=t.getBoundingClientRect(),i=r.left,a=r.top,o=n.getBoundingClientRect(),s=this.getDraggablePosition(),c=t.scrollLeft,l=t.scrollTop;this.offsetFromParent={left:o.left-i+c-s.x*e,top:o.top-a+l-s.y*e}},t.prototype.render=function(){var e=this,t=this.props,n=t.disableDragging,r=t.style,i=t.dragHandleClassName,a=t.position,o=t.onMouseDown,s=t.onMouseUp,c=t.dragAxis,l=t.dragGrid,u=t.bounds,d=t.enableUserSelectHack,f=t.cancel,p=t.children;t.onResizeStart,t.onResize,t.onResizeStop,t.onDragStart,t.onDrag,t.onDragStop;var m=t.resizeHandleStyles,h=t.resizeHandleClasses,g=t.resizeHandleComponent,_=t.enableResizing,v=t.resizeGrid,y=t.resizeHandleWrapperClass,x=t.resizeHandleWrapperStyle,S=t.scale,C=t.allowAnyClick,w=t.dragPositionOffset,T=hj(t,`disableDragging.style.dragHandleClassName.position.onMouseDown.onMouseUp.dragAxis.dragGrid.bounds.enableUserSelectHack.cancel.children.onResizeStart.onResize.onResizeStop.onDragStart.onDrag.onDragStop.resizeHandleStyles.resizeHandleClasses.resizeHandleComponent.enableResizing.resizeGrid.resizeHandleWrapperClass.resizeHandleWrapperStyle.scale.allowAnyClick.dragPositionOffset`.split(`.`)),E=this.props.default?mj({},this.props.default):void 0;delete T.default;var D=n||i?{cursor:`auto`}:{cursor:`move`},O=mj(mj(mj({},gj),D),r),k=this.offsetFromParent,A=k.left,j=k.top,M;a&&(M={x:a.x-A,y:a.y-j});var N=this.state.resizing?void 0:M,P=this.state.resizing?`both`:c;return(0,b.createElement)(HA.default,{ref:function(t){t&&(e.draggable=t)},handle:i?`.${i}`:void 0,defaultPosition:E,onMouseDown:o,onMouseUp:s,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:P,disabled:n,grid:l,bounds:u?this.state.bounds:void 0,position:N,enableUserSelectHack:d,cancel:f,scale:S,allowAnyClick:C,nodeRef:this.resizableElement,positionOffset:w},(0,b.createElement)(uj,mj({},T,{ref:function(t){t&&(e.resizable=t,e.resizableElement.current=t.resizable)},defaultSize:E,size:this.props.size,enable:typeof _==`boolean`?_j(_):_,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:O,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:v,handleWrapperClass:y,handleWrapperStyle:x,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:m,handleClasses:h,handleComponent:g,scale:this.props.scale}),p))},t.defaultProps={maxWidth:2**53-1,maxHeight:2**53-1,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t}(b.PureComponent),yj=4,bj=()=>{let e=String(pO||``).trim();if(e.startsWith(`/`))return`${window.location.protocol===`https:`?`wss`:`ws`}://${window.location.host}/ws/take-moment`;let t=e;return t.endsWith(`/api`)&&(t=t.slice(0,-4)),t=t.replace(/^https:/i,`wss:`).replace(/^http:/i,`ws:`),`${t}/ws/take-moment`},xj=(e,t)=>{!e||e.readyState!==WebSocket.OPEN||e.send(JSON.stringify(t))},Sj=()=>[{urls:`stun:stun.l.google.com:19302`}],Cj=({onIceCandidate:e,onTrackEvent:t})=>{let n=new RTCPeerConnection({iceServers:Sj()});return n.onicecandidate=t=>{t.candidate&&e(t.candidate)},n.onicecandidateerror=e=>{console.warn(`[friends] ICE candidate error`,e)},n.ontrack=e=>{t?.(e)},n},wj=(e,t,n)=>Math.max(t,Math.min(n,e)),Tj={x:40,y:40,w:220,h:220,z:0},Ej=(e,t)=>!e||!t?{x:.05,y:.05,w:.28,h:.42,z:0}:{x:wj(Tj.x/e,0,.9),y:wj(Tj.y/t,0,.9),w:wj(Tj.w/e,.08,1),h:wj(Tj.h/t,.08,1),z:0},Dj=(e,t,n)=>!e||!t||!n?{...Tj}:{x:Math.round((e.x??0)*t),y:Math.round((e.y??0)*n),w:Math.round((e.w??0)*t),h:Math.round((e.h??0)*n),z:e.z??0},Oj=(e,t,n)=>!e||!t||!n?Ej(t,n):{x:(e.x??0)/t,y:(e.y??0)/n,w:(e.w??0)/t,h:(e.h??0)/n,z:e.z??0},kj=e=>{let t=wj(e.w??.2,.05,1),n=wj(e.h??.2,.05,1),r=wj(e.x??0,0,Math.max(0,1-t)),i=wj(e.y??0,0,Math.max(0,1-n));return{...e,x:r,y:i,w:t,h:n}};function Aj({roomId:e,onRoomCreated:t,onMasterCaptured:n,onSessionEnded:r}){let i=(0,b.useRef)(null),a=(0,b.useRef)(null),o=(0,b.useRef)(null),s=(0,b.useRef)(null),c=(0,b.useRef)(null),l=(0,b.useRef)(null),u=(0,b.useRef)(new Map),d=(0,b.useRef)(new Map),f=(0,b.useRef)(new Map),[p,m]=(0,b.useState)(null),[h,g]=(0,b.useState)(null),_=h===`master`;(0,b.useEffect)(()=>{c.current=p},[p]),(0,b.useEffect)(()=>{l.current=h},[h]);let[v,y]=(0,b.useState)(null),[x,S]=(0,b.useState)([]),[C,w]=(0,b.useState)([]),[T,E]=(0,b.useState)({background:`#F4E6DA`,layoutUnits:`norm`,layout:{}}),[D,O]=(0,b.useState)(null),[k,A]=(0,b.useState)(`connecting`),j=(0,b.useMemo)(()=>bj(),[]),M=(0,b.useCallback)(e=>{let t=String(c.current||``),n=String(e||``);return!t||!n?!1:t.localeCompare(n)<0},[]),N=(0,b.useCallback)(()=>{let e=[...d.current.entries()].map(([e,t])=>({id:e,stream:t}));w(e)},[]),P=(0,b.useCallback)(async()=>{if(s.current)return s.current;let e=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480},audio:!0});return s.current=e,y(e),o.current&&(o.current.srcObject=e),e},[]),ee=(0,b.useCallback)(()=>{for(let e of u.current.values())try{e.close()}catch{}u.current.clear(),d.current.clear(),f.current.clear(),w([]),S([])},[]),F=(0,b.useCallback)(()=>{if(ee(),a.current){try{a.current.close()}catch{}a.current=null}s.current&&=(s.current.getTracks().forEach(e=>e.stop()),null),y(null)},[ee]),I=(0,b.useCallback)(e=>{if(l.current!==`master`)return;let t={background:typeof e.background==`string`?e.background:T.background,layoutUnits:`norm`,layout:e.layout&&typeof e.layout==`object`?e.layout:T.layout};E(t),xj(a.current,{type:`STATE_UPDATE`,payload:{state:t}})},[T]),L=(0,b.useCallback)((e,t)=>{let n=T.layout||{},r=n[e]||Ej(0,0),i={...n,[e]:{...r,...t}};I({layout:i})},[T.layout,I]),R=(0,b.useCallback)(async(e,{initiate:t})=>{if(!c.current||u.current.has(e))return;let n=typeof t==`boolean`?t:M(e);console.log(`[friends] setupPeer`,{self:c.current,peerId:e,initiate:n});let r=await P(),i=Cj({onIceCandidate:t=>{console.log(`[friends] send ICE ->`,e),xj(a.current,{type:`SIGNAL`,payload:{to:e,data:{candidate:t}}})},onTrackEvent:t=>{console.log(`[friends] ontrack from`,e,{hasStreams:!!(t.streams&&t.streams[0]),trackKind:t.track?.kind});let n=t.streams&&t.streams[0]||d.current.get(e);n||=new MediaStream;let r=t.track;if(r&&!n.getTracks().some(e=>e.id===r.id))try{n.addTrack(r)}catch{}d.current.set(e,n),N()}});if(i.oniceconnectionstatechange=()=>{console.log(`[friends] ICE state`,e,i.iceConnectionState)},i.onconnectionstatechange=()=>{console.log(`[friends] PC state`,e,i.connectionState)},r.getTracks().forEach(e=>i.addTrack(e,r)),u.current.set(e,i),n)try{console.log(`[friends] createOffer ->`,e);let t=await i.createOffer();await i.setLocalDescription(t),console.log(`[friends] send SDP offer ->`,e),xj(a.current,{type:`SIGNAL`,payload:{to:e,data:{sdp:i.localDescription}}})}catch(t){console.warn(`[friends] createOffer failed`,e,t)}},[P,M,N]),te=(0,b.useCallback)(async(e,t)=>{if(!e||!t)return;console.log(`[friends] recv SIGNAL <-`,e,{hasSdp:!!t.sdp,sdpType:t.sdp?.type,hasCandidate:!!t.candidate}),await R(e,{initiate:!1});let n=u.current.get(e);if(!n)return;let r=async()=>{let t=f.current.get(e);if(!(!t||t.length===0)){f.current.delete(e);for(let e of t)try{await n.addIceCandidate(new RTCIceCandidate(e))}catch{}}};if(t.sdp){let i=new RTCSessionDescription(t.sdp);if(await n.setRemoteDescription(i),console.log(`[friends] setRemoteDescription`,e,i.type),await r(),i.type===`offer`){console.log(`[friends] createAnswer ->`,e);let t=await n.createAnswer();await n.setLocalDescription(t),console.log(`[friends] send SDP answer ->`,e),xj(a.current,{type:`SIGNAL`,payload:{to:e,data:{sdp:n.localDescription}}})}}if(t.candidate){if(!n.remoteDescription){let n=f.current.get(e)||[];n.push(t.candidate),f.current.set(e,n),console.log(`[friends] queue ICE (no remoteDescription yet)`,e);return}try{await n.addIceCandidate(new RTCIceCandidate(t.candidate))}catch{}}},[R]),z=(0,b.useCallback)(async()=>{if(!_)return;let e=i.current;if(!e)return;let t=e.getBoundingClientRect(),r=Math.max(1,Math.floor(t.width)),s=Math.max(1,Math.floor(t.height)),c=document.createElement(`canvas`);c.width=r,c.height=s;let l=c.getContext(`2d`);if(!l)return;l.fillStyle=T.background||`#F4E6DA`,l.fillRect(0,0,r,s);let u=[];o.current&&u.push({id:p,videoEl:o.current,layout:T.layout?.[p]||null}),e.querySelectorAll(`video[data-peer]`).forEach(e=>{let t=e.getAttribute(`data-peer`);u.push({id:t,videoEl:e,layout:T.layout?.[t]||null})}),u.sort((e,t)=>{let n=e.layout?.z??0,r=t.layout?.z??0;return n-r});for(let e of u){let t=e.layout;if(!t)continue;let n=T.layoutUnits===`norm`?Dj(t,r,s):t,i=wj(n.x,-r,r*2),a=wj(n.y,-s,s*2),o=wj(n.w,1,r*4),c=wj(n.h,1,s*4);try{l.drawImage(e.videoEl,i,a,o,c)}catch{}}let d=c.toDataURL(`image/jpeg`,.92);xj(a.current,{type:`END_SESSION`,payload:{reason:`captured`}}),n?.(d)},[p,_,n,T.background,T.layout]),[B,V]=(0,b.useState)({w:0,h:0});(0,b.useEffect)(()=>{let e=i.current;if(!e)return;let t=()=>{let t=e.getBoundingClientRect(),n=Math.max(1,Math.floor(t.width)),r=Math.max(1,Math.floor(t.height));V({w:n,h:r})};t();let n=new ResizeObserver(()=>t());return n.observe(e),()=>n.disconnect()},[]),(0,b.useEffect)(()=>{if(!B.w||!B.h||T.layoutUnits===`norm`)return;let e=T.layout||{},t={};for(let[n,r]of Object.entries(e))t[n]=kj(Oj(r,B.w,B.h)),t[n].z=r?.z??t[n].z??0;E(e=>({...e,layoutUnits:`norm`,layout:t})),l.current===`master`&&xj(a.current,{type:`STATE_UPDATE`,payload:{state:{background:T.background,layoutUnits:`norm`,layout:t}}})},[B.w,B.h]),(0,b.useEffect)(()=>{if(!_||!B.w||!B.h||!p)return;let e=T.layout||{},t=!1,n={...e};[p,...x].slice(0,yj).forEach((e,r)=>{if(n[e])return;let i=Ej(B.w,B.h),a=r%4*.02,o=Math.floor(r/4)*.02;n[e]=kj({...i,x:i.x+a,y:i.y+o,z:r}),t=!0}),t&&I({layout:n})},[p,_,x,T.layout,I,B.h,B.w]),(0,b.useEffect)(()=>{let t=!0;return(async()=>{try{O(null),A(`connecting`),m(null),g(null),S([]),w([]),await P();let n=new WebSocket(j);a.current=n,n.onopen=()=>{t&&(A(`joining`),xj(n,{type:`JOIN`,payload:{roomId:e}}))},n.onmessage=async e=>{let n;try{n=JSON.parse(String(e.data||``))}catch{return}if(!t)return;let{type:i,payload:a}=n;if(i===`WELCOME`){console.log(`[friends] WELCOME`,{clientId:a?.clientId,role:a?.role,peers:a?.peers}),c.current=a.clientId,l.current=a.role,m(a.clientId),g(a.role),E(a.state||{background:`#F4E6DA`,layout:{}}),A(`connected`);let e=Array.isArray(a.peers)?a.peers:[];S(e);for(let t of e)await R(t,{initiate:void 0});return}if(i===`PEER_JOINED`){let e=a?.clientId;if(!e)return;console.log(`[friends] PEER_JOINED`,e),S(t=>t.includes(e)?t:[...t,e]),await R(e,{initiate:void 0}),a?.state&&E(a.state);return}if(i===`PEER_LEFT`){let e=a?.clientId;if(!e)return;S(t=>t.filter(t=>t!==e));let t=u.current.get(e);if(t){try{t.close()}catch{}u.current.delete(e)}d.current.delete(e),N();return}if(i===`SIGNAL`){await te(a?.from,a?.data);return}if(i===`STATE`){a?.state&&E(a.state);return}if(i===`SESSION_ENDED`){A(`ended`),r?.(a?.reason||`ended`),F();return}if(i===`ERROR`){O(a?.message||`Terjadi kesalahan`);return}},n.onerror=()=>{t&&O(`Koneksi realtime gagal`)},n.onclose=()=>{t&&A(e=>e===`ended`?e:`disconnected`)}}catch(e){if(!t)return;O(e?.message||`Gagal memulai friends mode`),A(`error`)}})(),()=>{t=!1,F()}},[F,P,te,r,e,N,j,R]),(0,b.useEffect)(()=>{o.current&&s.current&&(o.current.srcObject=s.current)},[p]);let H=(0,b.useMemo)(()=>`${window.location.origin}/take-moment?room=${encodeURIComponent(e)}`,[e]),ne=(0,b.useMemo)(()=>{let e=[];p&&e.push({id:p,kind:`local`});for(let t of x)e.push({id:t,kind:`remote`});return e.slice(0,yj)},[p,x]),re={width:`100%`,maxWidth:`none`,height:`min(60vh, 520px)`,minHeight:`320px`,background:T.background||`#F4E6DA`,borderRadius:`18px`,overflow:`hidden`,position:`relative`,border:`1px solid rgba(15,23,42,0.12)`};return(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.9rem`,width:`100%`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`0.75rem`,alignItems:`center`,justifyContent:`space-between`,background:`rgba(255,255,255,0.7)`,borderRadius:`16px`,padding:`0.9rem`,border:`1px solid rgba(15,23,42,0.08)`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.3rem`},children:[(0,G.jsx)(`div`,{style:{fontWeight:800,color:`#0F172A`},children:`Take moment with your friends`}),(0,G.jsxs)(`div`,{style:{fontSize:`0.9rem`,color:`rgba(15,23,42,0.7)`},children:[`Status: `,k,`  Role: `,h||`-`]}),D&&(0,G.jsx)(`div`,{style:{fontSize:`0.9rem`,color:`#B91C1C`},children:D})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`0.65rem`,alignItems:`center`,justifyContent:`flex-end`},children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>{navigator.clipboard?.writeText(H),t?.(H)},style:{padding:`0.55rem 0.9rem`,borderRadius:`999px`,border:`1px solid rgba(15,23,42,0.14)`,background:`white`,fontWeight:700,cursor:`pointer`},children:`Copy link`}),_&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`label`,{style:{display:`inline-flex`,alignItems:`center`,gap:`0.4rem`,padding:`0.55rem 0.75rem`,borderRadius:`999px`,background:`white`,border:`1px solid rgba(15,23,42,0.14)`,fontWeight:700},children:[`Background`,(0,G.jsx)(`input`,{type:`color`,value:T.background||`#F4E6DA`,onChange:e=>I({background:e.target.value}),style:{width:`30px`,height:`22px`,border:`none`}})]}),(0,G.jsx)(`button`,{type:`button`,onClick:z,style:{padding:`0.55rem 0.95rem`,borderRadius:`999px`,border:`none`,background:`#0F172A`,color:`white`,fontWeight:800,cursor:`pointer`},children:`Capture (master)`})]})]})]}),(0,G.jsxs)(`div`,{ref:i,style:re,children:[(0,G.jsx)(`video`,{ref:o,muted:!0,autoPlay:!0,playsInline:!0,style:{position:`absolute`,width:1,height:1,opacity:0,pointerEvents:`none`}}),ne.map(({id:e,kind:t})=>{let n=T.layoutUnits!==`norm`,r=n?null:T.layout?.[e]||Ej(B.w,B.h),i=n?T.layout?.[e]||{...Tj}:Dj(r,B.w,B.h),a=t===`local`,o=_&&T.layoutUnits===`norm`,s=i.z??0,c=a?{srcObject:v}:{srcObject:d.current.get(e)||C.find(t=>t.id===e)?.stream||null};return(0,G.jsx)(vj,{bounds:`parent`,size:{width:i.w,height:i.h},position:{x:i.x,y:i.y},disableDragging:!o,enableResizing:o,style:{zIndex:s,borderRadius:14,overflow:`hidden`},onDragStop:(t,n)=>{if(!_)return;let r=T.layout?.[e]||Ej(B.w,B.h),i=kj({...r,x:n.x/B.w,y:n.y/B.h});L(e,i)},onResizeStop:(t,n,r,i,a)=>{if(!_)return;let o=r.offsetWidth,s=r.offsetHeight,c=T.layout?.[e]||Ej(B.w,B.h),l=kj({...c,w:o/B.w,h:s/B.h,x:a.x/B.w,y:a.y/B.h});L(e,l)},onMouseDown:()=>{if(!_)return;let t=Math.max(0,...Object.values(T.layout||{}).map(e=>e?.z??0)),n=T.layout?.[e]||Ej(B.w,B.h);L(e,{...n,z:t+1})},children:(0,G.jsx)(`div`,{style:{width:`100%`,height:`100%`,background:`rgba(0,0,0,0.15)`},children:(0,G.jsx)(`video`,{"data-peer":a?void 0:e,autoPlay:!0,playsInline:!0,muted:a,onLoadedMetadata:e=>{try{let t=e.currentTarget.play?.();t&&typeof t.catch==`function`&&t.catch(()=>{})}catch{}},ref:e=>{if(e)try{if(c.srcObject&&e.srcObject!==c.srcObject){e.srcObject=c.srcObject;try{let t=e.play?.();t&&typeof t.catch==`function`&&t.catch(()=>{})}catch{}}}catch{}},style:{width:`100%`,height:`100%`,objectFit:`cover`,transform:a?`scaleX(-1)`:`none`}})})},e)}),!p&&(0,G.jsx)(`div`,{style:{position:`absolute`,inset:0,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`rgba(15,23,42,0.8)`,fontWeight:800},children:`Menyambungkan`})]}),h===`participant`&&(0,G.jsx)(`div`,{style:{background:`rgba(255,255,255,0.7)`,borderRadius:`16px`,padding:`0.9rem`,border:`1px solid rgba(15,23,42,0.08)`,color:`rgba(15,23,42,0.75)`,fontWeight:650},children:`Kamu sedang bergabung sebagai peserta. Kamu hanya bisa berbicara dan berpose, semua kontrol hanya bisa dilakukan oleh master.`})]})}var jj=u(_()),Mj=`take-moment-mirrored-video-controls`,Nj=`
  .mirrored-video-controls {
    transform: scaleX(-1);
    transform-origin: center;
  }

  .mirrored-video-controls::-webkit-media-controls-panel,
  .mirrored-video-controls::-webkit-media-controls-play-button,
  .mirrored-video-controls::-webkit-media-controls-volume-slider,
  .mirrored-video-controls::-webkit-media-controls-timeline,
  .mirrored-video-controls::-webkit-media-controls-current-time-display,
  .mirrored-video-controls::-webkit-media-controls-time-remaining-display,
  .mirrored-video-controls::-webkit-media-controls-mute-button,
  .mirrored-video-controls::-webkit-media-controls-fullscreen-button,
  .mirrored-video-controls::-webkit-media-controls-overlay-play-button,
  .mirrored-video-controls::-webkit-media-controls-start-playback-button,
  .mirrored-video-controls::-webkit-media-controls-seek-back-button,
  .mirrored-video-controls::-webkit-media-controls-seek-forward-button,
  .mirrored-video-controls::-webkit-media-controls-return-to-realtime-button,
  .mirrored-video-controls::-webkit-media-controls-toggle-closed-captions-button,
  .mirrored-video-controls::-webkit-media-controls-playback-rate-button {
    transform: scaleX(-1);
  }

  .mirrored-video-controls::-webkit-media-controls-panel {
    direction: ltr;
  }
`,Pj=[3,5,10],Fj=480,Ij=1,Lj={3:{record:4,playback:4},5:{record:6,playback:6},10:{record:6,playback:6}},Rj=e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)}),zj=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768,Bj=e=>{if(typeof e!=`string`)return null;let[t,n]=e.split(`,`);if(!n)return null;let r=t.match(/:(.*?);/)?.[1]||`image/jpeg`,i=atob(n),a=i.length,o=new Uint8Array(a);for(let e=0;e<a;e+=1)o[e]=i.charCodeAt(e);return new Blob([o],{type:r})},Vj=(e,t=`image/jpeg`,n=.92)=>new Promise((r,i)=>{if(!e){i(Error(`Canvas element is not provided`));return}if(e.toBlob){e.toBlob(e=>{e?r(e):i(Error(`Failed to extract blob from canvas`))},t,n);return}try{let a=e.toDataURL(t,n),o=Bj(a);if(!o){i(Error(`Failed to convert canvas data URL to blob`));return}r(o)}catch(e){i(e)}}),Hj=e=>{if(e)try{URL.revokeObjectURL(e)}catch(e){console.warn(` Failed to revoke object URL`,e)}},Uj=e=>typeof e==`string`&&e.startsWith(`blob:`),Wj=async e=>{if(!e)throw Error(`Image blob is not available`);if(typeof window<`u`&&typeof window.createImageBitmap==`function`){let t=await window.createImageBitmap(e);return{source:t,width:t.width,height:t.height,cleanup:()=>{try{t.close?.()}catch(e){console.warn(` Failed to close ImageBitmap`,e)}}}}let t=URL.createObjectURL(e),n=new Image;return n.decoding=`async`,n.crossOrigin=`anonymous`,new Promise((e,r)=>{let i=(e=!0)=>{e&&Hj(t),n.onload=null,n.onerror=null};n.onload=()=>{i(!1),e({source:n,width:n.naturalWidth,height:n.naturalHeight,cleanup:()=>{i(!0)}})},n.onerror=e=>{i(!0),r(e)},n.src=t})},Gj=async(e,{maxWidth:t=2048,maxHeight:n=2048,quality:r=.85})=>{let{source:i,width:a,height:o,cleanup:s}=await Wj(e);try{let e=t?t/a:1,s=n?n/o:1,c=Math.min(1,e,s),l=Math.max(1,Math.round(a*c)),u=Math.max(1,Math.round(o*c)),d=document.createElement(`canvas`);d.width=l,d.height=u;let f=d.getContext(`2d`,{alpha:!1,willReadFrequently:!1,desynchronized:!0});if(!f)throw Error(`Failed to obtain 2D context for photo compression`);f.imageSmoothingEnabled=!0,f.imageSmoothingQuality=`high`,f.drawImage(i,0,0,l,u);let p=await Vj(d,`image/jpeg`,r);if(!p)throw Error(`Failed to produce compressed photo blob`);return{blob:p,width:l,height:u}}finally{s?.()}},Kj=({photos:e=[],videos:t=[]})=>{let n=[...e,...t].filter(Boolean).reduce((e,t)=>typeof t==`string`?e+t.length*2:t?.dataUrl?e+t.dataUrl.length*2:typeof t?.sizeBytes==`number`&&Number.isFinite(t.sizeBytes)?e+t.sizeBytes:t?.blob&&typeof t.blob.size==`number`?e+t.blob.size:e,0),r=n/1024,i=r/1024;return{bytes:n,kb:r.toFixed(1),mb:i.toFixed(2)}},qj=({photos:e=[],videos:t=[]})=>{let n=e=>e.map(e=>{if(!e)return null;if(typeof e==`string`)return e;if(e?.dataUrl)return e.dataUrl;let t=typeof e?.sizeBytes==`number`?e.sizeBytes:e?.blob?.size??null;return{id:e.id??null,sizeBytes:t,mimeType:e.mimeType??null}}),r=W.estimateJSONBytes(n(e)),i=W.estimateJSONBytes(n(t)),a=r+i,o=a/1024,s=o/1024;return{bytes:a,kb:o.toFixed(1),mb:s.toFixed(2),breakdown:{photosBytes:r,videosBytes:i}}},Jj=()=>{if(typeof window>`u`)return!1;let e=navigator.userAgent||navigator.vendor||window.opera,t=`ontouchstart`in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return/android|iPad|iPhone|iPod/i.test(e)&&t},Yj=async(e,t,n)=>{if(!e)return;let r=new Date().toISOString();try{let{default:i}=await w(async()=>{let{default:e}=await import(`./draftStorage-mjujrh6i-Di68pede.js`);return{default:e}},[]),a=await i.getDraftById(e);if(!a){console.warn(` No existing draft found while persisting captured media`,{draftId:e});return}let o={...a,capturedPhotos:Array.isArray(t)?[...t]:[],capturedVideos:Array.isArray(n)?[...n]:[],lastCapturedAt:r};await i.saveDraft(o),console.log(` Captured media persisted to draft for recovery`,{draftId:e,photos:o.capturedPhotos.length,videos:o.capturedVideos.length,timestamp:r})}catch(t){console.warn(` Failed to persist captured media to draft fallback`,{draftId:e,error:t})}},Xj=()=>{let[e,t]=(0,b.useState)(()=>Jj());return(0,b.useEffect)(()=>{let e=()=>{t(Jj()||window.innerWidth<=Fj)};return window.addEventListener(`resize`,e),e(),()=>window.removeEventListener(`resize`,e)},[]),e},Zj=(e,{quality:t=.85,maxWidth:n=2048,maxHeight:r=2048}={})=>new Promise((i,a)=>{try{let o=new Image;o.onload=()=>{let{width:e,height:a}=o;if(e>n||a>r){let t=Math.min(n/e,r/a);e=Math.round(e*t),a=Math.round(a*t)}let s=document.createElement(`canvas`);s.width=e,s.height=a;let c=s.getContext(`2d`);c.imageSmoothingEnabled=!0,c.imageSmoothingQuality=`high`,c.drawImage(o,0,0,e,a),i(s.toDataURL(`image/jpeg`,t))},o.onerror=a,o.src=e}catch(e){a(e)}}),Qj=async(e,t)=>{let n=[];for(let r of e){let e=await Zj(r,t);n.push(e)}return n},$j=()=>typeof crypto<`u`&&typeof crypto.randomUUID==`function`?crypto.randomUUID():`video-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,eM=()=>typeof crypto<`u`&&typeof crypto.randomUUID==`function`?crypto.randomUUID():`photo-${Date.now()}-${Math.random().toString(36).slice(2,10)}`;function tM(){let e=Le(),[t,n]=un(),r=t.get(`room`),[i,a]=(0,b.useState)(!!r),[o,s]=(0,b.useState)(r||null),c=Xj(),{showToast:l}=Mm();(0,b.useEffect)(()=>{let e=t.get(`room`);e&&(a(!0),s(e))},[t]);let u=(0,b.useCallback)(()=>{let e=Math.random().toString(36).slice(2)+Date.now().toString(36);a(!0),s(e),n(t=>{let n=new URLSearchParams(t);return n.set(`room`,e),n})},[n]),d=(0,b.useCallback)(t=>{try{let e=[t];W.setJSON(`capturedPhotos`,e),W.setJSON(`capturedVideos`,[]),window.__fremio_photos=e,l({type:`success`,title:`Berhasil`,message:`Foto berhasil diambil. Membuka editor`})}catch(e){console.warn(` Failed to persist friends capture`,e)}e(`/edit-photo`)},[e,l]),f=(0,b.useCallback)(t=>{l({type:`info`,title:`Sesi Selesai`,message:t===`master_disconnected`?`Master keluar. Sesi foto selesai.`:`Sesi foto sudah selesai.`}),e(`/frames`,{replace:!0})},[e,l]),[p,m]=(0,b.useState)(()=>typeof window>`u`?!1:!!window.matchMedia?.(`(orientation: landscape)`)?.matches);(0,b.useEffect)(()=>{if(typeof window>`u`)return;let e=window.matchMedia?.(`(orientation: landscape)`),t=()=>m(!!e?.matches);return e?.addEventListener&&e.addEventListener(`change`,t),window.addEventListener(`orientationchange`,t),window.addEventListener(`resize`,t),t(),()=>{e?.removeEventListener&&e.removeEventListener(`change`,t),window.removeEventListener(`orientationchange`,t),window.removeEventListener(`resize`,t)}},[]);let h=c&&p,g=(0,b.useRef)(null),_=(0,b.useRef)(null),v=(0,b.useRef)(null),y=(0,b.useRef)(null),x=(0,b.useRef)(null),S=(0,b.useRef)(null),C=(0,b.useRef)(null),T=(0,b.useRef)([]),E=(0,b.useRef)(!1),D=(0,b.useRef)(null),O=(0,b.useRef)(null),k=(0,b.useRef)(null),A=(0,b.useRef)(`original`),j=(0,b.useRef)(`blur`),M=(0,b.useRef)(`#10B981`),N=(0,b.useRef)(null),P=(0,b.useRef)(null),ee=(0,b.useRef)(!1),F=(0,b.useRef)(null),[I,L]=(0,b.useState)(!1),[R,te]=(0,b.useState)([]),[z,B]=(0,b.useState)([]),[V,H]=(0,b.useState)(!1),[ne,re]=(0,b.useState)(null),[U,ie]=(0,b.useState)(Pj[0]),[ae,oe]=(0,b.useState)(null),[se,ce]=(0,b.useState)(null),[le,ue]=(0,b.useState)(`original`),[de,fe]=(0,b.useState)(null),[pe,me]=(0,b.useState)(!1),[he,ge]=(0,b.useState)(`blur`),[_e,ve]=(0,b.useState)(`#10B981`),[ye,be]=(0,b.useState)(null),[xe,Se]=(0,b.useState)(!1),[Ce,we]=(0,b.useState)(!1),Te=(0,b.useRef)(R),Ee=(0,b.useRef)(z),De=(0,b.useRef)(0),Oe=(0,b.useRef)(null),ke=(0,b.useRef)(null);(0,b.useEffect)(()=>{(async()=>{try{let e=await gA();e.status===`granted`||SA()?(rt(!0),tt(!1),console.log(` Camera permission already granted`)):e.status===`denied`?(rt(!0),tt(!1),$e(`Izin kamera ditolak. Silakan gunakan opsi upload foto.`),await BO(`denied`,`auto_check`)):(rt(!0),tt(!1),console.log(` No permission primer - user can access controls directly`))}catch{console.log(`Permission check not supported, no primer shown`),rt(!0),tt(!1)}})()},[]),(0,b.useEffect)(()=>{if(c&&ke.current){let e=setTimeout(()=>{ke.current?.scrollIntoView({behavior:`auto`,block:`start`})},100);return()=>clearTimeout(e)}},[c]),(0,b.useEffect)(()=>{if(typeof document>`u`||document.getElementById(Mj))return;let e=document.createElement(`style`);e.id=Mj,e.textContent=Nj,document.head.appendChild(e)},[]);let Ae=(0,b.useCallback)(e=>{oe(t=>{let n=typeof e==`function`?e(t):e;return t?.previewUrl&&(!n||t.previewUrl!==n.previewUrl)&&Hj(t.previewUrl),n??null})},[]),je=(0,b.useCallback)(e=>{ce(t=>{let n=typeof e==`function`?e(t):e;return t?.previewUrl&&(!n||t.previewUrl!==n.previewUrl)&&Hj(t.previewUrl),n??null})},[]),Me=(0,b.useCallback)(e=>{if(!e||typeof e==`string`)return;let t=e.previewUrl;t&&Uj(t)&&Hj(t)},[]),Ne=(0,b.useCallback)(e=>{if(!e||typeof e==`string`)return;let t=e.previewUrl;t&&Uj(t)&&Hj(t),e.blob&&=null},[]),[Pe,Fe]=(0,b.useState)(!1),[Ie,Re]=(0,b.useState)(4/3),[ze,Be]=(0,b.useState)(null),Ve=(0,b.useCallback)(e=>{if(e?.slots&&e.slots.length>0){let t=e.slots[0];if(t.aspectRatio&&typeof t.aspectRatio==`string`){let[e,n]=t.aspectRatio.split(`:`).map(Number);if(e&&n){let t=e/n;Be(t),console.log(` Slot aspect ratio from string:`,t,`(${e}:${n})`);return}}if(t.width&&t.height){let e=t.width/t.height;Be(e),console.log(` Slot aspect ratio from dimensions:`,e,`(${t.width} / ${t.height})`);return}}Be(null),console.log(` No slots found, using default aspect ratio`)},[]),[He,Ue]=(0,b.useState)(4),[We,Ge]=(0,b.useState)(!1),[Ke,qe]=(0,b.useState)(!1),[Je,Ye]=(0,b.useState)(!1),[Xe,Ze]=(0,b.useState)(!1),[Qe,$e]=(0,b.useState)(null),[et,tt]=(0,b.useState)(!1),[nt,rt]=(0,b.useState)(!1),[it,at]=(0,b.useState)(!1),[ot,st]=(0,b.useState)(!0),ct=ot&&He>1?Math.ceil(He/2):He,lt=(0,b.useRef)(null),ut=(0,b.useRef)(null),dt=(0,b.useRef)({photos:null,videos:null}),ft={fontFamily:`'Poppins', 'Inter', 'Helvetica Neue', sans-serif`,fontSize:`22px`,fontWeight:700,color:`#1E293B`,margin:0,lineHeight:1.4,letterSpacing:`-0.01em`},pt=(0,b.useCallback)(e=>Array.isArray(e)?e.map((e,t)=>{if(!e||!e.dataUrl)return null;let{id:n,dataUrl:r,mimeType:i,duration:a,timer:o,mirrored:s,requiresPreviewMirror:c,facingMode:l,sizeBytes:u,baseVideoIndex:d,recordedAt:f}=e;return{id:n||`video-${t}`,dataUrl:r,mimeType:i||`video/webm`,duration:a??null,timer:o??null,mirrored:!!s,requiresPreviewMirror:!!c,facingMode:l??null,sizeBytes:u??null,baseVideoIndex:d??t,recordedAt:f??null}}):[],[]),mt=(0,b.useCallback)(e=>{switch(e){case`Testframe4`:return{primary:{quality:.9,maxWidth:2048,maxHeight:2048},moderate:{quality:.85,maxWidth:1600,maxHeight:1600},emergency:{quality:.8,maxWidth:1200,maxHeight:1200}};case`Testframe2`:return{primary:{quality:.95,maxWidth:2048,maxHeight:2048},moderate:{quality:.85,maxWidth:1600,maxHeight:1600},emergency:{quality:.8,maxWidth:1200,maxHeight:1200}};default:return{primary:{quality:.9,maxWidth:2048,maxHeight:2048},moderate:{quality:.85,maxWidth:1600,maxHeight:1600},emergency:{quality:.8,maxWidth:1200,maxHeight:1200}}}},[]),ht=(0,b.useCallback)(()=>{lt.current&&typeof window<`u`&&typeof window.cancelIdleCallback==`function`&&window.cancelIdleCallback(lt.current),ut.current&&window.clearTimeout(ut.current),lt.current=null,ut.current=null},[]),gt=(0,b.useCallback)(()=>{try{let e=Object.keys(localStorage),t=0;e.forEach(e=>{if(e.startsWith(`fremio_frame_slots_`)){let n=localStorage.getItem(e);n&&n.length>1e5&&(localStorage.removeItem(e),t+=n.length,console.log(` Removed large cache: ${e} (${Math.round(n.length/1024)}KB)`))}}),[`fremio_frames_cache_v1`,`fremio_frames_cache_v2`,`fremio_frames_cache_time_v1`,`fremio_frames_cache_time_v2`].forEach(e=>{localStorage.getItem(e)&&(localStorage.removeItem(e),console.log(` Removed old cache: ${e}`))}),t>0&&console.log(` Freed ${Math.round(t/1024)}KB from localStorage`)}catch(e){console.warn(`Failed to clear cache:`,e)}},[]),_t=(0,b.useCallback)(()=>{if(console.log(` [runStorageWrite] Starting...`),gt(),!W.isAvailable()){console.warn(` [runStorageWrite] safeStorage not available!`);return}let e=dt.current;if(!e?.photos){console.log(` [runStorageWrite] No photos in payload, skipping`);return}console.log(` [runStorageWrite] Processing`,e.photos.length,`photos`);let t=Array.isArray(e.photos)?e.photos.map((e,t)=>{if(!e)return console.log(`   Photo ${t}: null entry`),null;if(typeof e==`string`)return console.log(`   Photo ${t}: string (${e.startsWith(`data:`)?`data URL`:`other`})`),e;let{dataUrl:n,previewUrl:r}=e;return console.log(`   Photo ${t}: object - dataUrl=${n?.substring?.(0,30)}, previewUrl=${r?.substring?.(0,30)}`),typeof n==`string`&&n.startsWith(`data:`)?(console.log(`   Photo ${t}:  Using dataUrl`),n):typeof r==`string`&&r.startsWith(`data:`)?(console.log(`   Photo ${t}:  Using previewUrl (data)`),r):(console.warn(`   Photo ${t}:  NO VALID DATA URL - has blob=${!!e.blob}`),null)}):[],n=pt(Array.isArray(e.videos)?e.videos:[]),r=t.some(e=>typeof e==`string`&&e.startsWith(`data:`)),i=n.some(e=>typeof e?.dataUrl==`string`&&e.dataUrl.startsWith(`data:`));console.log(` [runStorageWrite] photosPayload:`,t.length,`items`),console.log(` [runStorageWrite] hasPersistablePhotos:`,r),console.log(` [runStorageWrite] hasPersistableVideos:`,i);try{if(!r&&!i)console.warn(` [runStorageWrite] No persistable data - REMOVING storage!`),W.removeItem(`capturedPhotos`),W.removeItem(`capturedVideos`);else{console.log(` [runStorageWrite] Saving to storage...`),W.setJSON(`capturedPhotos`,t),W.setJSON(`capturedVideos`,n),console.log(` [runStorageWrite] Saved successfully!`);let e=W.getJSON(`capturedPhotos`);console.log(` [runStorageWrite] Verification:`,e?.length||0,`photos saved`)}}catch(e){console.error(` Failed to persist captured media`,e),l({type:`error`,title:`Penyimpanan Penuh`,message:`Penyimpanan tidak tersedia. Silakan hapus beberapa foto atau kosongkan cache browser.`,action:{label:`Hapus Semua`,onClick:()=>{te([]),B([]),W.removeItem(`capturedPhotos`),W.removeItem(`capturedVideos`)}}})}finally{dt.current={photos:null,videos:null}}},[pt,gt]),vt=(0,b.useCallback)((e,t,{immediate:n=!1}={})=>{if(!W.isAvailable())return;dt.current={photos:e,videos:t};let r=()=>{ht(),_t()};if(n){r();return}typeof window<`u`&&typeof window.requestIdleCallback==`function`?(ht(),lt.current=window.requestIdleCallback(r,{timeout:120})):(ht(),ut.current=window.setTimeout(r,0))},[ht,_t]),yt=(0,b.useCallback)(()=>{dt.current?.photos&&(ht(),_t())},[ht,_t]),bt=(0,b.useCallback)(()=>{(Array.isArray(Te.current)?Te.current:[]).forEach(e=>Me(e)),(Array.isArray(Ee.current)?Ee.current:[]).forEach(e=>Ne(e)),te([]),B([]),W.isAvailable()&&(ht(),dt.current={photos:null,videos:null},W.removeItem(`capturedPhotos`),W.removeItem(`capturedVideos`))},[Me,Ne,ht]),xt=(0,b.useCallback)(()=>{try{let e=W.getJSON(`capturedPhotos`,[]),t=W.getJSON(`capturedVideos`,[]),n=e.slice(0,He),r=t.slice(0,He);W.setJSON(`capturedPhotos`,n),W.setJSON(`capturedVideos`,r)}catch(e){console.warn(` Failed to clean up storage:`,e)}},[He]),St=(0,b.useCallback)(e=>{try{if(!e||typeof e!=`object`){W.removeItem(`frameLayerPlan`);return}let t=nA(e);if(!t){W.removeItem(`frameLayerPlan`);return}W.setJSON(`frameLayerPlan`,t)}catch(e){console.warn(` Failed to persist frame layer plan`,e)}},[]),Ct=(0,b.useCallback)(()=>{if(y.current){try{y.current.stop?.()}catch(e){console.warn(` Error stopping active recording`,e)}y.current=null}_.current?.srcObject&&(_.current.srcObject.getTracks().forEach(e=>e.stop()),_.current.srcObject=null),v.current&&=(v.current.getTracks().forEach(e=>e.stop()),null),L(!1)},[]);(0,b.useEffect)(()=>{let n=t.get(`share`),r=t.get(`d`),i=t.get(`frame`);if(n){console.log(` Loading shared frame from VPS:`,n),(async()=>{try{l(`info`,` Memuat frame...`);let t=await(await w(async()=>{let{default:e}=await import(`./draftService-mjujrh6i-BqMQ7R2C.js`);return{default:e}},[])).default.getSharedDraft(n);if(!t){l(`error`,`Frame tidak ditemukan atau tidak publik`),setTimeout(()=>e(`/frames`),2e3);return}let r=typeof t.frame_data==`string`?JSON.parse(t.frame_data):t.frame_data;console.log(` Shared frame loaded from VPS:`,{title:t.title,elementsCount:r?.elements?.length,elementTypes:r?.elements?.map(e=>e.type),hasBackground:r?.elements?.some(e=>e.type===`background-photo`),hasUpload:r?.elements?.some(e=>e.type===`upload`)});let i=r.canvasWidth||1080,a=r.canvasHeight||1920,o=r.elements?.filter(e=>e.type===`photo`)||[],s={id:`shared-${n}`,title:t.title||`Shared Frame`,aspectRatio:r.aspectRatio||`9:16`,elements:r.elements||[],canvasBackground:r.canvasBackground||`#f7f1ed`,canvasWidth:i,canvasHeight:a,maxCaptures:o.length||1,slots:o.map((e,t)=>({id:e.id||`slot_${t+1}`,left:e.x/i,top:e.y/a,width:e.width/i,height:e.height/a,zIndex:e.zIndex||1,photoIndex:t,aspectRatio:e.data?.aspectRatio||`4:5`})),designer:{elements:r.elements||[],canvasBackground:r.canvasBackground||`#f7f1ed`,aspectRatio:r.aspectRatio||`9:16`,canvasWidth:i,canvasHeight:a},isCustom:!0,isSharedFrame:!0,shareId:n,preview:t.preview_url};await Gk.setCustomFrame(s),W.setJSON(`frameConfig`,{...s,__timestamp:Date.now(),__savedFrom:`TakeMoment_vpsShare`}),W.setItem(`selectedFrame`,s.id),W.setItem(`frameConfigTimestamp`,String(Date.now())),Ue(s.maxCaptures),Ve(s),St(s),l(`success`,` Frame "${t.title}" berhasil dimuat!`),window.history.replaceState({},``,`/take-moment`)}catch(t){console.error(`Error loading shared frame from VPS:`,t),l(`error`,`Gagal memuat frame dari server`),setTimeout(()=>e(`/frames`),2e3)}})();return}if(r){console.log(` Found embedded frame data in URL`),(async()=>{try{let{decompressFrameData:t}=await w(async()=>{let{decompressFrameData:e}=await import(`./frameShareService-mjujrh6i-PMG9wpUa.js`);return{decompressFrameData:e}},[]),n=t(r);if(!n){l(`error`,`Data frame rusak atau tidak valid`),setTimeout(()=>e(`/frames`),2e3);return}console.log(` Shared frame decompressed:`,{title:n.title,elementsCount:n.elements?.length,elementTypes:n.elements?.map(e=>e.type||e.tp)});let i=n.canvasWidth||1080,a=n.canvasHeight||1920,o=n.elements?.filter(e=>e.type===`photo`||e.tp===`ph`)||[],s={id:n.id||`shared-${Date.now()}`,title:n.title||`Shared Frame`,aspectRatio:n.aspectRatio||`9:16`,elements:n.elements||[],canvasBackground:n.canvasBackground||`#f7f1ed`,canvasWidth:i,canvasHeight:a,maxCaptures:o.length||1,slots:o.map((e,t)=>({id:e.id||`slot_${t+1}`,left:(e.x||0)/i,top:(e.y||0)/a,width:(e.width||e.w||100)/i,height:(e.height||e.h||100)/a,zIndex:e.zIndex||e.z||1,photoIndex:t,aspectRatio:e.data?.aspectRatio||e.d?.ar||`4:5`})),designer:{elements:n.elements||[],canvasBackground:n.canvasBackground||`#f7f1ed`,aspectRatio:n.aspectRatio||`9:16`,canvasWidth:i,canvasHeight:a},isCustom:!0,isSharedFrame:!0,preview:n.preview};await Gk.setCustomFrame(s),W.setJSON(`frameConfig`,{...s,__timestamp:Date.now(),__savedFrom:`TakeMoment_embeddedShare`}),W.setItem(`selectedFrame`,s.id),W.setItem(`frameConfigTimestamp`,String(Date.now())),Ue(s.maxCaptures),Ve(s),St(s),l(`success`,` Frame "${n.title}" berhasil dimuat!`),window.history.replaceState({},``,`/take-moment`)}catch(t){console.error(`Error loading embedded frame:`,t),l(`error`,`Gagal memuat frame`),setTimeout(()=>e(`/frames`),2e3)}})();return}i&&(console.log(` Shared frame detected from URL:`,i),(async()=>{try{let t=null,n=W.getJSON(`sharedDraftData`);if(n&&(n.id===i||n.id===`shared-${i}`)&&(console.log(` Using sharedDraftData from storage (cloud frame)`),t=n),!t){let{default:e}=await w(async()=>{let{default:e}=await import(`./draftStorage-mjujrh6i-Di68pede.js`);return{default:e}},[]);t=await e.getDraftById(i),t&&console.log(` Found draft in local IndexedDB`)}if(!t&&i.length===8){console.log(` Trying to load from cloud API...`);try{let e=await(await w(async()=>{let{default:e}=await import(`./draftService-mjujrh6i-BqMQ7R2C.js`);return{default:e}},[])).default.getSharedDraft(i);if(e?.frame_data){let n=typeof e.frame_data==`string`?JSON.parse(e.frame_data):e.frame_data;t={id:`shared-${e.share_id}`,title:e.title,...n,preview:e.preview_url},console.log(` Loaded draft from cloud API`)}}catch(e){console.warn(` Cloud API failed:`,e.message)}}if(!t){console.error(` Shared frame not found:`,i),l(`error`,`Frame tidak ditemukan. Silakan pilih frame lain.`),setTimeout(()=>{e(`/frames`)},2e3);return}console.log(` Shared frame loaded:`,{id:t.id,title:t.title,hasElements:!!t.elements,elementsCount:t.elements?.length,elementTypes:t.elements?.map(e=>e.type)});let r=t.canvasWidth||1080,a=t.canvasHeight||1920,o=t.elements?.filter(e=>e.type===`photo`)||[],s={id:t.id,title:t.title||`Shared Frame`,aspectRatio:t.aspectRatio||`9:16`,elements:t.elements||[],canvasBackground:t.canvasBackground||`#f7f1ed`,canvasWidth:r,canvasHeight:a,maxCaptures:o.length||1,slots:o.map((e,t)=>({id:e.id||`slot_${t+1}`,left:e.x/r,top:e.y/a,width:e.width/r,height:e.height/a,zIndex:e.zIndex||1,photoIndex:t,aspectRatio:e.data?.aspectRatio||`4:5`})),designer:{elements:t.elements||[],canvasBackground:t.canvasBackground||`#f7f1ed`,aspectRatio:t.aspectRatio||`9:16`,canvasWidth:r,canvasHeight:a},isCustom:!0,isSharedFrame:!0,preview:t.preview};await Gk.setCustomFrame(s),W.setJSON(`frameConfig`,{...s,__timestamp:Date.now(),__savedFrom:`TakeMoment_sharedFrame`}),W.setItem(`selectedFrame`,s.id),W.setItem(`activeDraftId`,t.id),W.setItem(`frameConfigTimestamp`,String(Date.now())),Ue(s.maxCaptures),Ve(s),St(s),l(`success`,`Frame "${s.title}" dimuat`),window.history.replaceState({},``,`/take-moment`)}catch(e){console.error(` Error loading shared frame:`,e),l(`error`,`Gagal memuat frame`)}})())},[t,l]),(0,b.useEffect)(()=>{bt(),aA();let e=null;try{let t=sessionStorage.getItem(`__fremio_shared_frame_temp__`);if(t){e=JSON.parse(t),console.log(` [SHARED FRAME] Found in sessionStorage`);let n=e.frameConfig;if(n){console.log(` Using shared frame from sessionStorage:`,n.id),Gk.setCustomFrame(n),n.maxCaptures&&Ue(n.maxCaptures),Ve(n),St(n),console.log(` Shared frame loaded, keeping in sessionStorage only`);return}}}catch(e){console.warn(` Failed to read shared frame from sessionStorage:`,e)}let t=Gk.getCurrentConfig(),n=Gk.getCurrentFrameName();if(t?.id||n){console.log(` Frame already in memory from Frames page:`,t?.id||n),t?.maxCaptures&&Ue(t.maxCaptures),Ve(t),St(t),W.getItem(`frameConfigTimestamp`)||(console.log(` Setting timestamp for memory frame to prevent stale detection`),W.setItem(`frameConfigTimestamp`,String(Date.now()))),!W.getJSON(`frameConfig`)?.id&&t?.id&&(console.log(` Persisting memory frame to localStorage:`,t.id),W.setJSON(`frameConfig`,{...t,__timestamp:Date.now(),__savedFrom:`TakeMoment_memorySync`}),W.setItem(`selectedFrame`,t.id));return}let r=W.getItem(`frameConfigTimestamp`),i=Date.now();if(r){let e=i-Number(r),t=e>3e5;console.log(` TakeMoment session check:`,{timestamp:new Date(Number(r)).toLocaleString(),ageMinutes:Math.round(e/1e3/60),isStale:t}),t&&(console.log(` Clearing stale frame session (>5 minutes old)`),W.removeItem(`frameConfig`),W.removeItem(`frameConfigTimestamp`),W.removeItem(`selectedFrame`))}else{let e=W.getJSON(`frameConfig`);e?.id?console.log(` Found existing frameConfig, keeping it:`,e.id):(console.log(` No valid frame data found, clearing`),W.removeItem(`frameConfig`),W.removeItem(`selectedFrame`))}if(W.getItem(`pendingFrameFetch`)===`true`){W.removeItem(`pendingFrameFetch`);let e=W.getItem(`selectedFrame`);if(e){console.log(` Pending frame fetch detected, loading slots for:`,e);let t=[{id:1,left:.05,top:.05,width:.42,height:.2,zIndex:1,photoIndex:0,aspectRatio:`4:5`},{id:2,left:.53,top:.05,width:.42,height:.2,zIndex:1,photoIndex:1,aspectRatio:`4:5`},{id:3,left:.05,top:.28,width:.42,height:.2,zIndex:1,photoIndex:2,aspectRatio:`4:5`},{id:4,left:.53,top:.28,width:.42,height:.2,zIndex:1,photoIndex:3,aspectRatio:`4:5`}];(async()=>{try{let n=await(await w(async()=>{let{default:e}=await import(`./unifiedFrameService-mjujrh6i-Cb0BT8AM.js`);return{default:e}},[])).default.getFrameById(e);(!n?.slots||n.slots.length===0)&&(console.log(` No slots found, using default slots`),n={...W.getJSON(`frameConfig`),...n,slots:t,maxCaptures:4}),console.log(` Frame ready with slots:`,n.slots.length),await Gk.setCustomFrame(n);let r=Gk.getCurrentConfig();r?.maxCaptures?Ue(r.maxCaptures):Ue(n.maxCaptures||n.max_captures||4),Ve(r||n),St(r||n)}catch(e){console.error(` Error fetching pending frame:`,e);let n=W.getJSON(`frameConfig`);if(n){let e={...n,slots:t,maxCaptures:4};await Gk.setCustomFrame(e),Ue(4),console.log(` Using fallback frame with default slots`)}else alert(`Gagal memuat data frame. Silakan pilih frame lagi.`),window.location.href=`/frames`}})();return}}let a=W.getJSON(`frameConfig`),o=W.getItem(`activeDraftId`);if(console.log(` TakeMoment useEffect - checking frame sources:`,{hasStoredConfig:!!a,storedConfigId:a?.id,isCustomStored:a?.isCustom||a?.id?.startsWith(`custom-`),hasActiveDraftId:!!o,activeDraftId:o}),o){console.log(` activeDraftId found in initialization, loading custom frame from draft`),console.log(`   activeDraftId:`,o),console.log(`   storedConfig.id:`,a?.id),console.log(`   storedConfig.isCustom:`,a?.isCustom),(async()=>{try{let e=o.startsWith(`shared-`);o.startsWith(`draft-`);let t=null;if(e){let e=W.getJSON(`sharedDraftData`);e&&e.id===o&&(console.log(` Using sharedDraftData from storage (no login required)`),t=e)}if(!t){let{default:e}=await w(async()=>{let{default:e}=await import(`./draftStorage-mjujrh6i-Di68pede.js`);return{default:e}},[]);t=await e.getDraftById(o),t&&console.log(` Loaded draft from local IndexedDB`)}if(!t&&a&&(a.isCustom||a.isShared)&&(console.log(` Using storedConfig as fallback (shared/custom frame)`),t={id:a.id,title:a.title,aspectRatio:a.aspectRatio,elements:a.elements,canvasBackground:a.canvasBackground,preview:a.preview}),t){console.log(` Draft loaded:`,{id:t.id,title:t.title,hasElements:!!t.elements,elementsCount:t.elements?.length,isSharedFrame:e});let{buildFrameConfigFromDraft:n}=await w(async()=>{let{buildFrameConfigFromDraft:e}=await import(`./draftHelpers-mjujrh6i-CY0F5TmK.js`);return{buildFrameConfigFromDraft:e}},[]),r=n(t);console.log(` Custom frame built from draft:`,{id:r.id,maxCaptures:r.maxCaptures,slotsCount:r.slots?.length,hasBackgroundPhoto:!!r.designer?.elements?.find(e=>e.type===`background-photo`)}),await Gk.setFrame(r.id,{config:r,isCustom:!0}),Ue(r.maxCaptures||1),console.log(` Set maxCaptures to:`,r.maxCaptures||1),Ve(r),St(r)}else console.error(` Draft not found:`,o),a?.maxCaptures&&Ue(a.maxCaptures)}catch(e){console.error(` Failed to load draft:`,e),a?.maxCaptures&&Ue(a.maxCaptures)}})();return}if(a?.id&&a.isCustom){console.log(` Using stored custom frame config from localStorage:`,a.id),Gk.setFrame(a.id,{config:a,isCustom:!0}).then(()=>{let e=Gk.getCurrentConfig();e?.maxCaptures?Ue(e.maxCaptures):Ue(4),Ve(e),St(e)});return}let s=Gk.getCurrentConfig();console.log(` Checking frameProvider memory:`,{hasExistingConfig:!!s,existingFrameId:s?.id,isCustom:s?.id?.startsWith(`custom-`)}),s?.id?(console.log(` Using existing frame config from frameProvider:`,s.id),s?.maxCaptures?Ue(s.maxCaptures):Ue(4),Ve(s),St(s)):(console.log(` No frame in memory, loading from storage...`),Gk.loadFrameFromStorage().catch(e=>{console.warn(` Failed to load frame from storage`,e)}).finally(()=>{let e=Gk.getCurrentConfig();e?.maxCaptures?Ue(e.maxCaptures):Ue(4),Ve(e),St(e)}))},[bt,St,Ve]),(0,b.useEffect)(()=>{ze!==null&&console.log(` Slot aspect ratio changed, container will update:`,ze)},[ze]),(0,b.useEffect)(()=>{if(!R.length)return;let e=Kj({photos:R,videos:z}),t=qj({photos:R,videos:z});console.log(` Storage size`,{raw:e,projected:t})},[R,z]),(0,b.useEffect)(()=>{let e=De.current,t=R.length;if(De.current=t,ct>0&&t>=ct&&e<ct&&t>0&&S.current){let e=S.current,t={behavior:`smooth`,block:c?`start`:`center`},n=()=>{try{e.scrollIntoView(t)}catch{try{e.scrollIntoView({behavior:`smooth`})}catch{e.scrollIntoView()}}};typeof window<`u`&&typeof window.requestAnimationFrame==`function`?window.requestAnimationFrame(n):n()}},[R.length,c,ct]),(0,b.useEffect)(()=>{if(typeof window>`u`||!c)return;let e=Oe.current;if(Oe.current=I,!I||e===!0)return;let t=(e=`smooth`)=>{if(!x.current)return;let t=x.current.getBoundingClientRect(),n=window.scrollY+t.top-window.innerHeight/2+t.height/2;window.scrollTo({top:Math.max(n,0),behavior:e})},n=null,r=window.requestAnimationFrame(()=>{n=window.setTimeout(()=>t(`smooth`),60)});return()=>{window.cancelAnimationFrame(r),n&&window.clearTimeout(n)}},[I,c]),(0,b.useEffect)(()=>()=>{Ct(),yt()},[yt,Ct]),(0,b.useEffect)(()=>()=>{Ae(null),je(null)},[Ae,je]),(0,b.useEffect)(()=>{Te.current=R},[R]),(0,b.useEffect)(()=>{Ee.current=z},[z]),(0,b.useEffect)(()=>{if(!I||!it||V){C.current=null,E.current=!1;return}let e=v.current;if(!e){console.log(` No stream available for pre-init`);return}let t=e.getVideoTracks()[0];if(!t||t.readyState!==`live`){console.log(` Video track not ready for pre-init`);return}let n=setTimeout(()=>{try{let t=Ee.current?.filter(e=>e).length||0,n=[1,.9,.7,.5,.4,.35],r=n[Math.min(t,n.length-1)],i=Math.round(6e5*r),a=[`video/webm;codecs=vp8`,`video/webm`,`video/mp4`].find(e=>{try{return MediaRecorder.isTypeSupported(e)}catch{return!1}})||``;if(!a){console.warn(` No supported video mime type found`);return}C.current=new MediaRecorder(e,{mimeType:a,videoBitsPerSecond:i}),T.current=[],E.current=!0,console.log(` MediaRecorder PRE-INITIALIZED (instant start ready):`,{mimeType:a,bitrate:`${i/1e3}kbps`,videoIndex:t+1,quality:`${Math.round(r*100)}%`})}catch(e){console.error(` Pre-init failed:`,e),E.current=!1}},300);return()=>{clearTimeout(n)}},[I,it,V,z.length]);let wt=(0,b.useMemo)(()=>!Ke,[Ke]),Tt=(0,b.useMemo)(()=>wt,[wt]);(0,b.useEffect)(()=>{if(A.current=le,j.current=he,M.current=_e,N.current=ye,ye&&he===`image`){let e=new Image;e.onload=()=>{P.current=e,console.log(` Background image cached:`,e.width,`x`,e.height)},e.onerror=()=>{console.error(` Failed to load background image`),P.current=null},e.src=ye}else P.current=null},[le,he,_e,ye]),(0,b.useEffect)(()=>{le!==`blur`&&Se(!1)},[le]),(0,b.useEffect)(()=>{let e=!0,t=()=>{if(k.current&&cancelAnimationFrame(k.current),k.current=null,O.current){try{O.current.close()}catch{}O.current=null}ee.current=!1};if(le===`original`){t(),fe(null),me(!1),ee.current=!1;return}return le===`blur`&&I&&(async()=>{if(typeof window>`u`)return;if(!I||!_.current){console.log(` Cannot init MediaPipe: cameraActive=`,I,`videoRef=`,!!_.current);return}console.log(` Starting MediaPipe initialization...`),ee.current=!1,me(!0);let t=[{script:`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation@0.1.1675465747/selfie_segmentation.js`,assetBase:`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation@0.1.1675465747`},{script:`https://unpkg.com/@mediapipe/selfie_segmentation@0.1.1675465747/selfie_segmentation.js`,assetBase:`https://unpkg.com/@mediapipe/selfie_segmentation@0.1.1675465747`}],n=e=>new Promise((t,n)=>{if(window.__SELFIE_SEG_CTOR)return t(window.__SELFIE_SEG_CTOR);let r=window.SelfieSegmentation||window.selfieSegmentation,i=r?.SelfieSegmentation||r;if(typeof i==`function`)return window.__SELFIE_SEG_CTOR=i,window.__SELFIE_SEG_ASSET_BASE=window.__SELFIE_SEG_ASSET_BASE||e.assetBase,t(i);let a=document.querySelector(`script[data-selfie-segmentation="true"]`);if(a&&a.dataset.src===e.script){a.addEventListener(`load`,()=>{let r=window.SelfieSegmentation||window.selfieSegmentation,i=r?.SelfieSegmentation||r;typeof i==`function`?(window.__SELFIE_SEG_CTOR=i,window.__SELFIE_SEG_ASSET_BASE=e.assetBase,t(i)):n(Error(`SelfieSegmentation global not available after script load`))},{once:!0}),a.addEventListener(`error`,()=>{n(Error(`SelfieSegmentation script failed to load`))},{once:!0});return}let o=document.createElement(`script`);o.src=e.script,o.async=!0,o.crossOrigin=`anonymous`,o.dataset.selfieSegmentation=`true`,o.dataset.src=e.script,o.onload=()=>{let r=window.SelfieSegmentation||window.selfieSegmentation,i=r?.SelfieSegmentation||r;typeof i==`function`?(window.__SELFIE_SEG_CTOR=i,window.__SELFIE_SEG_ASSET_BASE=e.assetBase,t(i)):n(Error(`SelfieSegmentation global not available after script load`))},o.onerror=()=>n(Error(`SelfieSegmentation script failed to load`)),document.head.appendChild(o)});for(let r of t)try{console.log(` Loading MediaPipe from:`,r.script);let t=await Promise.race([n(r),new Promise((e,t)=>setTimeout(()=>t(Error(`CDN Timeout after 20s`)),2e4))]);if(!e){console.log(` Component unmounted, aborting MediaPipe init`);return}if(typeof t!=`function`){console.error(` Failed to resolve SelfieSegmentation constructor from script source`,r.script);continue}console.log(` MediaPipe module loaded successfully`);let i=new t({locateFile:e=>`${window.__SELFIE_SEG_ASSET_BASE||r.assetBase}/${e}`});if(i.setOptions({modelSelection:1,selfieMode:!1}),console.log(` MediaPipe options set (selfieMode: false for CSS mirror), attaching onResults...`),typeof i.initialize==`function`)try{await i.initialize(),console.log(` MediaPipe initialized base models`)}catch(e){console.warn(` MediaPipe initialize() warning:`,e?.message||e)}i.onResults(t=>{if(!e||!D.current||A.current===`original`)return;ee.current||(ee.current=!0,fe(`mediapipe`),me(!1),console.log(` MediaPipe background ready`));let n=D.current,r=n.getContext(`2d`,{willReadFrequently:!0}),i=(e,t,n,r)=>{t&&e.drawImage(t,0,0,n,r)};if(!t.segmentationMask){console.warn(` MediaPipe returned empty segmentation mask`),ee.current||me(!1);return}n.width!==t.image.width&&(n.width=t.image.width,n.height=t.image.height,console.log(` Canvas resized:`,n.width,`x`,n.height)),r.clearRect(0,0,n.width,n.height);let a=j.current,o=M.current,s=P.current;if(a===`blur`?(r.save(),r.filter=`blur(20px)`,i(r,t.image,n.width,n.height),r.restore()):a===`color`?(r.fillStyle=o,r.fillRect(0,0,n.width,n.height)):a===`image`&&s?i(r,s,n.width,n.height):(r.save(),r.filter=`blur(20px)`,i(r,t.image,n.width,n.height),r.restore()),t.segmentationMask){let e=F.current;e||(e=document.createElement(`canvas`),F.current=e),e.width!==n.width&&(e.width=n.width,e.height=n.height);let a=e.getContext(`2d`);a.clearRect(0,0,e.width,e.height),i(a,t.image,e.width,e.height),a.globalCompositeOperation=`destination-in`,i(a,t.segmentationMask,e.width,e.height),a.globalCompositeOperation=`source-over`,r.drawImage(e,0,0,n.width,n.height)}}),O.current=i;let a=async()=>{if(!(!e||!_.current||!O.current)&&A.current!==`original`){try{await O.current.send({image:_.current})}catch(e){console.error(`MediaPipe send error:`,e)}e&&A.current!==`original`&&(k.current=requestAnimationFrame(a))}};console.log(` MediaPipe initialized, starting processFrame loop`),a();return}catch(e){console.warn(` CDN failed:`,r.script,e.message),await new Promise(e=>setTimeout(e,2e3))}console.error(` All MediaPipe CDNs failed`),me(!1),fe(null)})(),()=>{e=!1,t()}},[le,I,Tt]);let Et=R.length>=ct,Dt=V||Je||Et,Ot=e=>{let t=Ee.current?.length||0;if(zj()){let n=t===0?1:t===1?.8:t===2?.6:.4,r;r=e<=4?8e5:e<=6?6e5:5e5;let i=Math.round(r*n);return console.log(` Video ${t+1} bitrate: ${(i/1e3).toFixed(0)}kbps (${(n*100).toFixed(0)}% quality)`),i}return e<=4?25e5:e<=6?2e6:e<=8?15e5:12e5},kt=(e,t)=>{if(!e)return null;let n=e.id||$j(),r=e.blob instanceof Blob?e.blob:null,i=e.mimeType||r?.type||`video/webm`,a=e.dataUrl&&e.dataUrl.length>0,o=e.previewUrl||null;if(r&&!a){o=sA(n,r),console.log(` Video blob stored externally: ${n.slice(-8)}`);let e=pA();console.log(` Total video memory: ${e.totalMB}MB (${e.count} videos)`)}return{id:n,blob:null,dataUrl:e.dataUrl??null,previewUrl:o,mimeType:i,duration:Number.isFinite(e.duration)?e.duration:null,timer:Number.isFinite(e.timer)?e.timer:null,mirrored:!!(e.mirrored??e.requiresPreviewMirror),requiresPreviewMirror:!!e.requiresPreviewMirror,facingMode:e.facingMode||null,sizeBytes:e.sizeBytes??(r?r.size:null),baseVideoIndex:e.baseVideoIndex??t,recordedAt:e.recordedAt??e.capturedAt??Date.now(),isConverting:!1,conversionError:!1}},At=()=>{if(!Pe||!ae)return null;let e=h;return(0,G.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0,0,0,0.85)`,display:`flex`,alignItems:`center`,justifyContent:`center`,zIndex:1e3,padding:`1.5rem`},children:(0,G.jsxs)(`div`,{style:{background:`#fff`,borderRadius:`18px`,width:e?`min(720px, 100%)`:`min(420px, 100%)`,maxHeight:`calc(100vh - 3rem)`,padding:`1.75rem`,boxShadow:`0 24px 48px rgba(0,0,0,0.25)`,display:`flex`,flexDirection:`column`,gap:`1.5rem`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`center`,flexDirection:`column`,gap:`0.75rem`},children:[(0,G.jsx)(`div`,{style:{fontSize:`1.4rem`,fontWeight:700,color:`#333`},children:!e&&` Foto berhasil diambil!`}),Je&&(0,G.jsx)(`div`,{style:{marginTop:`0.25rem`,fontSize:`0.95rem`,color:`#6c757d`,lineHeight:1.4,textAlign:`center`},children:` Menyiapkan video, mohon tunggu sebentar...`})]}),e?(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`row`,alignItems:`center`,gap:`14px`},children:[(0,G.jsx)(`div`,{style:{flex:`1 1 auto`,minWidth:0},children:(0,G.jsx)(`img`,{src:ae.previewUrl||ae.dataUrl||``,alt:`Captured`,style:{width:`100%`,maxHeight:`260px`,borderRadius:`12px`,objectFit:`contain`,boxShadow:`0 12px 24px rgba(0,0,0,0.2)`}})}),(0,G.jsxs)(`div`,{style:{width:`110px`,display:`flex`,flexDirection:`column`,gap:`12px`,alignItems:`stretch`},children:[(0,G.jsx)(`button`,{onClick:Vt,disabled:Je,"aria-label":`Pilih`,style:{width:`100%`,height:`56px`,borderRadius:`16px`,border:`none`,background:Je?`#6c757d`:`#28a745`,color:`#fff`,fontWeight:700,cursor:Je?`not-allowed`:`pointer`,boxShadow:`0 16px 32px rgba(40,167,69,0.35)`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`18px`},children:(0,G.jsx)(`span`,{"aria-hidden":`true`,children:``})}),(0,G.jsx)(`button`,{onClick:Ht,"aria-label":`Ulangi`,style:{width:`100%`,height:`56px`,borderRadius:`16px`,border:`none`,background:`#6c757d`,color:`#fff`,fontWeight:700,cursor:`pointer`,boxShadow:`0 16px 32px rgba(108,117,125,0.35)`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`18px`},children:(0,G.jsx)(`span`,{"aria-hidden":`true`,children:``})})]})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`img`,{src:ae.previewUrl||ae.dataUrl||``,alt:`Captured`,style:{width:`100%`,maxHeight:`320px`,borderRadius:`12px`,objectFit:`contain`,boxShadow:`0 12px 24px rgba(0,0,0,0.2)`}}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`1rem`,flexWrap:`nowrap`,justifyContent:`center`},children:[(0,G.jsx)(`button`,{onClick:Ht,style:{flex:`1 1 120px`,padding:`0.85rem 1.5rem`,borderRadius:`999px`,border:`none`,background:`#6c757d`,color:`#fff`,fontWeight:600,cursor:`pointer`,boxShadow:`0 16px 32px rgba(108,117,125,0.35)`},children:` Ulangi`}),(0,G.jsx)(`button`,{onClick:Vt,disabled:Je,style:{flex:`1 1 120px`,padding:`0.85rem 1.5rem`,borderRadius:`999px`,border:`none`,background:Je?`#6c757d`:`#28a745`,color:`#fff`,fontWeight:600,cursor:Je?`not-allowed`:`pointer`,boxShadow:`0 16px 32px rgba(40,167,69,0.35)`},children:Je?` Sedang menyiapkan...`:` Pilih`})]})]})]})})},jt=(0,b.useCallback)(async(e=`user`)=>{try{$e(null),Ge(!0);let t=await vA({facingMode:e,width:{ideal:1280},height:{ideal:720},keepStream:!0});if(!t.granted)throw await BO(`denied`,`start_camera_failed`),Error(t.message||`Tidak dapat mengakses kamera`);let n=t.stream;if(!n)throw Error(`Gagal mendapatkan stream kamera`);v.current=n,L(!0),setTimeout(()=>{_.current&&(_.current.srcObject=n,_.current.play().then(()=>{console.log(` Video playing`)}).catch(e=>{console.error(` video play failed`,e)}))},100)}catch(e){console.error(` Error accessing camera`,e),$e(e.message);let t=e.message||`Pastikan izin kamera sudah diberikan di browser.`,n=t.includes(`izin`)||t.includes(`permission`);l({type:`error`,title:n?`Izin Kamera Diperlukan`:`Kamera Tidak Dapat Diakses`,message:t,action:{label:`Coba Lagi`,onClick:()=>window.location.reload()}})}finally{Ge(!1)}},[]),Mt=(0,b.useCallback)(async()=>{if(console.log(` handleRequestCameraPermission called`),i){tt(!1),rt(!0);return}try{if(!hA()){let e=`Kamera hanya dapat diakses melalui HTTPS atau localhost. Pastikan Anda menggunakan koneksi aman.`;throw console.error(` Not secure context:`,e),tt(!1),rt(!0),$e(e),Error(e)}if(!mA()){let e=`Browser Anda tidak mendukung akses kamera. Gunakan browser modern seperti Chrome, Firefox, atau Safari.`;throw console.error(` Camera not available:`,e),tt(!1),rt(!0),$e(e),Error(e)}await BO(`requested`),console.log(` Requesting camera permission...`);let e=await TA({facingMode:`user`,width:{ideal:1280},height:{ideal:720},keepStream:!1});if(console.log(` Camera permission result:`,e),tt(!1),rt(!0),e.granted){if(await BO(`granted`),$e(null),console.log(` Camera permission granted - Auto-starting camera...`),!i)try{await jt(Ke?`environment`:`user`),console.log(` Camera auto-started after permission grant`)}catch(e){console.error(` Failed to auto-start camera after permission:`,e),$e(`Gagal mengaktifkan kamera. Silakan coba lagi.`)}}else await BO(`denied`,`user_denied`),$e(`Izin kamera ditolak. Silakan gunakan opsi upload foto.`),l({type:`warning`,title:`Izin Kamera Ditolak`,message:`Anda masih bisa upload foto dari galeri.`})}catch(e){throw console.error(` Permission request error:`,e),tt(!1),rt(!0),await BO(`error`,e.message),$e(e.message||`Gagal meminta izin kamera`),e}},[l,jt,Ke]),Nt=(0,b.useCallback)(async()=>{console.log(` handleSkipCameraPermission called`);try{await BO(`dismissed`),tt(!1),rt(!0),$e(`Upload foto dari galeri untuk melanjutkan.`),l({type:`info`,title:`Mode Upload`,message:`Gunakan tombol upload untuk menambah foto dari galeri.`}),console.log(` Permission primer dismissed successfully`)}catch(e){console.error(` Error skipping permission:`,e),tt(!1),rt(!0)}},[l]),Pt=(0,b.useCallback)(()=>{I?Ct():jt(Ke?`environment`:`user`)},[I,Ke,jt,Ct]),Ft=(0,b.useCallback)(async()=>{if(!I||We)return;let e=!Ke;Ct(),qe(e),await jt(e?`environment`:`user`)},[I,Ke,We,jt,Ct]),It=(0,b.useCallback)(async e=>{let t=Array.from(e.target.files||[]).filter(e=>e.type.startsWith(`image/`));if(!t.length){e.target.value=``;return}try{let e=(await Promise.all(t.map(async e=>{try{let t=URL.createObjectURL(e);return{id:eM(),blob:e,dataUrl:null,previewUrl:t,width:null,height:null,capturedAt:Date.now(),sizeBytes:typeof e.size==`number`?e.size:null,source:`upload`}}catch(e){return console.warn(` Failed to prepare uploaded photo preview`,e),null}}))).filter(Boolean);if(!e.length){l({type:`warning`,title:`Foto Tidak Valid`,message:`Tidak ada foto yang bisa diproses dari galeri. Pilih foto yang valid.`});return}let n=Math.max(0,ct-R.length),r=n?e.slice(0,n):[];if((n?e.slice(n):e).forEach(e=>Me(e)),!r.length){l({type:`warning`,title:`Batas Maksimal Tercapai`,message:`Maksimal ${ct} foto untuk frame ini sudah tercapai.`,action:{label:`Hapus Foto`,onClick:()=>te([])}});return}let i=[...R,...r],a=(()=>{let e=[...z];for(;e.length<i.length;)e.push(null);return e.slice(0,i.length)})();te(i),B(a),vt(i,a),l({type:`success`,title:`Foto Ditambahkan`,message:`${r.length} foto berhasil ditambahkan.`})}catch(e){console.error(` Failed to process uploaded photos`,e),l({type:`error`,title:`Upload Gagal`,message:`Gagal memproses foto dari galeri. Coba pilih file lain.`})}finally{e.target.value=``}},[R,z,Me,He,ct,vt]),Lt=()=>ne?(0,G.jsx)(`div`,{style:{position:`absolute`,inset:0,background:`rgba(0,0,0,0.7)`,display:`flex`,alignItems:`center`,justifyContent:`center`,borderRadius:`20px`,zIndex:10},children:(0,G.jsx)(`span`,{style:{fontSize:`4rem`,fontWeight:`bold`,color:`white`,textShadow:`2px 2px 4px rgba(0,0,0,0.8)`},children:ne})}):null,Rt=(0,b.useCallback)(e=>{let t=v.current||_.current?.srcObject;if(!t)return console.warn(` No camera stream available for video recording`),null;let{record:n}=Lj[e]||{record:e+1},r=e+Ij,i=Math.max(0,r-n),a=null,o=null,s=()=>{},c=``;if(C.current&&E.current)console.log(` Using PRE-INITIALIZED recorder - INSTANT START!`),a=C.current,o=t,c=a?.mimeType||``,C.current=null,E.current=!1,s=()=>{console.log(` Recording stream cleanup (using original stream)`)};else{if(console.log(` No pre-initialized recorder, creating new one...`),o=t.clone(),zj()){let e=o.getVideoTracks()[0];if(e){let t=Ee.current?.length||0,n=t>=2?480:640,r=t>=2?360:480;try{e.applyConstraints({width:{ideal:n},height:{ideal:r}}),console.log(` Video ${t+1} resolution: ${n}x${r}`)}catch(e){console.warn(` Could not apply resolution constraints:`,e)}}}s=()=>{o.getTracks().forEach(e=>{try{e.stop()}catch(e){console.warn(` Failed to stop recording track`,e)}})},c=[`video/webm;codecs=vp9`,`video/webm;codecs=vp8`,`video/webm`,`video/mp4;codecs=h264`].find(e=>{try{return e&&MediaRecorder.isTypeSupported(e)}catch{return!1}})||``;let e=Ot(n),r=o.getAudioTracks().length>0;try{let t=c?{mimeType:c,videoBitsPerSecond:e,...r?{audioBitsPerSecond:64e3}:{}}:{videoBitsPerSecond:e,...r?{audioBitsPerSecond:64e3}:{}};a=new MediaRecorder(o,t)}catch(e){console.warn(` Failed to create tuned MediaRecorder`,e);try{a=c?new MediaRecorder(o,{mimeType:c}):new MediaRecorder(o)}catch(e){return console.error(` Failed to create MediaRecorder`,e),s(),null}}}let l=[],u,d,f=!1,p=!1,m,h={stop:()=>{if(d&&=(clearTimeout(d),null),u&&=(clearTimeout(u),null),!f){p=!0,s(),m?.(Error(`Recording cancelled before start`));return}if(p=!0,a.state!==`inactive`)try{a.stop()}catch(e){console.warn(` Error stopping recorder`,e)}},promise:null};h.promise=new Promise((t,r)=>{m=r,a.ondataavailable=e=>{e.data&&e.data.size>0?(l.push(e.data),(l.length===1||l.length%10==0)&&console.log(` Received video chunk: ${(e.data.size/1024).toFixed(2)}KB (total: ${l.length} chunks)`)):console.warn(` Received empty video chunk`)},a.onerror=e=>{console.error(` MediaRecorder error`,e.error||e),h.stop(),s(),r(e.error||Error(`MediaRecorder error`))},a.onstop=async()=>{p=!0;let o;try{let r=new Blob(l,{type:a.mimeType||c||`video/webm`});if(r.size<100)throw console.error(` Recorded video blob is too small:`,r.size,`bytes`),Error(`Invalid video blob: size is only ${r.size} bytes`);console.log(` Video blob created:`,{size:(r.size/1024).toFixed(2)+`KB`,type:r.type,chunkCount:l.length,recordDuration:n+`s`}),o=URL.createObjectURL(r);let s=await new Promise(e=>{let t=document.createElement(`video`);t.preload=`metadata`,t.muted=!0;let r=!1,i=()=>{r||(r=!0,t.onloadedmetadata=null,t.onloadeddata=null,t.onerror=null,t.src=``)};t.onloadedmetadata=()=>{let r=t.duration;Number.isFinite(r)&&r>0&&(i(),console.log(` Video duration validated:`,{actualDuration:r.toFixed(2)+`s`,expectedDuration:n+`s`}),e({isValid:!0,actualDuration:r}))},t.onloadeddata=()=>{let n=t.duration;Number.isFinite(n)&&n>0&&(i(),console.log(` Video duration validated (onloadeddata):`,{actualDuration:n.toFixed(2)+`s`}),e({isValid:!0,actualDuration:n}))},t.onerror=t=>{i(),console.warn(` Video validation error (non-critical):`,t),e({isValid:!0,actualDuration:n})},setTimeout(()=>{i(),console.warn(` Video validation timeout - using estimated duration`),e({isValid:!0,actualDuration:n})},2e3),t.src=o});console.log(` Video recording complete:`,{blobSize:(r.size/1024).toFixed(2)+`KB`,duration:(s.actualDuration||n).toFixed(2)+`s`,validated:s.isValid&&Number.isFinite(s.actualDuration)}),console.log(` Video blob ready (dataUrl will be created lazily)`),t({blob:r,dataUrl:null,previewUrl:o,mimeType:r.type||a.mimeType||c||`video/webm`,duration:Number.isFinite(s.actualDuration)?s.actualDuration:n,timer:e,actualDelay:i,facingMode:wt?`user`:`environment`,requiresPreviewMirror:wt,skipAutoMirror:wt,mirrored:!1,sizeBytes:r.size})}catch(e){o&&Hj(o),r(e)}finally{s()}}});let g=()=>{if(!(f||p)){f=!0;try{a.start(100),console.log(` Recording started: ${n}s duration planned`);let e=Math.max(750,Math.round(n*1e3+500));d=setTimeout(()=>{a.state!==`inactive`&&(console.log(` Recording stopping after ${e}ms`),l.length===0&&console.error(` No video chunks received during recording!`),a.stop())},e)}catch(e){console.error(` Failed to start MediaRecorder`,e),s(),p=!0,m?.(e)}}};return i>0?u=setTimeout(g,i*1e3):g(),h.promise.finally(()=>{y.current===h&&(y.current=null)}),y.current=h,h},[wt]),zt=(0,b.useCallback)(async()=>{let e=de===`mediapipe`&&D.current?D.current:_.current;if(!e)throw Error(`Video element is not ready for capture`);let t=_.current,n=t?.videoWidth||1280,r=t?.videoHeight||720,i=document.createElement(`canvas`);i.width=n,i.height=r;let a=i.getContext(`2d`);if(!a)throw Error(`Unable to access 2D context for capture canvas`);le===`blur`||wt?(a.save(),a.scale(-1,1),a.drawImage(e,-n,0,n,r),a.restore()):a.drawImage(e,0,0,n,r);let o=zj()?.75:.9,s=await Vj(i,`image/jpeg`,o),c=URL.createObjectURL(s);console.log(` Converting photo blob to dataUrl...`);let l=new FileReader,u=await new Promise((e,t)=>{l.onloadend=()=>{let t=l.result;console.log(` Photo dataUrl created:`,{length:t?.length||0,preview:t?.substring(0,50)||`none`}),e(t)},l.onerror=()=>{console.warn(` Failed to convert photo blob to dataUrl`),t(Error(`FileReader error`))},l.readAsDataURL(s)}),d={blob:s,dataUrl:u,previewUrl:c,width:n,height:r,capturedAt:Date.now()};return Ae(d),Fe(!0),RO(`photo_taken`),d},[Ae,wt,de,le]),Bt=(0,b.useCallback)(()=>{if(!_.current||V||Je)return;if(!I){l({type:`warning`,title:`Kamera Belum Aktif`,message:`Aktifkan kamera terlebih dahulu sebelum mengambil foto.`});return}if(Et){l({type:`warning`,title:`Batas Maksimal`,message:`Maksimal ${ct} foto sudah tercapai untuk frame ini!`,action:{label:`Reset`,onClick:()=>te([])}});return}let e=Pj.includes(U)?U:Pj[0];if(e!==U&&ie(e),y.current){console.warn(` A recording is already in progress`);return}let t=Ee.current?.length||0;if(zj()&&t>=4&&(console.log(` Recording video ${t+1} - memory optimization active`),typeof window<`u`&&window.gc))try{window.gc()}catch{}try{if(H(!0),je(null),it){Ye(!0);let t=Rt(e);t?t.promise.then(e=>{je(e)}).catch(e=>{console.error(` Failed to record video`,e),l({type:`error`,title:`Perekaman Gagal`,message:`Perekaman video gagal. Silakan coba lagi.`,action:{label:`Coba Lagi`,onClick:Bt}})}).finally(()=>{Ye(!1)}):Ye(!1)}else console.log(` Live Mode OFF - Skipping video recording`),Ye(!1)}catch(e){console.error(` Capture error:`,e),l({type:`error`,title:`Kesalahan Capture`,message:`Terjadi kesalahan saat mengambil foto. Silakan coba lagi.`}),H(!1),Ye(!1)}re(e);let n=setInterval(()=>{re(e=>e===null?null:e===1?(clearInterval(n),(async()=>{try{await zt()}catch(e){console.error(` Failed to capture photo`,e),l({type:`error`,title:`Capture Gagal`,message:`Gagal mengambil foto. Silakan coba lagi.`})}finally{H(!1)}})(),null):e-1)},1e3)},[V,zt,I,Et,He,Rt,U,Je,je,it]);(0,b.useEffect)(()=>{if(!I)return;let e=e=>{if(e.repeat||e.code!==`Space`&&e.key!==` `)return;let t=e.target,n=t?.tagName;n&&[`INPUT`,`TEXTAREA`,`SELECT`].includes(n)||t?.isContentEditable||(e.preventDefault(),Bt())};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[I,Bt]);let Vt=(0,b.useCallback)(async()=>{if(!ae)return;if(Je){l({type:`info`,title:`Tunggu Sebentar`,message:`Video masih diproses. Mohon tunggu beberapa detik lagi.`});return}if(it&&!se?.dataUrl&&!(se?.blob instanceof Blob)){l({type:`warning`,title:`Video Tidak Ditemukan`,message:`Silakan tunggu hingga proses selesai atau ambil ulang.`,action:{label:`Ambil Ulang`,onClick:()=>{Fe(!1),Ae(null),je(null)}}});return}let e=ae,t=se;(0,jj.flushSync)(()=>{Fe(!1),Ae(null),je(null)});let n=!1,r=!1;try{if(zj()&&performance.memory&&console.log(` Memory before save:`,{used:`${(performance.memory.usedJSHeapSize/1024/1024).toFixed(2)}MB`,total:`${(performance.memory.totalJSHeapSize/1024/1024).toFixed(2)}MB`,limit:`${(performance.memory.jsHeapSizeLimit/1024/1024).toFixed(2)}MB`,photoCount:R.length+1}),!e.blob)throw Error(`Current photo blob is missing`);let i=URL.createObjectURL(e.blob),a=e.dataUrl;if(!a&&e.blob instanceof Blob)try{a=await Rj(e.blob),console.log(` Photo dataUrl generated during save`,{length:a?.length||0})}catch(e){console.warn(` Failed to convert photo blob to dataUrl during save`,e)}let o={id:eM(),blob:e.blob,dataUrl:typeof a==`string`&&a.startsWith(`data:`)?a:null,previewUrl:i,width:e.width??null,height:e.height??null,capturedAt:e.capturedAt??Date.now(),sizeBytes:typeof e.blob.size==`number`?e.blob.size:null,source:`camera`};o.dataUrl||console.warn(` Photo entry missing dataUrl; fallback to preview URL only`);let s=Array.isArray(Te.current)?[...Te.current]:[],c=Array.isArray(Ee.current)?[...Ee.current]:[],u=[...s,o];console.log(` [CAPTURE DEBUG] Photo capture state:`,{maxCaptures:He,basePhotosCount:s.length,appendedPhotosCount:u.length,isDuplicateMode:ot,photosNeeded:ct});let d=u.slice(0,He);u.slice(He).forEach(e=>Me(e));let f=d.findIndex(e=>e?.id===o.id),p=null;if(it&&(t?.blob||t?.dataUrl)){let e=t;if(!t.dataUrl&&t.blob instanceof Blob)try{let n=await Rj(t.blob);e={...t,dataUrl:n},console.log(` Video dataUrl generated from blob`,{length:n?.length||0}),t.previewUrl&&Uj(t.previewUrl)&&(Hj(t.previewUrl),console.log(` Revoked video blob URL after conversion`))}catch(e){console.error(` Failed to convert recorded video blob to dataUrl`,e),l({type:`error`,title:`Video Gagal Diproses`,message:`Silakan tunggu beberapa detik lalu pilih lagi atau ambil ulang.`,action:{label:`Ambil Ulang`,onClick:Bt}});return}e?.dataUrl||console.warn(` Video source has no dataUrl even after conversion`);let n=f===-1?d.length-1:f;p=kt(e,Math.max(0,n))}else it||console.log(` Live Mode OFF - No video to save`);!p&&it&&console.warn(` No video entry prepared; captured video may be missing`);let m=[...c];for(f===-1?m.push(p??null):m.splice(f,0,p??null);m.length<d.length;)m.push(null);let h=m.slice(0,d.length);if(Te.current=d,Ee.current=h,te(d),B(h),n=d.length>=ct,n){console.log(` [FINAL PHOTO] Force immediate storage write!`),vt(d,h,{immediate:!0});try{let e=d.map(e=>typeof e==`string`&&e.startsWith(`data:`)?e:e?.dataUrl&&e.dataUrl.startsWith(`data:`)?e.dataUrl:null).filter(Boolean);e.length>0&&(localStorage.setItem(`capturedPhotos`,JSON.stringify(e)),window.__fremio_photos=e,console.log(` [FINAL PHOTO] Direct backup saved:`,e.length,`photos`))}catch(e){console.warn(` Direct backup failed:`,e.message)}}else vt(d,h);r=!0,zj()&&(console.log(` Mobile memory cleanup after photo ${d.length}/${He}`),h.forEach((e,t)=>{e?.blob&&e?.dataUrl&&(console.log(`    Clearing blob for video ${t} (dataUrl exists)`),e.blob=null),e?.previewUrl&&Uj(e.previewUrl)&&(Hj(e.previewUrl),e.previewUrl=null)}),setTimeout(()=>{window.gc&&(window.gc(),console.log(` Manual GC triggered`))},100))}catch(n){console.error(` Error processing captured media`,n),l({type:`error`,title:`Proses Gagal`,message:`Gagal memproses foto. Silakan coba lagi.`,action:{label:`Coba Lagi`,onClick:Vt}}),Ae(e),je(t),Fe(!0);return}finally{r?(Ye(!1),I&&n&&Ct()):Ye(!1)}},[I,Te,Ee,ae,se,Je,kt,He,Ae,je,Me,vt,Ct,it]),Ht=(0,b.useCallback)(()=>{Ae(null),je(null),Ye(!1),Fe(!1)},[Ae,je]);(0,b.useCallback)(async()=>{try{let{default:e}=await w(async()=>{let{default:e}=await import(`./draftStorage-mjujrh6i-Di68pede.js`);return{default:e}},[]),t=Gk.getCurrentConfig();if(!t){l({type:`error`,title:`Gagal Menyimpan`,message:`Frame tidak ditemukan.`});return}let n={frameConfig:t,capturedPhotos:[...R],capturedVideos:[...z],title:`Draft ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await e.saveDraft(n),l({type:`success`,title:`Draft Tersimpan`,message:`Draft berhasil disimpan! Bisa dilanjutkan nanti.`}),Fe(!1),Ae(null),je(null)}catch(e){console.error(`Failed to save draft:`,e),l({type:`error`,title:`Gagal Menyimpan`,message:`Terjadi kesalahan saat menyimpan draft.`})}},[R,z,l,Ae,je]);let Ut=(0,b.useCallback)(e=>{let t=R[e];Me(t);let n=R.filter((t,n)=>n!==e),r=z.filter((t,n)=>n!==e).map((e,t)=>e?{...e,baseVideoIndex:e.baseVideoIndex??t}:null);te(n),B(r),vt(n,r)},[R,z,Me,vt]),Wt=(0,b.useCallback)(async()=>{if(console.log(` [handleEdit] START`),console.log(` [handleEdit] capturedPhotos.length:`,R.length),console.log(` [handleEdit] maxCaptures:`,He),console.log(` [DEBUG] Detailed capturedPhotos analysis:`),R.forEach((e,t)=>{console.log(`   Photo ${t}:`,{type:typeof e,isString:typeof e==`string`,hasDataUrl:!!e?.dataUrl,dataUrlPreview:e?.dataUrl?.substring?.(0,60),hasPreviewUrl:!!e?.previewUrl,previewUrlPreview:e?.previewUrl?.substring?.(0,60),hasBlob:!!e?.blob,blobType:e?.blob?.type,blobSize:e?.blob?.size})}),R.length<ct){console.log(` [handleEdit] EARLY RETURN - photos not complete`),l({type:`warning`,title:`Foto Belum Lengkap`,message:`Ambil ${ct-R.length} foto lagi (${R.length}/${ct}).`});return}console.log(` [handleEdit] Photos complete, proceeding...`),console.log(` [EMERGENCY] Saving photos immediately...`);try{let e=R.map((e,t)=>typeof e==`string`&&e.startsWith(`data:`)?(console.log(`   Photo ${t}: Using direct string (data URL)`),e):e?.dataUrl&&typeof e.dataUrl==`string`&&e.dataUrl.startsWith(`data:`)?(console.log(`   Photo ${t}: Using dataUrl property`),e.dataUrl):(console.warn(`   Photo ${t}: NO VALID DATA URL! dataUrl=${e?.dataUrl?.substring?.(0,30)}, previewUrl=${e?.previewUrl?.substring?.(0,30)}`),null)).filter(Boolean);if(ot&&He>e.length){console.log(` [EMERGENCY DUPLICATE] Duplicating photos in emergency save...`);let t=[];for(let n=0;n<e.length;n++)t.push(e[n]),t.push(e[n]);e=t.slice(0,He),console.log(` [EMERGENCY DUPLICATE] Photos duplicated:`,e.length)}if(console.log(` [EMERGENCY] Photos to save:`,e.length),console.log(` [EMERGENCY] First photo type:`,typeof e[0]),console.log(` [EMERGENCY] First photo preview:`,e[0]?.substring?.(0,60)),e.length>0){localStorage.setItem(`capturedPhotos`,JSON.stringify(e)),console.log(` [EMERGENCY] Photos saved to localStorage!`),window.__fremio_photos=e,console.log(` [EMERGENCY] Photos saved to window.__fremio_photos!`);try{sessionStorage.setItem(`capturedPhotos_backup`,JSON.stringify(e)),console.log(` [EMERGENCY] Photos saved to sessionStorage backup!`)}catch(e){console.warn(` sessionStorage backup failed:`,e.message)}let t=localStorage.getItem(`capturedPhotos`),n=t?JSON.parse(t):[];console.log(` [EMERGENCY] Verification - localStorage has:`,n.length,`photos`),console.log(` [EMERGENCY] Verification - first photo starts with:`,n[0]?.substring?.(0,30)),n.length===0&&console.error(` [EMERGENCY] localStorage save FAILED! Data not persisted.`)}else console.error(` [EMERGENCY] No valid photos to save!`),console.log(` [EMERGENCY] This means photos don't have dataUrl property`),console.log(` [EMERGENCY] Need to check if capturePhoto() is creating dataUrl correctly`)}catch(e){console.error(` [EMERGENCY] Save failed:`,e)}Ze(!0);let t=Array.isArray(Te.current)?[...Te.current]:[],n=Array.isArray(Ee.current)?[...Ee.current]:[],r=!1,i=()=>{r||(r=!0,Ye(!0))},a=(e={})=>{r&&(r=!1,Ye(!1)),e.keepTransitionOverlay||Ze(!1)},o=Gk.getCurrentFrameName(),s=mt(o),c=s?.primary??{quality:.9,maxWidth:2048,maxHeight:2048},u=s?.moderate??c,d=async e=>{let t=[];for(let n=0;n<e.length;n+=1){let r=e[n];if(!r){t.push(null);continue}if(typeof r==`string`){t.push({id:`photo-${n}`,dataUrl:r,previewUrl:r,blob:null,capturedAt:Date.now(),width:null,height:null,sizeBytes:r.length*2});continue}if(r.dataUrl){let e=r.previewUrl&&Uj(r.previewUrl)&&r.previewUrl!==r.dataUrl;e&&Hj(r.previewUrl),t.push({...r,blob:null,previewUrl:e?r.dataUrl:r.previewUrl||r.dataUrl,sizeBytes:typeof r.sizeBytes==`number`&&Number.isFinite(r.sizeBytes)?r.sizeBytes:r.dataUrl.length*2});continue}if(!r.blob)throw Error(`Photo ${n+1} tidak memiliki data untuk diproses.`);let i;try{i=await Gj(r.blob,c)}catch(e){console.warn(` Gagal kompresi foto dengan profil utama, mencoba fallback`,e);try{i=await Gj(r.blob,u)}catch(e){console.warn(` Fallback kompresi foto gagal, memakai blob asli`,e),i={blob:r.blob,width:r.width??null,height:r.height??null}}}let a=i?.blob??r.blob,o=await Rj(a);r.previewUrl&&Uj(r.previewUrl)&&Hj(r.previewUrl),t.push({...r,dataUrl:o,previewUrl:o,blob:null,width:i?.width??r.width??null,height:i?.height??r.height??null,sizeBytes:typeof a.size==`number`?a.size:r.sizeBytes??null})}return t},f=async e=>{console.log(` Converting videos for editing (using memory manager)...`),console.log(` Total videos to convert: ${e.length}`);let t=await uA(e,(e,t,n)=>{console.log(` Progress: ${e}/${t} (${n?.slice(-8)||`unknown`})`)});fA(),console.log(` All video blobs cleaned up from memory manager`);let n=t.map((e,t)=>e?{...e,blob:null,isConverting:!1,conversionError:!1,sizeBytes:typeof e.sizeBytes==`number`&&Number.isFinite(e.sizeBytes)?e.sizeBytes:e.dataUrl?e.dataUrl.length*2:null}:null);return console.log(` Video conversion complete: ${n.filter(e=>e?.dataUrl).length}/${e.length} videos`),n};i();let p;try{p=await d(t),te(p),Te.current=p,vt(p,n)}catch(e){console.error(` Gagal memproses foto sebelum masuk editor`,e),l({type:`error`,title:`Proses Foto Gagal`,message:`Mohon ulangi pengambilan atau coba lagi.`,action:{label:`Coba Lagi`,onClick:Wt}}),a();return}if(p.some(e=>!e||!e.dataUrl)){l({type:`info`,title:`Masih Memproses`,message:`Foto masih diproses. Mohon tunggu sebentar dan coba lagi.`}),a();return}let m;try{m=await f(n),B(m),Ee.current=m,vt(p,m)}catch(e){console.error(` Gagal memproses video sebelum masuk editor`,e),l({type:`error`,title:`Proses Video Gagal`,message:e?.message||`Video gagal diproses. Silakan coba lagi.`,action:{label:`Coba Lagi`,onClick:Wt}}),a();return}if(m.some(e=>e&&!e.dataUrl)){l({type:`info`,title:`Masih Memproses`,message:`Video masih diproses atau gagal tersimpan. Mohon tunggu sebentar dan coba lagi.`}),a();return}let h=Gk.getCurrentConfig();console.log(` Frame config before editor navigation:`,{fromProvider:h?.id||`null`,fromStorage:W.getItem(`selectedFrame`),hasSlots:h?.slots?.length||0});let g=(e,t)=>!e||!e.dataUrl?null:{id:e.id||`video-${t}`,dataUrl:e.dataUrl,mimeType:e.mimeType||`video/webm`,duration:e.duration??null,timer:e.timer??null,mirrored:!!e.mirrored,requiresPreviewMirror:!!e.requiresPreviewMirror,facingMode:e.facingMode??null,sizeBytes:e.sizeBytes??null,baseVideoIndex:e.baseVideoIndex??t,recordedAt:e.recordedAt??null},_=(e,t)=>{let n=[...e];for(;n.length<t;)n.push(null);return n.slice(0,t).map((e,t)=>g(e,t))},v=(e,t)=>{let n=[...e],r=_(t,n.length);return{photos:n,videos:r}};try{let e=p.map(e=>e?.dataUrl??null);if(console.log(` [SAVE DEBUG] Photo payload preparation:`),console.log(`  - convertedPhotos count:`,p.length),console.log(`  - photoPayloadSource count:`,e.length),console.log(`  - Has null values:`,e.some(e=>!e)),console.log(`  - First photo preview:`,e[0]?.substring(0,50)),console.log(`  - isDuplicateMode:`,ot),console.log(`  - maxCaptures:`,He),console.log(`  - convertedVideos count:`,m.length),e.some(e=>!e))throw Error(`Foto tidak lengkap untuk disimpan.`);let t=[...m];if(console.log(` [VIDEO DEBUG] Before duplication check:`),console.log(`  - videoPayloadSource.length:`,t.length),console.log(`  - maxCaptures:`,He),console.log(`  - isDuplicateMode:`,ot),console.log(`  - Condition (isDuplicateMode && maxCaptures > 1):`,ot&&He>1),console.log(`  - Condition (videoPayloadSource.length < maxCaptures):`,t.length<He),ot&&He>1){if(e.length<He){console.log(` [DUPLICATE MODE] Duplicating photos...`),console.log(`  - Original photos:`,e.length),console.log(`  - Target slots:`,He);let t=[];for(let n=0;n<e.length;n++){let r=e[n];t.push(r),t.push(r)}e=t.slice(0,He),console.log(` [DUPLICATE MODE] Photos duplicated:`,e.length)}else console.log(` [DUPLICATE MODE] Photos already at target count:`,e.length);if(t.length<He){console.log(` [DUPLICATE MODE] Duplicating videos...`),console.log(`  - Original videos:`,t.length),console.log(`  - Target slots:`,He);let e=[];for(let n=0;n<t.length;n++){let r=t[n];r?(e.push({...r,id:r.id||`video-${n*2}`}),e.push({...r,id:`${r.id||`video`}-dup-${n*2+1}`})):(e.push(null),e.push(null))}t=e.slice(0,He),console.log(` [DUPLICATE MODE] Videos duplicated:`,t.length)}else console.log(` [DUPLICATE MODE] Videos already at target count:`,t.length)}if(console.log(` [SAFETY CHECK] Before duplication check:`),console.log(`  - photoPayloadSource.length:`,e.length),console.log(`  - videoPayloadSource.length:`,t.length),console.log(`  - Condition (photos > videos):`,e.length>t.length),console.log(`  - Condition (videos > 0):`,t.length>0),e.length>t.length&&t.length>0){console.log(` [SAFETY] Photo/Video count mismatch, duplicating videos to match...`),console.log(`  - Photos:`,e.length),console.log(`  - Videos:`,t.length);let n=[],r=e.length,i=t.length,a=Math.ceil(r/i);for(let e=0;e<i;e++){let i=t[e];for(let t=0;t<a&&!(n.length>=r);t++)i?n.push({...i,id:t===0?i.id||`video-${e}`:`${i.id||`video`}-dup-${e}-${t}`}):n.push(null)}t=n.slice(0,r),console.log(` [SAFETY] Videos duplicated to match photos:`,t.length)}yt();let n=v(e,t),r=Kj(n);if(console.log(` [SAVE DEBUG] Storage preparation:`),console.log(`  - Payload photos count:`,n.photos.length),console.log(`  - Payload videos count:`,n.videos.length),console.log(`  - Storage size:`,r.mb,`MB`),parseFloat(r.mb)>4){console.log(` [SAVE DEBUG] Using emergency compression (>4MB)`);let n=await Qj(e,{quality:.8,maxWidth:1200,maxHeight:1200}),r=v(n,t);try{console.log(` [SAVE DEBUG] Attempting direct localStorage save...`),localStorage.setItem(`capturedPhotos`,JSON.stringify(r.photos)),localStorage.setItem(`capturedVideos`,JSON.stringify(r.videos)),console.log(` [SAVE DEBUG] Direct localStorage save successful!`)}catch(e){console.warn(` [SAVE DEBUG] Direct save failed, trying safeStorage:`,e),W.setJSON(`capturedPhotos`,r.photos),W.setJSON(`capturedVideos`,r.videos)}console.log(` [SAVE DEBUG] Emergency photos saved:`,r.photos.length)}else{console.log(` [SAVE DEBUG] Saving normal payload`);try{console.log(` [SAVE DEBUG] Attempting direct localStorage save...`),localStorage.setItem(`capturedPhotos`,JSON.stringify(n.photos)),localStorage.setItem(`capturedVideos`,JSON.stringify(n.videos)),console.log(` [SAVE DEBUG] Direct localStorage save successful!`)}catch(e){console.warn(` [SAVE DEBUG] Direct save failed, trying safeStorage:`,e),W.setJSON(`capturedPhotos`,n.photos),W.setJSON(`capturedVideos`,n.videos)}console.log(` [SAVE DEBUG] Photos saved to localStorage:`,n.photos.length)}let i=W.getJSON(`capturedPhotos`);console.log(` [SAVE DEBUG] Verification - Photos in localStorage:`,i?.length||0);let a=W.getItem(`activeDraftId`);a&&await Yj(a,n.photos,n.videos),console.log(` [SAVE DATA] Starting frame config save...`),console.log(`   Captured photos count:`,Te.current.length),console.log(`   Photos data preview:`,Te.current.map((e,t)=>({index:t,hasData:!!e,isString:typeof e==`string`,length:typeof e==`string`?e.length:`N/A`,preview:typeof e==`string`?e.substring(0,30)+`...`:`Not a string`})));let o=null;try{let e=sessionStorage.getItem(`__fremio_shared_frame_temp__`);if(e){let t=JSON.parse(e);t?.frameConfig&&(console.log(` [SHARED FRAME] Using frameConfig from sessionStorage`),console.log(`   Elements count:`,t.frameConfig.designer?.elements?.length),console.log(`   Element types:`,t.frameConfig.designer?.elements?.map(e=>e?.type)),o=t.frameConfig)}}catch(e){console.warn(` Failed to read shared frame from sessionStorage:`,e)}if(!o&&a)if(console.log(` CRITICAL: activeDraftId found, using custom frame from current session`),console.log(`   activeDraftId:`,a),o=h,console.log(`   frameProvider config ID:`,o?.id),!o||!o.id?.startsWith(`custom-`)){console.warn(` activeDraftId exists but frameProvider has wrong frame, rebuilding from draft...`);try{let{default:e}=await w(async()=>{let{default:e}=await import(`./draftStorage-mjujrh6i-Di68pede.js`);return{default:e}},[]),t=await e.getDraftById(a);if(t){let{buildFrameConfigFromDraft:e}=await w(async()=>{let{buildFrameConfigFromDraft:e}=await import(`./draftHelpers-mjujrh6i-CY0F5TmK.js`);return{buildFrameConfigFromDraft:e}},[]);o=e(t),console.log(` Rebuilt custom frame from draft:`,o.id)}else console.error(` Draft not found:`,a)}catch(e){console.error(` Failed to rebuild from draft:`,e)}}else console.log(` Using custom frame from frameProvider:`,o.id);else o||(console.log(` No activeDraftId and no shared frame, using regular frame`),o=W.getJSON(`frameConfig`),!o||!o.id?(console.warn(` No stored frameConfig, using frameProvider...`),o=h):console.log(` Using stored frameConfig (regular frame):`,o.id));if(o&&o.id)try{console.log(` Saving frame config before editor:`,o.id),W.setItem(`selectedFrame`,o.id);let e={...o,__timestamp:Date.now(),__savedFrom:`TakeMoment`};W.setJSON(`frameConfig`,e),W.setItem(`frameConfigTimestamp`,String(e.__timestamp)),console.log(` Frame config saved with timestamp:`,e.__timestamp)}catch(e){console.error(` QuotaExceededError when saving frame config`,e),console.warn(` Frame config too large for localStorage, EditPhoto will load from draft`),!W.getItem(`activeDraftId`)&&o.metadata?.draftId&&(W.setItem(`activeDraftId`,o.metadata.draftId),console.log(` Restored activeDraftId:`,o.metadata.draftId))}else console.error(` No valid frame config to save!`)}catch(e){console.error(` Gagal menyimpan data sebelum masuk editor`,e),l({type:`error`,title:`Penyimpanan Gagal`,message:e?.message||`Terjadi kesalahan saat menyiapkan data untuk editor.`,action:{label:`Coba Lagi`,onClick:Wt}}),a();return}a({keepTransitionOverlay:!0}),Ct();try{W.setItem(`editorAutoSelectFirstSlot`,`true`)}catch(e){console.warn(` Failed to set editor auto-select flag`,e)}console.log(` TAKEMOMENT: About to navigate to /edit-photo`),console.log(` Frame data verification:`),console.log(`  - frameProvider.getCurrentFrameName():`,Gk.getCurrentFrameName()),console.log(`  - frameProvider.getCurrentConfig():`,Gk.getCurrentConfig()),console.log(`  - localStorage selectedFrame:`,W.getItem(`selectedFrame`)),console.log(`  - localStorage frameConfig:`,W.getJSON(`frameConfig`)),console.log(`  - localStorage activeDraftId:`,W.getItem(`activeDraftId`));let y=W.getJSON(`frameConfig`);y&&(console.log(`  - Stored config details:`),console.log(`    - ID:`,y.id),console.log(`    - Slots:`,y.slots?.length),console.log(`    - Max captures:`,y.maxCaptures),console.log(`    - Has frameImage:`,!!y.frameImage),console.log(`    - Is custom:`,y.isCustom));let b=W.getJSON(`capturedPhotos`);console.log(` FINAL CHECK before navigate:`),console.log(`  - capturedPhotos in localStorage:`,b?.length||0),console.log(`  - capturedPhotosRef.current length:`,Te.current?.length||0),console.log(`  - capturedPhotos state length:`,R?.length||0);try{let e=(Te.current||[]).map(e=>typeof e==`string`?e:e?.dataUrl||null).filter(Boolean);e.length===0&&R?.length>0&&(e=R.map(e=>typeof e==`string`?e:e?.dataUrl||null).filter(Boolean)),e.length>0&&(window.__fremio_photos=e,console.log(` Saved photos to window.__fremio_photos:`,e.length))}catch(e){console.warn(`Failed to backup photos to window:`,e)}if(!b||b.length===0){console.error(` CRITICAL: Photos not saved to localStorage!`),console.error(`  - capturedPhotosRef:`,Te.current),console.error(`  - Attempting emergency save...`),gt();try{let e=(Te.current||[]).map(e=>typeof e==`string`?e:e?.dataUrl||null).filter(Boolean);e.length===0&&R?.length>0&&(console.log(`  - Using capturedPhotos state instead of ref`),e=R.map(e=>typeof e==`string`?e:e?.dataUrl||null).filter(Boolean)),e.length>0?(localStorage.setItem(`capturedPhotos`,JSON.stringify(e)),console.log(` Emergency save successful:`,e.length,`photos`)):console.error(` No photos to save!`)}catch(e){console.error(` Emergency save failed:`,e)}}e(`/edit-photo`)},[R,Te,Ee,xt,gt,yt,mt,He,ct,ot,e,vt,Ct]);(0,b.useEffect)(()=>{i||!nt||et||I||(console.log(` Auto-starting camera after permission check...`,{permissionChecked:nt,showPermissionPrimer:et,cameraActive:I,isUsingBackCamera:Ke}),(async()=>{try{await jt(Ke?`environment`:`user`),console.log(` Camera auto-started successfully`)}catch(e){console.error(` Failed to auto-start camera:`,e)}})())},[i,nt,et,I,Ke,jt]);let Gt=()=>Xe?(0,G.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(15,23,42,0.82)`,backdropFilter:`blur(6px)`,display:`flex`,alignItems:`center`,justifyContent:`center`,zIndex:9999,padding:`2rem`},children:(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`1rem`,padding:`2.25rem 2.75rem`,borderRadius:`28px`,background:`rgba(255,255,255,0.12)`,boxShadow:`0 24px 80px rgba(15,23,42,0.45)`,color:`white`,textAlign:`center`,maxWidth:`min(460px, 90vw)`},children:[(0,G.jsx)(`div`,{style:{fontSize:`2.25rem`},children:``}),(0,G.jsx)(`div`,{style:{fontSize:`1.25rem`,fontWeight:700,letterSpacing:`0.015em`},children:`Menyiapkan editor`}),(0,G.jsx)(`div`,{style:{fontSize:`1rem`,lineHeight:1.5,opacity:.85},children:`Foto dan video kamu sedang diproses. Mohon tunggu sebentar sampai halaman editor siap.`})]})}):null,Kt=e=>{let t=e===`mobile`,n=R.map((e,t)=>({photo:e,idx:t})).filter(({photo:e})=>!!e).map(({photo:e,idx:t})=>{let n=typeof e==`string`?e:e.previewUrl||e.dataUrl||null;return n?{id:typeof e==`string`?`photo-${t}`:e.id||`photo-${t}`,src:n,index:t}:null}).filter(Boolean);return(0,G.jsxs)(`div`,{style:t?{background:`#fff`,borderRadius:`14px`,padding:`0.75rem`,margin:`0 0 0.85rem`,minHeight:`220px`,display:`flex`,flexDirection:`column`,gap:`0.65rem`,width:`100%`,boxShadow:`none`}:{background:`rgba(232,168,137,0.24)`,borderRadius:`24px`,padding:`0.75rem 1rem`,minHeight:`150px`,width:`min(420px, 100%)`,display:`flex`,flexDirection:`column`,gap:`0.5rem`,boxShadow:`0 24px 48px rgba(232,168,137,0.22)`,border:`1px solid rgba(232,168,137,0.28)`,alignSelf:`center`},children:[(0,G.jsxs)(`header`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,gap:`0.75rem`},children:[(0,G.jsx)(`h3`,{style:{fontSize:`1.05rem`,fontWeight:`bold`,color:`#333`,margin:0},children:`Preview`}),R.length>0&&(0,G.jsxs)(`span`,{style:{fontSize:`0.85rem`,fontWeight:500,color:`#94a3b8`},children:[R.length,`/`,ct]})]}),(0,G.jsx)(`div`,{style:{flex:`1 1 auto`,display:`flex`,alignItems:`center`,justifyContent:`center`,width:`100%`},children:R.length>0?(0,G.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:R.length>1?`repeat(auto-fit, minmax(110px, 1fr))`:`1fr`,gap:`0.45rem`,width:`100%`,maxWidth:t?`240px`:`100%`},children:n.map(({id:e,src:n,index:r})=>(0,G.jsxs)(`div`,{style:{position:`relative`,aspectRatio:ze?`${ze} / 1`:`4 / 3`,borderRadius:`12px`,overflow:`hidden`,boxShadow:t?`0 2px 10px rgba(0,0,0,0.12)`:`0 10px 20px rgba(15,23,42,0.15)`,transition:`transform 0.2s ease`},children:[(0,G.jsx)(`img`,{src:n,alt:`Photo ${r+1}`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}),(0,G.jsx)(`button`,{onClick:()=>Ut(r),style:{position:`absolute`,top:`6px`,right:`6px`,width:`22px`,height:`22px`,borderRadius:`11px`,border:`none`,background:`rgba(255, 59, 48, 0.95)`,color:`white`,fontSize:`14px`,fontWeight:`bold`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:`0 2px 8px rgba(0,0,0,0.25)`},title:`Hapus foto ${r+1}`,children:``})]},e))}):(0,G.jsxs)(`div`,{style:{textAlign:`center`,color:`#999`,fontSize:t?`0.9rem`:`0.82rem`,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`0.5rem`},children:[(0,G.jsx)(`div`,{style:{fontSize:t?`2.35rem`:`1.9rem`,lineHeight:1},children:``}),(0,G.jsx)(`div`,{style:{fontWeight:500},children:`belum ada foto`}),(0,G.jsx)(`div`,{style:{fontSize:t?`0.8rem`:`0.72rem`,color:`#666`},children:`ambil foto untuk melihat preview di sini`})]})}),(0,G.jsx)(`button`,{onClick:Wt,disabled:R.length<ct,style:{width:`100%`,padding:t?`0.75rem`:`0.65rem`,background:R.length>=ct?`#1E293B`:`#d7dde5`,color:`white`,border:`none`,borderRadius:`999px`,fontSize:t?`0.95rem`:`0.88rem`,fontWeight:600,cursor:R.length>=ct?`pointer`:`not-allowed`,boxShadow:t?`0 8px 16px rgba(0,0,0,0.1)`:`0 14px 28px rgba(30,41,59,0.15)`,transition:`transform 0.2s ease`,opacity:R.length>=ct?1:.7},children:R.length>=ct?` Edit Photos`:` ${R.length}/${ct} foto`})]})},qt=e=>{let t=e===`mobile`,n=t?`Pakai Kamera`:I?`Stop Camera`:`Camera`,r=I;return t?(0,G.jsxs)(`div`,{style:{display:`flex`,justifyContent:`center`,alignItems:`center`,gap:`0.5rem`,marginBottom:`0.5rem`,width:`100%`},children:[(0,G.jsx)(`input`,{ref:g,type:`file`,accept:`image/*`,multiple:!0,onChange:It,style:{position:`absolute`,left:`-9999px`,opacity:0,pointerEvents:`none`}}),He>1&&He%2==0&&R.length===0?(0,G.jsxs)(`button`,{onClick:()=>st(!ot),disabled:V,style:{padding:`0.45rem 0.7rem`,background:ot?`rgba(139,92,246,0.15)`:`rgba(232,168,137,0.15)`,color:ot?`#8B5CF6`:`#5D4E47`,borderRadius:`999px`,fontSize:`0.8rem`,fontWeight:600,display:`flex`,alignItems:`center`,gap:`0.3rem`,border:ot?`1px solid rgba(139,92,246,0.4)`:`1px solid rgba(232,168,137,0.3)`,cursor:V?`not-allowed`:`pointer`,transition:`all 0.2s ease`},children:[ot?``:``,` `,R.length,`/`,ct,ot&&(0,G.jsx)(`span`,{style:{fontSize:`0.7rem`,opacity:.8},children:`ON`})]}):(0,G.jsxs)(`div`,{style:{padding:`0.45rem 0.7rem`,background:Et?`rgba(239,68,68,0.1)`:`rgba(232,168,137,0.15)`,color:Et?`#ef4444`:`#5D4E47`,borderRadius:`999px`,fontSize:`0.8rem`,fontWeight:600,display:`flex`,alignItems:`center`,gap:`0.3rem`,border:Et?`1px solid rgba(239,68,68,0.3)`:`1px solid rgba(232,168,137,0.3)`},children:[` `,R.length,`/`,ct,ot&&(0,G.jsx)(`span`,{style:{color:`#8B5CF6`},children:``})]}),(0,G.jsx)(`button`,{onClick:()=>{R.length>=ct||g.current?.click()},disabled:R.length>=ct,style:{padding:`0.45rem 0.7rem`,background:R.length>=ct?`#f1f5f9`:`#fff`,color:R.length>=ct?`#94a3b8`:`#5D4E47`,border:`1px solid rgba(232,168,137,0.3)`,borderRadius:`999px`,fontSize:`0.8rem`,fontWeight:500,cursor:R.length>=ct?`not-allowed`:`pointer`,boxShadow:`0 4px 12px rgba(139,92,77,0.08)`,display:`flex`,alignItems:`center`,gap:`0.25rem`},children:` Galeri`}),(0,G.jsxs)(`button`,{onClick:Pt,style:{padding:`0.45rem 0.7rem`,background:I?`#E8A889`:`#fff`,color:I?`#fff`:`#5D4E47`,border:I?`1px solid #E8A889`:`1px solid rgba(232,168,137,0.3)`,borderRadius:`999px`,fontSize:`0.8rem`,fontWeight:500,cursor:`pointer`,boxShadow:I?`0 8px 20px rgba(232,168,137,0.3)`:`0 4px 12px rgba(139,92,77,0.08)`,display:`flex`,alignItems:`center`,gap:`0.25rem`},children:[` `,I?`Stop`:`Kamera`]}),I&&(0,G.jsxs)(`div`,{style:{position:`relative`},children:[(0,G.jsx)(`button`,{onClick:()=>we(!Ce),style:{padding:`0.45rem`,background:Ce?`#E8A889`:`#fff`,color:Ce?`#fff`:`#5D4E47`,border:`1px solid rgba(232,168,137,0.3)`,borderRadius:`50%`,fontSize:`0.9rem`,cursor:`pointer`,boxShadow:`0 4px 12px rgba(139,92,77,0.08)`,width:`34px`,height:`34px`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:``}),Ce&&(0,G.jsxs)(`div`,{style:{position:`absolute`,top:`calc(100% + 8px)`,right:0,background:`rgba(255,255,255,0.98)`,borderRadius:`16px`,padding:`12px`,boxShadow:`0 12px 32px rgba(139,92,77,0.2)`,border:`1px solid rgba(232,168,137,0.3)`,zIndex:200,minWidth:`160px`,display:`flex`,flexDirection:`column`,gap:`10px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,gap:`8px`},children:[(0,G.jsx)(`span`,{style:{fontSize:`0.85rem`,fontWeight:500,color:`#5D4E47`},children:` Timer`}),(0,G.jsx)(`select`,{value:U,onChange:e=>ie(Number(e.target.value)),disabled:V,style:{padding:`0.4rem 0.6rem`,borderRadius:`999px`,border:`1px solid rgba(232,168,137,0.3)`,background:`#fff`,color:`#5D4E47`,fontSize:`0.85rem`,cursor:V?`not-allowed`:`pointer`},children:Pj.map(e=>(0,G.jsxs)(`option`,{value:e,children:[e,`s`]},e))})]}),(0,G.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,gap:`8px`,cursor:V?`not-allowed`:`pointer`},children:[(0,G.jsx)(`span`,{style:{fontSize:`0.85rem`,fontWeight:500,color:`#5D4E47`},children:` Live Mode`}),(0,G.jsx)(`input`,{type:`checkbox`,checked:it,onChange:e=>at(e.target.checked),disabled:V,style:{width:`18px`,height:`18px`,accentColor:`#E8A889`,cursor:V?`not-allowed`:`pointer`}})]})]})]})]}):(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr auto 1fr`,alignItems:`center`,columnGap:`0.75rem`,marginBottom:`1rem`,width:`100%`},children:[(0,G.jsx)(`input`,{ref:g,type:`file`,accept:`image/*`,multiple:!0,onChange:It,style:{position:`absolute`,left:`-9999px`,opacity:0,pointerEvents:`none`}}),(0,G.jsx)(`button`,{onClick:()=>{R.length>=ct||g.current?.click()},disabled:R.length>=ct,title:R.length>=ct?`Maksimal foto sudah tercapai`:`Pilih file dari galeri`,style:{padding:t?`0.65rem 0.85rem`:`0.7rem 1.35rem`,background:R.length>=ct?`#f1f5f9`:`#fff`,color:R.length>=ct?`#94a3b8`:`#333`,border:`1px solid #e2e8f0`,borderRadius:`999px`,fontSize:t?`0.92rem`:`1rem`,fontWeight:500,cursor:R.length>=ct?`not-allowed`:`pointer`,boxShadow:`0 12px 24px rgba(15,23,42,0.08)`,display:`flex`,alignItems:`center`,justifyContent:`center`,justifySelf:t?`center`:`start`,gridColumn:`1`},children:R.length>=ct?`Max photos reached`:t?`Upload dari galeri`:`Choose file (${ct-R.length} left)`}),r?(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:t?`column`:`row`,alignItems:`center`,gap:t?`0.3rem`:`0.5rem`,justifySelf:`center`,gridColumn:`2`,textAlign:t?`center`:`left`},children:[(0,G.jsx)(`span`,{style:{fontSize:t?`0.88rem`:`0.95rem`,fontWeight:t?600:500,color:t?`#1E293B`:`#475569`},children:`Timer:`}),(0,G.jsx)(`select`,{value:U,onChange:e=>ie(Number(e.target.value)),disabled:V,style:{padding:t?`0.5rem 0.85rem`:`0.45rem 0.6rem`,borderRadius:`999px`,border:`1px solid #e2e8f0`,background:`#fff`,color:`#333`,fontSize:t?`0.95rem`:`0.9rem`,cursor:V?`not-allowed`:`pointer`,boxShadow:`0 12px 24px rgba(15,23,42,0.08)`,minWidth:t?`132px`:`auto`},children:Pj.map(e=>(0,G.jsxs)(`option`,{value:e,children:[e,` detik`]},e))}),(0,G.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.5rem`,marginLeft:t?0:`0.5rem`},children:(0,G.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`0.4rem`,cursor:`pointer`,fontSize:t?`0.88rem`:`0.95rem`,fontWeight:t?600:500,color:t?`#1E293B`:`#475569`},children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:it,onChange:e=>at(e.target.checked),disabled:V,style:{width:`18px`,height:`18px`,cursor:V?`not-allowed`:`pointer`,accentColor:`#E8A889`}}),(0,G.jsx)(`span`,{children:` Live Mode`})]})}),He>1&&He%2==0&&(0,G.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.5rem`,marginLeft:t?0:`0.5rem`},children:(0,G.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`0.4rem`,cursor:V?`not-allowed`:`pointer`,fontSize:t?`0.88rem`:`0.95rem`,fontWeight:t?600:500,color:ot?`#8B5CF6`:t?`#1E293B`:`#475569`},children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:ot,onChange:e=>st(e.target.checked),disabled:V||R.length>0,style:{width:`18px`,height:`18px`,cursor:V||R.length>0?`not-allowed`:`pointer`,accentColor:`#8B5CF6`}}),(0,G.jsxs)(`span`,{children:[` Duplikat (`,ct,` foto)`]})]})}),!t&&I&&!We&&(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`4px`,marginLeft:`0.5rem`,background:`rgba(247,241,237,0.95)`,padding:`6px 10px`,borderRadius:`12px`,boxShadow:`0 4px 12px rgba(139,92,77,0.1)`,border:`1px solid rgba(232,168,137,0.3)`},children:[(0,G.jsx)(`button`,{onClick:()=>{ue(`original`),Se(!1)},disabled:V,style:{padding:`4px 10px`,borderRadius:`8px`,border:`none`,background:le===`original`?`#E8A889`:`transparent`,color:le===`original`?`#fff`:`#5D4E47`,fontSize:`11px`,fontWeight:600,cursor:V?`not-allowed`:`pointer`,opacity:V?.5:1,transition:`all 0.2s ease`,whiteSpace:`nowrap`},children:` Normal`}),(0,G.jsxs)(`button`,{onClick:()=>{ue(`blur`),Se(!0)},disabled:V||pe,style:{padding:`4px 10px`,borderRadius:`8px`,border:`none`,background:le===`blur`?`#E8A889`:`transparent`,color:le===`blur`?`#fff`:`#5D4E47`,fontSize:`11px`,fontWeight:600,cursor:V||pe?`not-allowed`:`pointer`,opacity:V||pe?.5:1,transition:`all 0.2s ease`,display:`flex`,alignItems:`center`,gap:`4px`,whiteSpace:`nowrap`},children:[` Background`,pe&&(0,G.jsx)(`span`,{style:{fontSize:`9px`},children:``})]})]})]}):(0,G.jsx)(`div`,{style:{gridColumn:`2`,justifySelf:`center`,minHeight:t?`48px`:0,display:`flex`,alignItems:`center`,justifyContent:`center`},children:He>1&&He%2==0&&(0,G.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`0.4rem`,cursor:R.length>0?`not-allowed`:`pointer`,fontSize:t?`0.88rem`:`0.95rem`,fontWeight:t?600:500,color:ot?`#8B5CF6`:t?`#1E293B`:`#475569`},children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:ot,onChange:e=>st(e.target.checked),disabled:R.length>0,style:{width:`18px`,height:`18px`,cursor:R.length>0?`not-allowed`:`pointer`,accentColor:`#8B5CF6`}}),(0,G.jsxs)(`span`,{children:[` Duplikat (`,ct,` foto)`]})]})}),(0,G.jsxs)(`button`,{onClick:Pt,style:{padding:t?`0.65rem 0.9rem`:`0.7rem 1.35rem`,background:I?`#E8A889`:`#fff`,color:I?`#fff`:`#333`,border:I?`1px solid #E8A889`:`1px solid #e2e8f0`,borderRadius:`999px`,fontSize:t?`0.92rem`:`1rem`,fontWeight:500,cursor:`pointer`,boxShadow:I?`0 16px 32px rgba(232,168,137,0.35)`:`0 12px 24px rgba(15,23,42,0.08)`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`0.5rem`,justifySelf:t?`center`:`end`,gridColumn:`3`},children:[t&&(0,G.jsx)(`span`,{role:`img`,"aria-hidden":`true`,children:``}),n]})]})},Jt=(e,t)=>{let n=e===`mobile`;return(0,G.jsxs)(`div`,{style:{width:`100%`,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:n?`12px`:`16px`},children:[(0,G.jsx)(`div`,{ref:t,style:{background:`#fff`,borderRadius:n?`18px`:`20px`,overflow:`hidden`,position:`relative`,height:n?h?`min(320px, 70vh)`:`min(400px, 60vh)`:`480px`,width:n?`100%`:`640px`,maxWidth:`100%`,margin:`0 auto`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:I?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`video`,{ref:_,autoPlay:!0,playsInline:!0,muted:!0,style:{position:`absolute`,top:0,left:0,width:`100%`,height:`100%`,objectFit:`cover`,transform:Tt?`scaleX(-1)`:`none`,background:`#000`,opacity:de===`mediapipe`?0:1,transition:`opacity 200ms ease`,pointerEvents:de===`mediapipe`?`none`:`auto`,zIndex:1},onLoadedMetadata:()=>{_.current&&Re(_.current.videoWidth/Math.max(_.current.videoHeight,1))},onError:e=>{console.error(` Video error`,e),$e(`Video gagal dimuat`)}}),(0,G.jsx)(`canvas`,{ref:D,style:{position:`absolute`,top:0,left:0,width:`100%`,height:`100%`,objectFit:`cover`,background:`#000`,transform:Tt?`scaleX(-1)`:`none`,opacity:de===`mediapipe`?1:0,transition:`opacity 200ms ease`,pointerEvents:`none`,zIndex:2}}),Qe&&(0,G.jsxs)(`div`,{style:{position:`absolute `,bottom:n?`16px`:`24px`,left:`50%`,transform:`translateX(-50%)`,background:`rgba(255, 59, 48, 0.95)`,color:`#fff`,padding:`0.75rem 1rem`,borderRadius:`14px`,display:`flex`,alignItems:`center`,gap:`0.5rem`,boxShadow:`0 12px 32px rgba(0,0,0,0.25)`,maxWidth:`90%`,textAlign:`left`,fontSize:`0.95rem`},children:[(0,G.jsx)(`span`,{role:`img`,"aria-label":`Camera error`,children:``}),(0,G.jsx)(`span`,{children:Qe})]}),Lt(),n&&I&&!We&&(0,G.jsxs)(`button`,{onClick:Ft,style:{position:`absolute`,top:`12px`,right:`12px`,minWidth:`48px`,height:`48px`,borderRadius:`24px`,border:`none`,background:`rgba(0,0,0,0.5)`,backdropFilter:`blur(8px)`,WebkitBackdropFilter:`blur(8px)`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`6px`,padding:`0 14px`,cursor:`pointer`,zIndex:100,boxShadow:`0 2px 8px rgba(0,0,0,0.3)`},children:[(0,G.jsx)(`img`,{src:`/assets/flip-mjujrh6i-Cs2CzGrD.png`,alt:`Flip camera`,style:{width:`22px`,height:`22px`,filter:`brightness(0) invert(1)`}}),(0,G.jsx)(`span`,{style:{color:`#fff`,fontSize:`12px`,fontWeight:600,whiteSpace:`nowrap`},children:Ke?`Depan`:`Belakang`})]}),n&&I&&!We&&(0,G.jsxs)(`div`,{style:{position:`absolute`,top:`12px`,left:`12px`,display:`flex`,gap:`6px`,background:`rgba(0,0,0,0.5)`,backdropFilter:`blur(8px)`,WebkitBackdropFilter:`blur(8px)`,padding:`6px 8px`,borderRadius:`20px`,zIndex:100,boxShadow:`0 2px 8px rgba(0,0,0,0.3)`},children:[(0,G.jsx)(`button`,{onClick:()=>{ue(`original`),Se(!1)},disabled:V,style:{padding:`6px 10px`,borderRadius:`14px`,border:`none`,background:le===`original`?`#E8A889`:`transparent`,color:`#fff`,fontSize:`11px`,fontWeight:600,cursor:V?`not-allowed`:`pointer`,opacity:V?.5:1,transition:`all 0.2s ease`},children:``}),(0,G.jsxs)(`button`,{onClick:()=>{ue(`blur`),Se(!0)},disabled:V||pe,style:{padding:`6px 10px`,borderRadius:`14px`,border:`none`,background:le===`blur`?`#E8A889`:`transparent`,color:`#fff`,fontSize:`11px`,fontWeight:600,cursor:V||pe?`not-allowed`:`pointer`,opacity:V||pe?.5:1,transition:`all 0.2s ease`,display:`flex`,alignItems:`center`,gap:`4px`},children:[``,pe&&(0,G.jsx)(`span`,{style:{fontSize:`9px`},children:``})]})]})]}):(0,G.jsxs)(`div`,{style:{textAlign:`center`,color:`#94a3b8`,fontSize:`1.05rem`,display:`flex`,flexDirection:`column`,gap:`0.5rem`,alignItems:`center`,padding:`2.5rem 1rem`},children:[(0,G.jsx)(`div`,{style:{fontSize:`3.5rem`,lineHeight:1},children:``}),(0,G.jsx)(`div`,{style:{fontWeight:600},children:`Kamera belum aktif`}),(0,G.jsx)(`div`,{style:{fontSize:`0.9rem`},children:`aktifkan kamera atau upload dari galeri`}),Qe&&(0,G.jsx)(`div`,{style:{marginTop:`0.5rem`,background:`rgba(255, 59, 48, 0.1)`,border:`1px solid rgba(255, 59, 48, 0.3)`,color:`#ef4444`,borderRadius:`10px`,padding:`0.5rem 0.75rem`,fontSize:`0.85rem`,lineHeight:1.4,maxWidth:`320px`},children:Qe})]})}),I&&!We&&le===`blur`&&!pe&&de===`mediapipe`&&(0,G.jsx)(G.Fragment,{children:xe?(0,G.jsxs)(`div`,{style:{width:`100%`,maxWidth:n?`100%`:`640px`,background:`rgba(15,23,42,0.95)`,backdropFilter:`blur(16px)`,padding:n?`14px`:`18px`,borderRadius:`20px`,boxShadow:`0 18px 36px rgba(15,23,42,0.3)`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,marginBottom:`12px`,color:`#A78BFA`,fontSize:`13px`,fontWeight:600},children:[(0,G.jsx)(`span`,{children:` Background Options`}),(0,G.jsx)(`button`,{onClick:()=>Se(!1),style:{background:`rgba(255,255,255,0.1)`,border:`none`,color:`#fff`,borderRadius:`12px`,padding:`6px 10px`,fontSize:`12px`,cursor:`pointer`},children:` Tutup`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`12px`},children:[(0,G.jsx)(`button`,{onClick:()=>ge(`blur`),disabled:V,style:{flex:1,padding:`8px 12px`,borderRadius:`12px`,border:`none`,background:he===`blur`?`#8B5CF6`:`rgba(255,255,255,0.1)`,color:`#fff`,fontSize:`13px`,fontWeight:600,cursor:V?`not-allowed`:`pointer`,opacity:V?.5:1},children:` Blur`}),(0,G.jsx)(`button`,{onClick:()=>ge(`color`),disabled:V,style:{flex:1,padding:`8px 12px`,borderRadius:`12px`,border:`none`,background:he===`color`?`#8B5CF6`:`rgba(255,255,255,0.1)`,color:`#fff`,fontSize:`13px`,fontWeight:600,cursor:V?`not-allowed`:`pointer`,opacity:V?.5:1},children:` Color`}),(0,G.jsx)(`button`,{onClick:()=>ge(`image`),disabled:V,style:{flex:1,padding:`8px 12px`,borderRadius:`12px`,border:`none`,background:he===`image`?`#8B5CF6`:`rgba(255,255,255,0.1)`,color:`#fff`,fontSize:`13px`,fontWeight:600,cursor:V?`not-allowed`:`pointer`,opacity:V?.5:1},children:` Image`})]}),he===`color`&&(0,G.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(6, 1fr)`,gap:`8px`},children:[`#FFFFFF`,`#000000`,`#EC4899`,`#3B82F6`,`#8B5CF6`,`#10B981`,`#F59E0B`,`#EF4444`,`#6B7280`,`#14B8A6`,`#F97316`,`#6366F1`].map(e=>(0,G.jsx)(`button`,{onClick:()=>ve(e),disabled:V,style:{width:`100%`,aspectRatio:`1`,background:e,border:_e===e?`3px solid #A78BFA`:`2px solid rgba(255,255,255,0.2)`,borderRadius:`10px`,cursor:V?`not-allowed`:`pointer`,opacity:V?.5:1}},e))}),he===`image`&&(0,G.jsx)(`div`,{children:(0,G.jsx)(`input`,{type:`file`,accept:`image/*`,disabled:V,onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>be(e.target?.result),e.readAsDataURL(t)}},style:{padding:`8px`,background:`rgba(255,255,255,0.1)`,border:`2px dashed rgba(255,255,255,0.3)`,borderRadius:`10px`,color:`#fff`,fontSize:`13px`,cursor:V?`not-allowed`:`pointer`,opacity:V?.5:1,width:`100%`}})})]}):(0,G.jsx)(`button`,{onClick:()=>Se(!0),style:{background:`rgba(15,23,42,0.85)`,color:`#E2E8F0`,border:`none`,borderRadius:`14px`,padding:`10px 16px`,display:`flex`,alignItems:`center`,gap:`8px`,boxShadow:`0 12px 28px rgba(15,23,42,0.25)`,cursor:`pointer`},children:` Buka pengaturan background`})})]})},Yt=e=>{let t=e===`mobile`,n=Dt||!I;return t?(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,padding:h?`0`:`0.75rem 0`},children:(0,G.jsx)(`button`,{onClick:Bt,disabled:n,style:{width:`72px`,height:`72px`,borderRadius:`50%`,border:`none`,background:n?`#e2e8f0`:`#E8A889`,color:`white`,fontSize:`1.3rem`,fontWeight:700,boxShadow:n?`none`:`0 16px 32px rgba(232,168,137,0.4)`,cursor:n?`not-allowed`:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:R.length>=ct?``:V?` ${ne??U}s`:Je?``:I?``:``})}):(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,gap:`0.6rem`,padding:`1rem 0 0.35rem`},children:[(0,G.jsx)(`button`,{onClick:Bt,disabled:n,style:{padding:`0.85rem 1.9rem`,borderRadius:`999px`,border:`none`,background:n?`#e2e8f0`:`#1E293B`,color:n?`#94a3b8`:`#fff`,fontSize:`1.05rem`,fontWeight:600,cursor:n?`not-allowed`:`pointer`,boxShadow:n?`none`:`0 18px 36px rgba(15,23,42,0.2)`,minWidth:`200px`,transition:`transform 0.2s ease, box-shadow 0.2s ease`},children:n&&!I?`Aktifkan kamera`:`Capture`}),(0,G.jsx)(`div`,{style:{fontSize:`0.9rem`,color:`#475569`,fontWeight:500,textAlign:`center`},children:`Tekan spasi untuk capture`}),(0,G.jsxs)(`div`,{style:{fontSize:`0.95rem`,fontWeight:600,color:Et?`#ef4444`:`#475569`,textAlign:`center`},children:[`Foto: `,R.length,`/`,ct,ot&&(0,G.jsx)(`span`,{style:{color:`#8B5CF6`,marginLeft:`4px`},children:``}),Et&&` - maksimal tercapai!`]})]})};return i&&o?(0,G.jsxs)(`main`,{style:{minHeight:`100dvh`,background:`#F4E6DA`,display:`flex`,flexDirection:`column`,padding:`1rem`,gap:`1rem`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,gap:`0.75rem`},children:[(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{a(!1),s(null),n(e=>{let t=new URLSearchParams(e);return t.delete(`room`),t})},style:{alignSelf:`flex-start`,display:`inline-flex`,alignItems:`center`,gap:`0.4rem`,padding:`0.55rem 1.1rem`,borderRadius:`999px`,border:`none`,background:`#fff`,color:`#1E293B`,fontWeight:700,cursor:`pointer`},children:[(0,G.jsx)(`span`,{style:{fontSize:`1rem`},children:``}),(0,G.jsx)(`span`,{children:`Kembali`})]}),(0,G.jsx)(`div`,{style:{fontWeight:800,color:`#0F172A`,alignSelf:`center`},children:`Friends Session`})]}),(0,G.jsx)(Aj,{roomId:o,onRoomCreated:()=>{l({type:`success`,title:`Link Disalin`,message:`Bagikan link ini ke teman kamu untuk bergabung.`})},onMasterCaptured:d,onSessionEnded:f})]}):(0,G.jsxs)(G.Fragment,{children:[et&&(0,G.jsx)(EA,{onRequestPermission:Mt,onSkip:Nt}),c?(()=>(0,G.jsxs)(`main`,{style:{minHeight:`100dvh`,background:`#F4E6DA`,display:`flex`,flexDirection:`column`},children:[(0,G.jsxs)(`section`,{style:{flex:`1 1 auto`,display:`flex`,flexDirection:`column`,padding:`0.7rem 0.75rem 0.85rem`,gap:`0.85rem`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.4rem`,alignItems:`center`,textAlign:`center`},children:[(0,G.jsxs)(`button`,{type:`button`,onClick:()=>e(`/frames`),style:{alignSelf:`flex-start`,display:`inline-flex`,alignItems:`center`,gap:`0.35rem`,padding:`0.45rem 0.95rem`,borderRadius:`999px`,border:`none`,background:`#fff`,color:`#1E293B`,fontWeight:600,fontSize:`0.9rem`,boxShadow:`0 12px 24px rgba(15,23,42,0.12)`,cursor:`pointer`,marginBottom:`1.35rem`},children:[(0,G.jsx)(`span`,{style:{fontSize:`0.95rem`},children:``}),(0,G.jsx)(`span`,{children:`Kembali`})]}),(0,G.jsx)(`h1`,{ref:ke,style:{...ft,marginTop:`0.1rem`},children:`Pilih momen berhargamu bersama fremio`})]}),(0,G.jsxs)(`div`,{style:{background:`rgba(255,255,255,0.6)`,borderRadius:`22px`,padding:`0.95rem`,display:`flex`,flexDirection:`column`,gap:`0.9rem`,boxShadow:`0 30px 60px rgba(148,163,184,0.25)`},children:[!i&&(0,G.jsx)(`button`,{type:`button`,onClick:u,style:{width:`100%`,padding:`0.65rem 1rem`,borderRadius:`999px`,border:`none`,background:`#0F172A`,color:`white`,fontWeight:800,cursor:`pointer`},children:`Take moment with your friends`}),qt(`mobile`),(0,G.jsxs)(`div`,{className:`take-moment-mobile-capture-stack`,children:[(0,G.jsx)(`div`,{className:`take-moment-mobile-stream`,children:Jt(`mobile`,x)}),(0,G.jsx)(`div`,{className:`take-moment-mobile-shutter`,children:Yt(`mobile`)})]})]}),(0,G.jsx)(`div`,{ref:S,style:{width:`100%`},children:Kt(`mobile`)})]}),At()]}))():(()=>{let t=Yt(`desktop`);return(0,G.jsxs)(`main`,{style:{minHeight:`100vh`,background:`#F4E6DA`,padding:`2rem`,display:`flex`,flexDirection:`column`,gap:`1.2rem`},children:[(0,G.jsx)(`section`,{style:{background:`rgba(255,255,255,0.6)`,borderRadius:`28px`,padding:`2rem`,display:`flex`,justifyContent:`center`,boxShadow:`0 40px 80px rgba(148,163,184,0.25)`},children:(0,G.jsxs)(`div`,{style:{width:`min(1100px, 100%)`,display:`flex`,flexDirection:`column`,gap:`1.25rem`,alignItems:`center`},children:[(0,G.jsxs)(`div`,{style:{width:`100%`,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,gap:`0.35rem`,textAlign:`center`},children:[(0,G.jsxs)(`button`,{type:`button`,onClick:()=>e(`/frames`),style:{alignSelf:`flex-start`,display:`inline-flex`,alignItems:`center`,gap:`0.4rem`,padding:`0.55rem 1.1rem`,borderRadius:`999px`,border:`none`,background:`#fff`,color:`#1E293B`,fontWeight:600,fontSize:`0.95rem`,cursor:`pointer`,boxShadow:`0 14px 28px rgba(15,23,42,0.12)`,transition:`transform 0.15s ease, box-shadow 0.15s ease`},onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-1px)`,e.currentTarget.style.boxShadow=`0 18px 32px rgba(15,23,42,0.18)`},onMouseLeave:e=>{e.currentTarget.style.transform=`none`,e.currentTarget.style.boxShadow=`0 14px 28px rgba(15,23,42,0.12)`},children:[(0,G.jsx)(`span`,{style:{fontSize:`1rem`},children:``}),(0,G.jsx)(`span`,{children:`Kembali`})]}),(0,G.jsx)(`h1`,{style:ft,children:`Pilih momen berhargamu bersama fremio`})]}),(0,G.jsxs)(`div`,{style:{width:`100%`,maxWidth:`640px`},children:[!i&&(0,G.jsx)(`div`,{style:{display:`flex`,justifyContent:`center`,marginBottom:`0.75rem`},children:(0,G.jsx)(`button`,{type:`button`,onClick:u,style:{padding:`0.65rem 1.05rem`,borderRadius:`999px`,border:`none`,background:`#0F172A`,color:`white`,fontWeight:800,cursor:`pointer`},children:`Take moment with your friends`})}),qt(`desktop`)]}),(0,G.jsx)(`div`,{style:{width:`100%`,maxWidth:`820px`},children:Jt(`desktop`,x)}),(0,G.jsx)(`div`,{style:{width:`100%`,maxWidth:`640px`},children:t}),(0,G.jsx)(`div`,{ref:S,style:{width:`100%`,display:`flex`,justifyContent:`center`},children:Kt(`desktop`)})]})}),At()]})})(),Gt()]})}function nM(){let e=(e,t=200,n=150)=>{let r=document.createElement(`canvas`);r.width=t,r.height=n;let i=r.getContext(`2d`);return i.fillStyle=e,i.fillRect(0,0,t,n),i.fillStyle=`white`,i.font=`20px Arial`,i.textAlign=`center`,i.fillText(`Sample Photo`,t/2,n/2),r.toDataURL(`image/png`)},t=[e(`#ff6b6b`),e(`#4ecdc4`),e(`#45b7d1`)];W.setJSON(`capturedPhotos`,t);let n={id:`test-sample-frame`,name:`Test Sample Frame`,imagePath:`https://via.placeholder.com/1080x1920/2563eb/ffffff?text=SAMPLE+FRAME`,maxCaptures:3,slots:[{left:.1,top:.2,width:.35,height:.25,photoIndex:0},{left:.55,top:.2,width:.35,height:.25,photoIndex:1},{left:.325,top:.55,width:.35,height:.25,photoIndex:2}],category:`test`,createdAt:Date.now()};return Ik.createFrame(n),W.setJSON(`selectedFrame`,{id:n.id,name:n.name,type:`custom`}),console.log(` Sample data created:`),console.log(`- 3 sample photos stored in capturedPhotos`),console.log(`- Test custom frame added:`,n.name),console.log(`- Frame selected for testing`),{photos:t,frame:n,frameId:n.id}}function rM(){W.removeItem(`capturedPhotos`),W.removeItem(`selectedFrame`),W.removeItem(`frameConfig`),W.removeItem(`frameSlots`),console.log(` Test data cleared from localStorage`)}var iM=`fremio-storage`,aM=2,oM=`drafts`,sM=`draft_summaries`,cM=null,lM=()=>new Promise((e,t)=>{if(cM){e(cM);return}if(!window.indexedDB){t(Error(`IndexedDB not supported in this browser`));return}let n=indexedDB.open(iM,aM);n.onerror=()=>{console.error(` IndexedDB failed to open:`,n.error),t(n.error)},n.onsuccess=()=>{cM=n.result,console.log(` IndexedDB initialized successfully`),e(cM)},n.onupgradeneeded=e=>{let t=e.target.result;if(t.objectStoreNames.contains(oM)){let t=e.target.transaction.objectStore(oM);t.indexNames.contains(`userId`)||t.createIndex(`userId`,`userId`,{unique:!1}),t.indexNames.contains(`updatedAt`)||t.createIndex(`updatedAt`,`updatedAt`,{unique:!1})}else{let e=t.createObjectStore(oM,{keyPath:`id`});e.createIndex(`updatedAt`,`updatedAt`,{unique:!1}),e.createIndex(`userId`,`userId`,{unique:!1}),console.log(` IndexedDB drafts store created`)}if(!t.objectStoreNames.contains(sM)){let e=t.createObjectStore(sM,{keyPath:`id`});e.createIndex(`userId`,`userId`,{unique:!1}),e.createIndex(`updatedAt`,`updatedAt`,{unique:!1}),console.log(` IndexedDB draft summaries store created`)}}});const uM=async()=>{try{let e=await lM();return new Promise((t,n)=>{let r=e.transaction([oM],`readonly`).objectStore(oM).getAll();r.onsuccess=()=>{let e=r.result||[];console.log(` IndexedDB: Loaded drafts:`,e.length),t(e)},r.onerror=()=>{console.error(` IndexedDB: Failed to get drafts:`,r.error),n(r.error)}})}catch(e){return console.error(` IndexedDB: getAllDrafts failed:`,e),[]}},dM=async e=>{try{let t=await lM();return new Promise((n,r)=>{let i=t.transaction([oM],`readonly`).objectStore(oM);if(!i.indexNames.contains(`userId`)){let t=i.getAll();t.onsuccess=()=>n((t.result||[]).filter(t=>t?.userId===e)),t.onerror=()=>r(t.error);return}let a=i.index(`userId`).getAll(IDBKeyRange.only(e));a.onsuccess=()=>{n(a.result||[])},a.onerror=()=>{r(a.error)}})}catch(e){return console.error(` IndexedDB: getDraftsByUserId failed:`,e),[]}},fM=async e=>{try{let t=await lM();return new Promise((n,r)=>{let i=t.transaction([oM],`readonly`).objectStore(oM).get(e);i.onsuccess=()=>{let t=i.result||null;console.log(` IndexedDB: Get draft:`,e,t?`found`:`not found`),n(t)},i.onerror=()=>{console.error(` IndexedDB: Failed to get draft:`,i.error),r(i.error)}})}catch(e){return console.error(` IndexedDB: getDraft failed:`,e),null}},pM=async e=>{try{let t=await lM(),n=JSON.stringify(e),r=Math.round(n.length/1024),i=(n.length/1024/1024).toFixed(2);return console.log(` IndexedDB: Saving draft:`,{id:e.id,sizeKB:r+` KB`,sizeMB:i+` MB`,hasBackground:!!e.elements?.find(e=>e.type===`background-photo`)}),new Promise((n,r)=>{let i=t.transaction([oM],`readwrite`).objectStore(oM).put(e);i.onsuccess=()=>{console.log(` IndexedDB: Draft saved successfully:`,e.id),n(e)},i.onerror=()=>{console.error(` IndexedDB: Failed to save draft:`,i.error),r(i.error)}})}catch(e){throw console.error(` IndexedDB: saveDraft failed:`,e),e}},mM=async e=>{try{let t=await lM();return new Promise((n,r)=>{let i=t.transaction([oM],`readwrite`).objectStore(oM).delete(e);i.onsuccess=()=>{console.log(` IndexedDB: Draft deleted:`,e),n(!0)},i.onerror=()=>{console.error(` IndexedDB: Failed to delete draft:`,i.error),r(i.error)}})}catch(e){return console.error(` IndexedDB: deleteDraft failed:`,e),!1}},hM=async()=>{try{let e=await lM();return new Promise((t,n)=>{let r=e.transaction([oM],`readwrite`).objectStore(oM).clear();r.onsuccess=()=>{console.log(` IndexedDB: All drafts cleared`),t(!0)},r.onerror=()=>{console.error(` IndexedDB: Failed to clear drafts:`,r.error),n(r.error)}})}catch(e){return console.error(` IndexedDB: clearAllDrafts failed:`,e),!1}},gM=async()=>{try{if(!navigator.storage||!navigator.storage.estimate)return{usage:0,quota:0,percentage:0};let e=await navigator.storage.estimate(),t=e.usage||0,n=e.quota||0,r=n>0?Math.round(t/n*100):0;return console.log(` IndexedDB Storage:`,{usageMB:(t/1024/1024).toFixed(2)+` MB`,quotaMB:(n/1024/1024).toFixed(2)+` MB`,percentage:r+`%`}),{usage:t,quota:n,percentage:r}}catch(e){return console.error(` Failed to get storage estimate:`,e),{usage:0,quota:0,percentage:0}}},_M=async e=>{try{let t=await lM();return new Promise((n,r)=>{let i=t.transaction([sM],`readwrite`).objectStore(sM).put(e);i.onsuccess=()=>n(e),i.onerror=()=>r(i.error)})}catch(e){return console.error(` IndexedDB: saveDraftSummary failed:`,e),null}},vM=async e=>{try{let t=Array.isArray(e)?e.filter(Boolean):[];if(t.length===0)return!0;let n=await lM();return await new Promise((e,r)=>{if(!n.objectStoreNames.contains(sM)){e(!1);return}let i=n.transaction([sM],`readwrite`),a=i.objectStore(sM);i.oncomplete=()=>e(!0),i.onerror=()=>r(i.error),i.onabort=()=>r(i.error);for(let e of t)a.put(e)})}catch(e){return console.error(` IndexedDB: saveDraftSummariesBulk failed:`,e),!1}},yM=async e=>{try{let t=await lM();return new Promise((n,r)=>{if(!t.objectStoreNames.contains(sM)){n([]);return}let i=t.transaction([sM],`readonly`).objectStore(sM).index(`userId`).getAll(IDBKeyRange.only(e));i.onsuccess=()=>n(i.result||[]),i.onerror=()=>r(i.error)})}catch(e){return console.error(` IndexedDB: getDraftSummariesByUserId failed:`,e),[]}},bM=async e=>{try{let t=await lM();return new Promise((n,r)=>{if(!t.objectStoreNames.contains(sM)){n(!0);return}let i=t.transaction([sM],`readwrite`).objectStore(sM).delete(e);i.onsuccess=()=>n(!0),i.onerror=()=>r(i.error)})}catch(e){return console.error(` IndexedDB: deleteDraftSummary failed:`,e),!1}};var xM={getAllDrafts:uM,getDraftsByUserId:dM,getDraft:fM,saveDraft:pM,saveDraftSummary:_M,saveDraftSummariesBulk:vM,getDraftSummariesByUserId:yM,deleteDraftSummary:bM,deleteDraft:mM,clearAllDrafts:hM,getStorageEstimate:gM},SM=`fremio-creator-drafts`,CM=`fremio-creator-draft-summaries:`,wM=e=>Array.isArray(e)?e:[],TM=()=>{try{let e=null;for(let t=0;t<3&&(e=localStorage.getItem(`fremio_user`)||sessionStorage.getItem(`fremio_user_cache`),!e);t++);if(e){let t=JSON.parse(e),n=t?.email||t?.id;if(n)return n}}catch(e){console.error(` Failed to get current user:`,e)}return`guest`},EM=e=>e?.id?{id:e.id,userId:e.userId,title:e.title??`Draft`,description:e.description,name:e.name,createdAt:e.createdAt,updatedAt:e.updatedAt,preview:e.preview,thumbnail:e.thumbnail,signature:e.signature,aspectRatio:e.aspectRatio}:null;const DM=(e=null)=>{try{let t=e||TM();if(!t)return[];let n=W.getJSON(`${CM}${t}`,[]);return Array.isArray(n)?n:[]}catch{return[]}};var OM=(e,t)=>{try{if(!e)return;let n=Array.isArray(t)?t:[];W.setJSON(`${CM}${e}`,n)}catch{}},kM=(e,t)=>{try{if(!e||!t?.id)return;let n=DM(e),r=n.findIndex(e=>e?.id===t.id),i=r>=0?[...n.slice(0,r),t,...n.slice(r+1)]:[t,...n];OM(e,i)}catch{}},AM=(e,t)=>{try{if(!e||!t)return;let n=DM(e);OM(e,n.filter(e=>e?.id!==t))}catch{}};const jM=async()=>{let e=TM(),t=DM(e);if(t.length>0)return t;try{let t=await xM.getDraftSummariesByUserId(e);if(Array.isArray(t)&&t.length>0)return OM(e,t),t;let n=await xM.getDraftsByUserId(e),r=wM(n).map(EM).filter(Boolean);return OM(e,r),xM.saveDraftSummariesBulk(r),r}catch(e){console.error(` Failed to load draft summaries from IndexedDB:`,e)}let n=W.getJSON(SM,[]);return wM(n).filter(t=>t.userId===e).map(EM).filter(Boolean)};var MM=()=>typeof crypto<`u`&&typeof crypto.randomUUID==`function`?crypto.randomUUID():`draft-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;const NM=async()=>{let e=TM();try{return await xM.getDraftsByUserId(e)}catch(t){console.error(` Failed to load from IndexedDB, falling back to localStorage:`,t);let n=W.getJSON(SM,[]);return wM(n).filter(t=>t.userId===e)}},PM=async(e,t=null)=>{let n=t||TM();console.log(` [getDraftById] Looking for draft ${e} with userId: "${n}"`);try{let t=await xM.getDraft(e);return t&&n===`guest`&&t.userId&&t.userId!==`guest`?(console.error(` AUTH TIMING ISSUE: Draft belongs to ${t.userId} but currentUserId is guest!`),console.error(`   This means authentication hasn't initialized yet.`),console.error(`   Caller should provide userEmail parameter to bypass localStorage.`),null):t&&t.userId===n?(console.log(` [getDraftById] Draft ${e} found and belongs to user ${n}`),t):(t?(console.warn(` Draft ${e} belongs to different user:`),console.warn(`   Draft userId: "${t.userId}"`),console.warn(`   Current userId: "${n}"`),console.warn(`   Match: ${t.userId===n}`)):console.warn(` Draft ${e} not found in IndexedDB`),null)}catch(t){console.error(` Failed to get draft from IndexedDB, falling back to localStorage:`,t);let r=W.getJSON(SM,[]),i=wM(r).find(t=>t.id===e);return i&&i.userId===n?i:null}};var FM=async e=>{try{if(!W.setJSON(SM,e))throw Error(`Failed to save drafts to localStorage (setJSON returned false)`);let t=W.getJSON(SM);if(!Array.isArray(t))throw Error(`Draft persistence verification failed - not an array`);return t.length!==e.length&&console.warn(` [persistDrafts] Draft count mismatch!`,{expected:e.length,actual:t.length}),!0}catch(e){throw console.error(` [persistDrafts] Failed to persist drafts`,e),console.error(` [persistDrafts] Error details:`,{message:e.message,name:e.name,stack:e.stack}),e}},IM=(e,t,n,r)=>{let i=TM();return{...n,...e,id:r,userId:e.userId??n?.userId??i,title:e.title??n?.title??`Draft`,createdAt:n?.createdAt??e.createdAt??t,updatedAt:t}},LM=async(e,t)=>{let n=e.id??MM(),r={...e,id:n},i=e.id?await xM.getDraft(e.id):null,a=IM(r,t,i,n);await xM.saveDraft(a);let o=EM(a);return o&&(await xM.saveDraftSummary(o),kM(a.userId,o)),a},RM=async(e,t)=>{let n=wM(W.getJSON(SM,[])),r=e.id??MM(),i=n.findIndex(e=>e.id===r),a=i===-1?null:n[i],o=IM({...e,id:r},t,a,r);return i===-1?n.push(o):n[i]=o,await FM(n),o};const zM=async e=>{let t=TM();try{let n=await xM.getDraft(e);return n&&n.userId===t?(await xM.deleteDraft(e),await xM.deleteDraftSummary(e),AM(t,e),console.log(` Deleted draft ${e} from IndexedDB for user ${t}`)):console.warn(` Cannot delete draft ${e} - belongs to different user`),await NM()}catch(n){console.error(` Failed to delete from IndexedDB:`,n);let r=W.getJSON(SM,[]),i=wM(r).filter(n=>n.id!==e||n.userId!==t);return W.setJSON(SM,i),i.filter(e=>e.userId===t)}},BM=async()=>{try{await xM.clearAllDrafts()}catch(e){console.error(` Failed to clear IndexedDB:`,e)}W.removeItem(SM)},VM=async e=>{let t=new Date().toISOString(),n={...e};TM();let r;try{r=await LM(n,t)}catch(e){console.error(` [saveDraft] Failed to save draft to IndexedDB, falling back to localStorage:`,e),r=await RM(n,t)}return r};var HM={loadDrafts:NM,loadDraftSummaries:jM,getCachedDraftSummaries:DM,getDraftById:PM,saveDraft:VM,deleteDraft:zM,clearDrafts:BM};const UM=1080,WM=1920;var GM=UM/480,KM=WM/853;const qM=Math.round(60*GM),JM=Math.round(160*GM),YM=Math.round(160*KM);Math.round(120*Math.min(GM,KM));var XM=(e,t)=>{if(!Number.isFinite(e)||!Number.isFinite(t)||e<=0||t<=0)return`1:1`;let n=e=>Math.round(Number(e)*1e3),r=(e,t)=>{let n=Math.abs(e),r=Math.abs(t);for(;r;){let e=r;r=n%r,n=e}return n||1},i=n(e),a=n(t),o=r(i,a),s=Math.round(i/o),c=Math.round(a/o);return`${Math.max(1,s)}:${Math.max(1,c)}`},ZM=e=>{if(!e||typeof e!=`object`)return null;let{id:t,type:n,x:r,y:i,width:a,height:o,rotation:s,zIndex:c,isLocked:l,data:u}=e;return{id:t,type:n,x:r,y:i,width:a,height:o,rotation:s,zIndex:c,isLocked:l,data:u}},QM=(e,t=0)=>{let n=Number(e);return Number.isFinite(n)?n:t},$M=e=>!e||typeof e!=`object`?[]:Array.isArray(e.elements)&&e.elements.length>0?e.elements:Array.isArray(e.designer?.elements)&&e.designer.elements.length>0?e.designer.elements:Array.isArray(e.frameConfig?.designer?.elements)&&e.frameConfig.designer.elements.length>0?e.frameConfig.designer.elements:[],eN=(e=[])=>{if(!Array.isArray(e))return[];let t=e.filter(e=>{if(!e||typeof e!=`object`)return!1;if(e.type===`photo`)return!0;let t=String(e?.data?.label||``).toLowerCase();return e.type===`shape`&&t.includes(`foto`)});return console.log(` [normalizePhotoPlaceholders] Filtering photo slots:`,{totalElements:e.length,photoPlaceholders:t.length,types:e.map(e=>({type:e.type,id:e.id?.slice(0,8)})),photoTypes:t.map(e=>({type:e.type,id:e.id?.slice(0,8),photoIndex:e.data?.photoIndex}))}),t},tN=e=>!Number.isFinite(e)||e<=0?0:e>=1?1:e,nN=(e,t,n,r)=>{let i=n>0?n:UM,a=r>0?r:WM,o=QM(e?.x),s=QM(e?.y),c=Math.max(1,QM(e?.width,0)),l=Math.max(1,QM(e?.height,0)),u=QM(e?.rotation,0),d=tN(o/i),f=tN(s/a),p=tN(c/i),m=tN(l/a),h=l>0?XM(c,l):`4:5`,g=Number.isFinite(e?.data?.photoIndex)?e.data.photoIndex:t;return{id:e?.id||`custom_slot_${t+1}`,left:d,top:f,width:p||0,height:m||0,aspectRatio:h,zIndex:Number.isFinite(e?.zIndex)?e.zIndex:1,rotation:u,photoIndex:g}},rN=(e,t)=>{if(!e||typeof e!=`object`)return null;let n=tN(QM(e.left??e.x,0)),r=tN(QM(e.top??e.y,0)),i=tN(QM(e.width??e.w,0)),a=tN(QM(e.height??e.h,0)),o=typeof e.aspectRatio==`string`&&e.aspectRatio.includes(`:`)?e.aspectRatio:XM(i||1,a||1);return{id:e.id||`legacy_slot_${t+1}`,left:n,top:r,width:i,height:a,aspectRatio:o,zIndex:Number.isFinite(e.zIndex)?e.zIndex:1,rotation:QM(e.rotation,0),photoIndex:Number.isFinite(e.photoIndex)?e.photoIndex:t}};const iN=(e=[],t,n)=>{let r={aspectRatio:n,canvasBackground:t,elements:e.map(ZM)};try{return JSON.stringify(r)}catch(e){return console.warn(` Failed to serialize draft signature`,e),`${Date.now()}-${Math.random()}`}},aN=e=>{if(!e)throw Error(`Draft is required to build frame configuration`);let t=$M(e);console.log(` [buildFrameConfigFromDraft] Source elements:`,{total:t.length,types:t.map(e=>({type:e.type,id:e.id?.slice(0,8),zIndex:e.zIndex,label:e.data?.label}))});let n=eN(t);console.log(` [buildFrameConfigFromDraft] After filtering for photo slots:`,{photoElementsCount:n.length,photoElements:n.map(e=>({type:e.type,id:e.id?.slice(0,8),photoIndex:e.data?.photoIndex}))});let{id:r,title:i,preview:a,canvasBackground:o,canvasWidth:s=UM,canvasHeight:c=WM,aspectRatio:l=`9:16`,signature:u,createdAt:d,updatedAt:f}=e,p=u||iN(t,o,l),m=n.map((e,t)=>nN(e,t,QM(s,UM),QM(c,WM)));m.length===0&&(m=(Array.isArray(e.slots)?e.slots:Array.isArray(e.designer?.slots)?e.designer.slots:Array.isArray(e.frameConfig?.slots)?e.frameConfig.slots:[]).map((e,t)=>rN(e,t)).filter(Boolean)),m.length===0&&console.warn(` [buildFrameConfigFromDraft] Draft does not contain any photo slots`,{draftId:e.id,hasElements:Array.isArray(t)&&t.length>0});let h=new Set;m.forEach((e,t)=>{e&&(Number.isFinite(e.photoIndex)?h.add(e.photoIndex):h.add(t))});let g=m.length;console.log(` [buildFrameConfigFromDraft] maxCaptures calculation:`,{slotsCount:m.length,uniquePhotoIndices:Array.from(h),maxCaptures:g,note:`maxCaptures = slots.length (each slot needs a separate photo)`,slotDetails:m.map((e,t)=>({id:e.id,photoIndex:e.photoIndex,width:e.width,height:e.height}))});let _=c>=s?`portrait`:`landscape`;return console.log(` [buildFrameConfigFromDraft] Final frameConfig:`,{id:`custom-${r}`,slotsCount:m.length,designerElementsCount:t.length,designerElementsZIndex:t.map(e=>({type:e.type,id:e.id?.slice(0,8),zIndex:e.zIndex}))}),{id:`custom-${r}`,name:i||`Custom Frame`,description:`Custom frame created in Fremio`,isCustom:!0,duplicatePhotos:!1,frameImage:a,imagePath:a,preview:a,layout:{aspectRatio:l,orientation:_,backgroundColor:o,canvasWidth:QM(s,UM),canvasHeight:QM(c,WM)},maxCaptures:g,slots:m,designer:{elements:t,canvasBackground:o,aspectRatio:l,canvasWidth:QM(s,UM),canvasHeight:QM(c,WM),signature:p},metadata:{source:`draft`,draftId:r,signature:p,createdAt:d||null,updatedAt:f||null}}},oN=e=>{let t=aN(e);console.log(` [activateDraftFrame] Storing full frameConfig:`,{id:t.id,hasDesignerElements:!!t.designer?.elements,elementsCount:t.designer?.elements?.length,elementTypes:t.designer?.elements?.map(e=>e?.type)||[],hasBackgroundPhoto:!!t.designer?.elements?.find(e=>e.type===`background-photo`),hasPhotoElements:!!t.designer?.elements?.find(e=>e.type===`photo`),photoElementsCount:t.designer?.elements?.filter(e=>e.type===`photo`).length||0});let n=W.setItem(`selectedFrame`,t.id);e?.id?jn.setItem(`activeDraftId`,e.id):jn.removeItem(`activeDraftId`),t?.metadata?.signature?jn.setItem(`activeDraftSignature`,t.metadata.signature):jn.removeItem(`activeDraftSignature`);try{let e={...t,__timestamp:Date.now(),__selectedAt:new Date().toISOString()};W.setJSON(`frameConfig`,e),W.setItem(`frameConfigTimestamp`,String(e.__timestamp)),console.log(` [activateDraftFrame] Full frameConfig stored to localStorage with timestamp`)}catch(e){console.warn(` [activateDraftFrame] localStorage failed (too large), frameConfig will load from draft:`,e)}if(!n)throw Error(`Failed to save frame ID to storage`);return Array.isArray(e.capturedPhotos)&&e.capturedPhotos.length>0?(console.log(` [activateDraftFrame] Restoring captured photos:`,e.capturedPhotos.length),jn.setJSON(`capturedPhotos`,e.capturedPhotos)):(console.log(` [activateDraftFrame] No captured photos to restore`),jn.removeItem(`capturedPhotos`)),e.frameArtwork?(console.log(` [activateDraftFrame] Storing frame artwork info`),jn.setJSON(`draftFrameArtwork`,e.frameArtwork)):jn.removeItem(`draftFrameArtwork`),t};var sN={computeDraftSignature:iN,buildFrameConfigFromDraft:aN,activateDraftFrame:oN};const cN=-4e3,lN=.001;function uN(){console.log(` EDITOR COMPONENT RENDERING...`),Le();let[e,t]=(0,b.useState)([]),[n,r]=(0,b.useState)(null),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)(null),[c,l]=(0,b.useState)(null),[u,d]=(0,b.useState)(!1),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)({}),[g,_]=(0,b.useState)(null),[v,y]=(0,b.useState)(null),[x,S]=(0,b.useState)([]),[C,w]=(0,b.useState)(null),[T,E]=(0,b.useState)(null),D=e=>e?`slotPhotos:${e}`:null,O=(e,t)=>{let n=D(e);if(n)try{W.setJSON(n,t)}catch(e){console.warn(` Failed to persist slotPhotos`,e)}},k=e=>({"FremioSeries-blue-2":`/assets/FremioSeries-blue-2-mjujrh6i-B5pXOU3W.png`,"FremioSeries-babyblue-3":`/assets/FremioSeries-babyblue-3-mjujrh6i-B2fJnRv7.png`,"FremioSeries-black-3":`/assets/FremioSeries-black-3-mjujrh6i-CSx5W-Nn.png`,"FremioSeries-blue-3":`/assets/FremioSeries-blue-3-mjujrh6i-B23Qyzxk.png`,"FremioSeries-cream-3":`/assets/FremioSeries-cream-3-mjujrh6i-CUffidfK.png`,"FremioSeries-green-3":`/assets/FremioSeries-green-3-mjujrh6i-CsjrGuhw.png`,"FremioSeries-maroon-3":`/assets/FremioSeries-maroon-3-mjujrh6i-BqO_9j9u.png`,"FremioSeries-orange-3":`/assets/FremioSeries-orange-3-mjujrh6i-CCMNFmRj.png`,"FremioSeries-pink-3":`/assets/FremioSeries-pink-3-mjujrh6i-Nbg5RheE.png`,"FremioSeries-purple-3":`/assets/FremioSeries-purple-3-mjujrh6i-DeZtk4x9.png`,"FremioSeries-white-3":`/assets/FremioSeries-white-3-mjujrh6i-CWTBArXr.png`,"FremioSeries-blue-4":`/assets/FremioSeries-blue-4-mjujrh6i-D7sHCwpI.png`,SalPriadi:`/assets/Sal%20Priadi-mjujrh6i-D_OPShHH.png`,"InspiredBy-7Des":`/assets/7%20Des-mjujrh6i-CG2hfBhW.png`,"InspiredBy-AbbeyRoad":`/assets/Abbey%20Road-mjujrh6i-DAtbj3Fj.png`,"InspiredBy-LagipulaHidupAkanBerakhir":`/assets/Lagipula%20Hidup%20Akan%20Berakhir-mjujrh6i-B5WiXZ1W.png`,"InspiredBy-MembangunDanMenghancurkan":`/assets/Membangun%20_%20Menghancurkan-mjujrh6i-DDRKkt_z.png`,"InspiredBy-MenariDenganBayangan":`/assets/Menari%20dengan%20Bayangan-mjujrh6i-U97hNN0z.png`,"InspiredBy-PSILOVEYOU":`/assets/PS.%20I%20LOVE%20YOU-mjujrh6i-B16x22QN.png`})[e]||null,A=e=>typeof e==`string`&&e.startsWith(`custom-`),j=()=>{let e=W.getItem(`selectedFrame`);if(e)return e;let t=W.getJSON(`frameConfig`);if(t?.id)return t.id;let n=W.getItem(`activeDraftId`);if(n)return`custom-${n}`;let r=Gk?.getCurrentConfig?.();return r?.id?r.id:null},M=e=>{let t=W.getJSON(`frameConfig`);if(t?.id===e)return console.log(` Using cached frameConfig for:`,e),t;let n=Gk?.getCurrentConfig?.();if(n?.id===e)return console.log(` Using frameProvider config for:`,e),n;if(A(e)){let t=e.replace(`custom-`,``),n=HM?.getDraftById?.(t);if(n){console.log(` Rebuilding config from draft:`,t);let e=aN(n);if(e)return W.setJSON(`frameConfig`,e),e}}return null},N=(e,t)=>{let n=k(e);if(n)return console.log(` Using built-in frame asset for:`,e),n;if(A(e)){if(t?.frameImage)return console.log(` Using custom frame base64 from config.frameImage for:`,e),t.frameImage;if(t?.preview)return console.log(` Using custom frame base64 from config.preview for:`,e),t.preview;let n=e.replace(`custom-`,``),r=HM?.getDraftById?.(n);if(r?.preview)return console.log(` Using custom frame base64 from draft.preview for:`,e),r.preview;console.error(` No frameImage found in config or draft for custom frame:`,e)}return null};(0,b.useEffect)(()=>{console.log(` Editor useEffect started - loading data...`),console.log(` Checking localStorage keys:`,Object.keys(localStorage));try{let e=W.getJSON(`capturedPhotos`);if(console.log(` Raw capturedPhotos from localStorage:`,e),console.log(` Type:`,typeof e,`IsArray:`,Array.isArray(e)),e){let n=Array.isArray(e)?e:[];t(n),console.log(` Loaded photos:`,n.length,`photos`),n.length>0&&n.forEach((e,t)=>{console.log(` Photo ${t}:`,e?`${e.substring(0,50)}... (length: ${e.length})`:`null/undefined`)})}else console.log(` No captured photos found in localStorage`),console.log(` All localStorage contents:`),Object.keys(localStorage).forEach(e=>{console.log(`  - ${e}:`,localStorage.getItem(e)?.substring(0,100))}),t([]);let n=j();if(console.log(` Resolved frame ID:`,n),!n){console.error(` No frame ID could be resolved`);return}let i=M(n);if(console.log(` Resolved frame config:`,{frameId:n,hasConfig:!!i,slotsCount:i?.slots?.length,isCustom:A(n)}),!i){console.error(` No frame config could be resolved for:`,n);return}E(i);let o=N(n,i);if(console.log(` Resolved frame image:`,{frameId:n,hasImage:!!o,imageType:o?.startsWith(`data:`)?`base64`:`imported`}),!o){console.error(` No frame image could be resolved for:`,n);return}r(o),a(i.slots),l(n),p(!!i.duplicatePhotos);let c=Array.isArray(i?.designer?.elements)?i.designer.elements.filter(e=>e&&e.type!==`photo`&&e.type!==`background-photo`&&!e?.data?.__capturedOverlay):[];S(c),console.log(` Loaded designer elements:`,c.length),console.log(` Designer elements detail:`,c.map(e=>({type:e.type,id:e.id?.slice(0,8),zIndex:e.zIndex,hasData:!!e.data,text:e.data?.text,fill:e.data?.fill,image:e.data?.image?`has image`:`no image`})));let u=Array.isArray(i?.designer?.elements)?i.designer.elements.find(e=>e?.type===`background-photo`):null;w(u),u&&console.log(` Loaded background photo:`,{id:u.id?.slice(0,8),zIndex:u.zIndex,hasImage:!!u.data?.image,width:u.width,height:u.height});let d=null;try{let e=W.getJSON(`frameLayerPlan`);e&&e.version===1&&e.sourceFrameId===i.id&&e.slotCount===i.slots.length&&(!e.sourceSignature||e.sourceSignature===i?.metadata?.signature)&&(d=e)}catch(e){console.warn(` Failed to load stored frame layer plan`,e)}if(!d)if(d=nA(i),d)try{W.setJSON(`frameLayerPlan`,d)}catch(e){console.warn(` Failed to persist frame layer plan`,e)}else W.removeItem(`frameLayerPlan`);if(s(d),i.duplicatePhotos&&Array.isArray(i.slots)){let t={};i.slots.forEach((n,r)=>{let i=n.photoIndex===void 0?r:n.photoIndex;t[r]=Array.isArray(e)&&e[i]?e[i]:null});let r=D(n),a=t;if(r){let e=W.getJSON(r);if(e){let n={};i.slots.forEach((r,i)=>{e&&Object.prototype.hasOwnProperty.call(e,i)?n[i]=e[i]:n[i]=t[i]||null}),a=n}}h(a),O(n,a)}console.log(` Editor: Frame loaded successfully:`,{frameId:n,slotsCount:i.slots?.length,duplicatePhotos:i.duplicatePhotos,isCustom:A(n)})}catch(e){console.error(` FATAL ERROR in Editor useEffect:`,e),console.error(`Error stack:`,e.stack)}},[]),(0,b.useEffect)(()=>{if(!f||!Array.isArray(i)||i.length===0||!Array.isArray(e)||e.length===0||!(Object.keys(m||{}).length===0||i.some((e,t)=>!m[t])))return;let t={...m||{}};i.forEach((n,r)=>{if(!t[r]){let i=n.photoIndex===void 0?r:n.photoIndex;t[r]=e[i]||null}}),h(t);let n=c||W.getItem(`selectedFrame`);O(n,t)},[f,i,e]);let P=(e,t)=>{e.stopPropagation(),_({slotIndex:t}),console.log(`[DnD]  Mulai drag dari slot`,t+1),e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,`slot-${t}`);let n=e.target.tagName===`IMG`?e.target:e.currentTarget.querySelector(`img`);n&&e.dataTransfer.setDragImage(n,n.offsetWidth/2,n.offsetHeight/2)},ee=(e,t)=>{e.preventDefault(),e.stopPropagation(),y(t),e.dataTransfer.dropEffect=`move`,console.log(`[DnD]  Hover over slot`,t+1)},F=(e,t)=>{e.preventDefault(),e.stopPropagation(),y(t)},I=e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.contains(e.relatedTarget)||y(null)},L=(n,r)=>{if(n.preventDefault(),n.stopPropagation(),y(null),console.log(`[DnD]  Drop ke slot`,r+1),console.log(`[DnD] draggedPhoto state:`,g),console.log(`[DnD] duplicatePhotos:`,f),console.log(`[DnD] frameSlots length:`,i?.length),console.log(`[DnD] photos length:`,e?.length),console.log(`[DnD] slotPhotos:`,m),!g){console.log(`[DnD]  No draggedPhoto state`);return}let a=g.slotIndex;if(a===r){console.log(`[DnD]  Same slot, no swap needed`),_(null);return}if(f&&Array.isArray(i)){let t={...m},n=i[a],o=i[r],s=n?.photoIndex===void 0?a:n.photoIndex,l=o?.photoIndex===void 0?r:o.photoIndex,u=t[a]||e[s]||null;t[a]=t[r]||e[l]||null,t[r]=u,h(t);let d=c||W.getItem(`selectedFrame`);O(d,t),_(null),console.log(`[DnD]  Berhasil tukar slot`,a+1,``,r+1,`(duplicate-photos frame, independent)`);return}if(Array.isArray(i)){let n=i[a],o=i[r],s=n?.photoIndex===void 0?a:n.photoIndex,c=o?.photoIndex===void 0?r:o.photoIndex,l=[...e],u=l[s];l[s]=l[c],l[c]=u,t(l),W.setJSON(`capturedPhotos`,l),console.log(`[DnD]  Berhasil tukar slot`,a+1,``,r+1,`(standard frame)`)}_(null)};return console.log(` EDITOR RENDER:`,{hasPhotos:!!e,photosLength:e?.length,hasFrameSlots:!!i,frameSlotsLength:i?.length,hasSelectedFrame:!!n,frameId:c}),(0,G.jsxs)(`div`,{style:{minHeight:`100vh`,background:`#f5f5f5`,padding:`12px`,paddingTop:`44px`,display:`flex`,flexDirection:`column`,fontFamily:`system-ui, -apple-system, sans-serif`},children:[(0,G.jsxs)(`div`,{style:{position:`fixed`,top:`10px`,right:`10px`,display:`flex`,gap:`5px`,zIndex:1e3,background:`rgba(255, 255, 255, 0.9)`,padding:`8px`,borderRadius:`6px`,border:`1px solid #e1e1e1`},children:[(0,G.jsx)(`button`,{onClick:()=>{let e=(e,t,n=400,r=500)=>{let i=document.createElement(`canvas`);i.width=n,i.height=r;let a=i.getContext(`2d`);return a.fillStyle=e,a.fillRect(0,0,n,r),a.strokeStyle=`white`,a.lineWidth=8,a.strokeRect(0,0,n,r),a.fillStyle=`white`,a.font=`bold 32px Arial`,a.textAlign=`center`,a.shadowColor=`black`,a.shadowBlur=4,a.fillText(`FOTO ${t}`,n/2,r/2-20),a.fillText(`Test Image`,n/2,r/2+20),i.toDataURL(`image/png`)},t=[e(`#e74c3c`,`1`),e(`#2ecc71`,`2`),e(`#3498db`,`3`)];W.setJSON(`capturedPhotos`,t),W.setItem(`selectedFrame`,`FremioSeries-black-3`);let n={id:`FremioSeries-black-3`,name:`FremioSeries Black 6 Foto`,maxCaptures:3,duplicatePhotos:!0,slots:[{id:`slot_1a`,left:.05,top:.03,width:.41,height:.28,aspectRatio:`4:5`,zIndex:2,photoIndex:0},{id:`slot_1b`,left:.545,top:.03,width:.41,height:.28,aspectRatio:`4:5`,zIndex:2,photoIndex:0},{id:`slot_2a`,left:.05,top:.33,width:.41,height:.28,aspectRatio:`4:5`,zIndex:2,photoIndex:1},{id:`slot_2b`,left:.545,top:.33,width:.41,height:.28,aspectRatio:`4:5`,zIndex:2,photoIndex:1},{id:`slot_3a`,left:.05,top:.63,width:.41,height:.28,aspectRatio:`4:5`,zIndex:2,photoIndex:2},{id:`slot_3b`,left:.545,top:.63,width:.41,height:.28,aspectRatio:`4:5`,zIndex:2,photoIndex:2}]};W.setJSON(`frameConfig`,n);let r={};n.slots.forEach((e,n)=>{let i=e.photoIndex===void 0?n:e.photoIndex;r[n]=t[i]||null}),W.setJSON(`slotPhotos:${n.id}`,r),console.log(` Test data created for FremioSeries-black-3`),console.log(`Photos:`,t.length),console.log(`Frame config:`,n),window.location.reload()},style:{padding:`4px 9px`,background:`#e74c3c`,color:`white`,border:`none`,borderRadius:`3px`,fontSize:`11px`,cursor:`pointer`},children:` Load Black-3 Test Data`}),(0,G.jsx)(`button`,{onClick:()=>{rM(),window.location.reload()},style:{padding:`4px 9px`,background:`#dc3545`,color:`white`,border:`none`,borderRadius:`3px`,fontSize:`11px`,cursor:`pointer`},children:`Clear`})]}),(0,G.jsxs)(`div`,{style:{position:`fixed`,left:`10px`,top:`60px`,background:`rgba(0, 0, 0, 0.8)`,color:`white`,padding:`12px`,borderRadius:`8px`,fontSize:`11px`,fontFamily:`monospace`,zIndex:9999,maxWidth:`300px`,maxHeight:`80vh`,overflow:`auto`},children:[(0,G.jsx)(`div`,{style:{fontWeight:`bold`,marginBottom:`8px`,color:`#fbbf24`},children:` DEBUG INFO`}),(0,G.jsxs)(`div`,{style:{marginBottom:`6px`},children:[(0,G.jsx)(`strong`,{children:`Photos:`}),` `,e?`${e.length} items`:`NULL`]}),e&&e.length>0&&(0,G.jsx)(`div`,{style:{marginBottom:`6px`,fontSize:`10px`},children:e.map((e,t)=>(0,G.jsxs)(`div`,{children:[`Photo `,t,`: `,e?`${e.substring(0,30)}... (${e.length} chars)`:`NULL`]},t))}),(0,G.jsxs)(`div`,{style:{marginBottom:`6px`},children:[(0,G.jsx)(`strong`,{children:`FrameSlots:`}),` `,i?`${i.length} slots`:`NULL`]}),i&&i.length>0&&(0,G.jsx)(`div`,{style:{marginBottom:`6px`,fontSize:`10px`},children:i.map((e,t)=>(0,G.jsxs)(`div`,{children:[`Slot `,t,`: zIndex=`,e.zIndex,`, photoIndex=`,e.photoIndex]},t))}),(0,G.jsxs)(`div`,{style:{marginBottom:`6px`},children:[(0,G.jsx)(`strong`,{children:`FrameId:`}),` `,c||`NULL`]}),(0,G.jsxs)(`div`,{style:{marginBottom:`6px`},children:[(0,G.jsx)(`strong`,{children:`SelectedFrame:`}),` `,n?`YES`:`NO`]}),(0,G.jsxs)(`div`,{style:{marginBottom:`6px`},children:[(0,G.jsx)(`strong`,{children:`DuplicatePhotos:`}),` `,f?`YES`:`NO`]}),(0,G.jsxs)(`div`,{style:{marginBottom:`6px`},children:[(0,G.jsx)(`strong`,{children:`DesignerElements:`}),` `,x?.length||0]}),(0,G.jsxs)(`div`,{style:{marginBottom:`6px`},children:[(0,G.jsx)(`strong`,{children:`BackgroundPhoto:`}),` `,C?`YES`:`NO`]}),(0,G.jsx)(`div`,{style:{marginBottom:`6px`,marginTop:`10px`,paddingTop:`10px`,borderTop:`1px solid #444`},children:(0,G.jsx)(`strong`,{style:{color:`#fbbf24`},children:`Rendering Condition:`})}),(0,G.jsxs)(`div`,{style:{marginBottom:`4px`},children:[`frameSlots: `,(0,G.jsx)(`span`,{style:{color:i?`#10b981`:`#ef4444`},children:i?``:``})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`4px`},children:[`photos: `,(0,G.jsx)(`span`,{style:{color:e?`#10b981`:`#ef4444`},children:e?``:``})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`4px`},children:[`photos.length > 0: `,(0,G.jsx)(`span`,{style:{color:e&&e.length>0?`#10b981`:`#ef4444`},children:e&&e.length>0?``:``})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`4px`,fontWeight:`bold`,color:i&&e&&e.length>0?`#10b981`:`#ef4444`},children:[`SHOULD RENDER: `,i&&e&&e.length>0?`YES `:`NO `]})]}),(0,G.jsxs)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`10px`,maxWidth:`460px`,margin:`0 auto`,width:`100%`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`6px`,alignItems:`center`},children:[(0,G.jsx)(`button`,{onClick:async()=>{if(!u)try{d(!0);let t=c||W.getItem(`selectedFrame`);if(!t)return;let n=await Ak(t);if(n?.slots){E(n),a(n.slots),p(!!n.duplicatePhotos);let r=Array.isArray(n?.designer?.elements)?n.designer.elements.filter(e=>e&&e.type!==`photo`&&e.type!==`background-photo`&&!e?.data?.__capturedOverlay):[];S(r);let i=Array.isArray(n?.designer?.elements)?n.designer.elements.find(e=>e?.type===`background-photo`):null;if(w(i),n.duplicatePhotos){let r={};n.slots.forEach((t,n)=>{let i=t.photoIndex===void 0?n:t.photoIndex;r[n]=Array.isArray(e)&&e[i]?e[i]:null}),h(r),O(t,r)}else h({});W.setJSON(`frameConfig`,n);let o=nA(n);if(o){s(o);try{W.setJSON(`frameLayerPlan`,o)}catch(e){console.warn(` Failed to persist reloaded frame layer plan`,e)}}else s(null),W.removeItem(`frameLayerPlan`);console.log(` Editor: reloaded frame slots`)}}finally{d(!1)}},style:{padding:`5px 10px`,background:`#6c757d`,color:`#fff`,border:`none`,borderRadius:`6px`,cursor:`pointer`,fontSize:`0.78rem`},children:u?` Reloading...`:` Reload Config`}),(0,G.jsx)(`div`,{style:{padding:`3px 8px`,background:`#e8f2ff`,color:`#0f3d8c`,borderRadius:`999px`,fontSize:`0.7rem`,border:`1px solid #c7ddff`},children:` Drag foto antar slot untuk menukar posisi`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,alignItems:`center`,minHeight:`300px`},children:[(0,G.jsx)(`h3`,{style:{margin:`0 0 6px 0`,fontSize:`0.85rem`,fontWeight:`500`,color:`#333`,textAlign:`center`},children:`Preview`}),n&&i&&Array.isArray(i)?(0,G.jsxs)(`div`,{style:{position:`relative`,width:`188px`,height:`282px`,background:A(c)&&(T?.layout?.backgroundColor||T?.designer?.canvasBackground)||`#fff`,borderRadius:`10px`,boxShadow:`0 3px 10px rgba(15,23,42,0.12)`,border:`1px solid #e2e8f0`,overflow:`hidden`},children:[C&&C.data?.image&&(0,G.jsx)(`div`,{style:{position:`absolute`,left:0,top:0,width:`100%`,height:`100%`,zIndex:Number.isFinite(C.zIndex)?C.zIndex:-4e3,overflow:`hidden`,pointerEvents:`none`},children:(0,G.jsx)(`img`,{src:C.data.image,alt:`Background`,style:{width:`100%`,height:`100%`,objectFit:`cover`,pointerEvents:`none`}})}),(()=>(console.log(` PHOTO RENDERING BLOCK:`,{hasFrameSlots:!!i,frameSlotsLength:i?.length,hasPhotos:!!e,photosLength:e?.length,photosIsArray:Array.isArray(e),condition:i&&e&&e.length>0,willRender:!!(i&&e&&e.length>0)}),!i||!e||e.length===0?(console.error(` PHOTO RENDERING BLOCKED:`,{frameSlots:!!i,photos:!!e,photosLength:e?.length}),(0,G.jsxs)(`div`,{style:{position:`absolute`,inset:`10px`,background:`rgba(255, 0, 0, 0.2)`,border:`3px dashed red`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`12px`,color:`red`,fontWeight:600,textAlign:`center`,zIndex:9999},children:[` NO PHOTOS`,(0,G.jsx)(`br`,{}),`frameSlots: `,i?`YES`:`NO`,(0,G.jsx)(`br`,{}),`photos: `,e?`YES`:`NO`,(0,G.jsx)(`br`,{}),`photos.length: `,e?.length||0]})):i.map((t,n)=>{let r=t.photoIndex===void 0?n:t.photoIndex,i=f&&m?.[n]||e[r];if(!i)return console.warn(` No photo for slot ${n}`),null;let a=g?.slotIndex===n,o=v===n,s=Number.isFinite(t.zIndex)&&t.zIndex>=0?t.zIndex:100+n;return console.log(` Rendering photo slot ${n}:`,{slotId:t.id,slotZIndex:t.zIndex,finalZIndex:s,usedOriginal:Number.isFinite(t.zIndex),zIndex:s,hasSource:!!i,position:{left:t.left,top:t.top,width:t.width,height:t.height}}),(0,G.jsx)(`div`,{style:{position:`absolute`,left:`${(t.left||0)*100}%`,top:`${(t.top||0)*100}%`,width:`${(t.width||0)*100}%`,height:`${(t.height||0)*100}%`,overflow:`hidden`,borderRadius:`6px`,background:`#f0f0f0`,outline:o?`3px solid #4f46e5`:`none`,cursor:a?`grabbing`:`grab`,opacity:a?.85:1,boxShadow:o?`0 4px 12px rgba(79, 70, 229, 0.3)`:`none`,zIndex:s},draggable:!0,onDragStart:e=>P(e,n),onDragEnd:()=>_(null),onDragOver:e=>ee(e,n),onDragEnter:e=>F(e,n),onDragLeave:I,onDrop:e=>L(e,n),children:(0,G.jsx)(`img`,{src:i,alt:`Photo ${n+1}`,style:{width:`100%`,height:`100%`,objectFit:`cover`,pointerEvents:`none`}})},`photo-slot-${n}`)})))(),x&&x.length>0&&x.map((e,t)=>{if(!e||!e.type)return null;let n=Number.isFinite(e.zIndex)?e.zIndex:200+t,r=T?.layout?.canvasWidth||1080,i=T?.layout?.canvasHeight||1920,a=188/r,o=282/i,s=(e.x||0)*a,c=(e.y||0)*o,l=(e.width||100)*a,u=(e.height||100)*o;if(console.log(` Rendering designer element ${t}:`,{type:e.type,id:e.id?.slice(0,8),elementZIndex:e.zIndex,finalZIndex:n,usedOriginal:Number.isFinite(e.zIndex)}),e.type===`text`){let r=(e.data?.fontSize||24)*a;return(0,G.jsx)(`div`,{style:{position:`absolute`,left:`${s}px`,top:`${c}px`,width:`${l}px`,height:`${u}px`,zIndex:n,pointerEvents:`none`,fontFamily:e.data?.fontFamily||`Inter`,fontSize:`${r}px`,color:e.data?.color||`#111827`,fontWeight:e.data?.fontWeight||500,textAlign:e.data?.align||`left`,display:`flex`,alignItems:`center`,justifyContent:e.data?.align===`center`?`center`:e.data?.align===`right`?`flex-end`:`flex-start`,whiteSpace:`pre-wrap`,lineHeight:1.25},children:e.data?.text||`Text`},`designer-${e.id||t}`)}return e.type===`shape`?(0,G.jsx)(`div`,{style:{position:`absolute`,left:`${s}px`,top:`${c}px`,width:`${l}px`,height:`${u}px`,zIndex:n,pointerEvents:`none`,background:e.data?.fill||`#f4d3c2`,borderRadius:`${(e.data?.borderRadius||24)*a}px`}},`designer-${e.id||t}`):e.type===`upload`&&e.data?.image?(0,G.jsx)(`div`,{style:{position:`absolute`,left:`${s}px`,top:`${c}px`,width:`${l}px`,height:`${u}px`,zIndex:n,pointerEvents:`none`,borderRadius:`${(e.data?.borderRadius||24)*a}px`,overflow:`hidden`},children:(0,G.jsx)(`img`,{src:e.data.image,alt:`Element`,style:{width:`100%`,height:`100%`,objectFit:e.data?.objectFit||`cover`}})},`designer-${e.id||t}`):null}),!A(c)&&n&&(0,G.jsx)(`img`,{src:n,alt:`Frame`,style:{position:`absolute`,inset:0,width:`100%`,height:`100%`,objectFit:`contain`,pointerEvents:`none`,zIndex:1e3}})]}):(0,G.jsx)(`div`,{style:{height:`260px`,width:`188px`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`#666`,background:`#fff`,border:`1px dashed #cbd5f5`,borderRadius:`10px`},children:`No frame selected`})]}),(0,G.jsx)(`button`,{onClick:()=>{console.log(`=== DEBUG EDITOR DATA ===`),console.log(`Photos from state:`,e),console.log(`SelectedFrame from state:`,n),console.log(`FrameSlots from state:`,i),console.log(`DuplicatePhotos:`,f),console.log(`SlotPhotos:`,m),console.log(`DraggedPhoto:`,g),console.log(`DragOverSlot:`,v),console.log(`LocalStorage capturedPhotos:`,W.getItem(`capturedPhotos`)),console.log(`LocalStorage selectedFrame:`,W.getItem(`selectedFrame`)),console.log(`LocalStorage frameConfig:`,W.getItem(`frameConfig`)),console.log(`LocalStorage frameSlots (legacy):`,W.getItem(`frameSlots`))},style:{marginTop:`8px`,background:`#17a2b8`,color:`white`,border:`none`,borderRadius:`13px`,padding:`7px 18px`,fontSize:`0.75rem`,cursor:`pointer`},children:` Debug Drag & Drop`}),(0,G.jsxs)(`div`,{style:{marginTop:`8px`,display:`flex`,gap:`4px`},children:[(0,G.jsx)(`button`,{onClick:()=>{nM(),window.location.reload()},style:{background:`#28a745`,color:`white`,border:`none`,borderRadius:`10px`,padding:`5px 10px`,fontSize:`0.68rem`,cursor:`pointer`},children:`Create Test Data`}),(0,G.jsx)(`button`,{onClick:()=>{rM(),window.location.reload()},style:{background:`#dc3545`,color:`white`,border:`none`,borderRadius:`10px`,padding:`5px 10px`,fontSize:`0.68rem`,cursor:`pointer`},children:`Clear Test Data`})]})]})]})}var dN=s(((exports,t)=>{
/*!
* html2canvas 1.4.1 <https://html2canvas.hertzen.com>
* Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
* Released under MIT License
*/
(function(n,r){typeof exports==`object`&&t!==void 0?t.exports=r():typeof define==`function`&&define.amd?define(r):(n=typeof globalThis<`u`?globalThis:n||self,n.html2canvas=r())})(exports,(function(){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};function r(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function i(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function a(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||t)}for(var o=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,i){return new e(this.left+t,this.top+n,this.width+r,this.height+i)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(e){return e.width!==0});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),s=function(e,t){return o.fromClientRect(e,t.getBoundingClientRect())},c=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw Error(`Unable to get document size`);var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),i=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new o(0,0,r,i)},l=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);(a&64512)==56320?t.push(((i&1023)<<10)+(a&1023)+65536):(t.push(i),n--)}else t.push(i)}return t},u=function(){var e=[...arguments];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var t=e.length;if(!t)return``;for(var n=[],r=-1,i=``;++r<t;){var a=e[r];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(r+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},d=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,f=typeof Uint8Array>`u`?[]:new Uint8Array(256),p=0;p<d.length;p++)f[d.charCodeAt(p)]=p;for(var m=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,h=typeof Uint8Array>`u`?[]:new Uint8Array(256),g=0;g<m.length;g++)h[m.charCodeAt(g)]=g;for(var _=function(e){var t=e.length*.75,n=e.length,r,i=0,a,o,s,c;e[e.length-1]===`=`&&(t--,e[e.length-2]===`=`&&t--);var l=typeof ArrayBuffer<`u`&&typeof Uint8Array<`u`&&Uint8Array.prototype.slice!==void 0?new ArrayBuffer(t):Array(t),u=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<n;r+=4)a=h[e.charCodeAt(r)],o=h[e.charCodeAt(r+1)],s=h[e.charCodeAt(r+2)],c=h[e.charCodeAt(r+3)],u[i++]=a<<2|o>>4,u[i++]=(o&15)<<4|s>>2,u[i++]=(s&3)<<6|c&63;return l},v=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},y=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},b=5,x=11,S=2,C=x-b,w=65536>>b,T=(1<<b)-1,E=1024>>b,D=w+E+32,O=65536>>x,k=(1<<C)-1,A=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},j=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},M=function(e,t){var n=_(e),r=Array.isArray(n)?y(n):new Uint32Array(n),i=Array.isArray(n)?v(n):new Uint16Array(n),a=24,o=A(i,a/2,r[4]/2),s=r[5]===2?A(i,(a+r[4])/2):j(r,Math.ceil((a+r[4])/4));return new N(r[0],r[1],r[2],r[3],o,s)},N=function(){function e(e,t,n,r,i,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=a}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>b],t=(t<<S)+(e&T),this.data[t];if(e<=65535)return t=this.index[w+(e-55296>>b)],t=(t<<S)+(e&T),this.data[t];if(e<this.highStart)return t=D-O+(e>>x),t=this.index[t],t+=e>>b&k,t=this.index[t],t=(t<<S)+(e&T),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),P=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,ee=typeof Uint8Array>`u`?[]:new Uint8Array(256),F=0;F<P.length;F++)ee[P.charCodeAt(F)]=F;var I=`KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==`,L=50,R=1,te=2,z=3,B=4,V=5,H=7,ne=8,re=9,U=10,ie=11,ae=12,oe=13,se=14,ce=15,le=16,ue=17,de=18,fe=19,pe=20,me=21,he=22,ge=23,_e=24,ve=25,ye=26,be=27,xe=28,Se=29,Ce=30,we=31,Te=32,Ee=33,De=34,Oe=35,ke=36,Ae=37,je=38,Me=39,Ne=40,Pe=41,Fe=42,Ie=43,Le=[9001,65288],Re=`!`,ze=``,Be=``,Ve=M(I),He=[Ce,ke],Ue=[R,te,z,V],We=[U,ne],Ge=[be,ye],Ke=Ue.concat(We),qe=[je,Me,Ne,De,Oe],Je=[ce,oe],Ye=function(e,t){t===void 0&&(t=`strict`);var n=[],r=[],i=[];return e.forEach(function(e,a){var o=Ve.get(e);if(o>L?(i.push(!0),o-=L):i.push(!1),[`normal`,`auto`,`loose`].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(e)!==-1)return r.push(a),n.push(le);if(o===B||o===ie){if(a===0)return r.push(a),n.push(Ce);var s=n[a-1];return Ke.indexOf(s)===-1?(r.push(r[a-1]),n.push(s)):(r.push(a),n.push(Ce))}if(r.push(a),o===we)return n.push(t===`strict`?me:Ae);if(o===Fe||o===Se)return n.push(Ce);if(o===Ie)return e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(Ae):n.push(Ce);n.push(o)}),[r,n,i]},Xe=function(e,t,n,r){var i=r[n];if(Array.isArray(e)?e.indexOf(i)!==-1:e===i)for(var a=n;a<=r.length;){a++;var o=r[a];if(o===t)return!0;if(o!==U)break}if(i===U)for(var a=n;a>0;){a--;var s=r[a];if(Array.isArray(e)?e.indexOf(s)!==-1:e===s)for(var c=n;c<=r.length;){c++;var o=r[c];if(o===t)return!0;if(o!==U)break}if(s!==U)break}return!1},Ze=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r===U)n--;else return r}return 0},Qe=function(e,t,n,r,i){if(n[r]===0)return ze;var a=r-1;if(Array.isArray(i)&&i[a]===!0)return ze;var o=a-1,s=a+1,c=t[a],l=o>=0?t[o]:0,u=t[s];if(c===te&&u===z)return ze;if(Ue.indexOf(c)!==-1)return Re;if(Ue.indexOf(u)!==-1||We.indexOf(u)!==-1)return ze;if(Ze(a,t)===ne)return Be;if(Ve.get(e[a])===ie||(c===Te||c===Ee)&&Ve.get(e[s])===ie||c===H||u===H||c===re||[U,oe,ce].indexOf(c)===-1&&u===re||[ue,de,fe,_e,xe].indexOf(u)!==-1||Ze(a,t)===he||Xe(ge,he,a,t)||Xe([ue,de],me,a,t)||Xe(ae,ae,a,t))return ze;if(c===U)return Be;if(c===ge||u===ge)return ze;if(u===le||c===le)return Be;if([oe,ce,me].indexOf(u)!==-1||c===se||l===ke&&Je.indexOf(c)!==-1||c===xe&&u===ke||u===pe||He.indexOf(u)!==-1&&c===ve||He.indexOf(c)!==-1&&u===ve||c===be&&[Ae,Te,Ee].indexOf(u)!==-1||[Ae,Te,Ee].indexOf(c)!==-1&&u===ye||He.indexOf(c)!==-1&&Ge.indexOf(u)!==-1||Ge.indexOf(c)!==-1&&He.indexOf(u)!==-1||[be,ye].indexOf(c)!==-1&&(u===ve||[he,ce].indexOf(u)!==-1&&t[s+1]===ve)||[he,ce].indexOf(c)!==-1&&u===ve||c===ve&&[ve,xe,_e].indexOf(u)!==-1)return ze;if([ve,xe,_e,ue,de].indexOf(u)!==-1)for(var d=a;d>=0;){var f=t[d];if(f===ve)return ze;if([xe,_e].indexOf(f)!==-1)d--;else break}if([be,ye].indexOf(u)!==-1)for(var d=[ue,de].indexOf(c)===-1?a:o;d>=0;){var f=t[d];if(f===ve)return ze;if([xe,_e].indexOf(f)!==-1)d--;else break}if(je===c&&[je,Me,De,Oe].indexOf(u)!==-1||[Me,De].indexOf(c)!==-1&&[Me,Ne].indexOf(u)!==-1||[Ne,Oe].indexOf(c)!==-1&&u===Ne||qe.indexOf(c)!==-1&&[pe,ye].indexOf(u)!==-1||qe.indexOf(u)!==-1&&c===be||He.indexOf(c)!==-1&&He.indexOf(u)!==-1||c===_e&&He.indexOf(u)!==-1||He.concat(ve).indexOf(c)!==-1&&u===he&&Le.indexOf(e[s])===-1||He.concat(ve).indexOf(u)!==-1&&c===de)return ze;if(c===Pe&&u===Pe){for(var p=n[a],m=1;p>0&&(p--,t[p]===Pe);)m++;if(m%2!=0)return ze}return c===Te&&u===Ee?ze:Be},$e=function(e,t){t||={lineBreak:`normal`,wordBreak:`normal`};var n=Ye(e,t.lineBreak),r=n[0],i=n[1],a=n[2];(t.wordBreak===`break-all`||t.wordBreak===`break-word`)&&(i=i.map(function(e){return[ve,Ce,Fe].indexOf(e)===-1?e:Ae}));var o=t.wordBreak===`keep-all`?a.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0;return[r,i,o]},et=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Re,this.start=n,this.end=r}return e.prototype.slice=function(){return u.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),tt=function(e,t){var n=l(e),r=$e(n,t),i=r[0],a=r[1],o=r[2],s=n.length,c=0,u=0;return{next:function(){if(u>=s)return{done:!0,value:null};for(var e=ze;u<s&&(e=Qe(n,a,i,++u,o))===ze;);if(e!==ze||u===s){var t=new et(n,e,c,u);return c=u,{value:t,done:!1}}return{done:!0,value:null}}}},nt=1,rt=2,it=4,at=8,ot=10,st=47,ct=92,lt=9,ut=32,dt=34,ft=61,pt=35,mt=36,ht=37,gt=39,_t=40,vt=41,yt=95,bt=45,xt=33,St=60,Ct=62,wt=64,Tt=91,Et=93,Dt=61,Ot=123,kt=63,At=125,jt=124,Mt=126,Nt=128,Pt=65533,Ft=42,It=43,Lt=44,Rt=58,zt=59,Bt=46,Vt=0,Ht=8,Ut=11,Wt=14,Gt=31,Kt=127,qt=-1,Jt=48,Yt=97,Xt=101,Zt=102,Qt=117,$t=122,en=65,tn=69,nn=70,rn=85,an=90,on=function(e){return e>=Jt&&e<=57},sn=function(e){return e>=55296&&e<=57343},cn=function(e){return on(e)||e>=en&&e<=nn||e>=Yt&&e<=Zt},ln=function(e){return e>=Yt&&e<=$t},un=function(e){return e>=en&&e<=an},dn=function(e){return ln(e)||un(e)},fn=function(e){return e>=Nt},pn=function(e){return e===ot||e===lt||e===ut},mn=function(e){return dn(e)||fn(e)||e===yt},hn=function(e){return mn(e)||on(e)||e===bt},gn=function(e){return e>=Vt&&e<=Ht||e===Ut||e>=Wt&&e<=Gt||e===Kt},_n=function(e,t){return e===ct?t!==ot:!1},vn=function(e,t,n){return e===bt?mn(t)||_n(t,n):mn(e)?!0:!!(e===ct&&_n(e,t))},yn=function(e,t,n){return e===It||e===bt?on(t)?!0:t===Bt&&on(n):on(e===Bt?t:e)},bn=function(e){var t=0,n=1;(e[t]===It||e[t]===bt)&&(e[t]===bt&&(n=-1),t++);for(var r=[];on(e[t]);)r.push(e[t++]);var i=r.length?parseInt(u.apply(void 0,r),10):0;e[t]===Bt&&t++;for(var a=[];on(e[t]);)a.push(e[t++]);var o=a.length,s=o?parseInt(u.apply(void 0,a),10):0;(e[t]===tn||e[t]===Xt)&&t++;var c=1;(e[t]===It||e[t]===bt)&&(e[t]===bt&&(c=-1),t++);for(var l=[];on(e[t]);)l.push(e[t++]);var d=l.length?parseInt(u.apply(void 0,l),10):0;return n*(i+s*10**-o)*10**(c*d)},xn={type:2},Sn={type:3},Cn={type:4},wn={type:13},Tn={type:8},En={type:21},Dn={type:9},On={type:10},W={type:11},kn={type:12},An={type:14},jn={type:23},Mn={type:1},G={type:25},Nn={type:24},Pn={type:26},Fn={type:27},In={type:28},Ln={type:29},Rn={type:31},zn={type:32},Bn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(l(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==zn;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case dt:return this.consumeStringToken(dt);case pt:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(hn(t)||_n(n,r)){var i=vn(t,n,r)?rt:nt,a=this.consumeName();return{type:5,value:a,flags:i}}break;case mt:if(this.peekCodePoint(0)===ft)return this.consumeCodePoint(),wn;break;case gt:return this.consumeStringToken(gt);case _t:return xn;case vt:return Sn;case Ft:if(this.peekCodePoint(0)===ft)return this.consumeCodePoint(),An;break;case It:if(yn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Lt:return Cn;case bt:var o=e,s=this.peekCodePoint(0),c=this.peekCodePoint(1);if(yn(o,s,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(vn(o,s,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(s===bt&&c===Ct)return this.consumeCodePoint(),this.consumeCodePoint(),Nn;break;case Bt:if(yn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case st:if(this.peekCodePoint(0)===Ft)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===Ft&&(l=this.consumeCodePoint(),l===st)||l===qt)return this.consumeToken()}break;case Rt:return Pn;case zt:return Fn;case St:if(this.peekCodePoint(0)===xt&&this.peekCodePoint(1)===bt&&this.peekCodePoint(2)===bt)return this.consumeCodePoint(),this.consumeCodePoint(),G;break;case wt:var d=this.peekCodePoint(0),f=this.peekCodePoint(1),p=this.peekCodePoint(2);if(vn(d,f,p)){var a=this.consumeName();return{type:7,value:a}}break;case Tt:return In;case ct:if(_n(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Et:return Ln;case Dt:if(this.peekCodePoint(0)===ft)return this.consumeCodePoint(),Tn;break;case Ot:return W;case At:return kn;case Qt:case rn:var m=this.peekCodePoint(0),h=this.peekCodePoint(1);return m===It&&(cn(h)||h===kt)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case jt:if(this.peekCodePoint(0)===ft)return this.consumeCodePoint(),Dn;if(this.peekCodePoint(0)===jt)return this.consumeCodePoint(),En;break;case Mt:if(this.peekCodePoint(0)===ft)return this.consumeCodePoint(),On;break;case qt:return zn}return pn(e)?(this.consumeWhiteSpace(),Rn):on(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):mn(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:u(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return e===void 0?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();cn(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===kt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var r=parseInt(u.apply(void 0,e.map(function(e){return e===kt?Jt:e})),16),i=parseInt(u.apply(void 0,e.map(function(e){return e===kt?nn:e})),16);return{type:30,start:r,end:i}}var a=parseInt(u.apply(void 0,e),16);if(this.peekCodePoint(0)===bt&&cn(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];cn(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var i=parseInt(u.apply(void 0,o),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()===`url`&&this.peekCodePoint(0)===_t?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===_t?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===qt)return{type:22,value:``};var t=this.peekCodePoint(0);if(t===gt||t===dt){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===qt||this.peekCodePoint(0)===vt)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),jn)}for(;;){var r=this.consumeCodePoint();if(r===qt||r===vt)return{type:22,value:u.apply(void 0,e)};if(pn(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===qt||this.peekCodePoint(0)===vt?(this.consumeCodePoint(),{type:22,value:u.apply(void 0,e)}):(this.consumeBadUrlRemnants(),jn);if(r===dt||r===gt||r===_t||gn(r))return this.consumeBadUrlRemnants(),jn;if(r===ct)if(_n(r,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),jn;else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;pn(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===vt||e===qt)return;_n(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n=``;e>0;){var r=Math.min(t,e);n+=u.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){var t=``,n=0;do{var r=this._value[n];if(r===qt||r===void 0||r===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(r===ot)return this._value.splice(0,n),Mn;if(r===ct){var i=this._value[n+1];i!==qt&&i!==void 0&&(i===ot?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):_n(r,i)&&(t+=this.consumeStringSlice(n),t+=u(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var e=[],t=it,n=this.peekCodePoint(0);for((n===It||n===bt)&&e.push(this.consumeCodePoint());on(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===Bt&&on(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=at;on(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===tn||n===Xt)&&((r===It||r===bt)&&on(i)||on(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=at;on(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[bn(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(vn(r,i,a)){var o=this.consumeName();return{type:15,number:t,flags:n,unit:o}}return r===ht?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(cn(e)){for(var t=u(e);cn(this.peekCodePoint(0))&&t.length<6;)t+=u(this.consumeCodePoint());pn(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||sn(n)||n>1114111?Pt:n}return e===qt?Pt:e},e.prototype.consumeName=function(){for(var e=``;;){var t=this.consumeCodePoint();if(hn(t))e+=u(t);else if(_n(t,this.peekCodePoint(0)))e+=u(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},e}(),Vn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Bn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw SyntaxError(`Error parsing CSS component value, unexpected EOF`);this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw SyntaxError(`Error parsing CSS component value, multiple values found when expecting only one`)},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Xn(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return e===void 0?zn:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),Hn=function(e){return e.type===15},Un=function(e){return e.type===17},Wn=function(e){return e.type===20},Gn=function(e){return e.type===0},Kn=function(e,t){return Wn(e)&&e.value===t},qn=function(e){return e.type!==31},Jn=function(e){return e.type!==31&&e.type!==4},Yn=function(e){var t=[],n=[];return e.forEach(function(e){if(e.type===4){if(n.length===0)throw Error(`Error parsing function args, zero tokens for arg`);t.push(n),n=[];return}e.type!==31&&n.push(e)}),n.length&&t.push(n),t},Xn=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Zn=function(e){return e.type===17||e.type===15},Qn=function(e){return e.type===16||Zn(e)},$n=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},er={type:17,number:0,flags:it},tr={type:16,number:50,flags:it},nr={type:16,number:100,flags:it},rr=function(e,t,n){var r=e[0],i=e[1];return[ir(r,t),ir(i===void 0?r:i,n)]},ir=function(e,t){if(e.type===16)return e.number/100*t;if(Hn(e))switch(e.unit){case`rem`:case`em`:return 16*e.number;case`px`:default:return e.number}return e.number},ar=`deg`,or=`grad`,sr=`rad`,cr=`turn`,lr={name:`angle`,parse:function(e,t){if(t.type===15)switch(t.unit){case ar:return Math.PI*t.number/180;case or:return Math.PI/200*t.number;case sr:return t.number;case cr:return Math.PI*2*t.number}throw Error(`Unsupported angle type`)}},ur=function(e){return e.type===15&&(e.unit===ar||e.unit===or||e.unit===sr||e.unit===cr)},dr=function(e){switch(e.filter(Wn).map(function(e){return e.value}).join(` `)){case`to bottom right`:case`to right bottom`:case`left top`:case`top left`:return[er,er];case`to top`:case`bottom`:return fr(0);case`to bottom left`:case`to left bottom`:case`right top`:case`top right`:return[er,nr];case`to right`:case`left`:return fr(90);case`to top left`:case`to left top`:case`right bottom`:case`bottom right`:return[nr,nr];case`to bottom`:case`top`:return fr(180);case`to top right`:case`to right top`:case`left bottom`:case`bottom left`:return[nr,er];case`to left`:case`right`:return fr(270)}return 0},fr=function(e){return Math.PI*e/180},pr={name:`color`,parse:function(e,t){if(t.type===18){var n=xr[t.name];if(n===void 0)throw Error(`Attempting to parse an unsupported color function "`+t.name+`"`);return n(e,t.values)}if(t.type===5){if(t.value.length===3){var r=t.value.substring(0,1),i=t.value.substring(1,2),a=t.value.substring(2,3);return gr(parseInt(r+r,16),parseInt(i+i,16),parseInt(a+a,16),1)}if(t.value.length===4){var r=t.value.substring(0,1),i=t.value.substring(1,2),a=t.value.substring(2,3),o=t.value.substring(3,4);return gr(parseInt(r+r,16),parseInt(i+i,16),parseInt(a+a,16),parseInt(o+o,16)/255)}if(t.value.length===6){var r=t.value.substring(0,2),i=t.value.substring(2,4),a=t.value.substring(4,6);return gr(parseInt(r,16),parseInt(i,16),parseInt(a,16),1)}if(t.value.length===8){var r=t.value.substring(0,2),i=t.value.substring(2,4),a=t.value.substring(4,6),o=t.value.substring(6,8);return gr(parseInt(r,16),parseInt(i,16),parseInt(a,16),parseInt(o,16)/255)}}if(t.type===20){var s=Cr[t.value.toUpperCase()];if(s!==void 0)return s}return Cr.TRANSPARENT}},mr=function(e){return(255&e)==0},hr=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,i=255&e>>24;return t<255?`rgba(`+i+`,`+r+`,`+n+`,`+t/255+`)`:`rgb(`+i+`,`+r+`,`+n+`)`},gr=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(r*255)<<0)>>>0},_r=function(e,t){if(e.type===17)return e.number;if(e.type===16){var n=t===3?1:255;return t===3?e.number/100*n:Math.round(e.number/100*n)}return 0},vr=function(e,t){var n=t.filter(Jn);if(n.length===3){var r=n.map(_r),i=r[0],a=r[1],o=r[2];return gr(i,a,o,1)}if(n.length===4){var s=n.map(_r),i=s[0],a=s[1],o=s[2],c=s[3];return gr(i,a,o,c)}return 0};function yr(e,t,n){return n<0&&(n+=1),n>=1&&--n,n<1/6?(t-e)*n*6+e:n<1/2?t:n<2/3?(t-e)*6*(2/3-n)+e:e}var br=function(e,t){var n=t.filter(Jn),r=n[0],i=n[1],a=n[2],o=n[3],s=(r.type===17?fr(r.number):lr.parse(e,r))/(Math.PI*2),c=Qn(i)?i.number/100:0,l=Qn(a)?a.number/100:0,u=o!==void 0&&Qn(o)?ir(o,1):1;if(c===0)return gr(l*255,l*255,l*255,1);var d=l<=.5?l*(c+1):l+c-l*c,f=l*2-d,p=yr(f,d,s+1/3),m=yr(f,d,s),h=yr(f,d,s-1/3);return gr(p*255,m*255,h*255,u)},xr={hsl:br,hsla:br,rgb:vr,rgba:vr},Sr=function(e,t){return pr.parse(e,Vn.create(t).parseComponentValue())},Cr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},wr={name:`background-clip`,initialValue:`border-box`,prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Wn(e))switch(e.value){case`padding-box`:return 1;case`content-box`:return 2}return 0})}},Tr={name:`background-color`,initialValue:`transparent`,prefix:!1,type:3,format:`color`},Er=function(e,t){var n=pr.parse(e,t[0]),r=t[1];return r&&Qn(r)?{color:n,stop:r}:{color:n,stop:null}},Dr=function(e,t){var n=e[0],r=e[e.length-1];n.stop===null&&(n.stop=er),r.stop===null&&(r.stop=nr);for(var i=[],a=0,o=0;o<e.length;o++){var s=e[o].stop;if(s!==null){var c=ir(s,t);c>a?i.push(c):i.push(a),a=c}else i.push(null)}for(var l=null,o=0;o<i.length;o++){var u=i[o];if(u===null)l===null&&(l=o);else if(l!==null){for(var d=o-l,f=i[l-1],p=(u-f)/(d+1),m=1;m<=d;m++)i[l+m-1]=p*m;l=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,i[n]/t),0)}})},Or=function(e,t,n){var r=t/2,i=n/2,a=ir(e[0],t)-r,o=i-ir(e[1],n);return(Math.atan2(o,a)+Math.PI*2)%(Math.PI*2)},kr=function(e,t,n){var r=typeof e==`number`?e:Or(e,t,n),i=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),a=t/2,o=n/2,s=i/2,c=Math.sin(r-Math.PI/2)*s,l=Math.cos(r-Math.PI/2)*s;return[i,a-l,a+l,o-c,o+c]},Ar=function(e,t){return Math.sqrt(e*e+t*t)},jr=function(e,t,n,r,i){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var a=t[0],o=t[1],s=Ar(n-a,r-o);return(i?s<e.optimumDistance:s>e.optimumDistance)?{optimumCorner:t,optimumDistance:s}:e},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Mr=function(e,t,n,r,i){var a=0,o=0;switch(e.size){case 0:e.shape===0?a=o=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):e.shape===1&&(a=Math.min(Math.abs(t),Math.abs(t-r)),o=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(e.shape===0)a=o=Math.min(Ar(t,n),Ar(t,n-i),Ar(t-r,n),Ar(t-r,n-i));else if(e.shape===1){var s=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(t),Math.abs(t-r)),c=jr(r,i,t,n,!0),l=c[0],u=c[1];a=Ar(l-t,(u-n)/s),o=s*a}break;case 1:e.shape===0?a=o=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):e.shape===1&&(a=Math.max(Math.abs(t),Math.abs(t-r)),o=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(e.shape===0)a=o=Math.max(Ar(t,n),Ar(t,n-i),Ar(t-r,n),Ar(t-r,n-i));else if(e.shape===1){var s=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(t),Math.abs(t-r)),d=jr(r,i,t,n,!1),l=d[0],u=d[1];a=Ar(l-t,(u-n)/s),o=s*a}break}return Array.isArray(e.size)&&(a=ir(e.size[0],r),o=e.size.length===2?ir(e.size[1],i):a),[a,o]},Nr=function(e,t){var n=fr(180),r=[];return Yn(t).forEach(function(t,i){if(i===0){var a=t[0];if(a.type===20&&a.value===`to`){n=dr(t);return}else if(ur(a)){n=lr.parse(e,a);return}}var o=Er(e,t);r.push(o)}),{angle:n,stops:r,type:1}},Pr=function(e,t){var n=fr(180),r=[];return Yn(t).forEach(function(t,i){if(i===0){var a=t[0];if(a.type===20&&[`top`,`left`,`right`,`bottom`].indexOf(a.value)!==-1){n=dr(t);return}else if(ur(a)){n=(lr.parse(e,a)+fr(270))%fr(360);return}}var o=Er(e,t);r.push(o)}),{angle:n,stops:r,type:1}},Fr=function(e,t){var n=fr(180),r=[],i=1;return Yn(t).forEach(function(t,n){var a=t[0];if(n===0){if(Wn(a)&&a.value===`linear`){i=1;return}else if(Wn(a)&&a.value===`radial`){i=2;return}}if(a.type===18){if(a.name===`from`){var o=pr.parse(e,a.values[0]);r.push({stop:er,color:o})}else if(a.name===`to`){var o=pr.parse(e,a.values[0]);r.push({stop:nr,color:o})}else if(a.name===`color-stop`){var s=a.values.filter(Jn);if(s.length===2){var o=pr.parse(e,s[1]),c=s[0];Un(c)&&r.push({stop:{type:16,number:c.number*100,flags:c.flags},color:o})}}}}),i===1?{angle:(n+fr(180))%fr(360),stops:r,type:i}:{size:3,shape:0,stops:r,position:[],type:i}},Ir=`closest-side`,Lr=`farthest-side`,Rr=`closest-corner`,zr=`farthest-corner`,Br=`circle`,Vr=`ellipse`,Hr=`cover`,Ur=`contain`,Wr=function(e,t){var n=0,r=3,i=[],a=[];return Yn(t).forEach(function(t,o){var s=!0;if(o===0){var c=!1;s=t.reduce(function(e,t){if(c)if(Wn(t))switch(t.value){case`center`:return a.push(tr),e;case`top`:case`left`:return a.push(er),e;case`right`:case`bottom`:return a.push(nr),e}else (Qn(t)||Zn(t))&&a.push(t);else if(Wn(t))switch(t.value){case Br:return n=0,!1;case Vr:return n=1,!1;case`at`:return c=!0,!1;case Ir:return r=0,!1;case Hr:case Lr:return r=1,!1;case Ur:case Rr:return r=2,!1;case zr:return r=3,!1}else if(Zn(t)||Qn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},s)}if(s){var l=Er(e,t);i.push(l)}}),{size:r,shape:n,stops:i,position:a,type:2}},Gr=function(e,t){var n=0,r=3,i=[],a=[];return Yn(t).forEach(function(t,o){var s=!0;if(o===0?s=t.reduce(function(e,t){if(Wn(t))switch(t.value){case`center`:return a.push(tr),!1;case`top`:case`left`:return a.push(er),!1;case`right`:case`bottom`:return a.push(nr),!1}else if(Qn(t)||Zn(t))return a.push(t),!1;return e},s):o===1&&(s=t.reduce(function(e,t){if(Wn(t))switch(t.value){case Br:return n=0,!1;case Vr:return n=1,!1;case Ur:case Ir:return r=0,!1;case Lr:return r=1,!1;case Rr:return r=2,!1;case Hr:case zr:return r=3,!1}else if(Zn(t)||Qn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},s)),s){var c=Er(e,t);i.push(c)}}),{size:r,shape:n,stops:i,position:a,type:2}},Kr=function(e){return e.type===1},qr=function(e){return e.type===2},Jr={name:`image`,parse:function(e,t){if(t.type===22){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(t.type===18){var r=Xr[t.name];if(r===void 0)throw Error(`Attempting to parse an unsupported image function "`+t.name+`"`);return r(e,t.values)}throw Error(`Unsupported image type `+t.type)}};function Yr(e){return!(e.type===20&&e.value===`none`)&&(e.type!==18||!!Xr[e.name])}var Xr={"linear-gradient":Nr,"-moz-linear-gradient":Pr,"-ms-linear-gradient":Pr,"-o-linear-gradient":Pr,"-webkit-linear-gradient":Pr,"radial-gradient":Wr,"-moz-radial-gradient":Gr,"-ms-radial-gradient":Gr,"-o-radial-gradient":Gr,"-webkit-radial-gradient":Gr,"-webkit-gradient":Fr},Zr={name:`background-image`,initialValue:`none`,type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value===`none`?[]:t.filter(function(e){return Jn(e)&&Yr(e)}).map(function(t){return Jr.parse(e,t)})}},Qr={name:`background-origin`,initialValue:`border-box`,prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Wn(e))switch(e.value){case`padding-box`:return 1;case`content-box`:return 2}return 0})}},$r={name:`background-position`,initialValue:`0% 0%`,type:1,prefix:!1,parse:function(e,t){return Yn(t).map(function(e){return e.filter(Qn)}).map($n)}},ei={name:`background-repeat`,initialValue:`repeat`,prefix:!1,type:1,parse:function(e,t){return Yn(t).map(function(e){return e.filter(Wn).map(function(e){return e.value}).join(` `)}).map(ti)}},ti=function(e){switch(e){case`no-repeat`:return 1;case`repeat-x`:case`repeat no-repeat`:return 2;case`repeat-y`:case`no-repeat repeat`:return 3;case`repeat`:default:return 0}},ni;(function(e){e.AUTO=`auto`,e.CONTAIN=`contain`,e.COVER=`cover`})(ni||={});var ri={name:`background-size`,initialValue:`0`,prefix:!1,type:1,parse:function(e,t){return Yn(t).map(function(e){return e.filter(ii)})}},ii=function(e){return Wn(e)||Qn(e)},ai=function(e){return{name:`border-`+e+`-color`,initialValue:`transparent`,prefix:!1,type:3,format:`color`}},oi=ai(`top`),si=ai(`right`),ci=ai(`bottom`),li=ai(`left`),ui=function(e){return{name:`border-radius-`+e,initialValue:`0 0`,prefix:!1,type:1,parse:function(e,t){return $n(t.filter(Qn))}}},di=ui(`top-left`),fi=ui(`top-right`),pi=ui(`bottom-right`),mi=ui(`bottom-left`),hi=function(e){return{name:`border-`+e+`-style`,initialValue:`solid`,prefix:!1,type:2,parse:function(e,t){switch(t){case`none`:return 0;case`dashed`:return 2;case`dotted`:return 3;case`double`:return 4}return 1}}},gi=hi(`top`),_i=hi(`right`),vi=hi(`bottom`),yi=hi(`left`),bi=function(e){return{name:`border-`+e+`-width`,initialValue:`0`,type:0,prefix:!1,parse:function(e,t){return Hn(t)?t.number:0}}},xi=bi(`top`),Si=bi(`right`),Ci=bi(`bottom`),wi=bi(`left`),Ti={name:`color`,initialValue:`transparent`,prefix:!1,type:3,format:`color`},Ei={name:`direction`,initialValue:`ltr`,prefix:!1,type:2,parse:function(e,t){switch(t){case`rtl`:return 1;case`ltr`:default:return 0}}},Di={name:`display`,initialValue:`inline-block`,prefix:!1,type:1,parse:function(e,t){return t.filter(Wn).reduce(function(e,t){return e|Oi(t.value)},0)}},Oi=function(e){switch(e){case`block`:case`-webkit-box`:return 2;case`inline`:return 4;case`run-in`:return 8;case`flow`:return 16;case`flow-root`:return 32;case`table`:return 64;case`flex`:case`-webkit-flex`:return 128;case`grid`:case`-ms-grid`:return 256;case`ruby`:return 512;case`subgrid`:return 1024;case`list-item`:return 2048;case`table-row-group`:return 4096;case`table-header-group`:return 8192;case`table-footer-group`:return 16384;case`table-row`:return 32768;case`table-cell`:return 65536;case`table-column-group`:return 131072;case`table-column`:return 262144;case`table-caption`:return 524288;case`ruby-base`:return 1048576;case`ruby-text`:return 2097152;case`ruby-base-container`:return 4194304;case`ruby-text-container`:return 8388608;case`contents`:return 16777216;case`inline-block`:return 33554432;case`inline-list-item`:return 67108864;case`inline-table`:return 134217728;case`inline-flex`:return 268435456;case`inline-grid`:return 536870912}return 0},ki={name:`float`,initialValue:`none`,prefix:!1,type:2,parse:function(e,t){switch(t){case`left`:return 1;case`right`:return 2;case`inline-start`:return 3;case`inline-end`:return 4}return 0}},Ai={name:`letter-spacing`,initialValue:`0`,prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value===`normal`?0:t.type===17||t.type===15?t.number:0}},ji;(function(e){e.NORMAL=`normal`,e.STRICT=`strict`})(ji||={});var Mi={name:`line-break`,initialValue:`normal`,prefix:!1,type:2,parse:function(e,t){switch(t){case`strict`:return ji.STRICT;case`normal`:default:return ji.NORMAL}}},Ni={name:`line-height`,initialValue:`normal`,prefix:!1,type:4},Pi=function(e,t){return Wn(e)&&e.value===`normal`?1.2*t:e.type===17?t*e.number:Qn(e)?ir(e,t):t},Fi={name:`list-style-image`,initialValue:`none`,type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value===`none`?null:Jr.parse(e,t)}},Ii={name:`list-style-position`,initialValue:`outside`,prefix:!1,type:2,parse:function(e,t){switch(t){case`inside`:return 0;case`outside`:default:return 1}}},Li={name:`list-style-type`,initialValue:`none`,prefix:!1,type:2,parse:function(e,t){switch(t){case`disc`:return 0;case`circle`:return 1;case`square`:return 2;case`decimal`:return 3;case`cjk-decimal`:return 4;case`decimal-leading-zero`:return 5;case`lower-roman`:return 6;case`upper-roman`:return 7;case`lower-greek`:return 8;case`lower-alpha`:return 9;case`upper-alpha`:return 10;case`arabic-indic`:return 11;case`armenian`:return 12;case`bengali`:return 13;case`cambodian`:return 14;case`cjk-earthly-branch`:return 15;case`cjk-heavenly-stem`:return 16;case`cjk-ideographic`:return 17;case`devanagari`:return 18;case`ethiopic-numeric`:return 19;case`georgian`:return 20;case`gujarati`:return 21;case`gurmukhi`:return 22;case`hebrew`:return 22;case`hiragana`:return 23;case`hiragana-iroha`:return 24;case`japanese-formal`:return 25;case`japanese-informal`:return 26;case`kannada`:return 27;case`katakana`:return 28;case`katakana-iroha`:return 29;case`khmer`:return 30;case`korean-hangul-formal`:return 31;case`korean-hanja-formal`:return 32;case`korean-hanja-informal`:return 33;case`lao`:return 34;case`lower-armenian`:return 35;case`malayalam`:return 36;case`mongolian`:return 37;case`myanmar`:return 38;case`oriya`:return 39;case`persian`:return 40;case`simp-chinese-formal`:return 41;case`simp-chinese-informal`:return 42;case`tamil`:return 43;case`telugu`:return 44;case`thai`:return 45;case`tibetan`:return 46;case`trad-chinese-formal`:return 47;case`trad-chinese-informal`:return 48;case`upper-armenian`:return 49;case`disclosure-open`:return 50;case`disclosure-closed`:return 51;case`none`:default:return-1}}},Ri=function(e){return{name:`margin-`+e,initialValue:`0`,prefix:!1,type:4}},zi=Ri(`top`),Bi=Ri(`right`),Vi=Ri(`bottom`),Hi=Ri(`left`),Ui={name:`overflow`,initialValue:`visible`,prefix:!1,type:1,parse:function(e,t){return t.filter(Wn).map(function(e){switch(e.value){case`hidden`:return 1;case`scroll`:return 2;case`clip`:return 3;case`auto`:return 4;case`visible`:default:return 0}})}},Wi={name:`overflow-wrap`,initialValue:`normal`,prefix:!1,type:2,parse:function(e,t){switch(t){case`break-word`:return`break-word`;case`normal`:default:return`normal`}}},Gi=function(e){return{name:`padding-`+e,initialValue:`0`,prefix:!1,type:3,format:`length-percentage`}},Ki=Gi(`top`),qi=Gi(`right`),Ji=Gi(`bottom`),Yi=Gi(`left`),Xi={name:`text-align`,initialValue:`left`,prefix:!1,type:2,parse:function(e,t){switch(t){case`right`:return 2;case`center`:case`justify`:return 1;case`left`:default:return 0}}},Zi={name:`position`,initialValue:`static`,prefix:!1,type:2,parse:function(e,t){switch(t){case`relative`:return 1;case`absolute`:return 2;case`fixed`:return 3;case`sticky`:return 4}return 0}},Qi={name:`text-shadow`,initialValue:`none`,type:1,prefix:!1,parse:function(e,t){return t.length===1&&Kn(t[0],`none`)?[]:Yn(t).map(function(t){for(var n={color:Cr.TRANSPARENT,offsetX:er,offsetY:er,blur:er},r=0,i=0;i<t.length;i++){var a=t[i];Zn(a)?(r===0?n.offsetX=a:r===1?n.offsetY=a:n.blur=a,r++):n.color=pr.parse(e,a)}return n})}},$i={name:`text-transform`,initialValue:`none`,prefix:!1,type:2,parse:function(e,t){switch(t){case`uppercase`:return 2;case`lowercase`:return 1;case`capitalize`:return 3}return 0}},ea={name:`transform`,initialValue:`none`,prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value===`none`)return null;if(t.type===18){var n=ta[t.name];if(n===void 0)throw Error(`Attempting to parse an unsupported transform function "`+t.name+`"`);return n(t.values)}return null}},ta={matrix:function(e){var t=e.filter(function(e){return e.type===17}).map(function(e){return e.number});return t.length===6?t:null},matrix3d:function(e){var t=e.filter(function(e){return e.type===17}).map(function(e){return e.number}),n=t[0],r=t[1];t[2],t[3];var i=t[4],a=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],s=t[13];return t[14],t[15],t.length===16?[n,r,i,a,o,s]:null}},na={type:16,number:50,flags:it},ra=[na,na],ia={name:`transform-origin`,initialValue:`50% 50%`,prefix:!0,type:1,parse:function(e,t){var n=t.filter(Qn);return n.length===2?[n[0],n[1]]:ra}},aa={name:`visible`,initialValue:`none`,prefix:!1,type:2,parse:function(e,t){switch(t){case`hidden`:return 1;case`collapse`:return 2;case`visible`:default:return 0}}},oa;(function(e){e.NORMAL=`normal`,e.BREAK_ALL=`break-all`,e.KEEP_ALL=`keep-all`})(oa||={});for(var sa={name:`word-break`,initialValue:`normal`,prefix:!1,type:2,parse:function(e,t){switch(t){case`break-all`:return oa.BREAK_ALL;case`keep-all`:return oa.KEEP_ALL;case`normal`:default:return oa.NORMAL}}},ca={name:`z-index`,initialValue:`auto`,prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Un(t))return{auto:!1,order:t.number};throw Error(`Invalid z-index number parsed`)}},la={name:`time`,parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case`s`:return 1e3*t.number;case`ms`:return t.number}throw Error(`Unsupported time type`)}},ua={name:`opacity`,initialValue:`1`,type:0,prefix:!1,parse:function(e,t){return Un(t)?t.number:1}},da={name:`text-decoration-color`,initialValue:`transparent`,prefix:!1,type:3,format:`color`},fa={name:`text-decoration-line`,initialValue:`none`,prefix:!1,type:1,parse:function(e,t){return t.filter(Wn).map(function(e){switch(e.value){case`underline`:return 1;case`overline`:return 2;case`line-through`:return 3;case`none`:return 4}return 0}).filter(function(e){return e!==0})}},pa={name:`font-family`,initialValue:``,prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(` `)),n.length=0;break}}),n.length&&r.push(n.join(` `)),r.map(function(e){return e.indexOf(` `)===-1?e:`'`+e+`'`})}},ma={name:`font-size`,initialValue:`0`,prefix:!1,type:3,format:`length`},ha={name:`font-weight`,initialValue:`normal`,type:0,prefix:!1,parse:function(e,t){if(Un(t))return t.number;if(Wn(t))switch(t.value){case`bold`:return 700;case`normal`:default:return 400}return 400}},ga={name:`font-variant`,initialValue:`none`,type:1,prefix:!1,parse:function(e,t){return t.filter(Wn).map(function(e){return e.value})}},_a={name:`font-style`,initialValue:`normal`,prefix:!1,type:2,parse:function(e,t){switch(t){case`oblique`:return`oblique`;case`italic`:return`italic`;case`normal`:default:return`normal`}}},va=function(e,t){return(e&t)!==0},ya={name:`content`,initialValue:`none`,type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value===`none`?[]:t}},ba={name:`counter-increment`,initialValue:`none`,prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value===`none`)return null;for(var r=[],i=t.filter(qn),a=0;a<i.length;a++){var o=i[a],s=i[a+1];if(o.type===20){var c=s&&Un(s)?s.number:1;r.push({counter:o.value,increment:c})}}return r}},xa={name:`counter-reset`,initialValue:`none`,prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var n=[],r=t.filter(qn),i=0;i<r.length;i++){var a=r[i],o=r[i+1];if(Wn(a)&&a.value!==`none`){var s=o&&Un(o)?o.number:0;n.push({counter:a.value,reset:s})}}return n}},Sa={name:`duration`,initialValue:`0s`,prefix:!1,type:1,parse:function(e,t){return t.filter(Hn).map(function(t){return la.parse(e,t)})}},Ca={name:`quotes`,initialValue:`none`,prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value===`none`)return null;var r=[],i=t.filter(Gn);if(i.length%2!=0)return null;for(var a=0;a<i.length;a+=2){var o=i[a].value,s=i[a+1].value;r.push({open:o,close:s})}return r}},wa=function(e,t,n){if(!e)return``;var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:``},Ta={name:`box-shadow`,initialValue:`none`,type:1,prefix:!1,parse:function(e,t){return t.length===1&&Kn(t[0],`none`)?[]:Yn(t).map(function(t){for(var n={color:255,offsetX:er,offsetY:er,blur:er,spread:er,inset:!1},r=0,i=0;i<t.length;i++){var a=t[i];Kn(a,`inset`)?n.inset=!0:Zn(a)?(r===0?n.offsetX=a:r===1?n.offsetY=a:r===2?n.blur=a:n.spread=a,r++):n.color=pr.parse(e,a)}return n})}},Ea={name:`paint-order`,initialValue:`normal`,prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Wn).forEach(function(e){switch(e.value){case`stroke`:r.push(1);break;case`fill`:r.push(0);break;case`markers`:r.push(2);break}}),n.forEach(function(e){r.indexOf(e)===-1&&r.push(e)}),r}},Da={name:`-webkit-text-stroke-color`,initialValue:`currentcolor`,prefix:!1,type:3,format:`color`},Oa={name:`-webkit-text-stroke-width`,initialValue:`0`,type:0,prefix:!1,parse:function(e,t){return Hn(t)?t.number:0}},ka=function(){function e(e,t){this.animationDuration=K(e,Sa,t.animationDuration),this.backgroundClip=K(e,wr,t.backgroundClip),this.backgroundColor=K(e,Tr,t.backgroundColor),this.backgroundImage=K(e,Zr,t.backgroundImage),this.backgroundOrigin=K(e,Qr,t.backgroundOrigin),this.backgroundPosition=K(e,$r,t.backgroundPosition),this.backgroundRepeat=K(e,ei,t.backgroundRepeat),this.backgroundSize=K(e,ri,t.backgroundSize),this.borderTopColor=K(e,oi,t.borderTopColor),this.borderRightColor=K(e,si,t.borderRightColor),this.borderBottomColor=K(e,ci,t.borderBottomColor),this.borderLeftColor=K(e,li,t.borderLeftColor),this.borderTopLeftRadius=K(e,di,t.borderTopLeftRadius),this.borderTopRightRadius=K(e,fi,t.borderTopRightRadius),this.borderBottomRightRadius=K(e,pi,t.borderBottomRightRadius),this.borderBottomLeftRadius=K(e,mi,t.borderBottomLeftRadius),this.borderTopStyle=K(e,gi,t.borderTopStyle),this.borderRightStyle=K(e,_i,t.borderRightStyle),this.borderBottomStyle=K(e,vi,t.borderBottomStyle),this.borderLeftStyle=K(e,yi,t.borderLeftStyle),this.borderTopWidth=K(e,xi,t.borderTopWidth),this.borderRightWidth=K(e,Si,t.borderRightWidth),this.borderBottomWidth=K(e,Ci,t.borderBottomWidth),this.borderLeftWidth=K(e,wi,t.borderLeftWidth),this.boxShadow=K(e,Ta,t.boxShadow),this.color=K(e,Ti,t.color),this.direction=K(e,Ei,t.direction),this.display=K(e,Di,t.display),this.float=K(e,ki,t.cssFloat),this.fontFamily=K(e,pa,t.fontFamily),this.fontSize=K(e,ma,t.fontSize),this.fontStyle=K(e,_a,t.fontStyle),this.fontVariant=K(e,ga,t.fontVariant),this.fontWeight=K(e,ha,t.fontWeight),this.letterSpacing=K(e,Ai,t.letterSpacing),this.lineBreak=K(e,Mi,t.lineBreak),this.lineHeight=K(e,Ni,t.lineHeight),this.listStyleImage=K(e,Fi,t.listStyleImage),this.listStylePosition=K(e,Ii,t.listStylePosition),this.listStyleType=K(e,Li,t.listStyleType),this.marginTop=K(e,zi,t.marginTop),this.marginRight=K(e,Bi,t.marginRight),this.marginBottom=K(e,Vi,t.marginBottom),this.marginLeft=K(e,Hi,t.marginLeft),this.opacity=K(e,ua,t.opacity);var n=K(e,Ui,t.overflow);this.overflowX=n[0],this.overflowY=n[n.length>1?1:0],this.overflowWrap=K(e,Wi,t.overflowWrap),this.paddingTop=K(e,Ki,t.paddingTop),this.paddingRight=K(e,qi,t.paddingRight),this.paddingBottom=K(e,Ji,t.paddingBottom),this.paddingLeft=K(e,Yi,t.paddingLeft),this.paintOrder=K(e,Ea,t.paintOrder),this.position=K(e,Zi,t.position),this.textAlign=K(e,Xi,t.textAlign),this.textDecorationColor=K(e,da,t.textDecorationColor??t.color),this.textDecorationLine=K(e,fa,t.textDecorationLine??t.textDecoration),this.textShadow=K(e,Qi,t.textShadow),this.textTransform=K(e,$i,t.textTransform),this.transform=K(e,ea,t.transform),this.transformOrigin=K(e,ia,t.transformOrigin),this.visibility=K(e,aa,t.visibility),this.webkitTextStrokeColor=K(e,Da,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=K(e,Oa,t.webkitTextStrokeWidth),this.wordBreak=K(e,sa,t.wordBreak),this.zIndex=K(e,ca,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return mr(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return va(this.display,4)||va(this.display,33554432)||va(this.display,268435456)||va(this.display,536870912)||va(this.display,67108864)||va(this.display,134217728)},e}(),Aa=function(){function e(e,t){this.content=K(e,ya,t.content),this.quotes=K(e,Ca,t.quotes)}return e}(),ja=function(){function e(e,t){this.counterIncrement=K(e,ba,t.counterIncrement),this.counterReset=K(e,xa,t.counterReset)}return e}(),K=function(e,t,n){var r=new Bn,i=n==null?t.initialValue:n.toString();r.write(i);var a=new Vn(r.read());switch(t.type){case 2:var o=a.parseComponentValue();return t.parse(e,Wn(o)?o.value:t.initialValue);case 0:return t.parse(e,a.parseComponentValue());case 1:return t.parse(e,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(t.format){case`angle`:return lr.parse(e,a.parseComponentValue());case`color`:return pr.parse(e,a.parseComponentValue());case`image`:return Jr.parse(e,a.parseComponentValue());case`length`:var s=a.parseComponentValue();return Zn(s)?s:er;case`length-percentage`:var c=a.parseComponentValue();return Qn(c)?c:er;case`time`:return la.parse(e,a.parseComponentValue())}break}},Ma=`data-html2canvas-debug`,Na=function(e){switch(e.getAttribute(Ma)){case`all`:return 1;case`clone`:return 2;case`parse`:return 3;case`render`:return 4;default:return 0}},Pa=function(e,t){var n=Na(e);return n===1||t===n},Fa=function(){function e(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Pa(t,3))debugger;this.styles=new ka(e,window.getComputedStyle(t,null)),Es(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration=`0s`),this.styles.transform!==null&&(t.style.transform=`none`)),this.bounds=s(this.context,t),Pa(t,4)&&(this.flags|=16)}return e}(),Ia=`AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=`,La=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,Ra=typeof Uint8Array>`u`?[]:new Uint8Array(256),za=0;za<La.length;za++)Ra[La.charCodeAt(za)]=za;for(var Ba=function(e){var t=e.length*.75,n=e.length,r,i=0,a,o,s,c;e[e.length-1]===`=`&&(t--,e[e.length-2]===`=`&&t--);var l=typeof ArrayBuffer<`u`&&typeof Uint8Array<`u`&&Uint8Array.prototype.slice!==void 0?new ArrayBuffer(t):Array(t),u=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<n;r+=4)a=Ra[e.charCodeAt(r)],o=Ra[e.charCodeAt(r+1)],s=Ra[e.charCodeAt(r+2)],c=Ra[e.charCodeAt(r+3)],u[i++]=a<<2|o>>4,u[i++]=(o&15)<<4|s>>2,u[i++]=(s&3)<<6|c&63;return l},Va=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},Ha=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Ua=5,Wa=11,Ga=2,Ka=Wa-Ua,qa=65536>>Ua,Ja=(1<<Ua)-1,Ya=1024>>Ua,Xa=qa+Ya+32,Za=65536>>Wa,Qa=(1<<Ka)-1,$a=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},eo=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},to=function(e,t){var n=Ba(e),r=Array.isArray(n)?Ha(n):new Uint32Array(n),i=Array.isArray(n)?Va(n):new Uint16Array(n),a=24,o=$a(i,a/2,r[4]/2),s=r[5]===2?$a(i,(a+r[4])/2):eo(r,Math.ceil((a+r[4])/4));return new no(r[0],r[1],r[2],r[3],o,s)},no=function(){function e(e,t,n,r,i,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=a}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Ua],t=(t<<Ga)+(e&Ja),this.data[t];if(e<=65535)return t=this.index[qa+(e-55296>>Ua)],t=(t<<Ga)+(e&Ja),this.data[t];if(e<this.highStart)return t=Xa-Za+(e>>Wa),t=this.index[t],t+=e>>Ua&Qa,t=this.index[t],t=(t<<Ga)+(e&Ja),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),ro=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,io=typeof Uint8Array>`u`?[]:new Uint8Array(256),ao=0;ao<ro.length;ao++)io[ro.charCodeAt(ao)]=ao;var oo=1,so=2,co=3,lo=4,uo=5,fo=7,po=8,mo=9,ho=10,go=11,_o=12,vo=13,yo=14,bo=15,xo=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);(a&64512)==56320?t.push(((i&1023)<<10)+(a&1023)+65536):(t.push(i),n--)}else t.push(i)}return t},So=function(){var e=[...arguments];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var t=e.length;if(!t)return``;for(var n=[],r=-1,i=``;++r<t;){var a=e[r];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(r+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Co=to(Ia),wo=``,To=``,Eo=function(e){return Co.get(e)},Do=function(e,t,n){var r=n-2,i=t[r],a=t[n-1],o=t[n];if(a===so&&o===co)return wo;if(a===so||a===co||a===lo||o===so||o===co||o===lo)return To;if(a===po&&[po,mo,go,_o].indexOf(o)!==-1||(a===go||a===mo)&&(o===mo||o===ho)||(a===_o||a===ho)&&o===ho||o===vo||o===uo||o===fo||a===oo)return wo;if(a===vo&&o===yo){for(;i===uo;)i=t[--r];if(i===yo)return wo}if(a===bo&&o===bo){for(var s=0;i===bo;)s++,i=t[--r];if(s%2==0)return wo}return To},Oo=function(e){var t=xo(e),n=t.length,r=0,i=0,a=t.map(Eo);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=wo;r<n&&(e=Do(t,a,++r))===wo;);if(e!==wo||r===n){var o=So.apply(null,t.slice(i,r));return i=r,{value:o,done:!1}}return{done:!0,value:null}}}},ko=function(e){for(var t=Oo(e),n=[],r;!(r=t.next()).done;)r.value&&n.push(r.value.slice());return n},Ao=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement(`boundtest`);r.style.height=t+`px`,r.style.display=`block`,e.body.appendChild(r),n.selectNode(r);var i=n.getBoundingClientRect(),a=Math.round(i.height);if(e.body.removeChild(r),a===t)return!0}}return!1},jo=function(e){var t=e.createElement(`boundtest`);t.style.width=`50px`,t.style.display=`block`,t.style.fontSize=`12px`,t.style.letterSpacing=`0px`,t.style.wordSpacing=`0px`,e.body.appendChild(t);var n=e.createRange();t.innerHTML=typeof``.repeat==`function`?`&#128104;`.repeat(10):``;var r=t.firstChild,i=l(r.data).map(function(e){return u(e)}),a=0,o={},s=i.every(function(e,t){n.setStart(r,a),n.setEnd(r,a+e.length);var i=n.getBoundingClientRect();a+=e.length;var s=i.x>o.x||i.y>o.y;return o=i,t===0?!0:s});return e.body.removeChild(t),s},Mo=function(){return new Image().crossOrigin!==void 0},No=function(){return typeof new XMLHttpRequest().responseType==`string`},Po=function(e){var t=new Image,n=e.createElement(`canvas`),r=n.getContext(`2d`);if(!r)return!1;t.src=`data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>`;try{r.drawImage(t,0,0),n.toDataURL()}catch{return!1}return!0},Fo=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},Io=function(e){var t=e.createElement(`canvas`),n=100;t.width=n,t.height=n;var r=t.getContext(`2d`);if(!r)return Promise.reject(!1);r.fillStyle=`rgb(0, 255, 0)`,r.fillRect(0,0,n,n);var i=new Image,a=t.toDataURL();i.src=a;var o=Lo(n,n,0,0,i);return r.fillStyle=`red`,r.fillRect(0,0,n,n),Ro(o).then(function(t){r.drawImage(t,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle=`red`,r.fillRect(0,0,n,n);var o=e.createElement(`div`);return o.style.backgroundImage=`url(`+a+`)`,o.style.height=n+`px`,Fo(i)?Ro(Lo(n,n,0,0,o)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),Fo(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},Lo=function(e,t,n,r,i){var a=`http://www.w3.org/2000/svg`,o=document.createElementNS(a,`svg`),s=document.createElementNS(a,`foreignObject`);return o.setAttributeNS(null,`width`,e.toString()),o.setAttributeNS(null,`height`,t.toString()),s.setAttributeNS(null,`width`,`100%`),s.setAttributeNS(null,`height`,`100%`),s.setAttributeNS(null,`x`,n.toString()),s.setAttributeNS(null,`y`,r.toString()),s.setAttributeNS(null,`externalResourcesRequired`,`true`),o.appendChild(s),s.appendChild(i),o},Ro=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src=`data:image/svg+xml;charset=utf-8,`+encodeURIComponent(new XMLSerializer().serializeToString(e))})},zo={get SUPPORT_RANGE_BOUNDS(){var e=Ao(document);return Object.defineProperty(zo,`SUPPORT_RANGE_BOUNDS`,{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=zo.SUPPORT_RANGE_BOUNDS&&jo(document);return Object.defineProperty(zo,`SUPPORT_WORD_BREAKING`,{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Po(document);return Object.defineProperty(zo,`SUPPORT_SVG_DRAWING`,{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from==`function`&&typeof window.fetch==`function`?Io(document):Promise.resolve(!1);return Object.defineProperty(zo,`SUPPORT_FOREIGNOBJECT_DRAWING`,{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Mo();return Object.defineProperty(zo,`SUPPORT_CORS_IMAGES`,{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=No();return Object.defineProperty(zo,`SUPPORT_RESPONSE_TYPE`,{value:e}),e},get SUPPORT_CORS_XHR(){var e=`withCredentials`in new XMLHttpRequest;return Object.defineProperty(zo,`SUPPORT_CORS_XHR`,{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<`u`&&Intl.Segmenter);return Object.defineProperty(zo,`SUPPORT_NATIVE_TEXT_SEGMENTATION`,{value:e}),e}},Bo=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Vo=function(e,t,n,r){var i=Ko(t,n),a=[],s=0;return i.forEach(function(t){if(n.textDecorationLine.length||t.trim().length>0)if(zo.SUPPORT_RANGE_BOUNDS){var i=Uo(r,s,t.length).getClientRects();if(i.length>1){var c=Wo(t),l=0;c.forEach(function(t){a.push(new Bo(t,o.fromDOMRectList(e,Uo(r,l+s,t.length).getClientRects()))),l+=t.length})}else a.push(new Bo(t,o.fromDOMRectList(e,i)))}else{var u=r.splitText(t.length);a.push(new Bo(t,Ho(e,r))),r=u}else zo.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));s+=t.length}),a},Ho=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement(`html2canvaswrapper`);r.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(r,t);var a=s(e,r);return r.firstChild&&i.replaceChild(r.firstChild,r),a}}return o.EMPTY},Uo=function(e,t,n){var r=e.ownerDocument;if(!r)throw Error(`Node has no owner document`);var i=r.createRange();return i.setStart(e,t),i.setEnd(e,t+n),i},Wo=function(e){if(zo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:`grapheme`});return Array.from(t.segment(e)).map(function(e){return e.segment})}return ko(e)},Go=function(e,t){if(zo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:`word`});return Array.from(n.segment(e)).map(function(e){return e.segment})}return Jo(e,t)},Ko=function(e,t){return t.letterSpacing===0?Go(e,t):Wo(e)},qo=[32,160,4961,65792,65793,4153,4241],Jo=function(e,t){for(var n=tt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap===`break-word`?`break-word`:t.wordBreak}),r=[],i,a=function(){if(i.value){var e=i.value.slice(),t=l(e),n=``;t.forEach(function(e){qo.indexOf(e)===-1?n+=u(e):(n.length&&r.push(n),r.push(u(e)),n=``)}),n.length&&r.push(n)}};!(i=n.next()).done;)a();return r},Yo=function(){function e(e,t,n){this.text=Xo(t.data,n.textTransform),this.textBounds=Vo(e,this.text,n,t)}return e}(),Xo=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Zo,Qo);case 2:return e.toUpperCase();default:return e}},Zo=/(^|\s|:|-|\(|\))([a-z])/g,Qo=function(e,t,n){return e.length>0?t+n.toUpperCase():e},$o=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return n}(Fa),es=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return n}(Fa),ts=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this,i=new XMLSerializer,a=s(t,n);return n.setAttribute(`width`,a.width+`px`),n.setAttribute(`height`,a.height+`px`),r.svg=`data:image/svg+xml,`+encodeURIComponent(i.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return n}(Fa),ns=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return n}(Fa),rs=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed=typeof n.reversed==`boolean`&&n.reversed===!0,r}return n}(Fa),os=[{type:15,flags:0,unit:`px`,number:3}],ss=[{type:16,flags:0,number:50}],cs=function(e){return e.width>e.height?new o(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new o(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},ls=function(e){var t=e.type===fs?Array(e.value.length+1).join(``):e.value;return t.length===0?e.placeholder||``:t},us=`checkbox`,ds=`radio`,fs=`password`,ps=707406591,ms=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=ls(n),(r.type===us||r.type===ds)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=cs(r.bounds)),r.type){case us:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=os;break;case ds:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=ss;break}return r}return n}(Fa),hs=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this,i=n.options[n.selectedIndex||0];return r.value=i&&i.text||``,r}return n}(Fa),gs=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return n}(Fa),_s=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=xs(t,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Sr(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Cr.TRANSPARENT,a=n.contentWindow.document.body?Sr(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):Cr.TRANSPARENT;r.backgroundColor=mr(i)?mr(a)?r.styles.backgroundColor:a:i}}catch{}return r}return n}(Fa),vs=[`OL`,`UL`,`MENU`],ys=function(e,t,n,r){for(var i=t.firstChild,a=void 0;i;i=a)if(a=i.nextSibling,ws(i)&&i.data.trim().length>0)n.textNodes.push(new Yo(e,i,n.styles));else if(Ts(i))if(Hs(i)&&i.assignedNodes)i.assignedNodes().forEach(function(t){return ys(e,t,n,r)});else{var o=bs(e,i);o.styles.isVisible()&&(Ss(i,o,r)?o.flags|=4:Cs(o.styles)&&(o.flags|=2),vs.indexOf(i.tagName)!==-1&&(o.flags|=8),n.elements.push(o),i.slot,i.shadowRoot?ys(e,i.shadowRoot,o,r):!Bs(i)&&!Ms(i)&&!Vs(i)&&ys(e,i,o,r))}},bs=function(e,t){return Is(t)?new $o(e,t):Ps(t)?new es(e,t):Ms(t)?new ts(e,t):Os(t)?new ns(e,t):ks(t)?new rs(e,t):As(t)?new ms(e,t):Vs(t)?new hs(e,t):Bs(t)?new gs(e,t):Ls(t)?new _s(e,t):new Fa(e,t)},xs=function(e,t){var n=bs(e,t);return n.flags|=4,ys(e,t,n,n),n},Ss=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||Ns(e)&&n.styles.isTransparent()},Cs=function(e){return e.isPositioned()||e.isFloating()},ws=function(e){return e.nodeType===Node.TEXT_NODE},Ts=function(e){return e.nodeType===Node.ELEMENT_NODE},Es=function(e){return Ts(e)&&e.style!==void 0&&!Ds(e)},Ds=function(e){return typeof e.className==`object`},Os=function(e){return e.tagName===`LI`},ks=function(e){return e.tagName===`OL`},As=function(e){return e.tagName===`INPUT`},js=function(e){return e.tagName===`HTML`},Ms=function(e){return e.tagName===`svg`},Ns=function(e){return e.tagName===`BODY`},Ps=function(e){return e.tagName===`CANVAS`},Fs=function(e){return e.tagName===`VIDEO`},Is=function(e){return e.tagName===`IMG`},Ls=function(e){return e.tagName===`IFRAME`},Rs=function(e){return e.tagName===`STYLE`},zs=function(e){return e.tagName===`SCRIPT`},Bs=function(e){return e.tagName===`TEXTAREA`},Vs=function(e){return e.tagName===`SELECT`},Hs=function(e){return e.tagName===`SLOT`},Us=function(e){return e.tagName.indexOf(`-`)>0},Ws=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){return this.counters[e]||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,i=!0;n!==null&&n.forEach(function(e){var n=t.counters[e.counter];n&&e.increment!==0&&(i=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)});var a=[];return i&&r.forEach(function(e){var n=t.counters[e.counter];a.push(e.counter),n||=t.counters[e.counter]=[],n.push(e.reset)}),a},e}(),Gs={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:[`M`,`CM`,`D`,`CD`,`C`,`XC`,`L`,`XL`,`X`,`IX`,`V`,`IV`,`I`]},Ks={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:`...................................`.split(`.`)},qs={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:`....................................`.split(`.`)},Js={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:`....................................`.split(`.`)},Ys=function(e,t,n,r,i,a){return e<t||e>n?cc(e,i,a.length>0):r.integers.reduce(function(t,n,i){for(;e>=n;)e-=n,t+=r.values[i];return t},``)+a},Xs=function(e,t,n,r){var i=``;do n||e--,i=r(e)+i,e/=t;while(e*t>=t);return i},Zs=function(e,t,n,r,i){var a=n-t+1;return(e<0?`-`:``)+(Xs(Math.abs(e),a,r,function(e){return u(Math.floor(e%a)+t)})+i)},Qs=function(e,t,n){n===void 0&&(n=`. `);var r=t.length;return Xs(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n},$s=1,ec=2,tc=4,nc=8,rc=function(e,t,n,r,i,a){if(e<-9999||e>9999)return cc(e,4,i.length>0);var o=Math.abs(e),s=i;if(o===0)return t[0]+s;for(var c=0;o>0&&c<=4;c++){var l=o%10;l===0&&va(a,$s)&&s!==``?s=t[l]+s:l>1||l===1&&c===0||l===1&&c===1&&va(a,ec)||l===1&&c===1&&va(a,tc)&&e>100||l===1&&c>1&&va(a,nc)?s=t[l]+(c>0?n[c-1]:``)+s:l===1&&c>0&&(s=n[c-1]+s),o=Math.floor(o/10)}return(e<0?r:``)+s},ic=``,ac=``,oc=``,sc=``,cc=function(e,t,n){var r=n?`. `:``,i=n?``:``,a=n?`, `:``,o=n?` `:``;switch(t){case 0:return``+o;case 1:return``+o;case 2:return``+o;case 5:var s=Zs(e,48,57,!0,r);return s.length<4?`0`+s:s;case 4:return Qs(e,``,i);case 6:return Ys(e,1,3999,Gs,3,r).toLowerCase();case 7:return Ys(e,1,3999,Gs,3,r);case 8:return Zs(e,945,969,!1,r);case 9:return Zs(e,97,122,!1,r);case 10:return Zs(e,65,90,!1,r);case 11:return Zs(e,1632,1641,!0,r);case 12:case 49:return Ys(e,1,9999,Ks,3,r);case 35:return Ys(e,1,9999,Ks,3,r).toLowerCase();case 13:return Zs(e,2534,2543,!0,r);case 14:case 30:return Zs(e,6112,6121,!0,r);case 15:return Qs(e,``,i);case 16:return Qs(e,``,i);case 17:case 48:return rc(e,``,ic,``,i,ec|tc|nc);case 47:return rc(e,``,ac,``,i,$s|ec|tc|nc);case 42:return rc(e,``,ic,``,i,ec|tc|nc);case 41:return rc(e,``,ac,``,i,$s|ec|tc|nc);case 26:return rc(e,``,``,oc,i,0);case 25:return rc(e,``,``,oc,i,$s|ec|tc);case 31:return rc(e,``,``,sc,a,$s|ec|tc);case 33:return rc(e,``,``,sc,a,0);case 32:return rc(e,``,``,sc,a,$s|ec|tc);case 18:return Zs(e,2406,2415,!0,r);case 20:return Ys(e,1,19999,Js,3,r);case 21:return Zs(e,2790,2799,!0,r);case 22:return Zs(e,2662,2671,!0,r);case 22:return Ys(e,1,10999,qs,3,r);case 23:return Qs(e,``);case 24:return Qs(e,``);case 27:return Zs(e,3302,3311,!0,r);case 28:return Qs(e,``,i);case 29:return Qs(e,``,i);case 34:return Zs(e,3792,3801,!0,r);case 37:return Zs(e,6160,6169,!0,r);case 38:return Zs(e,4160,4169,!0,r);case 39:return Zs(e,2918,2927,!0,r);case 40:return Zs(e,1776,1785,!0,r);case 43:return Zs(e,3046,3055,!0,r);case 44:return Zs(e,3174,3183,!0,r);case 45:return Zs(e,3664,3673,!0,r);case 46:return Zs(e,3872,3881,!0,r);case 3:default:return Zs(e,48,57,!0,r)}},lc=`data-html2canvas-ignore`,uc=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Ws,this.quoteDepth=0,!t.ownerDocument)throw Error(`Cloned element does not have an owner document`);this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,a=fc(e,t);if(!a.contentWindow)return Promise.reject(`Unable to find iframe window`);var o=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,c=a.contentWindow,l=c.document,u=hc(a).then(function(){return r(n,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return this.scrolledElements.forEach(bc),c&&(c.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.scrollY!==t.top||c.scrollX!==t.left)&&(this.context.logger.warn(`Unable to restore scroll position for cloned document`),this.context.windowBounds=this.context.windowBounds.add(c.scrollX-t.left,c.scrollY-t.top,0,0))),e=this.options.onclone,n=this.clonedReferenceElement,n===void 0?[2,Promise.reject(`Error finding the `+this.referenceElement.nodeName+` in the cloned document`)]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,mc(l)]:[3,4];case 3:r.sent(),r.label=4;case 4:return typeof e==`function`?[2,Promise.resolve().then(function(){return e(l,n)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(vc(document.doctype)+`<html></html>`),yc(this.referenceElement.ownerDocument,o,s),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},e.prototype.createElementClone=function(e){if(Pa(e,2))debugger;if(Ps(e))return this.createCanvasClone(e);if(Fs(e))return this.createVideoClone(e);if(Rs(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Is(t)&&(Is(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=``),t.loading===`lazy`&&(t.loading=`eager`)),Us(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement(`html2canvascustomelement`);return _c(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&typeof t.cssText==`string`?e+t.cssText:e},``),r=e.cloneNode(!1);return r.textContent=n,r}}catch(e){if(this.context.logger.error(`Unable to access cssRules property`,e),e.name!==`SecurityError`)throw e}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){if(this.options.inlineImages&&e.ownerDocument){var t=e.ownerDocument.createElement(`img`);try{return t.src=e.toDataURL(),t}catch{this.context.logger.info(`Unable to inline canvas contents, canvas is tainted`,e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var r=e.getContext(`2d`),i=n.getContext(`2d`);if(i)if(!this.options.allowTaint&&r)i.putImageData(r.getImageData(0,0,e.width,e.height),0,0);else{var a=e.getContext(`webgl2`)??e.getContext(`webgl`);a&&a.getContextAttributes()?.preserveDrawingBuffer===!1&&this.context.logger.warn(`Unable to clone WebGL context as it has preserveDrawingBuffer=false`,e),i.drawImage(e,0,0)}return n}catch{this.context.logger.info(`Unable to clone canvas as it is tainted`,e)}return n},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement(`canvas`);t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext(`2d`);try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info(`Unable to clone video as it is tainted`,e)}var r=e.ownerDocument.createElement(`canvas`);return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){(!Ts(t)||!zs(t)&&!t.hasAttribute(lc)&&(typeof this.options.ignoreElements!=`function`||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!Ts(t)||!Rs(t))&&e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(Ts(i)&&Hs(i)&&typeof i.assignedNodes==`function`){var a=i.assignedNodes();a.length&&a.forEach(function(e){return r.appendChildNode(t,e,n)})}else this.appendChildNode(t,i,n)},e.prototype.cloneNode=function(e,t){if(ws(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Ts(e)&&(Es(e)||Ds(e))){var r=this.createElementClone(e);r.style.transitionProperty=`none`;var i=n.getComputedStyle(e),a=n.getComputedStyle(e,`:before`),o=n.getComputedStyle(e,`:after`);this.referenceElement===e&&Es(r)&&(this.clonedReferenceElement=r),Ns(r)&&Ec(r);var s=this.counters.parse(new ja(this.context,i)),c=this.resolvePseudoContent(e,r,a,dc.BEFORE);Us(e)&&(t=!0),Fs(e)||this.cloneChildNodes(e,r,t),c&&r.insertBefore(c,r.firstChild);var l=this.resolvePseudoContent(e,r,o,dc.AFTER);return l&&r.appendChild(l),this.counters.pop(s),(i&&(this.options.copyStyles||Ds(e))&&!Ls(e)||t)&&_c(i,r),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(Bs(e)||Vs(e))&&(Bs(r)||Vs(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var i=this;if(n){var a=n.content,o=t.ownerDocument;if(!(!o||!a||a===`none`||a===`-moz-alt-content`||n.display===`none`)){this.counters.parse(new ja(this.context,n));var s=new Aa(this.context,n),c=o.createElement(`html2canvaspseudoelement`);_c(n,c),s.content.forEach(function(t){if(t.type===0)c.appendChild(o.createTextNode(t.value));else if(t.type===22){var n=o.createElement(`img`);n.src=t.value,n.style.opacity=`1`,c.appendChild(n)}else if(t.type===18){if(t.name===`attr`){var r=t.values.filter(Wn);r.length&&c.appendChild(o.createTextNode(e.getAttribute(r[0].value)||``))}else if(t.name===`counter`){var a=t.values.filter(Jn),l=a[0],u=a[1];if(l&&Wn(l)){var d=i.counters.getCounterValue(l.value),f=u&&Wn(u)?Li.parse(i.context,u.value):3;c.appendChild(o.createTextNode(cc(d,f,!1)))}}else if(t.name===`counters`){var p=t.values.filter(Jn),l=p[0],m=p[1],u=p[2];if(l&&Wn(l)){var h=i.counters.getCounterValues(l.value),g=u&&Wn(u)?Li.parse(i.context,u.value):3,_=m&&m.type===0?m.value:``,v=h.map(function(e){return cc(e,g,!1)}).join(_);c.appendChild(o.createTextNode(v))}}}else if(t.type===20)switch(t.value){case`open-quote`:c.appendChild(o.createTextNode(wa(s.quotes,i.quoteDepth++,!0)));break;case`close-quote`:c.appendChild(o.createTextNode(wa(s.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(t.value))}}),c.className=Cc+` `+wc;var l=r===dc.BEFORE?` `+Cc:` `+wc;return Ds(t)?t.className.baseValue+=l:t.className+=l,c}}},e.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},e}(),dc;(function(e){e[e.BEFORE=0]=`BEFORE`,e[e.AFTER=1]=`AFTER`})(dc||={});var fc=function(e,t){var n=e.createElement(`iframe`);return n.className=`html2canvas-container`,n.style.visibility=`hidden`,n.style.position=`fixed`,n.style.left=`-10000px`,n.style.top=`0px`,n.style.border=`0`,n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling=`no`,n.setAttribute(lc,`true`),e.body.appendChild(n),n},pc=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},mc=function(e){return Promise.all([].slice.call(e.images,0).map(pc))},hc=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n(`No window assigned for iframe`);var i=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval(function(){i.body.childNodes.length>0&&i.readyState===`complete`&&(clearInterval(n),t(e))},50)}})},gc=[`all`,`d`,`content`],_c=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);gc.indexOf(r)===-1&&t.style.setProperty(r,e.getPropertyValue(r))}return t},vc=function(e){var t=``;return e&&(t+=`<!DOCTYPE `,e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+=`"`+e.publicId+`"`),e.systemId&&(t+=`"`+e.systemId+`"`),t+=`>`),t},yc=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},bc=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},xc=`:before`,Sc=`:after`,Cc=`___html2canvas___pseudoelement_before`,wc=`___html2canvas___pseudoelement_after`,Tc=`{
    content: "" !important;
    display: none !important;
}`,Ec=function(e){Dc(e,`.`+Cc+xc+Tc+`
         .`+wc+Sc+Tc)},Dc=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement(`style`);r.textContent=t,e.appendChild(r)}},Oc=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):`about:blank`},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement(`a`),e._origin=e.getOrigin(t.location.href)},e._origin=`about:blank`,e}(),kc=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Ic(e)||Nc(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,o=this;return i(this,function(i){switch(i.label){case 0:return t=Oc.isSameOrigin(e),n=!Pc(e)&&this._options.useCORS===!0&&zo.SUPPORT_CORS_IMAGES&&!t,r=!Pc(e)&&!t&&!Ic(e)&&typeof this._options.proxy==`string`&&zo.SUPPORT_CORS_XHR&&!n,!t&&this._options.allowTaint===!1&&!Pc(e)&&!Ic(e)&&!r&&!n?[2]:(a=e,r?[4,this.proxy(a)]:[3,2]);case 1:a=i.sent(),i.label=2;case 2:return this.context.logger.debug(`Added image `+e.substring(0,256)),[4,new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(Fc(a)||n)&&(r.crossOrigin=`anonymous`),r.src=a,r.complete===!0&&setTimeout(function(){return e(r)},500),o._options.imageTimeout>0&&setTimeout(function(){return t(`Timed out (`+o._options.imageTimeout+`ms) loading image`)},o._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},e.prototype.has=function(e){return this._cache[e]!==void 0},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw Error(`No proxy defined`);var r=e.substring(0,256);return new Promise(function(i,a){var o=zo.SUPPORT_RESPONSE_TYPE?`blob`:`text`,s=new XMLHttpRequest;s.onload=function(){if(s.status===200)if(o===`text`)i(s.response);else{var e=new FileReader;e.addEventListener(`load`,function(){return i(e.result)},!1),e.addEventListener(`error`,function(e){return a(e)},!1),e.readAsDataURL(s.response)}else a(`Failed to proxy resource `+r+` with status code `+s.status)},s.onerror=a;var c=n.indexOf(`?`)>-1?`&`:`?`;if(s.open(`GET`,``+n+c+`url=`+encodeURIComponent(e)+`&responseType=`+o),o!==`text`&&s instanceof XMLHttpRequest&&(s.responseType=o),t._options.imageTimeout){var l=t._options.imageTimeout;s.timeout=l,s.ontimeout=function(){return a(`Timed out (`+l+`ms) proxying `+r)}}s.send()})},e}(),Ac=/^data:image\/svg\+xml/i,jc=/^data:image\/.*;base64,/i,Mc=/^data:image\/.*/i,Nc=function(e){return zo.SUPPORT_SVG_DRAWING||!Lc(e)},Pc=function(e){return Mc.test(e)},Fc=function(e){return jc.test(e)},Ic=function(e){return e.substr(0,4)===`blob`},Lc=function(e){return e.substr(-3).toLowerCase()===`svg`||Ac.test(e)},q=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Rc=function(e,t,n){return new q(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},zc=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Rc(this.start,this.startControl,t),i=Rc(this.startControl,this.endControl,t),a=Rc(this.endControl,this.end,t),o=Rc(r,i,t),s=Rc(i,a,t),c=Rc(o,s,t);return n?new e(this.start,r,o,c):new e(c,s,a,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Bc=function(e){return e.type===1},Vc=function(){function e(e){var t=e.styles,n=e.bounds,r=rr(t.borderTopLeftRadius,n.width,n.height),i=r[0],a=r[1],o=rr(t.borderTopRightRadius,n.width,n.height),s=o[0],c=o[1],l=rr(t.borderBottomRightRadius,n.width,n.height),u=l[0],d=l[1],f=rr(t.borderBottomLeftRadius,n.width,n.height),p=f[0],m=f[1],h=[];h.push((i+s)/n.width),h.push((p+u)/n.width),h.push((a+m)/n.height),h.push((c+d)/n.height);var g=Math.max.apply(Math,h);g>1&&(i/=g,a/=g,s/=g,c/=g,u/=g,d/=g,p/=g,m/=g);var _=n.width-s,v=n.height-d,y=n.width-u,b=n.height-m,x=t.borderTopWidth,S=t.borderRightWidth,C=t.borderBottomWidth,w=t.borderLeftWidth,T=ir(t.paddingTop,e.bounds.width),E=ir(t.paddingRight,e.bounds.width),D=ir(t.paddingBottom,e.bounds.width),O=ir(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?Uc(n.left+w/3,n.top+x/3,i-w/3,a-x/3,Hc.TOP_LEFT):new q(n.left+w/3,n.top+x/3),this.topRightBorderDoubleOuterBox=i>0||a>0?Uc(n.left+_,n.top+x/3,s-S/3,c-x/3,Hc.TOP_RIGHT):new q(n.left+n.width-S/3,n.top+x/3),this.bottomRightBorderDoubleOuterBox=u>0||d>0?Uc(n.left+y,n.top+v,u-S/3,d-C/3,Hc.BOTTOM_RIGHT):new q(n.left+n.width-S/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=p>0||m>0?Uc(n.left+w/3,n.top+b,p-w/3,m-C/3,Hc.BOTTOM_LEFT):new q(n.left+w/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?Uc(n.left+w*2/3,n.top+x*2/3,i-w*2/3,a-x*2/3,Hc.TOP_LEFT):new q(n.left+w*2/3,n.top+x*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?Uc(n.left+_,n.top+x*2/3,s-S*2/3,c-x*2/3,Hc.TOP_RIGHT):new q(n.left+n.width-S*2/3,n.top+x*2/3),this.bottomRightBorderDoubleInnerBox=u>0||d>0?Uc(n.left+y,n.top+v,u-S*2/3,d-C*2/3,Hc.BOTTOM_RIGHT):new q(n.left+n.width-S*2/3,n.top+n.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||m>0?Uc(n.left+w*2/3,n.top+b,p-w*2/3,m-C*2/3,Hc.BOTTOM_LEFT):new q(n.left+w*2/3,n.top+n.height-C*2/3),this.topLeftBorderStroke=i>0||a>0?Uc(n.left+w/2,n.top+x/2,i-w/2,a-x/2,Hc.TOP_LEFT):new q(n.left+w/2,n.top+x/2),this.topRightBorderStroke=i>0||a>0?Uc(n.left+_,n.top+x/2,s-S/2,c-x/2,Hc.TOP_RIGHT):new q(n.left+n.width-S/2,n.top+x/2),this.bottomRightBorderStroke=u>0||d>0?Uc(n.left+y,n.top+v,u-S/2,d-C/2,Hc.BOTTOM_RIGHT):new q(n.left+n.width-S/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=p>0||m>0?Uc(n.left+w/2,n.top+b,p-w/2,m-C/2,Hc.BOTTOM_LEFT):new q(n.left+w/2,n.top+n.height-C/2),this.topLeftBorderBox=i>0||a>0?Uc(n.left,n.top,i,a,Hc.TOP_LEFT):new q(n.left,n.top),this.topRightBorderBox=s>0||c>0?Uc(n.left+_,n.top,s,c,Hc.TOP_RIGHT):new q(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||d>0?Uc(n.left+y,n.top+v,u,d,Hc.BOTTOM_RIGHT):new q(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=p>0||m>0?Uc(n.left,n.top+b,p,m,Hc.BOTTOM_LEFT):new q(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?Uc(n.left+w,n.top+x,Math.max(0,i-w),Math.max(0,a-x),Hc.TOP_LEFT):new q(n.left+w,n.top+x),this.topRightPaddingBox=s>0||c>0?Uc(n.left+Math.min(_,n.width-S),n.top+x,_>n.width+S?0:Math.max(0,s-S),Math.max(0,c-x),Hc.TOP_RIGHT):new q(n.left+n.width-S,n.top+x),this.bottomRightPaddingBox=u>0||d>0?Uc(n.left+Math.min(y,n.width-w),n.top+Math.min(v,n.height-C),Math.max(0,u-S),Math.max(0,d-C),Hc.BOTTOM_RIGHT):new q(n.left+n.width-S,n.top+n.height-C),this.bottomLeftPaddingBox=p>0||m>0?Uc(n.left+w,n.top+Math.min(b,n.height-C),Math.max(0,p-w),Math.max(0,m-C),Hc.BOTTOM_LEFT):new q(n.left+w,n.top+n.height-C),this.topLeftContentBox=i>0||a>0?Uc(n.left+w+O,n.top+x+T,Math.max(0,i-(w+O)),Math.max(0,a-(x+T)),Hc.TOP_LEFT):new q(n.left+w+O,n.top+x+T),this.topRightContentBox=s>0||c>0?Uc(n.left+Math.min(_,n.width+w+O),n.top+x+T,_>n.width+w+O?0:s-w+O,c-(x+T),Hc.TOP_RIGHT):new q(n.left+n.width-(S+E),n.top+x+T),this.bottomRightContentBox=u>0||d>0?Uc(n.left+Math.min(y,n.width-(w+O)),n.top+Math.min(v,n.height+x+T),Math.max(0,u-(S+E)),d-(C+D),Hc.BOTTOM_RIGHT):new q(n.left+n.width-(S+E),n.top+n.height-(C+D)),this.bottomLeftContentBox=p>0||m>0?Uc(n.left+w+O,n.top+b,Math.max(0,p-(w+O)),m-(C+D),Hc.BOTTOM_LEFT):new q(n.left+w+O,n.top+n.height-(C+D))}return e}(),Hc;(function(e){e[e.TOP_LEFT=0]=`TOP_LEFT`,e[e.TOP_RIGHT=1]=`TOP_RIGHT`,e[e.BOTTOM_RIGHT=2]=`BOTTOM_RIGHT`,e[e.BOTTOM_LEFT=3]=`BOTTOM_LEFT`})(Hc||={});var Uc=function(e,t,n,r,i){var a=4*((Math.sqrt(2)-1)/3),o=n*a,s=r*a,c=e+n,l=t+r;switch(i){case Hc.TOP_LEFT:return new zc(new q(e,l),new q(e,l-s),new q(c-o,t),new q(c,t));case Hc.TOP_RIGHT:return new zc(new q(e,t),new q(e+o,t),new q(c,l-s),new q(c,l));case Hc.BOTTOM_RIGHT:return new zc(new q(c,t),new q(c,t+s),new q(e+o,l),new q(e,l));case Hc.BOTTOM_LEFT:default:return new zc(new q(c,l),new q(c-o,l),new q(e,t+s),new q(e,t))}},Wc=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Gc=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Kc=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},qc=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Jc=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Yc=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Xc=function(e){return e.type===0},Zc=function(e){return e.type===1},Qc=function(e){return e.type===2},$c=function(e,t){return e.length===t.length?e.some(function(e,n){return e===t[n]}):!1},el=function(e,t,n,r,i){return e.map(function(e,a){switch(a){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+i);case 3:return e.add(t,n+i)}return e})},tl=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),nl=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Vc(this.container),this.container.styles.opacity<1&&this.effects.push(new Yc(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new qc(n,r,i))}if(this.container.styles.overflowX!==0){var a=Wc(this.curves),o=Kc(this.curves);$c(a,o)?this.effects.push(new Jc(a,6)):(this.effects.push(new Jc(a,2)),this.effects.push(new Jc(o,4)))}}return e.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,r=this.effects.slice(0);n;){var i=n.effects.filter(function(e){return!Zc(e)});if(t||n.container.styles.position!==0||!n.parent){if(r.unshift.apply(r,i),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=Wc(n.curves),o=Kc(n.curves);$c(a,o)||r.unshift(new Jc(o,6))}}else r.unshift.apply(r,i);n=n.parent}return r.filter(function(t){return va(t.target,e)})},e}(),rl=function(e,t,n,r){e.container.elements.forEach(function(i){var a=va(i.flags,4),o=va(i.flags,2),s=new nl(i,e);va(i.styles.display,2048)&&r.push(s);var c=va(i.flags,8)?[]:r;if(a||o){var l=a||i.styles.isPositioned()?n:t,u=new tl(s);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var d=i.styles.zIndex.order;if(d<0){var f=0;l.negativeZIndex.some(function(e,t){return d>e.element.container.styles.zIndex.order?(f=t,!1):f>0}),l.negativeZIndex.splice(f,0,u)}else if(d>0){var p=0;l.positiveZIndex.some(function(e,t){return d>=e.element.container.styles.zIndex.order?(p=t+1,!1):p>0}),l.positiveZIndex.splice(p,0,u)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else i.styles.isFloating()?l.nonPositionedFloats.push(u):l.nonPositionedInlineLevel.push(u);rl(s,u,a?u:n,c)}else i.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),rl(s,t,n,c);va(i.flags,8)&&il(i,c)})},il=function(e,t){for(var n=e instanceof rs?e.start:1,r=e instanceof rs?e.reversed:!1,i=0;i<t.length;i++){var a=t[i];a.container instanceof ns&&typeof a.container.value==`number`&&a.container.value!==0&&(n=a.container.value),a.listValue=cc(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},al=function(e){var t=new nl(e,null),n=new tl(t),r=[];return rl(t,n,n,r),il(t.container,r),n},ol=function(e,t){switch(t){case 0:return dl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return dl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return dl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return dl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},sl=function(e,t){switch(t){case 0:return dl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return dl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return dl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return dl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},cl=function(e,t){switch(t){case 0:return dl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return dl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return dl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return dl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},ll=function(e,t){switch(t){case 0:return ul(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return ul(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return ul(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return ul(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},ul=function(e,t){var n=[];return Bc(e)?n.push(e.subdivide(.5,!1)):n.push(e),Bc(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},dl=function(e,t,n,r){var i=[];return Bc(e)?i.push(e.subdivide(.5,!1)):i.push(e),Bc(n)?i.push(n.subdivide(.5,!0)):i.push(n),Bc(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Bc(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},fl=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},pl=function(e){var t=e.styles,n=e.bounds,r=ir(t.paddingLeft,n.width),i=ir(t.paddingRight,n.width),a=ir(t.paddingTop,n.width),o=ir(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,a+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+i),-(t.borderTopWidth+t.borderBottomWidth+a+o))},ml=function(e,t){return e===0?t.bounds:e===2?pl(t):fl(t)},hl=function(e,t){return e===0?t.bounds:e===2?pl(t):fl(t)},gl=function(e,t,n){var r=ml(bl(e.styles.backgroundOrigin,t),e),i=hl(bl(e.styles.backgroundClip,t),e),a=yl(bl(e.styles.backgroundSize,t),n,r),o=a[0],s=a[1],c=rr(bl(e.styles.backgroundPosition,t),r.width-o,r.height-s),l=xl(bl(e.styles.backgroundRepeat,t),c,a,r,i),u=Math.round(r.left+c[0]),d=Math.round(r.top+c[1]);return[l,u,d,o,s]},_l=function(e){return Wn(e)&&e.value===ni.AUTO},vl=function(e){return typeof e==`number`},yl=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=e[0],s=e[1];if(!o)return[0,0];if(Qn(o)&&s&&Qn(s))return[ir(o,n.width),ir(s,n.height)];var c=vl(a);if(Wn(o)&&(o.value===ni.CONTAIN||o.value===ni.COVER))return vl(a)?n.width/n.height<a==(o.value===ni.COVER)?[n.height*a,n.height]:[n.width,n.width/a]:[n.width,n.height];var l=vl(r),u=vl(i),d=l||u;if(_l(o)&&(!s||_l(s))){if(l&&u)return[r,i];if(!c&&!d)return[n.width,n.height];if(d&&c){var f=l?r:i*a,p=u?i:r/a;return[f,p]}var m=l?r:n.width,h=u?i:n.height;return[m,h]}if(c){var g=0,_=0;return Qn(o)?g=ir(o,n.width):Qn(s)&&(_=ir(s,n.height)),_l(o)?g=_*a:(!s||_l(s))&&(_=g/a),[g,_]}var v=null,y=null;if(Qn(o)?v=ir(o,n.width):s&&Qn(s)&&(y=ir(s,n.height)),v!==null&&(!s||_l(s))&&(y=l&&u?v/r*i:n.height),y!==null&&_l(o)&&(v=l&&u?y/i*r:n.width),v!==null&&y!==null)return[v,y];throw Error(`Unable to calculate background-size for element`)},bl=function(e,t){var n=e[t];return n===void 0?e[0]:n},xl=function(e,t,n,r,i){var a=t[0],o=t[1],s=n[0],c=n[1];switch(e){case 2:return[new q(Math.round(r.left),Math.round(r.top+o)),new q(Math.round(r.left+r.width),Math.round(r.top+o)),new q(Math.round(r.left+r.width),Math.round(c+r.top+o)),new q(Math.round(r.left),Math.round(c+r.top+o))];case 3:return[new q(Math.round(r.left+a),Math.round(r.top)),new q(Math.round(r.left+a+s),Math.round(r.top)),new q(Math.round(r.left+a+s),Math.round(r.height+r.top)),new q(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new q(Math.round(r.left+a),Math.round(r.top+o)),new q(Math.round(r.left+a+s),Math.round(r.top+o)),new q(Math.round(r.left+a+s),Math.round(r.top+o+c)),new q(Math.round(r.left+a),Math.round(r.top+o+c))];default:return[new q(Math.round(i.left),Math.round(i.top)),new q(Math.round(i.left+i.width),Math.round(i.top)),new q(Math.round(i.left+i.width),Math.round(i.height+i.top)),new q(Math.round(i.left),Math.round(i.height+i.top))]}},Sl=`data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7`,Cl=`Hidden Text`,wl=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement(`div`),r=this._document.createElement(`img`),i=this._document.createElement(`span`),a=this._document.body;n.style.visibility=`hidden`,n.style.fontFamily=e,n.style.fontSize=t,n.style.margin=`0`,n.style.padding=`0`,n.style.whiteSpace=`nowrap`,a.appendChild(n),r.src=Sl,r.width=1,r.height=1,r.style.margin=`0`,r.style.padding=`0`,r.style.verticalAlign=`baseline`,i.style.fontFamily=e,i.style.fontSize=t,i.style.margin=`0`,i.style.padding=`0`,i.appendChild(this._document.createTextNode(Cl)),n.appendChild(i),n.appendChild(r);var o=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(Cl)),n.style.lineHeight=`normal`,r.style.verticalAlign=`super`;var s=r.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:s}},e.prototype.getMetrics=function(e,t){var n=e+` `+t;return this._data[n]===void 0&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),Tl=function(){function e(e,t){this.context=e,this.options=t}return e}(),El=1e4,Dl=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement(`canvas`),r.ctx=r.canvas.getContext(`2d`),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+`px`,r.canvas.style.height=n.height+`px`),r.fontMetrics=new wl(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline=`bottom`,r._activeEffects=[],r.context.logger.debug(`Canvas renderer initialized (`+n.width+`x`+n.height+`) with scale `+n.scale),r}return n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},n.prototype.applyEffect=function(e){this.ctx.save(),Qc(e)&&(this.ctx.globalAlpha=e.opacity),Xc(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Zc(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return t=e.element.container.styles,t.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:if(va(e.container.flags,16))debugger;return e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;t===0?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Wo(e.text).reduce(function(t,i){return r.ctx.fillText(i,t,e.bounds.top+n),t+r.ctx.measureText(i).width},e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return e===`normal`||e===`small-caps`}).join(``),n=Ml(e.fontFamily).join(`, `),r=Hn(e.fontSize)?``+e.fontSize.number+e.fontSize.unit:e.fontSize.number+`px`;return[[e.fontStyle,t,e.fontWeight,r,n].join(` `),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,function(){var n,r,a,o,s,c,l,u,d=this;return i(this,function(i){return n=this.createFontStyle(t),r=n[0],a=n[1],o=n[2],this.ctx.font=r,this.ctx.direction=t.direction===1?`rtl`:`ltr`,this.ctx.textAlign=`left`,this.ctx.textBaseline=`alphabetic`,s=this.fontMetrics.getMetrics(a,o),c=s.baseline,l=s.middle,u=t.paintOrder,e.textBounds.forEach(function(e){u.forEach(function(n){switch(n){case 0:d.ctx.fillStyle=hr(t.color),d.renderTextWithLetterSpacing(e,t.letterSpacing,c);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach(function(n){d.ctx.shadowColor=hr(n.color),d.ctx.shadowOffsetX=n.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=n.offsetY.number*d.options.scale,d.ctx.shadowBlur=n.blur.number,d.renderTextWithLetterSpacing(e,t.letterSpacing,c)}),d.ctx.shadowColor=``,d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),t.textDecorationLine.length&&(d.ctx.fillStyle=hr(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:d.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+c),e.bounds.width,1);break;case 2:d.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:d.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+l),e.bounds.width,1);break}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(d.ctx.strokeStyle=hr(t.webkitTextStrokeColor),d.ctx.lineWidth=t.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?`miter`:`round`,d.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+c)),d.ctx.strokeStyle=``,d.ctx.lineWidth=0,d.ctx.lineJoin=`miter`;break}})}),[2]})})},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=pl(e),i=Kc(t);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,function(){var t,r,a,s,c,l,u,u,d,f,p,m,h,g,_,v,y,b,x,u,S,h,v;return i(this,function(i){switch(i.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,a=t.styles,s=0,c=t.textNodes,i.label=1;case 1:return s<c.length?(l=c[s],[4,this.renderTextNode(l,a)]):[3,4];case 2:i.sent(),i.label=3;case 3:return s++,[3,1];case 4:if(!(t instanceof $o))return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return u=i.sent(),this.renderReplacedElement(t,r,u),[3,8];case 7:return i.sent(),this.context.logger.error(`Error loading image `+t.src),[3,8];case 8:if(t instanceof es&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof ts))return[3,12];i.label=9;case 9:return i.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return u=i.sent(),this.renderReplacedElement(t,r,u),[3,12];case 11:return i.sent(),this.context.logger.error(`Error loading svg `+t.svg.substring(0,255)),[3,12];case 12:return t instanceof _s&&t.tree?(d=new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}),[4,d.render(t.tree)]):[3,14];case 13:f=i.sent(),t.width&&t.height&&this.ctx.drawImage(f,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),i.label=14;case 14:if(t instanceof ms&&(p=Math.min(t.bounds.width,t.bounds.height),t.type===us?t.checked&&(this.ctx.save(),this.path([new q(t.bounds.left+p*.39363,t.bounds.top+p*.79),new q(t.bounds.left+p*.16,t.bounds.top+p*.5549),new q(t.bounds.left+p*.27347,t.bounds.top+p*.44071),new q(t.bounds.left+p*.39694,t.bounds.top+p*.5649),new q(t.bounds.left+p*.72983,t.bounds.top+p*.23),new q(t.bounds.left+p*.84,t.bounds.top+p*.34085),new q(t.bounds.left+p*.39363,t.bounds.top+p*.79)]),this.ctx.fillStyle=hr(ps),this.ctx.fill(),this.ctx.restore()):t.type===ds&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+p/2,t.bounds.top+p/2,p/4,0,Math.PI*2,!0),this.ctx.fillStyle=hr(ps),this.ctx.fill(),this.ctx.restore())),Ol(t)&&t.value.length){switch(m=this.createFontStyle(a),h=m[0],g=m[1],_=this.fontMetrics.getMetrics(h,g).baseline,this.ctx.font=h,this.ctx.fillStyle=hr(a.color),this.ctx.textBaseline=`alphabetic`,this.ctx.textAlign=Al(t.styles.textAlign),v=pl(t),y=0,t.styles.textAlign){case 1:y+=v.width/2;break;case 2:y+=v.width;break}b=v.add(y,0,0,-v.height/2+1),this.ctx.save(),this.path([new q(v.left,v.top),new q(v.left+v.width,v.top),new q(v.left+v.width,v.top+v.height),new q(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Bo(t.value,b),a.letterSpacing,_),this.ctx.restore(),this.ctx.textBaseline=`alphabetic`,this.ctx.textAlign=`left`}if(!va(t.styles.display,2048))return[3,20];if(t.styles.listStyleImage===null)return[3,19];if(x=t.styles.listStyleImage,x.type!==0)return[3,18];u=void 0,S=x.url,i.label=15;case 15:return i.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return u=i.sent(),this.ctx.drawImage(u,t.bounds.left-(u.width+10),t.bounds.top),[3,18];case 17:return i.sent(),this.context.logger.error(`Error loading list-style-image `+S),[3,18];case 18:return[3,20];case 19:e.listValue&&t.styles.listStyleType!==-1&&(h=this.createFontStyle(a)[0],this.ctx.font=h,this.ctx.fillStyle=hr(a.color),this.ctx.textBaseline=`middle`,this.ctx.textAlign=`right`,v=new o(t.bounds.left,t.bounds.top+ir(t.styles.paddingTop,t.bounds.width),t.bounds.width,Pi(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Bo(e.listValue,v),a.letterSpacing,Pi(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline=`bottom`,this.ctx.textAlign=`left`),i.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,o,r,s,c,r,l,u,r,d,f,r,p,m,r,h,g,r;return i(this,function(i){switch(i.label){case 0:if(va(e.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:i.sent(),t=0,n=e.negativeZIndex,i.label=2;case 2:return t<n.length?(r=n[t],[4,this.renderStack(r)]):[3,5];case 3:i.sent(),i.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:i.sent(),a=0,o=e.nonInlineLevel,i.label=7;case 7:return a<o.length?(r=o[a],[4,this.renderNode(r)]):[3,10];case 8:i.sent(),i.label=9;case 9:return a++,[3,7];case 10:s=0,c=e.nonPositionedFloats,i.label=11;case 11:return s<c.length?(r=c[s],[4,this.renderStack(r)]):[3,14];case 12:i.sent(),i.label=13;case 13:return s++,[3,11];case 14:l=0,u=e.nonPositionedInlineLevel,i.label=15;case 15:return l<u.length?(r=u[l],[4,this.renderStack(r)]):[3,18];case 16:i.sent(),i.label=17;case 17:return l++,[3,15];case 18:d=0,f=e.inlineLevel,i.label=19;case 19:return d<f.length?(r=f[d],[4,this.renderNode(r)]):[3,22];case 20:i.sent(),i.label=21;case 21:return d++,[3,19];case 22:p=0,m=e.zeroOrAutoZIndexOrTransformedOrOpacity,i.label=23;case 23:return p<m.length?(r=m[p],[4,this.renderStack(r)]):[3,26];case 24:i.sent(),i.label=25;case 25:return p++,[3,23];case 26:h=0,g=e.positiveZIndex,i.label=27;case 27:return h<g.length?(r=g[h],[4,this.renderStack(r)]):[3,30];case 28:i.sent(),i.label=29;case 29:return h++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var r=Bc(e)?e.start:e;n===0?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Bc(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){if(e.width===t&&e.height===n)return e;var r=(this.canvas.ownerDocument??document).createElement(`canvas`);return r.width=Math.max(1,t),r.height=Math.max(1,n),r.getContext(`2d`).drawImage(e,0,0,e.width,e.height,0,0,t,n),r},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,o,s;return i(this,function(c){switch(c.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var a,o,s,c,l,u,d,f,p,m,c,l,u,d,f,h,g,_,v,y,b,x,S,C,p,w,c,T,E,d,f,D,l,u,O,k,A,j,M,N,P,ee;return i(this,function(i){switch(i.label){case 0:if(n.type!==0)return[3,5];a=void 0,o=n.url,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.context.cache.match(o)];case 2:return a=i.sent(),[3,4];case 3:return i.sent(),r.context.logger.error(`Error loading background-image `+o),[3,4];case 4:return a&&(s=gl(e,t,[a.width,a.height,a.width/a.height]),c=s[0],l=s[1],u=s[2],d=s[3],f=s[4],p=r.ctx.createPattern(r.resizeImage(a,d,f),`repeat`),r.renderRepeat(c,p,l,u)),[3,6];case 5:Kr(n)?(m=gl(e,t,[null,null,null]),c=m[0],l=m[1],u=m[2],d=m[3],f=m[4],h=kr(n.angle,d,f),g=h[0],_=h[1],v=h[2],y=h[3],b=h[4],x=document.createElement(`canvas`),x.width=d,x.height=f,S=x.getContext(`2d`),C=S.createLinearGradient(_,y,v,b),Dr(n.stops,g).forEach(function(e){return C.addColorStop(e.stop,hr(e.color))}),S.fillStyle=C,S.fillRect(0,0,d,f),d>0&&f>0&&(p=r.ctx.createPattern(x,`repeat`),r.renderRepeat(c,p,l,u))):qr(n)&&(w=gl(e,t,[null,null,null]),c=w[0],T=w[1],E=w[2],d=w[3],f=w[4],D=n.position.length===0?[tr]:n.position,l=ir(D[0],d),u=ir(D[D.length-1],f),O=Mr(n,l,u,d,f),k=O[0],A=O[1],k>0&&A>0&&(j=r.ctx.createRadialGradient(T+l,E+u,0,T+l,E+u,k),Dr(n.stops,k*2).forEach(function(e){return j.addColorStop(e.stop,hr(e.color))}),r.path(c),r.ctx.fillStyle=j,k===A?r.ctx.fill():(M=e.bounds.left+.5*e.bounds.width,N=e.bounds.top+.5*e.bounds.height,P=A/k,ee=1/P,r.ctx.save(),r.ctx.translate(M,N),r.ctx.transform(1,0,0,P,0,0),r.ctx.translate(-M,-N),r.ctx.fillRect(T,ee*(E-N)+N,d,f*ee),r.ctx.restore()))),i.label=6;case 6:return t--,[2]}})},r=this,a=0,o=e.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(s=o[a],[5,n(s)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,function(){return i(this,function(r){return this.path(ol(n,t)),this.ctx.fillStyle=hr(e),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(e,t,n,a){return r(this,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,a)]:[3,2];case 1:return i.sent(),[2];case 2:return r=sl(a,n),this.path(r),this.ctx.fillStyle=hr(e),this.ctx.fill(),o=cl(a,n),this.path(o),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,o,s,c,l,u=this;return i(this,function(i){switch(i.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!mr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],a=kl(bl(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),mr(t.backgroundColor)||(this.ctx.fillStyle=hr(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:i.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){u.ctx.save();var n=Wc(e.curves),r=t.inset?0:El,i=el(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(u.path(n),u.ctx.clip(),u.mask(i)):(u.mask(n),u.ctx.clip(),u.path(i)),u.ctx.shadowOffsetX=t.offsetX.number+r,u.ctx.shadowOffsetY=t.offsetY.number,u.ctx.shadowColor=hr(t.color),u.ctx.shadowBlur=t.blur.number,u.ctx.fillStyle=t.inset?hr(t.color):`rgba(0,0,0,1)`,u.ctx.fill(),u.ctx.restore()}),i.label=2;case 2:o=0,s=0,c=r,i.label=3;case 3:return s<c.length?(l=c[s],l.style!==0&&!mr(l.color)&&l.width>0?l.style===2?[4,this.renderDashedDottedBorder(l.color,l.width,o,e.curves,2)]:[3,5]:[3,11]):[3,13];case 4:return i.sent(),[3,11];case 5:return l.style===3?[4,this.renderDashedDottedBorder(l.color,l.width,o,e.curves,3)]:[3,7];case 6:return i.sent(),[3,11];case 7:return l.style===4?[4,this.renderDoubleBorder(l.color,l.width,o,e.curves)]:[3,9];case 8:return i.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,o,e.curves)];case 10:i.sent(),i.label=11;case 11:o++,i.label=12;case 12:return s++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(e,t,n,a,o){return r(this,void 0,void 0,function(){var r,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,b,x;return i(this,function(i){return this.ctx.save(),r=ll(a,n),s=ol(a,n),o===2&&(this.path(s),this.ctx.clip()),Bc(s[0])?(c=s[0].start.x,l=s[0].start.y):(c=s[0].x,l=s[0].y),Bc(s[1])?(u=s[1].end.x,d=s[1].end.y):(u=s[1].x,d=s[1].y),f=n===0||n===2?Math.abs(c-u):Math.abs(l-d),this.ctx.beginPath(),o===3?this.formatPath(r):this.formatPath(s.slice(0,2)),p=t<3?t*3:t*2,m=t<3?t*2:t,o===3&&(p=t,m=t),h=!0,f<=p*2?h=!1:f<=p*2+m?(g=f/(2*p+m),p*=g,m*=g):(_=Math.floor((f+m)/(p+m)),v=(f-_*p)/(_-1),y=(f-(_+1)*p)/_,m=y<=0||Math.abs(m-v)<Math.abs(m-y)?v:y),h&&(o===3?this.ctx.setLineDash([0,p+m]):this.ctx.setLineDash([p,m])),o===3?(this.ctx.lineCap=`round`,this.ctx.lineWidth=t):this.ctx.lineWidth=t*2+1.1,this.ctx.strokeStyle=hr(e),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Bc(s[0])&&(b=s[3],x=s[0],this.ctx.beginPath(),this.formatPath([new q(b.end.x,b.end.y),new q(x.start.x,x.start.y)]),this.ctx.stroke()),Bc(s[1])&&(b=s[1],x=s[2],this.ctx.beginPath(),this.formatPath([new q(b.end.x,b.end.y),new q(x.start.x,x.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=hr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=al(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(Tl),Ol=function(e){return e instanceof gs||e instanceof hs?!0:e instanceof ms&&e.type!==ds&&e.type!==us},kl=function(e,t){switch(e){case 0:return Wc(t);case 2:return Gc(t);case 1:default:return Kc(t)}},Al=function(e){switch(e){case 1:return`center`;case 2:return`right`;case 0:default:return`left`}},jl=[`-apple-system`,`system-ui`],Ml=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return jl.indexOf(e)===-1}):e},Nl=function(e){t(n,e);function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement(`canvas`),r.ctx=r.canvas.getContext(`2d`),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+`px`,r.canvas.style.height=n.height+`px`,r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug(`EXPERIMENTAL ForeignObject renderer initialized (`+n.width+`x`+n.height+` at `+n.x+`,`+n.y+`) with scale `+n.scale),r}return n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return t=Lo(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,Pl(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=hr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(Tl),Pl=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src=`data:image/svg+xml;charset=utf-8,`+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Fl=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){var e=[...arguments];this.enabled&&(typeof window<`u`&&window.console&&typeof console.debug==`function`?console.debug.apply(console,a([this.id,this.getTime()+`ms`],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){var e=[...arguments];this.enabled&&typeof window<`u`&&window.console&&typeof console.info==`function`&&console.info.apply(console,a([this.id,this.getTime()+`ms`],e))},e.prototype.warn=function(){var e=[...arguments];this.enabled&&(typeof window<`u`&&window.console&&typeof console.warn==`function`?console.warn.apply(console,a([this.id,this.getTime()+`ms`],e)):this.info.apply(this,e))},e.prototype.error=function(){var e=[...arguments];this.enabled&&(typeof window<`u`&&window.console&&typeof console.error==`function`?console.error.apply(console,a([this.id,this.getTime()+`ms`],e)):this.info.apply(this,e))},e.instances={},e}(),Il=function(){function e(t,n){this.windowBounds=n,this.instanceName=`#`+ e.instanceCount++,this.logger=new Fl({id:this.instanceName,enabled:t.logging}),this.cache=t.cache??new kc(this,t)}return e.instanceCount=1,e}(),Ll=function(e,t){return t===void 0&&(t={}),Rl(e,t)};typeof window<`u`&&Oc.setContext(window);var Rl=function(e,t){return r(void 0,void 0,void 0,function(){var r,a,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T,E,D,O,D;return i(this,function(i){switch(i.label){case 0:if(!e||typeof e!=`object`)return[2,Promise.reject(`Invalid element provided as first argument`)];if(r=e.ownerDocument,!r)throw Error(`Element is not attached to a Document`);if(a=r.defaultView,!a)throw Error(`Document is not attached to a Window`);return l={allowTaint:t.allowTaint??!1,imageTimeout:t.imageTimeout??15e3,proxy:t.proxy,useCORS:t.useCORS??!1},u=n({logging:t.logging??!0,cache:t.cache},l),d={windowWidth:t.windowWidth??a.innerWidth,windowHeight:t.windowHeight??a.innerHeight,scrollX:t.scrollX??a.pageXOffset,scrollY:t.scrollY??a.pageYOffset},f=new o(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),p=new Il(u,f),m=t.foreignObjectRendering??!1,h={allowTaint:t.allowTaint??!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:m,copyStyles:m},p.logger.debug(`Starting document clone with size `+f.width+`x`+f.height+` scrolled to `+-f.left+`,`+-f.top),g=new uc(p,e,h),_=g.clonedReferenceElement,_?[4,g.toIFrame(r,f)]:[2,Promise.reject(`Unable to find element in cloned iframe`)];case 1:return v=i.sent(),y=Ns(_)||js(_)?c(_.ownerDocument):s(p,_),b=y.width,x=y.height,S=y.left,C=y.top,w=zl(p,_,t.backgroundColor),T={canvas:t.canvas,backgroundColor:w,scale:t.scale??a.devicePixelRatio??1,x:(t.x??0)+S,y:(t.y??0)+C,width:t.width??Math.ceil(b),height:t.height??Math.ceil(x)},m?(p.logger.debug(`Document cloned, using foreign object rendering`),D=new Nl(p,T),[4,D.render(_)]):[3,3];case 2:return E=i.sent(),[3,5];case 3:return p.logger.debug(`Document cloned, element located at `+S+`,`+C+` with size `+b+`x`+x+` using computed rendering`),p.logger.debug(`Starting DOM parsing`),O=xs(p,_),w===O.styles.backgroundColor&&(O.styles.backgroundColor=Cr.TRANSPARENT),p.logger.debug(`Starting renderer for element at `+T.x+`,`+T.y+` with size `+T.width+`x`+T.height),D=new Dl(p,T),[4,D.render(O)];case 4:E=i.sent(),i.label=5;case 5:return(t.removeContainer??!0)&&(uc.destroy(v)||p.logger.error(`Cannot detach cloned iframe as it is not in the DOM anymore`)),p.logger.debug(`Finished rendering`),[2,E]}})})},zl=function(e,t,n){var r=t.ownerDocument,i=r.documentElement?Sr(e,getComputedStyle(r.documentElement).backgroundColor):Cr.TRANSPARENT,a=r.body?Sr(e,getComputedStyle(r.body).backgroundColor):Cr.TRANSPARENT,o=typeof n==`string`?Sr(e,n):n===null?Cr.TRANSPARENT:4294967295;return t===r.documentElement?mr(i)?mr(a)?o:a:i:o};return Ll}))}));dN();var fN;(function(e){e.LOAD=`LOAD`,e.EXEC=`EXEC`,e.FFPROBE=`FFPROBE`,e.WRITE_FILE=`WRITE_FILE`,e.READ_FILE=`READ_FILE`,e.DELETE_FILE=`DELETE_FILE`,e.RENAME=`RENAME`,e.CREATE_DIR=`CREATE_DIR`,e.LIST_DIR=`LIST_DIR`,e.DELETE_DIR=`DELETE_DIR`,e.ERROR=`ERROR`,e.DOWNLOAD=`DOWNLOAD`,e.PROGRESS=`PROGRESS`,e.LOG=`LOG`,e.MOUNT=`MOUNT`,e.UNMOUNT=`UNMOUNT`})(fN||={});const pN=(()=>{let e=0;return()=>e++})(),mN=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),hN=Error(`called FFmpeg.terminate()`);var gN=class{#worker=null;#resolves={};#rejects={};#logEventCallbacks=[];#progressEventCallbacks=[];loaded=!1;#registerHandlers=()=>{this.#worker&&(this.#worker.onmessage=({data:{id:e,type:t,data:n}})=>{switch(t){case fN.LOAD:this.loaded=!0,this.#resolves[e](n);break;case fN.MOUNT:case fN.UNMOUNT:case fN.EXEC:case fN.FFPROBE:case fN.WRITE_FILE:case fN.READ_FILE:case fN.DELETE_FILE:case fN.RENAME:case fN.CREATE_DIR:case fN.LIST_DIR:case fN.DELETE_DIR:this.#resolves[e](n);break;case fN.LOG:this.#logEventCallbacks.forEach(e=>e(n));break;case fN.PROGRESS:this.#progressEventCallbacks.forEach(e=>e(n));break;case fN.ERROR:this.#rejects[e](n);break}delete this.#resolves[e],delete this.#rejects[e]})};#send=({type:e,data:t},n=[],r)=>this.#worker?new Promise((i,a)=>{let o=pN();this.#worker&&this.#worker.postMessage({id:o,type:e,data:t},n),this.#resolves[o]=i,this.#rejects[o]=a,r?.addEventListener(`abort`,()=>{a(new DOMException(`Message # ${o} was aborted`,`AbortError`))},{once:!0})}):Promise.reject(mN);on(e,t){e===`log`?this.#logEventCallbacks.push(t):e===`progress`&&this.#progressEventCallbacks.push(t)}off(e,t){e===`log`?this.#logEventCallbacks=this.#logEventCallbacks.filter(e=>e!==t):e===`progress`&&(this.#progressEventCallbacks=this.#progressEventCallbacks.filter(e=>e!==t))}load=({classWorkerURL:e,...t}={},{signal:n}={})=>(this.#worker||(this.#worker=e?new Worker(new URL(e,import.meta.url),{type:`module`}):new Worker(new URL(`/assets/worker-B7jP4_Ki.js`,``+import.meta.url),{type:`module`}),this.#registerHandlers()),this.#send({type:fN.LOAD,data:t},void 0,n));exec=(e,t=-1,{signal:n}={})=>this.#send({type:fN.EXEC,data:{args:e,timeout:t}},void 0,n);ffprobe=(e,t=-1,{signal:n}={})=>this.#send({type:fN.FFPROBE,data:{args:e,timeout:t}},void 0,n);terminate=()=>{let e=Object.keys(this.#rejects);for(let t of e)this.#rejects[t](hN),delete this.#rejects[t],delete this.#resolves[t];this.#worker&&(this.#worker.terminate(),this.#worker=null,this.loaded=!1)};writeFile=(e,t,{signal:n}={})=>{let r=[];return t instanceof Uint8Array&&r.push(t.buffer),this.#send({type:fN.WRITE_FILE,data:{path:e,data:t}},r,n)};mount=(e,t,n)=>this.#send({type:fN.MOUNT,data:{fsType:e,options:t,mountPoint:n}},[]);unmount=e=>this.#send({type:fN.UNMOUNT,data:{mountPoint:e}},[]);readFile=(e,t=`binary`,{signal:n}={})=>this.#send({type:fN.READ_FILE,data:{path:e,encoding:t}},void 0,n);deleteFile=(e,{signal:t}={})=>this.#send({type:fN.DELETE_FILE,data:{path:e}},void 0,t);rename=(e,t,{signal:n}={})=>this.#send({type:fN.RENAME,data:{oldPath:e,newPath:t}},void 0,n);createDir=(e,{signal:t}={})=>this.#send({type:fN.CREATE_DIR,data:{path:e}},void 0,t);listDir=(e,{signal:t}={})=>this.#send({type:fN.LIST_DIR,data:{path:e}},void 0,t);deleteDir=(e,{signal:t}={})=>this.#send({type:fN.DELETE_DIR,data:{path:e}},void 0,t)},_N;(function(e){e.MEMFS=`MEMFS`,e.NODEFS=`NODEFS`,e.NODERAWFS=`NODERAWFS`,e.IDBFS=`IDBFS`,e.WORKERFS=`WORKERFS`,e.PROXYFS=`PROXYFS`})(_N||={});var vN=null,yN=null,bN=async()=>{if(vN?.loaded)return vN;if(yN)return yN;vN||=new gN,yN=(async()=>(vN.loaded||await vN.load(),vN))();try{return await yN,vN}finally{yN=null}},xN=(e,t)=>{let n=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;return`${e}-${n}.${t}`},SN=async e=>{if(!e)return null;if(e instanceof Uint8Array)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer);if(e instanceof Blob)return new Uint8Array(await e.arrayBuffer());if(typeof e==`string`){let t=await fetch(e);if(!t.ok)throw Error(`Failed to fetch resource: ${t.status}`);return new Uint8Array(await t.arrayBuffer())}throw Error(`Unsupported input type for toUint8Array`)};const CN=async(e,t={})=>{if(!e)return console.warn(` convertBlobToMp4 called without input blob`),null;let n=await bN(),r=xN(t.inputPrefix||`input`,`webm`),i=xN(t.outputPrefix||`output`,`mp4`);try{let a=await SN(e);if(!a)return console.warn(` Failed to translate input blob to Uint8Array`),null;await n.writeFile(r,a);let o=[...t.ffmpegArgs||[`-i`,r,`-c:v`,`libx264`,`-preset`,`veryfast`,`-pix_fmt`,`yuv420p`,`-movflags`,`faststart`,`-an`]];if(t.frameRate&&Number.isFinite(t.frameRate)&&t.frameRate>0&&o.push(`-r`,String(t.frameRate)),t.durationSeconds&&Number.isFinite(t.durationSeconds)&&t.durationSeconds>0){let e=Math.max(.1,t.durationSeconds);o.push(`-t`,e.toFixed(3))}o.push(i),await n.exec(o);let s=await n.readFile(i);if(!s)return console.warn(` FFmpeg returned empty output data`),null;let c=s instanceof Uint8Array?s:new Uint8Array(s);return new Blob([c],{type:`video/mp4`})}catch(e){return console.error(` Failed to convert video to mp4:`,e),null}finally{try{await n.deleteFile(r)}catch{}try{await n.deleteFile(i)}catch{}}};var wN=`https://wsrv.nl/`,TN=e=>{if(!e)return e;if(e.includes(`72.61.210.203`)){let t=e.match(/72\.61\.210\.203(\/.*)/);if(t)return`https://fremio.id/proxy${t[1]}`}return e.startsWith(`http://`)?e.replace(`http://`,`https://`):e};const EN=(e,t={})=>{if(!e)return``;if(e.startsWith(`data:`)||!e.startsWith(`http`)||e.includes(`wsrv.nl`))return e;if(e.includes(`72.61.210.203`))return TN(e);let n=TN(e),{width:r,height:i,quality:a=80,format:o=`webp`,fit:s=`cover`,blur:c,sharpen:l,brightness:u,contrast:d}=t,f=new URLSearchParams;return f.append(`url`,n),r&&f.append(`w`,r),i&&f.append(`h`,i),a&&f.append(`q`,a),o&&f.append(`output`,o),s&&(r||i)&&f.append(`fit`,s),f.append(`n`,`-1`),c&&f.append(`blur`,c),l&&f.append(`sharp`,l),u&&f.append(`mod`,u),d&&f.append(`con`,d),`${wN}?${f.toString()}`},DN=e=>{if(!e)return``;if(e.includes(`wsrv.nl`))try{return new URL(e).searchParams.get(`url`)||e}catch{return e}return e},ON={thumbnail:e=>EN(e,{width:200,height:300,quality:70,format:`webp`}),preview:e=>EN(e,{width:400,height:600,quality:80,format:`webp`}),card:e=>EN(e,{width:300,height:450,quality:75,format:`webp`,fit:`contain`}),full:e=>EN(e,{width:1080,height:1920,quality:90,format:`webp`}),download:e=>EN(e,{width:1080,height:1920,quality:95,format:`png`}),avatar:e=>EN(e,{width:100,height:100,quality:80,format:`webp`,fit:`cover`}),placeholder:e=>EN(e,{width:20,height:30,quality:30,format:`webp`,blur:5})};var kN=(e,t,n,r,i)=>{if(e)try{let a=zO(e,t,n,r,i);a&&typeof a.catch==`function`&&a.catch(()=>{})}catch{}},AN=e=>{let t=document.createElement(`div`);t.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: ${e.type===`success`?`#10b981`:e.type===`error`?`#ef4444`:`#3b82f6`};
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    z-index: 10000;
    font-size: 14px;
    max-width: 90%;
    text-align: center;
  `,t.textContent=e.message||e.title,document.body.appendChild(t),setTimeout(()=>{t.style.transition=`opacity 0.3s`,t.style.opacity=`0`,setTimeout(()=>document.body.removeChild(t),300)},3e3)},jN=()=>{let e=navigator.userAgent;return{isMobile:/iPhone|iPad|iPod|Android/i.test(e),isIOS:/iPhone|iPad|iPod/i.test(e),isAndroid:/Android/i.test(e),isSafari:/Safari/i.test(e)&&!/Chrome/i.test(e),isChrome:/Chrome/i.test(e)}},MN=e=>{let[t,n]=e.split(`,`),r=t.match(/data:([^;]+);base64/),i=r?r[1]:`application/octet-stream`,a=atob(n),o=new Uint8Array(a.length);for(let e=0;e<a.length;e++)o[e]=a.charCodeAt(e);return new Blob([o],{type:i})};const NN=async(e,t,n=`image/png`,r={})=>{try{let i=jN(),{frameId:a,frameName:o}=r,s=r.useShareApi!==!1,c=r.showWebToasts!==!1;if(typeof e==`string`&&e.startsWith(`data:`)){console.log(` Using direct data URL download`);let r=document.createElement(`a`);if(r.href=e,r.download=t,r.style.display=`none`,document.body.appendChild(r),r.click(),document.body.removeChild(r),s&&i.isMobile&&navigator.share)try{let r=MN(e),i=new File([r],t,{type:n});if(navigator.canShare&&navigator.canShare({files:[i]}))return await navigator.share({files:[i],title:o||`Fremio Photo`,text:`Simpan foto ke Galeri`}),a&&kN(a,o,n.split(`/`)[1],!1,`download+share`),{success:!0,method:`download+share`}}catch(e){if(e?.name===`AbortError`)return{success:!0,method:`download`,shareCancelled:!0};console.log(` Share after download failed:`,e?.message)}return a&&kN(a,o,n.split(`/`)[1],!1,`data-url`),{success:!0,method:`data-url`}}let l=e;if(typeof e==`string`&&(l=await(await fetch(e)).blob()),l.type!==n&&(l=new Blob([l],{type:n})),console.log(` Starting download:`,{filename:t,mimeType:n,device:i}),s&&i.isMobile&&navigator.share)try{let e=new File([l],t,{type:n});if(navigator.canShare&&navigator.canShare({files:[e]}))return console.log(` Attempting Web Share API for direct save to gallery...`),await navigator.share({files:[e],title:o||`Fremio Photo`,text:`Simpan foto ke Galeri`}),console.log(` Download via Web Share API - User saved file`),a&&kN(a,o,n.split(`/`)[1],!1,`share`),{success:!0,method:`share`};console.log(` Browser does not support file sharing via Web Share API`)}catch(e){if(e.name===`AbortError`)return console.log(` User cancelled share dialog`),{success:!1,cancelled:!0};console.log(` Share API failed, trying fallback:`,e.message)}if(console.log(` Using direct download method`),i.isIOS&&i.isSafari)try{let e=new FileReader,r=await new Promise((t,n)=>{e.onloadend=()=>t(e.result),e.onerror=n,e.readAsDataURL(l)}),i=document.createElement(`a`);return i.href=r,i.download=t,i.style.display=`none`,document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i)},50),a&&kN(a,o,n.split(`/`)[1],!1,`ios-download`),c&&AN({type:`success`,message:`Foto berhasil disimpan ke Downloads!`}),{success:!0,method:`ios-download`}}catch(e){console.log(`iOS download failed, using fallback:`,e)}console.log(` Using standard download with HTML anchor...`);let u=URL.createObjectURL(l),d=document.createElement(`a`);return d.href=u,d.download=t,d.setAttribute(`download`,t),d.style.display=`none`,document.body.appendChild(d),d.click(),setTimeout(()=>{d.parentNode&&document.body.removeChild(d),URL.revokeObjectURL(u)},250),a&&kN(a,o,n.split(`/`)[1],!1,`download`),c&&(i.isAndroid?AN({type:`success`,message:` Foto disimpan! Cek notifikasi download atau buka Galeri > Download/Fremio`}):i.isIOS?AN({type:`success`,message:` Foto disimpan! Cek folder Downloads atau Files`}):AN({type:`success`,message:` Foto berhasil diunduh!`})),console.log(` Download completed via standard download`),{success:!0,method:`download`}}catch(e){return console.error(` Download error:`,e),AN({type:`error`,title:`Download Gagal`,message:e.message||`Terjadi kesalahan saat mengunduh file`}),{success:!1,error:e.message}}},PN=async(e,t={})=>{let n=Date.now(),r=t.filename||`fremio-photo-${n}.png`,i=t.mimeType||`image/png`;return NN(e,r,i,t)},FN=async(e,t={})=>{let n=Date.now(),r=t.filename||`fremio-video-${n}.mp4`,i=t.mimeType||`video/mp4`;return NN(e,r,i,t)};var IN=null,LN=null,RN=null;(async()=>{try{let[e,t,n]=await Promise.all([w(()=>import(`./draftStorage-mjujrh6i-Di68pede.js`),[]),w(()=>import(`./draftHelpers-mjujrh6i-CY0F5TmK.js`),[]),w(()=>import(`./unifiedFrameService-mjujrh6i-Cb0BT8AM.js`),[])]);IN=e,LN=t,RN=n,console.log(` EditPhoto modules preloaded`)}catch(e){console.warn(` Module preload failed:`,e)}})();function zN(){console.log(` EDITPHOTO RENDERING...`);let e=Le(),{showToast:t}=Mm(),[n,r]=(0,b.useState)([]),[i,a]=(0,b.useState)([]),[o,s]=(0,b.useState)(null),[c,l]=(0,b.useState)(!0),[u,d]=(0,b.useState)([]),[f,p]=(0,b.useState)(null),[m,h]=(0,b.useState)(!1),[g,_]=(0,b.useState)(``),[v,y]=(0,b.useState)(``),[x,S]=(0,b.useState)({}),[C,T]=(0,b.useState)(null),[E,D]=(0,b.useState)(null),[O,k]=(0,b.useState)(null),[A,j]=(0,b.useState)({brightness:100,contrast:100,saturate:100,grayscale:0,sepia:0,blur:0,hueRotate:0}),[M,N]=(0,b.useState)(`Original`),P=b.useRef(!1),ee=b.useRef(null),[F,I]=(0,b.useState)(!1),[L,R]=(0,b.useState)(`photo`),te=typeof window<`u`&&/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),z=(0,b.useCallback)(async(e,t=2)=>new Promise(async(n,r)=>{if(!e){r(Error(`Missing image url`));return}if(e.startsWith(`data:`)){let t=new Image;t.onload=()=>n(t),t.onerror=r,t.src=e;return}let i=e;if(e.includes(`api.fremio.id`)){let t=e.includes(`?`)?`&`:`?`;i=`${e}${t}_cors=1`}let a=e.includes(`supabase.co`)||e.includes(`imagekit.io`),o=new Image;o.crossOrigin=`anonymous`;let s=!1,c=setTimeout(()=>{s||(console.log(` Direct load timeout, trying fallback...`),l())},8e3);o.onload=()=>{s||(s=!0,clearTimeout(c),console.log(` Image loaded directly with crossOrigin`),n(o))},o.onerror=()=>{s||(clearTimeout(c),console.log(` Direct load failed, trying fallback...`),l())};let l=async()=>{if(!s)try{let t=i;if(a){let n=`http://72.61.210.203/api/static/proxy?url=${encodeURIComponent(e)}`;console.log(` Using VPS proxy for image:`,e.substring(0,60)+`...`),t=n}let o=await fetch(t,{mode:`cors`,credentials:`omit`});if(!o.ok)throw Error(`HTTP ${o.status}`);let c=await o.blob(),l=await new Promise(e=>{let t=new FileReader;t.onloadend=()=>e(t.result),t.readAsDataURL(c)}),u=new Image;u.onload=()=>{s||(s=!0,console.log(` Image loaded via proxy/fetch approach`),n(u))},u.onerror=()=>{s||(console.error(` Fallback image load also failed`),r(Error(`All image loading methods failed`)))},u.src=l}catch(a){if(console.error(` Fetch/proxy approach failed:`,a),t>0&&(a.message.includes(`502`)||a.message.includes(`544`))){console.log(` Retrying in 1s... (${t} retries left)`),await new Promise(e=>setTimeout(e,1e3));try{let r=await z(e,t-1);s||(s=!0,n(r));return}catch{}}let o=new Image;o.onload=()=>{s||(s=!0,console.log(` Image loaded without crossOrigin (may cause tainted canvas)`),n(o))},o.onerror=()=>{s||r(Error(`All methods failed - server may be temporarily unavailable`))},o.src=i}};o.src=i}),[]),B=(0,b.useCallback)((e,t)=>{console.log(` Swapping photos:`,e,``,t),d(n=>{let r=[...n],i=r.findIndex(t=>t.id===e),a=r.findIndex(e=>e.id===t);if(i===-1||a===-1)return console.warn(` Could not find elements for swap`),n;let o=r[i],s=r[a];if(typeof o.data?.photoIndex!=`number`||typeof s.data?.photoIndex!=`number`)return console.warn(` Can only swap photo slots`),n;let c=o.data?.image,l=s.data?.image;return r[i]={...o,data:{...o.data,image:l}},r[a]={...s,data:{...s.data,image:c}},console.log(` Photos swapped successfully`),r}),S(n=>{let r=n[e]||{scale:1,x:0,y:0},i=n[t]||{scale:1,x:0,y:0};return{...n,[e]:i,[t]:r}}),D(null),T(null)},[]),V=(0,b.useCallback)((e,t)=>{S(n=>({...n,[e]:t}))},[]),H=(0,b.useCallback)(e=>x[e]||{scale:1,x:0,y:0},[x]),ne=(0,b.useRef)({isPinching:!1,isDragging:!1,initialDistance:0,initialScale:1,initialX:0,initialY:0,lastTouchX:0,lastTouchY:0,lastTapTime:0,activePhotoId:null,containerRect:null,photoWidth:0,photoHeight:0}),re=(0,b.useCallback)((e,t)=>{let n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)},[]),U=(0,b.useCallback)((e,t,n)=>Math.min(Math.max(e,t),n),[]),ie=(0,b.useCallback)((e,t,n)=>{let r=t*e,i=n*e,a=t*.25,o=n*.25,s=Math.max(0,(r-t)/2),c=Math.max(0,(i-n)/2);return{maxPanX:Math.max(a,s),maxPanY:Math.max(o,c)}},[]),ae=(0,b.useCallback)((e,t,n)=>{let r=ne.current,i=e.touches;console.log(` TouchStart:`,{photoId:t,touchCount:i.length,selectedPhotoId:C}),n&&(r.containerRect=n.getBoundingClientRect());let a=H(t),o=C===t;try{e.preventDefault(),e.stopPropagation()}catch{}let s=Date.now();if(i.length===1&&o){if(s-r.lastTapTime<300){V(t,{scale:1,x:0,y:0}),r.lastTapTime=0,T(null),console.log(` Double tap - reset zoom`);return}r.lastTapTime=s}if(!o){console.log(` Photo not selected, ignoring touch`);return}r.activePhotoId=t,i.length===2?(r.isPinching=!0,r.isDragging=!1,r.initialDistance=re(i[0],i[1]),r.initialScale=a.scale,r.initialX=a.x,r.initialY=a.y,console.log(` Pinch started, initial scale:`,a.scale)):i.length===1&&(r.isDragging=!0,r.isPinching=!1,r.lastTouchX=i[0].clientX,r.lastTouchY=i[0].clientY,console.log(` Drag started`))},[re,H,V,C]),oe=(0,b.useCallback)((e,t)=>{let n=ne.current,r=e.touches;try{e.preventDefault(),e.stopPropagation()}catch{}if(n.activePhotoId!==t||C!==t)return;let i=H(t),a=n.containerRect;if(n.isPinching&&r.length===2){let e=re(r[0],r[1])/n.initialDistance,i=n.initialScale*e;i=U(i,1,4);let o=a?a.width*4:1080,s=a?a.height*4:1080,{maxPanX:c,maxPanY:l}=ie(i,o,s),u=U(n.initialX,-c,c),d=U(n.initialY,-l,l);console.log(` Pinch move, scale:`,i.toFixed(2),`maxPan:`,c.toFixed(0),l.toFixed(0)),V(t,{scale:i,x:u,y:d})}else if(n.isDragging&&r.length===1){let e=(r[0].clientX-n.lastTouchX)*4,o=(r[0].clientY-n.lastTouchY)*4,s=a?a.width*4:1080,c=a?a.height*4:1080,{maxPanX:l,maxPanY:u}=ie(i.scale,s,c),d=U(i.x+e,-l,l),f=U(i.y+o,-u,u);console.log(` Drag move:`,{delta:[e.toFixed(0),o.toFixed(0)],newPos:[d.toFixed(0),f.toFixed(0)],maxPan:[l.toFixed(0),u.toFixed(0)],scale:i.scale.toFixed(2)}),V(t,{scale:i.scale,x:d,y:f}),n.lastTouchX=r[0].clientX,n.lastTouchY=r[0].clientY}},[U,re,H,V,C,ie]),se=(0,b.useCallback)((e,t)=>{let n=ne.current,r=e.touches;if(n.activePhotoId!==t)return;let i=H(t);r.length<2&&(n.isPinching=!1),r.length===0?(n.isDragging=!1,i.scale<1.05&&V(t,{scale:1,x:0,y:0})):r.length===1&&(n.isDragging=!0,n.lastTouchX=r[0].clientX,n.lastTouchY=r[0].clientY)},[H,V]),ce=(0,b.useRef)({isDragging:!1,lastMouseX:0,lastMouseY:0,activePhotoId:null,containerRect:null}),le=(0,b.useCallback)((e,t,n)=>{if(C!==t)return;e.preventDefault(),e.stopPropagation();let r=H(t),i=n?.getBoundingClientRect(),a=i?i.width*4:1080,o=i?i.height*4:1080,s=e.ctrlKey||Math.abs(e.deltaX)<1&&Math.abs(e.deltaY)<50&&e.deltaMode===0;if(console.log(` Wheel event:`,{ctrlKey:e.ctrlKey,deltaY:e.deltaY.toFixed(2),deltaX:e.deltaX.toFixed(2),deltaMode:e.deltaMode,isPinch:s,selected:C}),e.ctrlKey){let n=-e.deltaY*.01,i=r.scale*(1+n);i=U(i,1,4);let{maxPanX:s,maxPanY:c}=ie(i,a,o),l=U(r.x,-s,s),u=U(r.y,-c,c);console.log(` Pinch zoom (ctrlKey), scale:`,i.toFixed(2)),V(t,{scale:i,x:l,y:u})}else if(r.scale>1){let n=-e.deltaX*2*4,i=-e.deltaY*2*4,{maxPanX:s,maxPanY:c}=ie(r.scale,a,o),l=U(r.x+n,-s,s),u=U(r.y+i,-c,c);V(t,{scale:r.scale,x:l,y:u})}},[C,H,V,U,ie]),ue=(0,b.useCallback)((e,t,n)=>{if(C!==t)return;e.preventDefault(),e.stopPropagation();let r=H(t),i=r.scale*e.scale;i=U(i,1,4),console.log(` Safari gesture zoom, scale:`,i.toFixed(2),`gesture.scale:`,e.scale.toFixed(2));let a=n?.getBoundingClientRect(),o=a?a.width*4:1080,s=a?a.height*4:1080,{maxPanX:c,maxPanY:l}=ie(i,o,s),u=U(r.x,-c,c),d=U(r.y,-l,l);V(t,{scale:i,x:u,y:d})},[C,H,V,U,ie]);(0,b.useEffect)(()=>{if(!C)return;let e=me.current[C];if(!e)return;let t=1,n=e=>{e.preventDefault(),t=H(C).scale,console.log(` Gesture start, base scale:`,t.toFixed(2))},r=n=>{n.preventDefault();let r=H(C),i=t*n.scale;i=U(i,1,4),console.log(` Gesture change, scale:`,i.toFixed(2));let a=e.getBoundingClientRect(),o=a.width*4,s=a.height*4,{maxPanX:c,maxPanY:l}=ie(i,o,s),u=U(r.x,-c,c),d=U(r.y,-l,l);V(C,{scale:i,x:u,y:d})},i=e=>{e.preventDefault(),console.log(` Gesture end`)};e.addEventListener(`gesturestart`,n,{passive:!1}),e.addEventListener(`gesturechange`,r,{passive:!1}),e.addEventListener(`gestureend`,i,{passive:!1});let a=e=>{e.ctrlKey&&e.preventDefault()};return e.addEventListener(`wheel`,a,{passive:!1}),()=>{e.removeEventListener(`gesturestart`,n),e.removeEventListener(`gesturechange`,r),e.removeEventListener(`gestureend`,i),e.removeEventListener(`wheel`,a)}},[C,H,V,U,ie]);let de=(0,b.useCallback)((e,t,n)=>{if(e.button!==0||C!==t)return;e.preventDefault(),e.stopPropagation();let r=ce.current;r.isDragging=!0,r.lastMouseX=e.clientX,r.lastMouseY=e.clientY,r.activePhotoId=t,r.containerRect=n?.getBoundingClientRect(),console.log(` Desktop drag started for photo:`,t,`at`,e.clientX,e.clientY)},[C]),fe=(0,b.useCallback)((e,t)=>{let n=ce.current;if(!n.isDragging||n.activePhotoId!==t||C!==t)return;e.preventDefault(),e.stopPropagation();let r=H(t),i=(e.clientX-n.lastMouseX)*4,a=(e.clientY-n.lastMouseY)*4,o=n.containerRect,s=o?o.width*4:1080,c=o?o.height*4:1080,{maxPanX:l,maxPanY:u}=ie(r.scale,s,c),d=U(r.x+i,-l,l),f=U(r.y+a,-u,u);console.log(` Drag move, delta:`,i.toFixed(0),a.toFixed(0),`pos:`,d.toFixed(0),f.toFixed(0)),V(t,{scale:r.scale,x:d,y:f}),n.lastMouseX=e.clientX,n.lastMouseY=e.clientY},[C,H,V,U,ie]),pe=(0,b.useCallback)((e,t)=>{let n=ce.current;n.activePhotoId===t&&(n.isDragging=!1,n.activePhotoId=null,console.log(` Desktop drag ended for photo:`,t))},[]);(0,b.useEffect)(()=>{if(!C)return;let e=ce.current,t=t=>{if(!e.isDragging||!e.activePhotoId||C!==e.activePhotoId)return;let n=H(e.activePhotoId),r=(t.clientX-e.lastMouseX)*4,i=(t.clientY-e.lastMouseY)*4,a=e.containerRect,o=a?a.width*4:1080,s=a?a.height*4:1080,{maxPanX:c,maxPanY:l}=ie(n.scale,o,s),u=U(n.x+r,-c,c),d=U(n.y+i,-l,l);V(e.activePhotoId,{scale:n.scale,x:u,y:d}),e.lastMouseX=t.clientX,e.lastMouseY=t.clientY},n=t=>{if(!e.isDragging||!e.activePhotoId)return;let n=e.activePhotoId;console.log(` Desktop drag ended for photo:`,n),e.isDragging=!1,e.activePhotoId=null};return document.addEventListener(`mousemove`,t),document.addEventListener(`mouseup`,n),()=>{document.removeEventListener(`mousemove`,t),document.removeEventListener(`mouseup`,n)}},[C,H,V,U,ie]);let me=(0,b.useRef)({});(0,b.useEffect)(()=>{if(!C)return;let e=ne.current,t=0,n=0,r=0,i=!1,a=a=>{let o=a.touches;if(o.length===1&&(t=Date.now(),n=o[0].clientX,r=o[0].clientY,i=!1),C){if(!e.activePhotoId&&C){e.activePhotoId=C;let t=H(C);e.initialScale=t.scale,e.initialX=t.x,e.initialY=t.y}if(o.length===2&&e.activePhotoId){a.preventDefault(),e.isPinching=!0,e.isDragging=!1,i=!0,e.initialDistance=re(o[0],o[1]);let t=H(e.activePhotoId);e.initialScale=t.scale,e.initialX=t.x,e.initialY=t.y,console.log(` Global pinch started from anywhere on screen`)}else if(o.length===1&&e.activePhotoId){let t=H(e.activePhotoId);e.isDragging=!0,e.isPinching=!1,e.lastTouchX=o[0].clientX,e.lastTouchY=o[0].clientY,console.log(` Global drag started, scale:`,t.scale)}}},o=t=>{let a=t.touches;if(a.length>=1){let e=Math.abs(a[0].clientX-n),t=Math.abs(a[0].clientY-r);(e>10||t>10)&&(i=!0)}if(!C||!e.activePhotoId)return;let o=e.activePhotoId;if(e.isPinching&&a.length===2){t.preventDefault();let n=re(a[0],a[1])/e.initialDistance,r=e.initialScale*n;r=U(r,1,4);let i=e.containerRect,s=i?i.width*4:1080,c=i?i.height*4:1080,{maxPanX:l,maxPanY:u}=ie(r,s,c),d=U(e.initialX,-l,l),f=U(e.initialY,-u,u);V(o,{scale:r,x:d,y:f}),console.log(` Global pinch move, scale:`,r.toFixed(2))}else if(e.isDragging&&a.length===1){t.preventDefault();let n=H(o),r=(a[0].clientX-e.lastTouchX)*4,i=(a[0].clientY-e.lastTouchY)*4,s=e.containerRect,c=s?s.width*4:1080,l=s?s.height*4:1080,{maxPanX:u,maxPanY:d}=ie(n.scale,c,l),f=U(n.x+r,-u,u),p=U(n.y+i,-d,d);V(o,{scale:n.scale,x:f,y:p}),e.lastTouchX=a[0].clientX,e.lastTouchY=a[0].clientY,console.log(` Global drag move:`,{deltaX:r.toFixed(0),deltaY:i.toFixed(0)})}},s=n=>{let r=n.touches,a=n.changedTouches;if(Date.now()-t<300&&!i&&(C||E)&&a.length>0){let t=a[0];if(!document.elementFromPoint(t.clientX,t.clientY)?.closest(`[data-photo-container="true"]`)){console.log(` Quick tap outside photo detected - clearing selection`),D(null),T(null),e.activePhotoId=null,e.isDragging=!1,e.isPinching=!1;return}}if(!C||!e.activePhotoId)return;let o=e.activePhotoId;r.length<2&&(e.isPinching=!1),r.length===0?(e.isDragging=!1,H(o).scale<1.05&&V(o,{scale:1,x:0,y:0})):r.length===1&&(e.isDragging=!0,e.lastTouchX=r[0].clientX,e.lastTouchY=r[0].clientY)},c=t=>{!C&&!E||t.target.closest(`[data-photo-container="true"]`)||(console.log(` Global tap outside photo - clearing selection`),D(null),T(null),e.activePhotoId=null,e.isDragging=!1,e.isPinching=!1)};return document.addEventListener(`touchstart`,a,{passive:!1}),document.addEventListener(`touchmove`,o,{passive:!1}),document.addEventListener(`touchend`,s,{passive:!1}),document.addEventListener(`click`,c,{passive:!0}),()=>{document.removeEventListener(`touchstart`,a),document.removeEventListener(`touchmove`,o),document.removeEventListener(`touchend`,s),document.removeEventListener(`click`,c)}},[C,E,re,H,V,U,ie]),(0,b.useEffect)(()=>{let e=e=>{C&&ne.current.activePhotoId&&e.preventDefault()},t=Object.values(me.current);return t.forEach(t=>{t&&(t.addEventListener(`touchstart`,e,{passive:!1}),t.addEventListener(`touchmove`,e,{passive:!1}))}),()=>{t.forEach(t=>{t&&(t.removeEventListener(`touchstart`,e),t.removeEventListener(`touchmove`,e))})}},[C,u]);let he=(0,b.useRef)(null),ge=(0,b.useRef)(!1);(0,b.useEffect)(()=>{if(!te||ge.current||c)return;`scrollRestoration`in window.history&&(window.history.scrollRestoration=`manual`);let e=()=>{window.scrollTo(0,85),document.documentElement.scrollTop=85,document.body.scrollTop=85,ge.current=!0};requestAnimationFrame(()=>{e(),setTimeout(e,50),setTimeout(e,100),setTimeout(e,200),setTimeout(e,400)})},[te,c]),(0,b.useEffect)(()=>{let e=he.current;if(!e)return;let t=e=>{if(C){let t=ne.current;(t.activePhotoId||t.isPinching)&&e.preventDefault()}};return e.addEventListener(`touchstart`,t,{passive:!1}),e.addEventListener(`touchmove`,t,{passive:!1}),e.addEventListener(`gesturestart`,e=>e.preventDefault()),e.addEventListener(`gesturechange`,e=>e.preventDefault()),e.addEventListener(`gestureend`,e=>e.preventDefault()),()=>{e.removeEventListener(`touchstart`,t),e.removeEventListener(`touchmove`,t),e.removeEventListener(`gesturestart`,e=>e.preventDefault()),e.removeEventListener(`gesturechange`,e=>e.preventDefault()),e.removeEventListener(`gestureend`,e=>e.preventDefault())}},[C]);let _e=(0,b.useMemo)(()=>Array.isArray(i)?i.some(e=>e&&(e.dataUrl||e.blob)):!1,[i]);(0,b.useEffect)(()=>{console.log(` Loading data from localStorage...`),console.log(` [DEBUG] Raw localStorage check:`);let n=localStorage.getItem(`capturedPhotos`);if(console.log(`   - capturedPhotos raw:`,n?`Found (${n.length} chars)`:`NOT FOUND`),n)try{let e=JSON.parse(n);console.log(`   - Parsed photos count:`,e?.length||0),console.log(`   - First photo preview:`,e?.[0]?.substring?.(0,50)||`N/A`)}catch(e){console.log(`   - Parse error:`,e.message)}aA(),(async()=>{try{let n=null;try{let e=sessionStorage.getItem(`__fremio_shared_frame_temp__`);e&&(n=JSON.parse(e),console.log(` [SHARED FRAME] Found in sessionStorage:`,{hasFrameConfig:!!n?.frameConfig,hasDraftData:!!n?.draftData}))}catch(e){console.warn(` Failed to read shared frame from sessionStorage:`,e)}let i=jn.getItem(`activeDraftId`),o=!!n?.frameConfig;console.log(` activeDraftId from userStorage:`,i),console.log(` Has shared frame in session:`,!!n);let c,u=async()=>{if(c!==void 0)return c??null;try{if(n?.draftData)return console.log(` [SHARED FRAME] Using draft data from sessionStorage`),c={id:n.draftData.id,title:n.draftData.title,aspectRatio:n.draftData.aspectRatio,elements:n.draftData.elements,canvasBackground:n.draftData.canvasBackground,canvasWidth:n.draftData.canvasWidth,canvasHeight:n.draftData.canvasHeight,preview:n.draftData.preview,isShared:!0},c;if(!i)return null;let e=await(IN?.default||(await w(async()=>{let{default:e}=await import(`./draftStorage-mjujrh6i-Di68pede.js`);return{default:e}},[])).default).getDraftById(i);c=e??null,e||console.warn(` Draft not found for recovery:`,i)}catch(e){console.error(` Failed to load draft for recovery:`,e),c=null}return c},f=null;console.log(` [DEBUG] ======= PHOTO LOADING START =======`),console.log(` [DEBUG] All localStorage keys:`);for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e),n=localStorage.getItem(t);console.log(`   ${t}: ${n?n.length+` chars`:`null`}`)}if(window.__fremio_photos&&window.__fremio_photos.length>0&&(console.log(` [BACKUP] Found photos in window.__fremio_photos:`,window.__fremio_photos.length),console.log(` [BACKUP] First photo type:`,typeof window.__fremio_photos[0]),console.log(` [BACKUP] First photo preview:`,window.__fremio_photos[0]?.substring?.(0,50)||`not string`),f=window.__fremio_photos),!f||f.length===0)try{let e=localStorage.getItem(`capturedPhotos`);if(console.log(` [DEBUG] Raw capturedPhotos:`,e?`Found (${e.length} chars)`:`NOT FOUND`),e){let t=e.startsWith(`__cmp__:`);console.log(` [DEBUG] Is compressed:`,t),t?(console.log(` [DEBUG] Data is compressed, using safeStorage to read...`),f=W.getJSON(`capturedPhotos`)):f=JSON.parse(e),console.log(` [DEBUG] Parsed photos count:`,f?.length||0),console.log(` [DEBUG] Parsed photos isArray:`,Array.isArray(f)),f?.length>0&&(console.log(` [DEBUG] First photo type:`,typeof f[0]),console.log(` [DEBUG] First photo preview:`,typeof f[0]==`string`?f[0].substring(0,50):JSON.stringify(f[0]).substring(0,100)))}}catch(e){console.warn(` Direct localStorage read failed:`,e)}(!f||!Array.isArray(f)||f.length===0)&&(f=W.getJSON(`capturedPhotos`),console.log(` Loaded photos from safeStorage:`,f?.length||0));let m=Array.isArray(f)?[...f]:[];if(m.length===0)try{let e=sessionStorage.getItem(`capturedPhotos_backup`);if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length>0&&(console.log(` [BACKUP] Found photos in sessionStorage backup:`,t.length),m=t,localStorage.setItem(`capturedPhotos`,e))}}catch(e){console.warn(` sessionStorage backup read failed:`,e)}if(m.length===0){console.log(` [RETRY] No photos found, waiting 100ms and retrying...`),await new Promise(e=>setTimeout(e,100));let e=localStorage.getItem(`capturedPhotos`);if(e)try{let t=JSON.parse(e);Array.isArray(t)&&t.length>0&&(console.log(` [RETRY] Found photos after delay:`,t.length),m=t)}catch(e){console.warn(` Retry parse failed:`,e)}m.length===0&&window.__fremio_photos?.length>0&&(console.log(` [RETRY] Found photos in window.__fremio_photos:`,window.__fremio_photos.length),m=window.__fremio_photos)}if(m.length===0&&i){let e=await u();if(e?.capturedPhotos?.length){m=[...e.capturedPhotos],console.log(` Recovered photos from draft storage:`,{activeDraftId:i,count:m.length});try{W.setJSON(`capturedPhotos`,m)}catch(e){console.warn(` Could not rehydrate capturedPhotos into localStorage:`,e)}}}if(m.length>0){let e=m.map((e,t)=>typeof e==`string`&&e.startsWith(`data:`)?(console.log(` Photo ${t}: Already a data URL string`),e):e?.dataUrl&&typeof e.dataUrl==`string`&&e.dataUrl.startsWith(`data:`)?(console.log(` Photo ${t}: Extracted dataUrl from object`),e.dataUrl):e?.previewUrl&&typeof e.previewUrl==`string`&&e.previewUrl.startsWith(`data:`)?(console.log(` Photo ${t}: Using previewUrl (data URL)`),e.previewUrl):(console.warn(` Photo ${t}: Unknown format, skipping:`,{type:typeof e,hasDataUrl:!!e?.dataUrl,hasPreviewUrl:!!e?.previewUrl,preview:typeof e==`string`?e.substring(0,50):JSON.stringify(e).substring(0,100)}),null)).filter(Boolean);console.log(` Loaded and normalized photos:`,{original:m.length,normalized:e.length}),e.length>0?(console.log(` [NORMALIZED] First photo type:`,typeof e[0]),console.log(` [NORMALIZED] First photo preview:`,e[0]?.substring?.(0,50)||`empty`)):console.error(` [NORMALIZED] No photos after normalization!`),r(e),m=e,console.log(` [RESOLVED] resolvedPhotos updated to normalizedPhotos, length:`,m.length)}else r([]),console.log(` No captured photos found in storage or draft`);let h=W.getJSON(`capturedVideos`);console.log(` Loading videos from storage:`,{found:!!h,isArray:Array.isArray(h),length:h?.length||0});let g=Array.isArray(h)?[...h]:[];if(g.length===0&&i){let e=await u();if(e?.capturedVideos?.length){g=[...e.capturedVideos],console.log(` Recovered videos from draft storage:`,{activeDraftId:i,count:g.length});try{W.setJSON(`capturedVideos`,g)}catch(e){console.warn(` Could not rehydrate capturedVideos into localStorage:`,e)}}}if(g.length){let e=g.map((e,t)=>e?typeof e==`string`?e.startsWith(`data:`)?{id:`video-${t}`,dataUrl:e,mimeType:e.substring(5,e.indexOf(`;`))||`video/webm`,duration:null,timer:null,source:`legacy-string`}:(console.warn(` Unknown video string format:`,e.substring(0,30)),null):typeof e==`object`?e.dataUrl||e.blob?{id:e.id||`video-${t}`,dataUrl:e.dataUrl||null,blob:e.blob||null,mimeType:e.mimeType||e.dataUrl?.substring(5,e.dataUrl.indexOf(`;`))||`video/webm`,duration:Number.isFinite(e.duration)?e.duration:null,timer:Number.isFinite(e.timer)?e.timer:null,mirrored:!!e.mirrored,requiresPreviewMirror:!!e.requiresPreviewMirror,facingMode:e.facingMode||null,sizeBytes:e.sizeBytes??null,recordedAt:e.recordedAt??e.capturedAt??null,source:e.source||`camera-recording`}:(console.warn(` Video entry missing dataUrl/blob:`,e),null):(console.warn(` Unsupported video entry type:`,typeof e,e),null):null),t=e.filter(e=>e&&(e.dataUrl||e.blob)).length;if(e.length>0&&m.length>e.length){console.log(` [EDITPHOTO] Duplicating videos to match photos...`),console.log(`  - Photos count:`,m.length),console.log(`  - Videos count:`,e.length);let t=m.length,n=e.length,r=[],i=Math.ceil(t/n);for(let a=0;a<n;a++){let n=e[a];for(let e=0;e<i&&!(r.length>=t);e++)n?r.push({...n,id:e===0?n.id:`${n.id}-dup-${e}`}):r.push(null)}let o=r.slice(0,t);a(o),console.log(` [EDITPHOTO] Videos duplicated:`,{originalCount:n,targetCount:t,finalCount:o.length})}else a(e);console.log(` Videos normalized:`,{totalEntries:g.length,normalizedEntries:e.length,validEntries:t})}else console.log(` No videos found in storage`),a([]);console.log(` Step 4: Loading frame config...`);let _=null;if(n?.frameConfig&&(console.log(` Using frameConfig from sessionStorage (shared frame)`),_=n.frameConfig),_||(_=W.getJSON(`frameConfig`),console.log(`   frameConfig from localStorage:`,!!_,_?.id)),!_||!_.id){console.log(` No config in storage, checking frameProvider memory...`);let e=Gk.getCurrentConfig();if(e?.id){if(console.log(` Found config in frameProvider memory:`,e.id),_=e,!_.__isSharedFrame)try{W.setJSON(`frameConfig`,{..._,__timestamp:Date.now(),__savedFrom:`EditPhoto_memoryFallback`}),W.setItem(`frameConfigTimestamp`,String(Date.now())),W.setItem(`selectedFrame`,_.id),console.log(` Persisted frameProvider config to localStorage`)}catch(e){console.warn(` Failed to persist config:`,e)}}else console.log(` No config in frameProvider memory either`)}_&&console.log(` [DEBUG] Loaded frameConfig structure:`,{id:_.id,isCustom:_.isCustom,hasDesigner:!!_.designer,hasDesignerElements:!!_.designer?.elements,designerElementsCount:_.designer?.elements?.length||0,designerElementTypes:_.designer?.elements?.map(e=>e?.type)||[],slotsCount:_.slots?.length||0});let v=W.getItem(`selectedFrame`),y=v?.startsWith(`custom-`)||(e=>typeof e==`string`?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1)(v)||_?.isCustom,b=o||v?.startsWith(`custom-`)||v?.startsWith(`draft-`)||v?.startsWith(`shared-`);if(y&&!b){console.log(` Supabase custom frame detected, reloading from service...`);let e=_?.imagePath||_?.frameImage||_?.thumbnailUrl||_?.image_url;try{let e=await(RN?.default||(await w(async()=>{let{default:e}=await import(`./unifiedFrameService-mjujrh6i-Cb0BT8AM.js`);return{default:e}},[])).default).getFrameConfig(v||_?.id);e&&(_=e,console.log(` Reloaded custom frame from service with pixel values`))}catch(t){console.warn(` Failed to reload from service:`,t),_&&!_.frameImage&&e&&(_.frameImage=e,_.imagePath=e,console.log(` Using cached image URL:`,e?.substring(0,80)))}}else b&&console.log(` Draft-based custom frame detected (custom-xxx), will load from draft...`);if(_&&!b){let e=W.getItem(`frameConfigTimestamp`),t=_.__timestamp;console.log(` Timestamp validation:`,{storedTimestamp:e,configTimestamp:t,match:e===String(t)}),e&&t&&e!==String(t)&&(console.warn(` FrameConfig timestamp mismatch, clearing stale data`),W.removeItem(`frameConfig`),W.removeItem(`frameConfigTimestamp`),_=null)}else _&&b&&console.log(` Draft-based frame: skipping timestamp validation, using existing config`);if(!_){console.log(` No frameConfig in localStorage, checking fallbacks...`);let e=W.getItem(`selectedFrame`);console.log(`  - Selected frame ID:`,e);let t=e=>typeof e==`string`?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1,n=e?.startsWith(`custom-`)||e?.startsWith(`draft-`)||e?.startsWith(`shared-`),r=t(e);if(n&&i){console.log(` Draft-based custom frame, loading from draft first...`);try{let e=await u();if(e){let{buildFrameConfigFromDraft:t}=LN||await w(()=>import(`./draftHelpers-mjujrh6i-CY0F5TmK.js`),[]);_=t(e),console.log(` Successfully loaded frameConfig from draft:`,_.id)}}catch(e){console.warn(` Failed to load from draft:`,e)}}if(!_&&r){console.log(` Attempting to load Supabase frame from service...`);try{_=await(RN?.default||(await w(async()=>{let{default:e}=await import(`./unifiedFrameService-mjujrh6i-Cb0BT8AM.js`);return{default:e}},[])).default).getFrameConfig(e),_&&console.log(` Successfully loaded custom frame from service:`,_.id)}catch(e){console.error(` Failed to load from custom frame service:`,e)}}if(!_&&i&&!n)try{console.log(` Loading frameConfig from draft:`,i);let e=await u();if(e){let{buildFrameConfigFromDraft:t}=LN||await w(()=>import(`./draftHelpers-mjujrh6i-CY0F5TmK.js`),[]);_=t(e),console.log(` Successfully loaded frameConfig from draft:`,_.id);try{W.setJSON(`frameConfig`,_),W.setItem(`frameConfigTimestamp`,String(Date.now()))}catch(e){console.warn(` Could not cache frameConfig to localStorage:`,e)}}else console.warn(` Draft not found:`,i)}catch(e){console.warn(` Failed to load from draft:`,e)}_||console.warn(` All fallbacks failed - no frameConfig available`)}if(_&&_.isCustom){let e=_.designer?.elements?.find(e=>e?.type===`background-photo`);if(!e||!e.data?.image)if(console.log(` Background photo missing or incomplete, loading from draft...`),console.log(`  - Has background photo element:`,!!e),console.log(`  - Has image data:`,!!e?.data?.image),i)try{let e=await u();if(e&&e.elements){let t=e.elements.find(e=>e?.type===`background-photo`);if(t&&t.data?.image){console.log(` Found background photo image in draft, restoring...`),console.log(`  - Image length:`,t.data.image.length),console.log(`  - Image preview:`,t.data.image.substring(0,50));let{buildFrameConfigFromDraft:n}=LN||await w(()=>import(`./draftHelpers-mjujrh6i-CY0F5TmK.js`),[]);_=n(e);try{W.setJSON(`frameConfig`,_),console.log(` Saved complete frameConfig to localStorage`)}catch(e){console.warn(` Could not save frameConfig to localStorage (too large):`,e)}}else console.warn(` No background photo with image found in draft`)}else console.warn(` Draft not found or has no elements:`,i)}catch(e){console.error(` Failed to load from draft:`,e)}else console.warn(` No activeDraftId found in localStorage`);else console.log(` Background photo with image already present in frameConfig`)}if(!_||!_.id){t({type:`error`,title:`Frame Tidak Valid`,message:`Pilih frame terlebih dahulu di halaman Frames atau ambil foto baru.`,action:{label:`Pilih Frame`,onClick:()=>e(`/frames`)}}),e(`/frames`);return}if(s(_),console.log(` Loaded frame config:`,_.id),console.log(` Frame details:`,_),!_.frameImage&&!_.imagePath&&!_.image_url){console.log(` Frame missing image URL, trying to get from cache...`);try{let e=localStorage.getItem(`fremio_frames_cache_v3`);if(e){let t=JSON.parse(e)?.find(e=>e.id===_.id);if(t){let e=t.imagePath||t.image_url||t.thumbnailUrl;e&&(_.frameImage=e,_.imagePath=e,_.image_url=e,console.log(` Found image URL from cache:`,e?.substring(0,80)))}}}catch(e){console.warn(`Failed to get image from cache:`,e)}}if(_.isCustom||(console.log(` ADMIN FRAME DETECTED (isCustom is false/undefined):`),console.log(`  - Frame ID:`,_.id),console.log(`  - Frame name:`,_.name),console.log(`  - Has frameImage:`,!!_.frameImage),console.log(`  - frameImage preview:`,_.frameImage?.substring(0,80)),console.log(`   Frame overlay WILL be displayed on canvas`)),_.isCustom&&(console.log(` CUSTOM FRAME DETECTED:`),console.log(`  - Frame ID:`,_.id),console.log(`  - Frame name:`,_.name),console.log(`  - Max captures:`,_.maxCaptures),console.log(`  - Has frameImage:`,!!_.frameImage),console.log(`  - Has imagePath:`,!!_.imagePath),console.log(`  - Frame image preview:`,_.frameImage?.substring(0,50)),console.log(`  - Slots count:`,_.slots?.length),console.log(`  - Designer elements:`,_.designer?.elements?.length),console.log(`  - Root elements (fallback):`,_.elements?.length),!_.designer?.elements&&_.elements?.length>0&&(console.log(` Designer.elements missing, but config.elements exists - using as fallback`),_.designer={..._.designer,elements:_.elements,canvasWidth:_.canvasWidth||1080,canvasHeight:_.canvasHeight||1920,canvasBackground:_.canvasBackground||`#f7f1ed`},console.log(` Set designer.elements from config.elements:`,_.designer.elements.length),console.log(`   Element types:`,_.designer.elements.map(e=>e?.type))),!_.designer?.elements&&_.slots?.length>0)){console.log(` Custom frame missing designer.elements, rebuilding from slots...`);let e=_.canvasWidth||_.designer?.canvasWidth||1080,t=_.canvasHeight||_.designer?.canvasHeight||1920,n=_.slots[0],r=n?.left||0,i=n?.width||0,a;if(r<=1&&i<=1)console.log(` [REBUILD] Slots in NORMALIZED format, converting to pixels...`),a=(n,r,i,a)=>({x:Math.round((n||0)*e),y:Math.round((r||0)*t),width:Math.round((i||.5)*e),height:Math.round((a||.5)*t)});else if(r<50&&i<50){console.log(` [REBUILD] Slots in CM format, converting to pixels...`);let n=e/10.8,r=t/19.2;a=(e,t,i,a)=>({x:Math.round((e||0)*n),y:Math.round((t||0)*r),width:Math.round((i||0)*n),height:Math.round((a||0)*r)})}else console.log(` [REBUILD] Slots already in PIXEL format`),a=(e,t,n,r)=>({x:e||0,y:t||0,width:n||100,height:r||100});let o=_.slots.map((e,t)=>{let n=a(e.left,e.top,e.width,e.height);return console.log(`  Slot ${t}: (${e.left}, ${e.top}, ${e.width}, ${e.height})  (${n.x}, ${n.y}, ${n.width}, ${n.height})`),{id:e.id||`photo_${t+1}`,type:`photo`,x:n.x,y:n.y,width:n.width,height:n.height,zIndex:e.zIndex||2,data:{photoIndex:e.photoIndex===void 0?t:e.photoIndex,image:null,aspectRatio:e.aspectRatio||`4:5`}}});_={..._,designer:{..._.designer,elements:o}},s(_),console.log(` Rebuilt designer.elements:`,o.length)}if(Array.isArray(_.designer?.elements)){let e=_.canvasWidth||_.designer?.canvasWidth||1080,t=_.canvasHeight||_.designer?.canvasHeight||1920,n=(e,t,n)=>{let r=e.filter(e=>e?.type===`photo`);if(r.length===0)return console.log(` [COORD] No photo elements found, skipping conversion`),e;let i=Math.max(...r.map(e=>e.x||0)),a=Math.max(...r.map(e=>e.y||0)),o=Math.max(...r.map(e=>e.width||0)),s=Math.max(...r.map(e=>e.height||0));console.log(` [COORD CHECK] maxX=${i}, maxY=${a}, maxWidth=${o}, maxHeight=${s}`),console.log(` [COORD CHECK] Canvas: ${t}x${n}`);let c=`pixels`,l=e=>e,u=i<=1&&a<=1&&o<=1&&s<=1,d=i<=12&&a<=22&&o<=12&&s<=22;if(u)c=`normalized`,console.log(` [COORD] Detected NORMALIZED format (0-1), converting to pixels...`),l=e=>({...e,x:Math.round((e.x||0)*t),y:Math.round((e.y||0)*n),width:Math.round((e.width||0)*t),height:Math.round((e.height||0)*n)});else if(d){c=`cm`;let e=t/10.8;console.log(` [COORD] Detected CM format, pxPerCm=${e.toFixed(2)}, converting to pixels...`),l=t=>({...t,x:Math.round((t.x||0)*e),y:Math.round((t.y||0)*e),width:Math.round((t.width||0)*e),height:Math.round((t.height||0)*e)})}else console.log(` [COORD] Values appear to be in PIXELS already, no conversion needed`);let f=e.map(e=>{if(!e||typeof e!=`object`||e.x===void 0&&e.y===void 0&&e.width===void 0)return e;let t=l(e),n=e?.type||`unknown`;return console.log(`    ${n}: (${e.x}, ${e.y}, ${e.width}x${e.height})  (${t.x}, ${t.y}, ${t.width}x${t.height})`),t});return console.log(` [COORD] Conversion complete. Format was: ${c}`),f};if(_.designer.elements=n(_.designer.elements,e,t),console.log(` [PHOTO FILL] resolvedPhotos available:`,m.length),m.length>0)console.log(` [PHOTO FILL] First photo preview:`,m[0]?.substring?.(0,50)||`not a string`);else{console.warn(` [EMERGENCY RELOAD] resolvedPhotos is empty, trying localStorage again...`);try{let e=localStorage.getItem(`capturedPhotos`);if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length>0&&(console.log(` [EMERGENCY RELOAD] Found photos:`,t.length),m=t.map(e=>typeof e==`string`&&e.startsWith(`data:`)?e:e?.dataUrl&&typeof e.dataUrl==`string`?e.dataUrl:null).filter(Boolean),console.log(` [EMERGENCY RELOAD] Normalized to:`,m.length,`photos`),m.length>0&&r(m))}}catch(e){console.error(` [EMERGENCY RELOAD] Failed:`,e)}}console.log(` ALL designer elements from config:`,{total:_.designer.elements.length,elements:_.designer.elements.map((e,t)=>({index:t,type:e?.type,id:e?.id?String(e.id).slice(0,8):`no-id`,x:e?.x,y:e?.y,width:e?.width,height:e?.height}))});let i=_.designer.elements.filter(e=>e?.type===`photo`);console.log(` Found photo elements:`,i.length),i.forEach((e,t)=>{console.log(`   Photo ${t}:`,{id:e.id,type:e.type,photoIndex:e.data?.photoIndex,hasImage:!!e.data?.image,x:e.x,y:e.y,width:e.width,height:e.height})});let a=i.map((e,t)=>{let n=e.data?.photoIndex;typeof n!=`number`&&(console.warn(` Invalid photoIndex ${n} for slot ${t}, using idx as fallback`),n=t);let r,a=i.length,o=m.length;if(o>0&&a>o){let e=Math.ceil(a/o);r=Math.floor(t/e),r>=o&&(r=o-1),console.log(` Slot ${t}: photoIndex ${n} -> effectivePhotoIndex ${r} (paired duplication, ${e} slots per photo)`)}else r=n,o>0&&r>=o&&(r%=o,console.log(` Slot ${t}: photoIndex ${n} wrapped to effectivePhotoIndex ${r}`));let s=m[r];return s&&typeof s!=`string`&&(s.dataUrl&&typeof s.dataUrl==`string`?s=s.dataUrl:s.previewUrl&&typeof s.previewUrl==`string`&&s.previewUrl.startsWith(`data:`)?s=s.previewUrl:(console.warn(` Photo slot ${t}: Data is not a string, skipping:`,typeof s),s=null)),console.log(` Setting up photo slot ${t}: photoIndex=${n}, effectivePhotoIndex=${r}, hasPhotoData=${!!s}, originalX=${e.x}, originalY=${e.y}, originalWidth=${e.width}, originalHeight=${e.height}, originalZIndex=${e.zIndex}`),{...e,type:`upload`,data:{...e.data,image:s||null,photoIndex:r}}});console.log(` [DEBUG] Looking for overlay elements in config.designer.elements:`),console.log(`   Total elements:`,_.designer.elements.length),_.designer.elements.forEach((e,t)=>{console.log(`   [${t}] type=${e?.type}, zIndex=${e?.zIndex}, __isOverlay=${e?.data?.__isOverlay}, hasImage=${!!e?.data?.image}`)}),console.log(` [DEBUG] Also checking config.layout.elements:`,_.layout?.elements?.length||0);let o=[];if(_.layout?.elements&&Array.isArray(_.layout.elements)){let e=_.canvasWidth||_.designer?.canvasWidth||1080,t=_.canvasHeight||_.designer?.canvasHeight||1920;_.layout.elements.forEach((n,r)=>{if(console.log(`   Layout[${r}]: type=${n?.type}, zIndex=${n?.zIndex}, __isOverlay=${n?.data?.__isOverlay}, hasImage=${!!n?.data?.image}`),n.type===`upload`&&n.data?.image&&n.data?.photoIndex===void 0&&!_.designer.elements.some(e=>e.id===n.id||e.type===`upload`&&e.data?.image===n.data?.image)){console.log(` Found overlay in layout.elements not in designer:`,n.id);let i={...n,x:n.xNorm===void 0?n.x:Math.round(n.xNorm*e),y:n.yNorm===void 0?n.y:Math.round(n.yNorm*t),width:n.widthNorm===void 0?n.width:Math.round(n.widthNorm*e),height:n.heightNorm===void 0?n.height:Math.round(n.heightNorm*t),zIndex:Math.max(n.zIndex||0,500+r),data:{...n.data,__isOverlay:!0}};o.push(i)}})}console.log(` [DEBUG] Additional overlays from layout.elements:`,o.length);let s=_.designer.elements.filter(e=>e&&e.type!==`photo`&&e.type!==`background-photo`&&!e?.data?.__capturedOverlay).map((e,t)=>e.data?.__isOverlay?(console.log(` Found overlay element from backend:`,e.id,`original zIndex:`,e.zIndex),{...e,zIndex:Math.max(e.zIndex||0,500+t)}):e.type===`upload`&&e.data?.image&&typeof e.data.image==`string`&&e.data?.photoIndex===void 0?(console.log(` Detected overlay element:`,e.id,`assigning zIndex:`,500+t),{...e,zIndex:500+t,data:{...e.data,__isOverlay:!0}}):e),c=[...s,...o];console.log(` [DEBUG] otherDesignerElems count:`,s.length),console.log(` [DEBUG] allOtherElems count (with layout overlays):`,c.length),c.forEach((e,t)=>{console.log(`   [${t}] type=${e?.type}, zIndex=${e?.zIndex}, __isOverlay=${e?.data?.__isOverlay}, hasImage=${!!e?.data?.image}`)});let l=[...a,...c].map((e,t)=>e&&e.type===`upload`&&e.data?.image&&e.data?.photoIndex===void 0?{...e,zIndex:Math.max(e.zIndex||0,500+t),data:{...e.data,__isOverlay:!0}}:e);d(l),console.log(` Loaded designer elements (fixed zIndex):`,l.length);let u=_.designer.elements.find(e=>e?.type===`background-photo`);if(u)u.data?.image?(p(u),console.log(` Loaded background photo with image:`,{id:u.id,hasImage:!!u.data?.image,imageLength:u.data?.image?.length,imagePreview:u.data?.image?.substring(0,50),zIndex:u.zIndex,x:u.x,y:u.y,width:u.width,height:u.height})):(console.warn(` Background photo found but missing image data!`),console.log(`   This might happen if localStorage was cleared or data was sanitized`),console.log(`   Background photo will not be displayed`),p(null));else if(console.warn(` No background photo found in frameConfig.designer.elements`),console.log(`   Elements found:`,_.designer.elements.map(e=>({type:e.type,id:e.id}))),_?.isCustom||String(_?.id||``).startsWith(`custom-`))console.log(` Custom frame: skipping background-photo fallback from frameImage/imagePath to avoid duplicated elements`),p(null);else{let e=_.frameImage||_.imagePath||_.thumbnailUrl||_.image_url;e?(console.log(` Creating background-photo from fallback URL:`,e.substring(0,80)+`...`),p({id:`background-photo-fallback`,type:`background-photo`,x:0,y:0,width:1080,height:1920,zIndex:0,data:{image:e,objectFit:`cover`,label:`Frame Background (fallback)`}}),console.log(` Created fallback background-photo element`)):(console.warn(` No fallback image URL available (frameImage, imagePath, thumbnailUrl, image_url)`),p(null))}}else if(console.warn(` No designer.elements found in frameConfig`),console.log(` Available properties:`,Object.keys(_)),Array.isArray(_.slots)&&_.slots.length>0){console.log(` Creating designer elements from slots...`);let e=_.layout?.canvasWidth||_.designer?.canvasWidth||1080,t=_.layout?.canvasHeight||_.designer?.canvasHeight||1920,n=_.slots.length,r=m.length,i=_.slots.map((i,a)=>{let o=(i.left||0)*e,s=(i.top||0)*t,c=(i.width||.5)*e,l=(i.height||.5)*t,u;if(r>0&&n>r){let e=Math.ceil(n/r);u=Math.floor(a/e),u>=r&&(u=r-1)}else{let e=i.photoIndex===void 0?a:i.photoIndex;u=r>0?e%r:e}let d=m[u];return d&&typeof d!=`string`&&(d=d.dataUrl?d.dataUrl:d.previewUrl?d.previewUrl:null),console.log(`   Slot ${a}: x=${o.toFixed(0)}, y=${s.toFixed(0)}, w=${c.toFixed(0)}, h=${l.toFixed(0)}, effectivePhotoIndex=${u}, hasPhoto=${!!d}`),{id:i.id||`photo_slot_${a}`,type:`upload`,x:o,y:s,width:c,height:l,zIndex:i.zIndex||2,rotation:i.rotation||0,data:{photoIndex:u,image:d||null,aspectRatio:i.aspectRatio||`4:5`,borderRadius:i.borderRadius??0}}});d(i),console.log(` Created`,i.length,`designer elements from slots`)}else console.warn(` No slots found either - frame may be incomplete`);l(!1)}catch(e){console.error(` Error loading data:`,e),l(!1)}})()},[e]),(0,b.useEffect)(()=>{if(console.log(` [FILL PHOTOS] useEffect triggered`),console.log(`   - designerElements.length:`,u.length),console.log(`   - photos.length:`,n.length),console.log(`   - photosFilled.current:`,P.current),u.length===0||n.length===0){console.log(` Skipping photo fill:`,{hasElements:u.length>0,hasPhotos:n.length>0,photosFilled:P.current});return}console.log(` Checking if photo elements need filling...`),console.log(`   Designer elements:`,u.length),console.log(`   Available photos:`,n.length),console.log(`   Elements detail:`,u.map(e=>({id:e.id?String(e.id).slice(0,8):`no-id`,type:e.type,photoIndex:e.data?.photoIndex,hasImage:!!e.data?.image})));let e=u.filter(e=>(e.type===`upload`||e.type===`photo`)&&!e.data?.__isOverlay),t=u.filter(e=>e.data?.__isOverlay);if(console.log(` Photo fill: ${e.length} photo slots, ${t.length} overlays (excluded from fill)`),!e.some(e=>!e.data?.image)){console.log(` All photo elements already filled`),P.current=!0;return}if(P.current){console.log(` Photos already filled, skipping to prevent loop...`);return}console.log(` Filling photo elements with real images...`),console.log(`   Found ${e.length} photo slots`),console.log(`   Available photos: ${n.length}`);let r=[...n];if(r.length>0&&r.length<e.length){console.log(` [EDITPHOTO] Duplicating photos in PAIRS to fill slots...`),console.log(`   - Original photos: ${r.length}`),console.log(`   - Photo slots: ${e.length}`);let t=[];for(let e=0;e<r.length;e++)t.push(r[e]),t.push(r[e]);r=t.slice(0,e.length),console.log(`   - After paired duplication: ${r.length} photos`),console.log(`   - Pattern: Photo 1Slot 1,2 | Photo 2Slot 3,4 | Photo 3Slot 5,6`)}let i=0,a=u.map((e,t)=>{if((e.type===`upload`||e.type===`photo`)&&!e.data?.__isOverlay){let t=e.data?.photoIndex;if(typeof t!=`number`&&(t=i,console.log(` Auto-assigning photoIndex ${t} to slot (no photoIndex defined)`)),t>=r.length&&(console.warn(` photoIndex ${t} out of range (max: ${r.length-1}), using counter ${i}`),t=i),i++,t>=r.length)return console.warn(` No photo available for slot ${t}`),e;let n=r[t];if(n&&typeof n!=`string`&&(n.dataUrl&&typeof n.dataUrl==`string`?n=n.dataUrl:n.previewUrl&&typeof n.previewUrl==`string`&&n.previewUrl.startsWith(`data:`)?n=n.previewUrl:(console.warn(` Photo slot ${t}: Invalid format, not a string or object with dataUrl`),n=null)),n&&typeof n==`string`)return console.log(` Filling photo slot ${t} with image`),console.log(`   Photo data length: ${n.length}`),console.log(`   Photo data preview: ${n.substring(0,50)}...`),{...e,data:{...e.data,image:n,photoIndex:t}};console.warn(` No photo data found for slot ${t}`),console.warn(`   Available photos: ${r.length}, requested index: ${t}`)}return e});console.log(` Setting updated elements with photos...`),d(a),P.current=!0,console.log(` Photo fill complete!`)},[n,u]),(0,b.useEffect)(()=>{u.length===0||n.length>0||P.current||(console.log(` [EMERGENCY PHOTO RETRY] designerElements exist but photos empty, retrying...`),(async()=>{await new Promise(e=>setTimeout(e,150));let e=[];try{let t=localStorage.getItem(`capturedPhotos`);if(t){let n=JSON.parse(t);Array.isArray(n)&&n.length>0&&(console.log(` [RETRY] Found photos in localStorage:`,n.length),e=n.map(e=>typeof e==`string`&&e.startsWith(`data:`)?e:e?.dataUrl?.startsWith?.(`data:`)?e.dataUrl:null).filter(Boolean))}}catch(e){console.warn(` [RETRY] localStorage parse failed:`,e)}if(e.length===0)try{let t=W.getJSON(`capturedPhotos`);Array.isArray(t)&&t.length>0&&(console.log(` [RETRY] Found photos in safeStorage:`,t.length),e=t.map(e=>typeof e==`string`&&e.startsWith(`data:`)?e:e?.dataUrl?.startsWith?.(`data:`)?e.dataUrl:null).filter(Boolean))}catch(e){console.warn(` [RETRY] safeStorage read failed:`,e)}e.length===0&&window.__fremio_photos?.length>0&&(console.log(` [RETRY] Found photos in window.__fremio_photos:`,window.__fremio_photos.length),e=window.__fremio_photos.map(e=>typeof e==`string`&&e.startsWith(`data:`)?e:e?.dataUrl?.startsWith?.(`data:`)?e.dataUrl:null).filter(Boolean)),e.length>0?(console.log(` [RETRY] Successfully recovered`,e.length,`photos!`),r(e)):console.warn(` [RETRY] Still no photos found after retry`)})())},[u,n]),(0,b.useEffect)(()=>{console.log(` Videos state updated:`,{videos:i,isArray:Array.isArray(i),length:i?.length||0,hasValidVideo:_e,buttonWillBeEnabled:_e&&!m})},[i,_e,m]);let ve=[{name:`Original`,icon:``,filters:{brightness:100,contrast:100,saturate:100,grayscale:0,sepia:0,blur:0,hueRotate:0}},{name:`Instant Soft`,icon:``,filters:{brightness:110,contrast:88,saturate:92,grayscale:0,sepia:5,blur:0,hueRotate:0}},{name:`Warm Film`,icon:``,filters:{brightness:106,contrast:104,saturate:112,grayscale:0,sepia:18,blur:0,hueRotate:12}},{name:`Muted Color`,icon:``,filters:{brightness:104,contrast:98,saturate:70,grayscale:0,sepia:0,blur:0,hueRotate:0}},{name:`Pastel Soft`,icon:``,filters:{brightness:112,contrast:86,saturate:80,grayscale:0,sepia:0,blur:0,hueRotate:-4}},{name:`Retro Matte`,icon:``,filters:{brightness:104,contrast:85,saturate:90,grayscale:0,sepia:6,blur:0,hueRotate:-8}},{name:`Soft Grain`,icon:``,filters:{brightness:104,contrast:102,saturate:92,grayscale:0,sepia:8,blur:0,hueRotate:0}},{name:`Soft Mono`,icon:``,filters:{brightness:108,contrast:92,saturate:0,grayscale:100,sepia:0,blur:0,hueRotate:0}},{name:`Film Noir`,icon:``,filters:{brightness:98,contrast:135,saturate:0,grayscale:100,sepia:0,blur:0,hueRotate:0}}],ye=e=>{j(e.filters),N(e.name)},be=()=>{j({brightness:100,contrast:100,saturate:100,grayscale:0,sepia:0,blur:0,hueRotate:0}),N(`Original`)},xe=()=>({filter:`
        brightness(${A.brightness}%)
        contrast(${A.contrast}%)
        saturate(${A.saturate}%)
        grayscale(${A.grayscale}%)
        sepia(${A.sepia}%)
        blur(${A.blur}px)
        hue-rotate(${A.hueRotate}deg)
      `.trim()});return c?(0,G.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#fdf7f4`},children:(0,G.jsxs)(`div`,{style:{background:`white`,padding:`2rem`,borderRadius:`12px`,textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{fontSize:`2rem`,marginBottom:`1rem`},children:``}),(0,G.jsx)(`div`,{children:`Loading...`})]})}):(0,G.jsxs)(`div`,{style:{minHeight:`100vh`,background:`#fdf7f4`,display:`flex`,flexDirection:`column`,alignItems:`center`,padding:`1rem`,paddingTop:`0.5rem`},children:[v&&(0,G.jsxs)(`div`,{style:{position:`fixed`,inset:0,backgroundColor:`rgba(0, 0, 0, 0.85)`,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,zIndex:99999,backdropFilter:`blur(4px)`},children:[(0,G.jsxs)(`div`,{style:{background:`white`,borderRadius:`20px`,padding:`2rem 2.5rem`,textAlign:`center`,maxWidth:`320px`,boxShadow:`0 20px 60px rgba(0,0,0,0.3)`},children:[(0,G.jsx)(`div`,{style:{width:`60px`,height:`60px`,margin:`0 auto 1.5rem`,border:`4px solid #E5E7EB`,borderTopColor:`#8B5CF6`,borderRadius:`50%`,animation:`spin 1s linear infinite`}}),(0,G.jsx)(`div`,{style:{fontSize:`1.1rem`,fontWeight:`600`,color:`#1F2937`,marginBottom:`0.5rem`},children:`Memproses Video`}),(0,G.jsx)(`div`,{style:{fontSize:`0.9rem`,color:`#6B7280`,lineHeight:`1.5`},children:v})]}),(0,G.jsx)(`style`,{children:`
            @keyframes spin {
              to { transform: rotate(360deg); }
            }
            @keyframes pulse {
              0%, 100% { opacity: 1; }
              50% { opacity: 0.85; }
            }
          `})]}),(!o||n.length===0)&&(0,G.jsxs)(`div`,{style:{background:`#fff7ed`,color:`#b45309`,border:`1px solid #fbbf24`,borderRadius:`8px`,padding:`1rem`,marginBottom:`1rem`,maxWidth:`600px`,fontSize:`0.95rem`,boxShadow:`0 2px 8px rgba(0,0,0,0.06)`},children:[(0,G.jsx)(`strong`,{children:`Debug Info:`}),(0,G.jsxs)(`div`,{children:[`frameConfig: `,JSON.stringify(W.getJSON(`frameConfig`))]}),(0,G.jsxs)(`div`,{children:[`frameConfigTimestamp:`,` `,String(W.getItem(`frameConfigTimestamp`))]}),(0,G.jsxs)(`div`,{children:[`capturedPhotos:`,` `,JSON.stringify(W.getJSON(`capturedPhotos`))]}),(0,G.jsxs)(`div`,{children:[`activeDraftId: `,String(W.getItem(`activeDraftId`))]})]}),(0,G.jsx)(`h1`,{ref:ee,style:{fontSize:`1rem`,fontWeight:`700`,color:`#000000`,marginBottom:`0.4rem`,marginTop:`0.25rem`,fontFamily:`Poppins, sans-serif`},children:`Preview`}),g&&(0,G.jsx)(`div`,{style:{position:`fixed`,top:`20px`,right:`20px`,padding:`1rem 1.5rem`,borderRadius:`8px`,fontSize:`0.9rem`,background:g.includes(``)?`#d4edda`:`#f8d7da`,color:g.includes(``)?`#155724`:`#721c24`,boxShadow:`0 4px 12px rgba(0,0,0,0.15)`,zIndex:1e3},children:g}),o&&(0,G.jsxs)(`div`,{ref:he,onClick:e=>{(e.target===e.currentTarget||!e.target.closest(`[data-photo-container="true"]`))&&(E||C)&&(console.log(` Clicked outside photo - clearing selection`),D(null),T(null),ne.current.activePhotoId=null,ne.current.isDragging=!1,ne.current.isPinching=!1)},style:{display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`1rem`,width:`100%`,maxWidth:`900px`,touchAction:C?`none`:`auto`},children:[(0,G.jsx)(`div`,{onClick:e=>{e.target.closest(`[data-photo-container="true"]`)||(E||C)&&(console.log(` Clicked on canvas - clearing selection`),D(null),T(null),ne.current.activePhotoId=null,ne.current.isDragging=!1,ne.current.isPinching=!1)},style:{background:`white`,padding:`1rem`,borderRadius:`16px`,boxShadow:`0 4px 20px rgba(0,0,0,0.1)`,overflow:`hidden`,width:`fit-content`,height:`512px`},children:(0,G.jsxs)(`div`,{id:`frame-preview-canvas`,style:{position:`relative`,width:`1080px`,height:`1920px`,margin:`0 auto`,background:o&&o.designer&&o.designer.canvasBackground||`#fff`,borderRadius:`12px`,boxShadow:`0 4px 20px rgba(0,0,0,0.15)`,overflow:`hidden`,transform:`scale(0.25)`,transformOrigin:`top center`},children:[f&&f.data?.image&&(0,G.jsx)(`img`,{src:ON.full(f.data.image),alt:`Background`,loading:`eager`,style:{position:`absolute`,top:0,left:0,width:`100%`,height:`100%`,objectFit:`cover`,zIndex:-4e3,...xe()},onError:e=>{e.target.dataset.fallback||(e.target.dataset.fallback=`true`,e.target.src=f.data.image)}}),u&&u.length>0&&[...u].sort((e,t)=>(e.zIndex||0)-(t.zIndex||0)).map((e,t)=>{if(!e||!e.type)return null;console.log(` Rendering element ${t}:`,{type:e.type,id:e.id?String(e.id).slice(0,8):`no-id`,x:e.x,y:e.y,width:e.width,height:e.height,zIndex:e.zIndex,hasImage:!!e.data?.image,photoIndex:e.data?.photoIndex,__isOverlay:e.data?.__isOverlay});let n=Number.isFinite(e.zIndex)?e.zIndex:200+t;if(e.type===`text`){let r=e.data?.verticalAlign===`middle`||e.data?.verticalAlign===`center`?`center`:e.data?.verticalAlign===`bottom`?`flex-end`:e.data?.verticalAlign===`top`?`flex-start`:`center`,i=e.data?.align||`left`;return(0,G.jsx)(`div`,{style:{position:`absolute`,left:`${e.x||0}px`,top:`${e.y||0}px`,width:`${e.width||100}px`,height:`${e.height||100}px`,zIndex:n,pointerEvents:`none`,fontFamily:e.data?.fontFamily||`Inter`,fontSize:`${e.data?.fontSize||24}px`,color:e.data?.color||`#111827`,fontWeight:e.data?.fontWeight||500,textAlign:i,display:`flex`,alignItems:r,justifyContent:i===`center`?`center`:i===`right`?`flex-end`:`flex-start`,padding:`12px 18px`,boxSizing:`border-box`,whiteSpace:`pre-wrap`,lineHeight:1.25},children:e.data?.text||``},`element-${e.id||t}`)}if(e.type===`shape`)return(0,G.jsx)(`div`,{style:{position:`absolute`,left:`${e.x||0}px`,top:`${e.y||0}px`,width:`${e.width||100}px`,height:`${e.height||100}px`,zIndex:n,pointerEvents:`none`,background:e.data?.fill||`#000`,borderRadius:e.data?.shape===`circle`?`50%`:`${e.data?.borderRadius||0}px`,opacity:e.data?.opacity===void 0?1:e.data.opacity}},`element-${e.id||t}`);if(e.type===`upload`||e.type===`photo`){let r=!!e.data?.image,i=typeof e.data?.photoIndex==`number`,a=e.data?.__isOverlay===!0,o=Number.isFinite(e?.rotation)?e.rotation:0,s=o?`rotate(${o}deg)`:``,c;if(c=a?Number.isFinite(e.zIndex)&&e.zIndex>=500?e.zIndex:500+t:i?Number.isFinite(e.zIndex)?Math.min(e.zIndex,199):100+t:n,console.log(` Element render: hasImage=${r}, isPhotoSlot=${i}, isOverlay=${a}, x=${e.x}, y=${e.y}, width=${e.width}, height=${e.height}, originalZIndex=${e.zIndex}, finalZIndex=${c}`),a&&r)return(0,G.jsx)(`div`,{style:{position:`absolute`,left:`${e.x||0}px`,top:`${e.y||0}px`,width:`${e.width||100}px`,height:`${e.height||100}px`,zIndex:c,pointerEvents:`none`,overflow:`hidden`},children:(0,G.jsx)(`img`,{src:e.data.image,alt:`Frame overlay`,style:{width:`100%`,height:`100%`,objectFit:e.data?.objectFit||`contain`,display:`block`,pointerEvents:`none`},draggable:!1,onError:t=>{console.warn(` Overlay image failed to load:`,e.data.image),t.target.style.display=`none`}})},`overlay-${e.id||t}`);if(!r&&i&&console.warn(` Photo slot ${e.data.photoIndex} missing image!`),!r)return(0,G.jsx)(`div`,{style:{position:`absolute`,left:`${e.x||0}px`,top:`${e.y||0}px`,width:`${e.width||100}px`,height:`${e.height||100}px`,zIndex:c,pointerEvents:`none`,borderRadius:`${e.data?.borderRadius??0}px`,overflow:`hidden`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f3f4f6`,border:`2px dashed #d1d5db`,transform:s||void 0,transformOrigin:`center center`},children:(0,G.jsx)(`span`,{style:{fontSize:`48px`,color:`#9ca3af`},children:``})},`element-${e.id||t}`);let l=e.id||`photo-${t}`,u=H(l),d=C===l,f=E===l,p=e=>{if(e.preventDefault(),e.stopPropagation(),console.log(` Photo tapped:`,l,`swapSource:`,E),E&&E!==l){console.log(` Performing swap:`,E,``,l),B(E,l);return}if(E===l){console.log(` Cancelling swap mode`),D(null),T(null);return}console.log(` Entering swap mode for:`,l),D(l),T(l)},m=O===l;return(0,G.jsxs)(`div`,{ref:e=>{e&&(e.dataset.photoId=l,me.current[l]=e)},"data-photo-container":`true`,style:{position:`absolute`,left:`${e.x||0}px`,top:`${e.y||0}px`,width:`${e.width||100}px`,height:`${e.height||100}px`,zIndex:c,pointerEvents:`auto`,borderRadius:`${e.data?.borderRadius??0}px`,overflow:`hidden`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`transparent`,touchAction:`none`,WebkitUserSelect:`none`,userSelect:`none`,transform:`${s}${s?` `:``}${m&&!d&&!f?`scale(1.02)`:`scale(1)`}`,transformOrigin:`center center`,transition:`transform 0.2s ease-out, box-shadow 0.2s ease-out, outline 0.2s ease-out`,outline:f?`4px solid #F59E0B`:d?`3px solid #4F46E5`:E?`3px dashed #10B981`:m?`2px solid rgba(79, 70, 229, 0.5)`:`none`,boxShadow:f?`0 0 0 8px rgba(245,158,11,0.3)`:d?`0 0 0 6px rgba(79,70,229,0.3)`:E?`0 0 0 4px rgba(16,185,129,0.2)`:m?`0 4px 12px rgba(79, 70, 229, 0.25), 0 0 0 3px rgba(79, 70, 229, 0.1)`:`none`,cursor:E?`pointer`:d?`move`:`pointer`},onClick:p,onTouchStart:e=>ae(e,l,e.currentTarget),onTouchMove:e=>oe(e,l),onTouchEnd:e=>se(e,l),onWheel:e=>le(e,l,e.currentTarget),onGestureStart:e=>{e.preventDefault()},onGestureChange:e=>ue(e,l,e.currentTarget),onGestureEnd:e=>{e.preventDefault()},onMouseDown:e=>de(e,l,e.currentTarget),onMouseMove:e=>fe(e,l),onMouseUp:e=>pe(e,l),onMouseEnter:()=>k(l),onMouseLeave:()=>k(null),children:[(0,G.jsx)(`img`,{src:e.data.image,alt:e.data?.photoIndex===void 0?`Upload`:`Photo ${e.data.photoIndex+1}`,style:{width:`100%`,height:`100%`,objectFit:`cover`,display:`block`,transform:`translate(${u.x}px, ${u.y}px) scale(${u.scale})`,transformOrigin:`center center`,transition:u.scale===1?`transform 0.2s ease-out`:`none`,willChange:`transform`,pointerEvents:`none`,...xe()},draggable:!1}),u.scale>1&&(0,G.jsxs)(`div`,{style:{position:`absolute`,bottom:`8px`,right:`8px`,background:`rgba(0,0,0,0.7)`,color:`white`,padding:`4px 10px`,borderRadius:`12px`,fontSize:`14px`,fontWeight:`600`,pointerEvents:`none`,zIndex:10},children:[u.scale.toFixed(1),`x`]})]},`element-${e.id||t}`)}return null}),o&&o.frameImage&&!o.isCustom&&(0,G.jsx)(`div`,{style:{position:`absolute`,left:0,top:0,width:`100%`,height:`100%`,zIndex:9999,pointerEvents:`none`},children:(0,G.jsx)(`img`,{src:o.frameImage,alt:`Frame Overlay`,style:{width:`100%`,height:`100%`,objectFit:`contain`}})})]})}),(0,G.jsx)(`div`,{style:{display:`flex`,gap:`0.5rem`,overflowX:`auto`,overflowY:`hidden`,paddingBottom:`0.5rem`,paddingLeft:`0.5rem`,paddingRight:`0.5rem`,scrollbarWidth:`thin`,scrollbarColor:`#D1D5DB #F3F4F6`,WebkitOverflowScrolling:`touch`,width:`100%`,maxWidth:`100vw`,boxSizing:`border-box`,msOverflowStyle:`none`,scrollSnapType:`x mandatory`},children:ve.map(e=>(0,G.jsxs)(`button`,{onClick:()=>{if(M===e.name){be();return}ye(e)},style:{padding:`0.35rem 0.5rem`,background:M===e.name?`#4F46E5`:`white`,color:M===e.name?`white`:`#333`,border:`2px solid ${M===e.name?`#4F46E5`:`#E5E7EB`}`,borderRadius:`8px`,fontSize:`0.7rem`,fontWeight:`500`,cursor:`pointer`,transition:`all 0.2s ease`,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`0.15rem`,minWidth:`65px`,flexShrink:0,whiteSpace:`nowrap`,scrollSnapAlign:`start`,touchAction:`pan-x`},onMouseEnter:t=>{M!==e.name&&(t.target.style.borderColor=`#D1D5DB`,t.target.style.background=`#F9FAFB`)},onMouseLeave:t=>{M!==e.name&&(t.target.style.borderColor=`#E5E7EB`,t.target.style.background=`white`)},children:[(0,G.jsx)(`span`,{style:{fontSize:`1.1rem`},children:e.icon}),(0,G.jsx)(`span`,{style:{fontSize:`0.65rem`},children:e.name})]},e.name))}),(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`row-reverse`,gap:`0.5rem`,width:`100%`,maxWidth:`400px`,marginTop:`0.25rem`,justifyContent:`center`},children:[(0,G.jsx)(`button`,{style:{padding:`0.6rem 1.2rem`,background:`#E8A889`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`0.9rem`,cursor:`pointer`,fontWeight:`600`,boxShadow:`0 2px 8px rgba(232, 168, 137, 0.3)`,transition:`all 0.2s ease`},onMouseEnter:e=>{e.target.style.background=`#D4967A`,e.target.style.transform=`translateY(-2px)`},onMouseLeave:e=>{e.target.style.background=`#E8A889`,e.target.style.transform=`translateY(0)`},onClick:async()=>{console.log(` [v3.0-16Dec-FINAL] Memulai download dengan canvas manual...`),console.log(` USER CACHE CHECK: If you see this log, you are using the LATEST code!`);try{let e=document.createElement(`canvas`);e.width=1080,e.height=1920;let n=e.getContext(`2d`,{alpha:!0}),r=(e,t)=>{let n=document.createElement(`canvas`);n.width=e.width,n.height=e.height;let r=n.getContext(`2d`);r.drawImage(e,0,0);let i=r.getImageData(0,0,n.width,n.height),a=i.data,{brightness:o,contrast:s,saturate:c,grayscale:l,sepia:u,hueRotate:d}=t;for(let e=0;e<a.length;e+=4){let t=a[e],n=a[e+1],r=a[e+2],i=o/100;t*=i,n*=i,r*=i;let f=s/100,p=128*(1-f);if(t=t*f+p,n=n*f+p,r=r*f+p,l>0){let e=.299*t+.587*n+.114*r,i=l/100;t=t*(1-i)+e*i,n=n*(1-i)+e*i,r=r*(1-i)+e*i}if(u>0){let e=u/100,i=.393*t+.769*n+.189*r,a=.349*t+.686*n+.168*r,o=.272*t+.534*n+.131*r;t=t*(1-e)+i*e,n=n*(1-e)+a*e,r=r*(1-e)+o*e}if(c!==100){let e=.299*t+.587*n+.114*r,i=c/100;t=e+i*(t-e),n=e+i*(n-e),r=e+i*(r-e)}if(d!==0){let e=d*Math.PI/180,i=Math.cos(e),a=Math.sin(e),o=t*(.213+i*.787-a*.213)+n*(.715-i*.715-a*.715)+r*(.072-i*.072+a*.928),s=t*(.213-i*.213+a*.143)+n*(.715+i*.285+a*.14)+r*(.072-i*.072-a*.283),c=t*(.213-i*.213-a*.787)+n*(.715-i*.715+a*.715)+r*(.072+i*.928+a*.072);t=o,n=s,r=c}a[e]=Math.max(0,Math.min(255,Math.round(t))),a[e+1]=Math.max(0,Math.min(255,Math.round(n))),a[e+2]=Math.max(0,Math.min(255,Math.round(r)))}return r.putImageData(i,0,0),console.log(` Manual pixel filter applied successfully`),n},i={brightness:A.brightness,contrast:A.contrast,saturate:A.saturate,grayscale:A.grayscale,sepia:A.sepia,blur:A.blur,hueRotate:A.hueRotate},a=A.brightness!==100||A.contrast!==100||A.saturate!==100||A.grayscale!==0||A.sepia!==0||A.blur!==0||A.hueRotate!==0;console.log(` Filter active:`,a,i),n.fillStyle=o?.designer?.canvasBackground||`#ffffff`,n.fillRect(0,0,1080,1920);let s=(e,t,n,r,i,a)=>{let o=t.width/t.height,s=i/a,c=0,l=0,u=t.width,d=t.height;o>s?(u=t.height*s,c=(t.width-u)/2):(d=t.width/s,l=(t.height-d)/2),e.drawImage(t,c,l,u,d,n,r,i,a)},c=(e,t,n,r,i,a,o)=>{let{scale:s=1,x:c=0,y:l=0}=o||{},u=t.width/t.height,d=i/a,f=0,p=0,m=t.width,h=t.height;u>d?(m=t.height*d,f=(t.width-m)/2):(h=t.width/d,p=(t.height-h)/2);let g=m/s,_=h/s,v=f+(m-g)/2,y=p+(h-_)/2,b=-(c/i)*g,x=-(l/a)*_;v+=b,y+=x,v=Math.max(0,Math.min(v,t.width-g)),y=Math.max(0,Math.min(y,t.height-_)),console.log(` drawImageCoverWithTransform: scale=${s.toFixed(2)}, pan=(${c.toFixed(0)},${l.toFixed(0)}), source=(${v.toFixed(0)},${y.toFixed(0)},${g.toFixed(0)},${_.toFixed(0)})`),e.drawImage(t,v,y,g,_,n,r,i,a)};if(f&&f.data?.image)try{let e=DN(f.data.image);console.log(` Loading background photo (FRAME - no filter):`,e.substring(0,80)+`...`);let t=await z(e);n.save(),s(n,t,0,0,1080,1920),n.restore(),console.log(` Background photo drawn successfully (NO FILTER - frame background)`)}catch(e){console.error(` Failed to load background photo:`,e)}let l=[...u].sort((e,t)=>{let n=Number.isFinite(e?.zIndex)?e.zIndex:200,r=Number.isFinite(t?.zIndex)?t.zIndex:200;return n-r});console.log(` DOWNLOAD DEBUG - Designer Elements:`),u.forEach((e,t)=>{console.log(`  Slot ${t}:`,{type:e.type,x:e.x,y:e.y,width:e.width,height:e.height,hasImage:!!e.data?.image,imagePreview:e.data?.image?e.data.image.substring(0,50)+`...`:`none`,photoIndex:e.data?.photoIndex})}),console.log(` Rendering elements in order:`,l.map(e=>({type:e.type,id:e.id?String(e.id).slice(0,8):`no-id`,zIndex:e.zIndex,text:e.type===`text`?e.data?.text:void 0})));for(let e of l){if(!e||!e.type)continue;if(console.log(` DOWNLOAD: Drawing element type=${e.type}, hasImage=${!!e.data?.image}`),(e.type===`upload`||e.type===`photo`)&&e.data?.image){console.log(`   Drawing photo/upload at x=${e.x}, y=${e.y}, w=${e.width}, h=${e.height}`);try{let t=await z(e.data.image);console.log(`   Image loaded successfully, drawing to canvas...`);let o=typeof e.data?.photoIndex==`number`,s=e.data?.__isOverlay===!0||e.data?.isOverlay===!0||e.zIndex>=500||e.type===`frame-overlay`||e.id?.includes(`frame`)||e.id?.includes(`overlay`);console.log(`   [v3.0-16Dec-FINAL] Element ID=${e.id}, type=${e.type}, photoIndex=${e.data?.photoIndex}, isPhotoSlot=${o}, isOverlay=${e.data?.isOverlay}, zIndex=${e.zIndex}, isFrameOverlay=${s}`);let u;a&&o&&!s?(u=r(t,i),console.log(`   Filter applied via pixel manipulation`)):s?(u=document.createElement(`canvas`),u.width=t.width,u.height=t.height,u.getContext(`2d`).drawImage(t,0,0),console.log(`   FRAME OVERLAY SKIPPED - NO FILTER APPLIED`)):(u=document.createElement(`canvas`),u.width=t.width,u.height=t.height,u.getContext(`2d`).drawImage(t,0,0)),n.save(),n.globalAlpha=1,n.globalCompositeOperation=`source-over`;let d=Number(e.x)||0,f=Number(e.y)||0,p=Number(e.width)||100,m=Number(e.height)||100,h=(Number.isFinite(e?.rotation)?e.rotation:0)*Math.PI/180;n.translate(d+p/2,f+m/2),h&&n.rotate(h),n.translate(-p/2,-m/2);let g=Number(e.data?.borderRadius??0),_=Number.isFinite(g)?g:0;if(e.data?.shape===`circle`){let e=Math.min(p,m)/2;n.beginPath(),n.arc(p/2,m/2,e,0,Math.PI*2),n.closePath(),n.clip()}else if(_>0){let e=Math.min(Math.max(_,0),Math.min(p,m)/2);n.beginPath(),n.moveTo(e,0),n.lineTo(p-e,0),n.quadraticCurveTo(p,0,p,e),n.lineTo(p,m-e),n.quadraticCurveTo(p,m,p-e,m),n.lineTo(e,m),n.quadraticCurveTo(0,m,0,m-e),n.lineTo(0,e),n.quadraticCurveTo(0,0,e,0),n.closePath(),n.clip()}else n.beginPath(),n.rect(0,0,p,m),n.closePath(),n.clip();let v=e.id||`photo-${l.indexOf(e)}`,y=x[v]||{scale:1,x:0,y:0};c(n,u,0,0,p,m,y),n.restore(),console.log(`   Image drawn with filter and transform:`,y)}catch(e){console.error(`   Image load error:`,e)}}else if(e.type===`upload`||e.type===`photo`)console.warn(`   Photo/upload element has NO image data!`,{type:e.type,hasDataObject:!!e.data,imageType:typeof e.data?.image,imageLength:e.data?.image?.length||0});else if(e.type===`shape`){n.save(),n.fillStyle=e.data?.fill||`#000`,n.globalAlpha=e.data?.opacity===void 0?1:e.data.opacity;let t=e.x||0,r=e.y||0,i=e.width||100,a=e.height||100,o=e.data?.borderRadius||0;e.data?.shape===`circle`?(n.beginPath(),n.arc(t+i/2,r+a/2,Math.min(i,a)/2,0,Math.PI*2),n.fill()):(n.beginPath(),n.moveTo(t+o,r),n.lineTo(t+i-o,r),n.quadraticCurveTo(t+i,r,t+i,r+o),n.lineTo(t+i,r+a-o),n.quadraticCurveTo(t+i,r+a,t+i-o,r+a),n.lineTo(t+o,r+a),n.quadraticCurveTo(t,r+a,t,r+a-o),n.lineTo(t,r+o),n.quadraticCurveTo(t,r,t+o,r),n.closePath(),n.fill()),n.restore()}else if(e.type===`text`){n.save();let t=e.data?.fontSize||24,r=e.data?.fontWeight||500,i=e.data?.fontFamily||`Inter`;n.font=`${r} ${t}px ${i}`,n.fillStyle=e.data?.color||`#111827`;let a=e.x||0,o=e.y||0,s=e.width||100,c=e.height||100,l=e.data?.text||``,u=e.data?.align||`left`,d=(e,t,n)=>{let r=t.split(` `),i=[],a=``;for(let t=0;t<r.length;t++){let o=a+(a?` `:``)+r[t];e.measureText(o).width>n&&a?(i.push(a),a=r[t]):a=o}return a&&i.push(a),i},f=l.split(`
`),p=[];f.forEach(e=>{if(e.trim()){let t=d(n,e,s-20);p.push(...t)}else p.push(``)});let m=t*1.2,h=p.length*m,g=o;g=e.data?.verticalAlign===`middle`?o+(c-h)/2+t:e.data?.verticalAlign===`bottom`?o+c-h+t:o+t,n.textBaseline=`alphabetic`,p.forEach((e,t)=>{let r=g+t*m,i=a+10;u===`center`?(i=a+s/2,n.textAlign=`center`):u===`right`?(i=a+s-10,n.textAlign=`right`):n.textAlign=`left`,n.fillText(e,i,r,s-20)}),n.restore()}}let d=1080,p=1920,m=0,h=0;if(o&&o.frameImage&&!o.isCustom)try{console.log(` Loading frame image for overlay:`,o.frameImage.substring(0,80)+`...`);let e=await z(o.frameImage),t=1080,r=1920,i=e.width/e.height;t/r;let a,s,c,l;i>.5625?(a=t,s=t/i,c=0,l=(r-s)/2):(s=r,a=r*i,c=(t-a)/2,l=0),n.save(),n.filter=`none`,n.globalCompositeOperation=`source-over`,n.globalAlpha=1,n.drawImage(e,c,l,a,s),n.restore(),d=Math.round(a),p=Math.round(s),m=Math.round(c),h=Math.round(l),console.log(` Frame overlay drawn successfully`)}catch(e){console.error(` Failed to load frame overlay:`,e)}let g=e;(m>0||h>0||d<1080||p<1920)&&(console.log(` Cropping canvas to frame size:`,{from:`1080x1920`,to:`${d}x${p}`,offset:`${m}, ${h}`}),g=document.createElement(`canvas`),g.width=d,g.height=p,g.getContext(`2d`).drawImage(e,m,h,d,p,0,0,d,p)),console.log(`Canvas created:`,{width:g.width,height:g.height});let _=g.toDataURL(`image/png`,1),v=`fremio-photo-${Date.now()}.png`,y=o?.id||`unknown`,b=o?.name||o?.id||`Unknown Frame`,S=await PN(_,{filename:v,frameId:y,frameName:b,useShareApi:!0,showWebToasts:!1});if(S.success){if(console.log(` Download selesai via`,S.method),!S.cancelled){let e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),n=String(S.method||``).includes(`share`);e&&!n?(R(`photo`),I(!0)):t({type:`success`,title:`Download Berhasil`,message:`Foto berhasil disimpan.`})}}else throw Error(S.error||`Download failed`)}catch(e){console.error(` Error saat download:`,e);let n=e.message?.includes(`544`)||e.message?.includes(`502`)||e.message?.includes(`timeout`)||e.message?.includes(`unavailable`);t({type:`error`,title:`Download Gagal`,message:n?`Server penyimpanan sedang mengalami gangguan. Silakan coba lagi dalam beberapa menit.`:e.message||`Terjadi kesalahan saat mengunduh foto.`})}},children:`Download Photo`}),(0,G.jsx)(`button`,{onClick:async()=>{if(!i||i.length===0){t({type:`warning`,title:`Tidak Ada Video`,message:`Ambil video terlebih dahulu di halaman Take Moment.`,action:{label:`Ambil Video`,onClick:()=>e(`/take-moment`)}});return}if(!_e){t({type:`error`,title:`Video Tidak Valid`,message:`Video corrupt atau tidak valid. Silakan ambil video baru.`,action:{label:`Ambil Ulang`,onClick:()=>e(`/take-moment`)}});return}try{h(!0),y(` Merender video dengan frame...`);let e=document.createElement(`canvas`);e.width=1080,e.height=1920;let n=e.getContext(`2d`,{alpha:!0,willReadFrequently:!1});if(typeof MediaRecorder>`u`)throw Error(`Browser ini belum mendukung fitur perekaman canvas (MediaRecorder). Coba gunakan Chrome atau Edge versi terbaru.`);let r=e.captureStream||e.mozCaptureStream||e.webkitCaptureStream||null;if(typeof r!=`function`)throw Error(`Browser ini belum mendukung captureStream pada canvas. Coba gunakan Chrome atau Edge versi terbaru.`);let a=[],s=u.filter(e=>(e.type===`upload`||e.type===`photo`)&&typeof e.data?.photoIndex==`number`);console.log(` Preparing videos...`,{totalVideos:i.length,photoSlots:s.length,designerElementsCount:u.length});let c=[...i],l=s.length;if(c.length>0&&c.length<l){console.log(` [VIDEO DOWNLOAD] Duplicating videos to match slots...`),console.log(`  - Original videos:`,c.length),console.log(`  - Target slots:`,l);let e=[],t=c.length,n=Math.ceil(l/t);for(let r=0;r<t;r++){let t=c[r];for(let i=0;i<n&&!(e.length>=l);i++)t?e.push({...t,id:i===0?t.id||`video-${r}`:`${t.id||`video`}-dup-${r}-${i}`}):e.push(null)}c=e.slice(0,l),console.log(` [VIDEO DOWNLOAD] Videos duplicated:`,c.length)}console.log(` Videos to process:`,c.length),c.forEach((e,t)=>{e&&console.log(` Video ${t} metadata:`,{hasDataUrl:!!e.dataUrl,hasBlob:!!e.blob,duration:e.duration,timer:e.timer,mimeType:e.mimeType,source:`camera recording from TakeMoment`})});let d=c.map((e,t)=>!e||!e.dataUrl&&!e.blob?Promise.resolve(null):new Promise(n=>{let r=document.createElement(`video`);r.muted=!0,r.loop=!1,r.playsInline=!0,r.crossOrigin=`anonymous`,e.dataUrl?r.src=e.dataUrl:e.blob&&(r.src=URL.createObjectURL(e.blob));let i=!1,a,o=()=>{a&&clearTimeout(a),r.onloadedmetadata=null,r.onloadeddata=null,r.oncanplay=null,r.onerror=null},c=e=>{if(i=!0,console.log(` Video ${t} ready (${e}):`,{duration:r.duration,width:r.videoWidth,height:r.videoHeight,readyState:r.readyState}),o(),i||r.readyState>=2||Number.isFinite(r.duration)&&r.duration>0){let e=s[t]||{id:`virtual-slot-${t}`,data:{photoIndex:t}};n({video:r,slot:e,index:t})}else r.src.startsWith(`blob:`)&&URL.revokeObjectURL(r.src),n(null)};r.onloadedmetadata=()=>c(`loadedmetadata`),r.onloadeddata=()=>c(`loadeddata`),r.oncanplay=()=>c(`canplay`),r.onerror=e=>{console.error(` Video ${t} failed to load`,e),o(),r.src.startsWith(`blob:`)&&URL.revokeObjectURL(r.src),n(null)},a=setTimeout(()=>{if(console.warn(` Video ${t} load timed out`,{readyState:r.readyState,duration:r.duration}),o(),i||r.readyState>=2||Number.isFinite(r.duration)&&r.duration>0){let e=s[t]||{id:`virtual-slot-${t}`,data:{photoIndex:t}};n({video:r,slot:e,index:t})}else r.src.startsWith(`blob:`)&&URL.revokeObjectURL(r.src),n(null)},8e3)})),p=await Promise.all(d);if(a.push(...p.filter(e=>e!==null)),a.length===0)throw Error(`Tidak ada video yang berhasil dimuat`);console.log(` Videos loaded:`,a.length);let m=new Map,g=new Map;a.forEach(({video:e,slot:t},n)=>{console.log(` Mapping video ${n}:`,{slotId:t?.id?String(t.id).slice(0,8):`no-id`,photoIndex:t?.data?.photoIndex,videoIndex:n,videoReady:e.readyState>=2}),t?.id&&m.set(t.id,{video:e,slot:t}),g.set(n,{video:e,slot:t})}),console.log(` Video mapping summary:`,{bySlotId:m.size,bySlotIndex:g.size,slotIndices:Array.from(g.keys())});let v=Math.max(...a.map(({video:e})=>e.duration&&Number.isFinite(e.duration)?e.duration:0),3);console.log(` Video download will render:`),console.log(`   - Duration: `+v+`s (from recorded video)`),console.log(`   - Original timer: `+(i[0]?.timer||`unknown`)+`s`),console.log(`   - Expected duration based on timer:`),console.log(`     * Timer 3s  Video ~4s`),console.log(`     * Timer 5s  Video ~6s`),console.log(`     * Timer 10s  Video ~6s`),console.log(`   - Video will play in photo slots with frame overlay`);let b=r.call(e,30),x=[`video/mp4`,`video/webm;codecs=h264`,`video/webm;codecs=vp9`,`video/webm;codecs=vp8`,`video/webm`].find(e=>MediaRecorder.isTypeSupported(e));if(!x)throw Error(`Browser tidak mendukung perekaman video`);let S=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),C=S?3e6:5e6;console.log(` MediaRecorder settings:`,{mimeType:x,fps:30,bitrate:`${(C/1e6).toFixed(1)}Mbps`,device:S?`mobile`:`desktop`});let w=new MediaRecorder(b,{mimeType:x,videoBitsPerSecond:C}),T=[];w.ondataavailable=e=>{e.data&&e.data.size>0&&T.push(e.data)};let E=null;if(f&&f.data?.image){console.log(` Preloading background image...`);try{let e=DN(f.data.image);E=await Promise.race([z(e),new Promise((e,t)=>setTimeout(()=>t(Error(`Background load timeout`)),12e3))]),console.log(` Background image loaded`)}catch(e){console.warn(` Background image failed to load (continuing without it)`,e),E=null}}let D=null;if(o&&o.frameImage&&!o.isCustom){console.log(` Preloading frame overlay image...`);try{let e=DN(o.frameImage);D=await Promise.race([z(e),new Promise((e,t)=>setTimeout(()=>t(Error(`Frame overlay load timeout`)),12e3))]),console.log(` Frame overlay loaded`)}catch(e){console.warn(` Frame overlay failed to load (video will export without frame)`,e),D=null}}let O=new Map,k=u.filter(e=>!e||e.type!==`upload`||typeof e?.data?.photoIndex==`number`?!1:!!e?.data?.image);k.length&&(console.log(` Preloading overlay uploads:`,k.length),await Promise.all(k.map((e,t)=>new Promise(n=>{let r=new Image;r.crossOrigin=`anonymous`;let i=!1,a=()=>{i||(i=!0,n())},o=setTimeout(()=>{console.warn(` Overlay image ${t} load timeout`),a()},3e3);r.onload=()=>{clearTimeout(o),console.log(` Overlay upload ${t} loaded`,{width:r.naturalWidth,height:r.naturalHeight,id:e?.id}),O.set(e,r),a()},r.onerror=e=>{clearTimeout(o),console.warn(` Overlay upload ${t} failed to load`,e),a()},r.src=e.data.image}))));let j=e=>{if(Number.isFinite(e))return e;if(typeof e==`string`){let t=parseFloat(e);return Number.isFinite(t)?t:0}return 0},M=(e,t,n)=>{if(!Number.isFinite(e)||e<=0)return 0;let r=Math.min(t,n)/2;return Math.min(Math.max(e,0),r)},N=(e,t,n,r)=>{e.beginPath(),e.moveTo(r,0),e.lineTo(t-r,0),e.quadraticCurveTo(t,0,t,r),e.lineTo(t,n-r),e.quadraticCurveTo(t,n,t-r,n),e.lineTo(r,n),e.quadraticCurveTo(0,n,0,n-r),e.lineTo(0,r),e.quadraticCurveTo(0,0,r,0),e.closePath()},P=(e,t,n,r)=>{let i=Number.isFinite(t?.width)?t.width:Number.isFinite(n?.width)?n.width:0,a=Number.isFinite(t?.height)?t.height:Number.isFinite(n?.height)?n.height:0,o=Number.isFinite(t?.x)?t.x:Number.isFinite(n?.x)?n.x:0,s=Number.isFinite(t?.y)?t.y:Number.isFinite(n?.y)?n.y:0,c=(Number.isFinite(t?.rotation)?t.rotation:Number.isFinite(n?.rotation)?n.rotation:0)*Math.PI/180;e.save(),e.translate(o+i/2,s+a/2),c&&e.rotate(c),e.translate(-i/2,-a/2),r({width:i,height:a}),e.restore()},ee=(e,t,n,r)=>{if(!e||!t)return;if(t?.data?.shape===`circle`){let t=Math.min(n,r)/2;e.beginPath(),e.arc(n/2,r/2,t,0,Math.PI*2),e.closePath(),e.clip();return}let i=j(t?.data?.borderRadius),a=M(i,n,r);if(a<=0){e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.clip();return}N(e,n,r,a),e.clip()},F=(e,t,n,r)=>{if(!t)return;let i=Number.isFinite(t.videoWidth)&&t.videoWidth>0?t.videoWidth:Number.isFinite(t.naturalWidth)&&t.naturalWidth>0?t.naturalWidth:Number.isFinite(t.width)&&t.width>0?t.width:n,a=Number.isFinite(t.videoHeight)&&t.videoHeight>0?t.videoHeight:Number.isFinite(t.naturalHeight)&&t.naturalHeight>0?t.naturalHeight:Number.isFinite(t.height)&&t.height>0?t.height:r;if(!i||!a){e.drawImage(t,0,0,n,r);return}let o=i/a,s=n/r,c=0,l=0,u=i,d=a;o>s?(u=a*s,c=(i-u)/2):(d=i/s,l=(a-d)/2),e.drawImage(t,c,l,u,d,0,0,n,r)},L=u.filter(Boolean).slice().sort((e,t)=>{let n=Number.isFinite(e?.zIndex)?e.zIndex:200,r=Number.isFinite(t?.zIndex)?t.zIndex:200;if(n===r){let n=u.indexOf(e),r=u.indexOf(t);return n-r}return n-r}),te={brightness:A.brightness,contrast:A.contrast,saturate:A.saturate,grayscale:A.grayscale,sepia:A.sepia,blur:A.blur,hueRotate:A.hueRotate},B=A.brightness!==100||A.contrast!==100||A.saturate!==100||A.grayscale!==0||A.sepia!==0||A.blur!==0||A.hueRotate!==0;console.log(` Video filter active:`,B,te);let V=(e,t)=>{let n=e.getContext(`2d`),r=n.getImageData(0,0,e.width,e.height),i=r.data,{brightness:a,contrast:o,saturate:s,grayscale:c,sepia:l,hueRotate:u}=t;for(let e=0;e<i.length;e+=4){let t=i[e],n=i[e+1],r=i[e+2],d=a/100;t*=d,n*=d,r*=d;let f=o/100,p=128*(1-f);if(t=t*f+p,n=n*f+p,r=r*f+p,c>0){let e=.299*t+.587*n+.114*r,i=c/100;t=t*(1-i)+e*i,n=n*(1-i)+e*i,r=r*(1-i)+e*i}if(l>0){let e=l/100,i=.393*t+.769*n+.189*r,a=.349*t+.686*n+.168*r,o=.272*t+.534*n+.131*r;t=t*(1-e)+i*e,n=n*(1-e)+a*e,r=r*(1-e)+o*e}if(s!==100){let e=.299*t+.587*n+.114*r,i=s/100;t=e+i*(t-e),n=e+i*(n-e),r=e+i*(r-e)}if(u!==0){let e=u*Math.PI/180,i=Math.cos(e),a=Math.sin(e),o=t*(.213+i*.787-a*.213)+n*(.715-i*.715-a*.715)+r*(.072-i*.072+a*.928),s=t*(.213-i*.213+a*.143)+n*(.715+i*.285+a*.14)+r*(.072-i*.072-a*.283),c=t*(.213-i*.213-a*.787)+n*(.715-i*.715+a*.715)+r*(.072+i*.928+a*.072);t=o,n=s,r=c}i[e]=Math.max(0,Math.min(255,Math.round(t))),i[e+1]=Math.max(0,Math.min(255,Math.round(n))),i[e+2]=Math.max(0,Math.min(255,Math.round(r)))}n.putImageData(r,0,0)};[`brightness(${A.brightness}%)`,`contrast(${A.contrast}%)`,`saturate(${A.saturate}%)`,`grayscale(${A.grayscale}%)`,`sepia(${A.sepia}%)`,`blur(${A.blur}px)`,`hue-rotate(${A.hueRotate}deg)`].join(` `);let H=o?.designer?.canvasBackground||`#FFFFFF`,ne=()=>{if(n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=1,n.globalCompositeOperation=`source-over`,n.filter=`none`,n.fillStyle=H,n.fillRect(0,0,e.width,e.height),n.restore(),E&&E.complete&&E.naturalWidth>0)try{if(B){let t=document.createElement(`canvas`);t.width=e.width,t.height=e.height;let r=t.getContext(`2d`);F(r,E,e.width,e.height),V(t,te),f?P(n,f,{width:e.width,height:e.height,x:0,y:0},({width:e,height:r})=>{ee(n,f,e,r),n.drawImage(t,0,0,e,r)}):n.drawImage(t,0,0)}else f?P(n,f,{width:e.width,height:e.height,x:0,y:0},({width:e,height:t})=>{ee(n,f,e,t),F(n,E,e,t)}):(n.save(),F(n,E,e.width,e.height),n.restore())}catch(e){console.warn(`Error drawing background:`,e)}let t=0;if(L.forEach(e=>{if(e){if((e.type===`upload`||e.type===`photo`)&&typeof e?.data?.photoIndex==`number`){let r=t;t++;let i=e.id&&m.get(e.id)||g.get(r);if(!i){e._loggedMissing||=(console.warn(` No video for slot:`,{elementId:e.id?String(e.id).slice(0,8):`no-id`,slotIndex:r,photoIndex:e.data.photoIndex,availableIndices:Array.from(g.keys())}),!0);return}let{video:a}=i;if(!(a.readyState>=2&&!a.paused&&!a.ended))return;try{P(n,e,null,({width:t,height:r})=>{if(B){let i=document.createElement(`canvas`);i.width=Math.ceil(t),i.height=Math.ceil(r);let o=i.getContext(`2d`);o.translate(t,0),o.scale(-1,1),F(o,a,t,r),V(i,te),ee(n,e,t,r),n.drawImage(i,0,0)}else ee(n,e,t,r),n.translate(t,0),n.scale(-1,1),F(n,a,t,r)})}catch(e){console.warn(`Error drawing video frame:`,e)}return}if(e.type===`shape`){P(n,e,null,({width:t,height:r})=>{let i=Number.isFinite(e?.data?.opacity)?e.data.opacity:1;if(n.filter=`none`,n.globalAlpha=i,n.fillStyle=e.data?.fill||`#000`,e.data?.shape===`circle`)n.beginPath(),n.arc(t/2,r/2,Math.min(t,r)/2,0,Math.PI*2),n.fill();else{let i=j(e?.data?.borderRadius),a=M(i,t,r);N(n,t,r,a),n.fill()}});return}if(e.type===`text`&&e.data?.text){P(n,e,null,({width:t,height:r})=>{n.filter=`none`,n.globalAlpha=Number.isFinite(e?.data?.opacity)?e.data.opacity:1;let i=e.data?.fontSize||24,a=e.data?.fontWeight||500,o=e.data?.fontFamily||`Inter`;n.font=`${a} ${i}px ${o}`;let s=e.data?.align||`left`;n.fillStyle=e.data?.color||`#111827`;let c=(e,t,n)=>{let r=t.split(` `),i=[],a=``;for(let t=0;t<r.length;t++){let o=a+(a?` `:``)+r[t];e.measureText(o).width>n&&a?(i.push(a),a=r[t]):a=o}return a&&i.push(a),i},l=(e.data.text||``).split(`
`),u=[];l.forEach(e=>{if(e.trim()){let r=c(n,e,t-20);u.push(...r)}else u.push(``)});let d=i*1.2,f=u.length*d,p=10;s===`center`?(p=t/2,n.textAlign=`center`):s===`right`?(p=t-10,n.textAlign=`right`):n.textAlign=`left`;let m=i,h=e.data?.verticalAlign;h===`middle`?m=(r-f)/2+i:h===`bottom`&&(m=r-f+i),n.textBaseline=`alphabetic`,u.forEach((e,r)=>{let i=m+r*d;n.fillText(e,p,i,t-20)})});return}if(e.type===`upload`||e.type===`photo`){let t=O.get(e);if(!t||!t.complete||t.naturalWidth<=0)return;P(n,e,null,({width:r,height:i})=>{if(n.globalAlpha=1,n.globalCompositeOperation=`source-over`,B){let a=document.createElement(`canvas`);a.width=Math.ceil(r),a.height=Math.ceil(i);let o=a.getContext(`2d`);F(o,t,r,i),V(a,te),ee(n,e,r,i),n.drawImage(a,0,0)}else ee(n,e,r,i),F(n,t,r,i)})}}}),D&&D.complete&&D.naturalWidth>0&&!o?.isCustom)try{n.save(),n.filter=`none`,n.globalAlpha=1;let e=1080,t=1920,r=D.width/D.height;e/t;let i,a,o,s;r>.5625?(i=e,a=e/r,o=0,s=(t-a)/2):(a=t,i=t*r,o=(e-i)/2,s=0),n.drawImage(D,o,s,i,a),n.restore()}catch(e){console.warn(`Error drawing frame overlay:`,e)}},re=new Promise((e,t)=>{w.onstop=()=>{if(console.log(` Recording stopped, creating blob...`),T.length===0){console.error(` No video chunks recorded!`),t(Error(`No video data recorded`));return}let n=new Blob(T,{type:x});console.log(` Video blob created:`,{size:(n.size/1024).toFixed(2)+`KB`,type:n.type,chunks:T.length}),e(n)},w.onerror=e=>{console.error(` MediaRecorder error:`,e),t(e)}});console.log(` Starting MediaRecorder...`),w.start(100),console.log(` MediaRecorder started, state:`,w.state),console.log(` Starting video playback...`),await Promise.all(a.map(({video:e,index:t})=>(e.currentTime=0,e.play().then(()=>{console.log(` Video ${t} playing`)}).catch(e=>{console.warn(` Video ${t} play failed:`,e)})))),console.log(` Starting animation loop...`);let U=performance.now(),ie=0,ae=()=>{ne(),ie++;let e=(performance.now()-U)/1e3,t=a.every(({video:e})=>e.ended||e.currentTime>=v);ie%30==0&&console.log(` Recording progress: ${e.toFixed(1)}s / ${v}s (frame ${ie})`),e<v+.5&&!t?requestAnimationFrame(ae):(console.log(` Stopping recording...`),console.log(`   Total frames: ${ie}, Duration: ${e.toFixed(2)}s`),w.state!==`inactive`&&w.stop(),a.forEach(({video:e,index:t})=>{e.pause(),console.log(` Video ${t} paused at ${e.currentTime.toFixed(2)}s`),e.src.startsWith(`blob:`)&&URL.revokeObjectURL(e.src)}))};ae(),console.log(` Waiting for recording to complete...`),y(` Menyelesaikan rekaman video...`);let oe=await re;if(!oe||oe.size<1e3)throw Error(`Video blob too small or invalid (${oe?.size||0} bytes)`);console.log(` Preparing final download blob...`,{sizeKB:(oe.size/1024).toFixed(2),type:oe.type});let se=oe,ce=`mp4`,le=oe.type||`video/mp4`;if(oe.type===`video/mp4`||oe.type.includes(`codecs=h264`)||oe.type.includes(`codecs=avc1`))console.log(` Video already in compatible format, skipping conversion!`,{type:oe.type,sizeKB:(oe.size/1024).toFixed(2)}),oe.type===`video/mp4`?ce=`mp4`:oe.type.includes(`webm`)&&(ce=`mp4`,le=`video/mp4`);else{console.log(` Video needs conversion:`,oe.type),y(` Mengonversi video ke format MP4...`);try{let e=await CN(oe,{frameRate:30,durationSeconds:v,outputPrefix:`fremio-video`});e&&e.size>0?(se=e,ce=`mp4`,le=`video/mp4`,console.log(` Video converted to MP4:`,{originalType:oe.type,originalSizeKB:(oe.size/1024).toFixed(2),convertedSizeKB:(e.size/1024).toFixed(2)})):(console.warn(` MP4 conversion returned empty result, falling back to original blob`),ce=`webm`)}catch(e){console.error(` MP4 conversion failed, using original recording:`,e),ce=`webm`}}console.log(` Downloading video...`),y(` Menyimpan video...`);let ue=`fremio-video-${Date.now()}.${ce}`,de=o?.id||`unknown`,fe=o?.name||o?.id||`Unknown Frame`,pe=await FN(se,{filename:ue,mimeType:le,frameId:de,frameName:fe,useShareApi:!0,showWebToasts:!1});if(y(``),pe.success){if(console.log(` Video download complete via`,pe.method),!pe.cancelled){_(ce===`mp4`?` Video MP4 berhasil didownload!`:` Video berhasil didownload (format cadangan)`),setTimeout(()=>_(``),3e3);let e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),n=String(pe.method||``).includes(`share`);e&&!n?(R(`video`),I(!0)):t({type:`success`,title:`Video Berhasil`,message:`Video berhasil dirender dan disimpan.`})}}else throw Error(pe.error||`Download failed`)}catch(e){console.error(` Error rendering video:`,e),y(``),t({type:`error`,title:`Render Video Gagal`,message:e.message||`Terjadi kesalahan saat merender video.`,action:{label:`Coba Lagi`,onClick:()=>window.location.reload()}}),_(``)}finally{h(!1),y(``)}},disabled:(()=>{let e=!_e||m;return console.log(` Download Video button state:`,{videosLength:i?.length||0,hasValidVideo:_e,isSaving:m,isDisabled:e}),e})(),style:{padding:`0.6rem 1.2rem`,background:!_e||m?`#D1D5DB`:`#C4A484`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`0.9rem`,cursor:!_e||m?`not-allowed`:`pointer`,fontWeight:`600`,opacity:!_e||m?.7:1,boxShadow:!_e||m?`none`:`0 2px 8px rgba(196, 164, 132, 0.3)`,transition:`all 0.2s ease`},onMouseEnter:e=>{_e&&!m&&(e.target.style.background=`#B09474`,e.target.style.transform=`translateY(-2px)`)},onMouseLeave:e=>{_e&&!m&&(e.target.style.background=`#C4A484`,e.target.style.transform=`translateY(0)`)},children:m?` Processing...`:`Download Video`})]}),(0,G.jsx)(`div`,{style:{display:`flex`,gap:`0.75rem`,width:`100%`,maxWidth:`400px`,marginTop:`1rem`,justifyContent:`center`},children:(0,G.jsx)(`button`,{onClick:()=>{window.confirm(`Kembali ke halaman utama? Cache frame akan dibersihkan.`)&&(rA(),e(`/`))},style:{padding:`0.75rem 1.5rem`,background:`transparent`,color:`#E8A889`,border:`2px solid #E8A889`,borderRadius:`12px`,fontSize:`1rem`,cursor:`pointer`,fontWeight:`600`,transition:`all 0.2s ease`},onMouseEnter:e=>{e.target.style.background=`#E8A889`,e.target.style.color=`white`,e.target.style.transform=`translateY(-2px)`},onMouseLeave:e=>{e.target.style.background=`transparent`,e.target.style.color=`#E8A889`,e.target.style.transform=`translateY(0)`},children:` Back to Home`})})]}),F&&(0,G.jsx)(`div`,{style:{position:`fixed`,top:0,left:0,right:0,bottom:0,background:`rgba(0, 0, 0, 0.7)`,display:`flex`,alignItems:`center`,justifyContent:`center`,zIndex:1e4,padding:`20px`},onClick:()=>I(!1),children:(0,G.jsxs)(`div`,{style:{background:`white`,borderRadius:`16px`,padding:`24px`,maxWidth:`400px`,width:`100%`,boxShadow:`0 8px 32px rgba(0, 0, 0, 0.2)`},onClick:e=>e.stopPropagation(),children:[(0,G.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:`20px`},children:[(0,G.jsx)(`div`,{style:{width:`60px`,height:`60px`,margin:`0 auto 12px`,background:`linear-gradient(135deg, #E8A889 0%, #C4A484 100%)`,borderRadius:`50%`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`28px`},children:L===`photo`?``:``}),(0,G.jsxs)(`h3`,{style:{fontSize:`20px`,fontWeight:`700`,color:`#1F2937`,margin:`0 0 8px 0`},children:[`Download `,L===`photo`?`Foto`:`Video`,` Berhasil!`]}),(0,G.jsx)(`p`,{style:{fontSize:`14px`,color:`#6B7280`,margin:0},children:`Ikuti langkah berikut untuk menyimpan ke Galeri`})]}),(0,G.jsxs)(`div`,{style:{background:`#F9FAFB`,borderRadius:`12px`,padding:`16px`,marginBottom:`20px`},children:[(0,G.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`flex-start`,gap:`12px`,marginBottom:`12px`},children:[(0,G.jsx)(`div`,{style:{width:`24px`,height:`24px`,background:`#E8A889`,color:`white`,borderRadius:`50%`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`12px`,fontWeight:`700`,flexShrink:0},children:`1`}),(0,G.jsxs)(`p`,{style:{margin:0,fontSize:`14px`,color:`#374151`,lineHeight:`1.5`},children:[(0,G.jsx)(`strong`,{children:`Cek Notifikasi Download`}),(0,G.jsx)(`br`,{}),`Geser dari atas layar untuk melihat progress download`]})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`flex-start`,gap:`12px`,marginBottom:`12px`},children:[(0,G.jsx)(`div`,{style:{width:`24px`,height:`24px`,background:`#E8A889`,color:`white`,borderRadius:`50%`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`12px`,fontWeight:`700`,flexShrink:0},children:`2`}),(0,G.jsxs)(`p`,{style:{margin:0,fontSize:`14px`,color:`#374151`,lineHeight:`1.5`},children:[(0,G.jsx)(`strong`,{children:`Buka File Manager/Galeri`}),(0,G.jsx)(`br`,{}),`Cari di folder `,(0,G.jsx)(`code`,{style:{background:`#E5E7EB`,padding:`2px 6px`,borderRadius:`4px`},children:`Downloads`}),` atau `,(0,G.jsx)(`code`,{style:{background:`#E5E7EB`,padding:`2px 6px`,borderRadius:`4px`},children:`DCIM`})]})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`flex-start`,gap:`12px`},children:[(0,G.jsx)(`div`,{style:{width:`24px`,height:`24px`,background:`#E8A889`,color:`white`,borderRadius:`50%`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`12px`,fontWeight:`700`,flexShrink:0},children:`3`}),(0,G.jsxs)(`p`,{style:{margin:0,fontSize:`14px`,color:`#374151`,lineHeight:`1.5`},children:[(0,G.jsx)(`strong`,{children:`Simpan ke Galeri`}),(0,G.jsx)(`br`,{}),`Tap file  Pilih "Simpan ke Galeri" atau "Move to Photos"`]})]})]}),(0,G.jsx)(`div`,{style:{background:`white`,borderLeft:`3px solid #E8A889`,padding:`12px`,borderRadius:`6px`,marginTop:`12px`},children:(0,G.jsxs)(`p`,{style:{margin:0,fontSize:`13px`,color:`#6B7280`,lineHeight:`1.5`},children:[` `,(0,G.jsx)(`strong`,{children:`Tips:`}),` Jika tidak muncul di Galeri, coba restart aplikasi Galeri atau File Manager kamu.`]})})]}),(0,G.jsx)(`div`,{style:{display:`flex`,gap:`10px`},children:(0,G.jsx)(`button`,{onClick:()=>I(!1),style:{flex:1,padding:`12px 24px`,background:`linear-gradient(135deg, #E8A889 0%, #C4A484 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`15px`,fontWeight:`600`,cursor:`pointer`,boxShadow:`0 4px 12px rgba(232, 168, 137, 0.3)`},children:`Mengerti`})})]})})]})}var BN=u(s(((exports,t)=>{(function(n,r){typeof exports==`object`&&typeof t==`object`?t.exports=r():typeof define==`function`&&define.amd?define([],r):typeof exports==`object`?exports.jsQR=r():n.jsQR=r()})(typeof self<`u`?self:exports,function(){return(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,`a`,t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=``,n(n.s=3)})([(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0}),t.BitMatrix=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,n){return new e(new Uint8ClampedArray(t*n),t)},e.prototype.get=function(e,t){return e<0||e>=this.width||t<0||t>=this.height?!1:!!this.data[t*this.width+e]},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n?1:0},e.prototype.setRegion=function(e,t,n,r,i){for(var a=t;a<t+r;a++)for(var o=e;o<e+n;o++)this.set(o,a,!!i)},e}()}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=n(2);function i(e,t){return e^t}t.addOrSubtractGF=i,t.default=function(){function e(e,t,n){this.primitive=e,this.size=t,this.generatorBase=n,this.expTable=Array(this.size),this.logTable=Array(this.size);for(var i=1,a=0;a<this.size;a++)this.expTable[a]=i,i*=2,i>=this.size&&(i=(i^this.primitive)&this.size-1);for(var a=0;a<this.size-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new r.default(this,Uint8ClampedArray.from([0])),this.one=new r.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(e===0)throw Error(`Can't invert 0`);return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw Error(`Invalid monomial degree less than 0`);if(t===0)return this.zero;var n=new Uint8ClampedArray(e+1);return n[0]=t,new r.default(this,n)},e.prototype.log=function(e){if(e===0)throw Error(`Can't take log(0)`);return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}()}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=n(1);t.default=function(){function e(e,t){if(t.length===0)throw Error(`No coefficients.`);this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var r=1;r<n&&t[r]===0;)r++;if(r===n)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(n-r);for(var i=0;i<this.coefficients.length;i++)this.coefficients[i]=t[r+i]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return this.coefficients[0]===0},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var n;if(this.isZero())return t;if(t.isZero())return this;var i=this.coefficients,a=t.coefficients;i.length>a.length&&(n=[a,i],i=n[0],a=n[1]);for(var o=new Uint8ClampedArray(a.length),s=a.length-i.length,c=0;c<s;c++)o[c]=a[c];for(var c=s;c<a.length;c++)o[c]=r.addOrSubtractGF(i[c-s],a[c]);return new e(this.field,o)},e.prototype.multiply=function(t){if(t===0)return this.field.zero;if(t===1)return this;for(var n=this.coefficients.length,r=new Uint8ClampedArray(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new e(this.field,r)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var n=this.coefficients,i=n.length,a=t.coefficients,o=a.length,s=new Uint8ClampedArray(i+o-1),c=0;c<i;c++)for(var l=n[c],u=0;u<o;u++)s[c+u]=r.addOrSubtractGF(s[c+u],this.field.multiply(l,a[u]));return new e(this.field,s)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw Error(`Invalid degree less than 0`);if(n===0)return this.field.zero;for(var r=this.coefficients.length,i=new Uint8ClampedArray(r+t),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],n);return new e(this.field,i)},e.prototype.evaluateAt=function(e){var t=0;if(e===0)return this.getCoefficient(0);var n=this.coefficients.length;if(e===1)return this.coefficients.forEach(function(e){t=r.addOrSubtractGF(t,e)}),t;t=this.coefficients[0];for(var i=1;i<n;i++)t=r.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[i]);return t},e}()}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=n(4),i=n(5),a=n(11),o=n(12);function s(e){var t=o.locate(e);if(!t)return null;for(var n=0,r=t;n<r.length;n++){var s=r[n],c=a.extract(e,s),l=i.decode(c.matrix);if(l)return{binaryData:l.bytes,data:l.text,chunks:l.chunks,version:l.version,location:{topRightCorner:c.mappingFunction(s.dimension,0),topLeftCorner:c.mappingFunction(0,0),bottomRightCorner:c.mappingFunction(s.dimension,s.dimension),bottomLeftCorner:c.mappingFunction(0,s.dimension),topRightFinderPattern:s.topRight,topLeftFinderPattern:s.topLeft,bottomLeftFinderPattern:s.bottomLeft,bottomRightAlignmentPattern:s.alignmentPattern}}}return null}var c={inversionAttempts:`attemptBoth`};function l(e,t,n,i){i===void 0&&(i={});var a=c;Object.keys(a||{}).forEach(function(e){a[e]=i[e]||a[e]});var o=a.inversionAttempts===`attemptBoth`||a.inversionAttempts===`invertFirst`,l=a.inversionAttempts===`onlyInvert`||a.inversionAttempts===`invertFirst`,u=r.binarize(e,t,n,o),d=u.binarized,f=u.inverted,p=s(l?f:d);return!p&&(a.inversionAttempts===`attemptBoth`||a.inversionAttempts===`invertFirst`)&&(p=s(l?d:f)),p}l.default=l,t.default=l}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=n(0),i=8,a=24;function o(e,t,n){return e<t?t:e>n?n:e}var s=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n},e}();function c(e,t,n,c){if(e.length!==t*n*4)throw Error(`Malformed data passed to binarizer.`);for(var l=new s(t,n),u=0;u<t;u++)for(var d=0;d<n;d++){var f=e[(d*t+u)*4+0],p=e[(d*t+u)*4+1],m=e[(d*t+u)*4+2];l.set(u,d,.2126*f+.7152*p+.0722*m)}for(var h=Math.ceil(t/i),g=Math.ceil(n/i),_=new s(h,g),v=0;v<g;v++)for(var y=0;y<h;y++){for(var b=0,x=1/0,S=0,d=0;d<i;d++)for(var u=0;u<i;u++){var C=l.get(y*i+u,v*i+d);b+=C,x=Math.min(x,C),S=Math.max(S,C)}var w=b/i**2;if(S-x<=a&&(w=x/2,v>0&&y>0)){var T=(_.get(y,v-1)+2*_.get(y-1,v)+_.get(y-1,v-1))/4;x<T&&(w=T)}_.set(y,v,w)}var E=r.BitMatrix.createEmpty(t,n),D=null;c&&(D=r.BitMatrix.createEmpty(t,n));for(var v=0;v<g;v++)for(var y=0;y<h;y++){for(var O=o(y,2,h-3),k=o(v,2,g-3),b=0,A=-2;A<=2;A++)for(var j=-2;j<=2;j++)b+=_.get(O+A,k+j);for(var M=b/25,A=0;A<i;A++)for(var j=0;j<i;j++){var u=y*i+A,d=v*i+j,N=l.get(u,d);E.set(u,d,N<=M),c&&D.set(u,d,!(N<=M))}}return c?{binarized:E,inverted:D}:{binarized:E}}t.binarize=c}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=n(0),i=n(6),a=n(9),o=n(10);function s(e,t){for(var n=e^t,r=0;n;)r++,n&=n-1;return r}function c(e,t){return t<<1|e}var l=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],u=[function(e){return(e.y+e.x)%2==0},function(e){return e.y%2==0},function(e){return e.x%3==0},function(e){return(e.y+e.x)%3==0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2==0},function(e){return e.x*e.y%2+e.x*e.y%3==0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2==0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2==0}];function d(e){var t=17+4*e.versionNumber,n=r.BitMatrix.createEmpty(t,t);n.setRegion(0,0,9,9,!0),n.setRegion(t-8,0,8,9,!0),n.setRegion(0,t-8,9,8,!0);for(var i=0,a=e.alignmentPatternCenters;i<a.length;i++)for(var o=a[i],s=0,c=e.alignmentPatternCenters;s<c.length;s++){var l=c[s];o===6&&l===6||o===6&&l===t-7||o===t-7&&l===6||n.setRegion(o-2,l-2,5,5,!0)}return n.setRegion(6,9,1,t-17,!0),n.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(n.setRegion(t-11,0,3,6,!0),n.setRegion(0,t-11,6,3,!0)),n}function f(e,t,n){for(var r=u[n.dataMask],i=e.height,a=d(t),o=[],s=0,l=0,f=!0,p=i-1;p>0;p-=2){p===6&&p--;for(var m=0;m<i;m++)for(var h=f?i-1-m:m,g=0;g<2;g++){var _=p-g;if(!a.get(_,h)){l++;var v=e.get(_,h);r({y:h,x:_})&&(v=!v),s=c(v,s),l===8&&(o.push(s),l=0,s=0)}}f=!f}return o}function p(e){var t=e.height,n=Math.floor((t-17)/4);if(n<=6)return o.VERSIONS[n-1];for(var r=0,i=5;i>=0;i--)for(var a=t-9;a>=t-11;a--)r=c(e.get(a,i),r);for(var l=0,a=5;a>=0;a--)for(var i=t-9;i>=t-11;i--)l=c(e.get(a,i),l);for(var u=1/0,d,f=0,p=o.VERSIONS;f<p.length;f++){var m=p[f];if(m.infoBits===r||m.infoBits===l)return m;var h=s(r,m.infoBits);h<u&&(d=m,u=h),h=s(l,m.infoBits),h<u&&(d=m,u=h)}if(u<=3)return d}function m(e){for(var t=0,n=0;n<=8;n++)n!==6&&(t=c(e.get(n,8),t));for(var r=7;r>=0;r--)r!==6&&(t=c(e.get(8,r),t));for(var i=e.height,a=0,r=i-1;r>=i-7;r--)a=c(e.get(8,r),a);for(var n=i-8;n<i;n++)a=c(e.get(n,8),a);for(var o=1/0,u=null,d=0,f=l;d<f.length;d++){var p=f[d],m=p.bits,h=p.formatInfo;if(m===t||m===a)return h;var g=s(t,m);g<o&&(u=h,o=g),t!==a&&(g=s(a,m),g<o&&(u=h,o=g))}return o<=3?u:null}function h(e,t,n){var r=t.errorCorrectionLevels[n],i=[],a=0;if(r.ecBlocks.forEach(function(e){for(var t=0;t<e.numBlocks;t++)i.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),a+=e.dataCodewordsPerBlock+r.ecCodewordsPerBlock}),e.length<a)return null;e=e.slice(0,a);for(var o=r.ecBlocks[0].dataCodewordsPerBlock,s=0;s<o;s++)for(var c=0,l=i;c<l.length;c++){var u=l[c];u.codewords.push(e.shift())}if(r.ecBlocks.length>1)for(var d=r.ecBlocks[0].numBlocks,f=r.ecBlocks[1].numBlocks,s=0;s<f;s++)i[d+s].codewords.push(e.shift());for(;e.length>0;)for(var p=0,m=i;p<m.length;p++){var u=m[p];u.codewords.push(e.shift())}return i}function g(e){var t=p(e);if(!t)return null;var n=m(e);if(!n)return null;var r=f(e,t,n),o=h(r,t,n.errorCorrectionLevel);if(!o)return null;for(var s=o.reduce(function(e,t){return e+t.numDataCodewords},0),c=new Uint8ClampedArray(s),l=0,u=0,d=o;u<d.length;u++){var g=d[u],_=a.decode(g.codewords,g.codewords.length-g.numDataCodewords);if(!_)return null;for(var v=0;v<g.numDataCodewords;v++)c[l++]=_[v]}try{return i.decode(c,t.versionNumber)}catch{return null}}function _(e){if(e==null)return null;var t=g(e);if(t)return t;for(var n=0;n<e.width;n++)for(var r=n+1;r<e.height;r++)e.get(n,r)!==e.get(r,n)&&(e.set(n,r,!e.get(n,r)),e.set(r,n,!e.get(r,n)));return g(e)}t.decode=_}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=n(7),i=n(8),a;(function(e){e.Numeric=`numeric`,e.Alphanumeric=`alphanumeric`,e.Byte=`byte`,e.Kanji=`kanji`,e.ECI=`eci`})(a=t.Mode||={});var o;(function(e){e[e.Terminator=0]=`Terminator`,e[e.Numeric=1]=`Numeric`,e[e.Alphanumeric=2]=`Alphanumeric`,e[e.Byte=4]=`Byte`,e[e.Kanji=8]=`Kanji`,e[e.ECI=7]=`ECI`})(o||={});function s(e,t){for(var n=[],r=``,i=[10,12,14][t],a=e.readBits(i);a>=3;){var o=e.readBits(10);if(o>=1e3)throw Error(`Invalid numeric value above 999`);var s=Math.floor(o/100),c=Math.floor(o/10)%10,l=o%10;n.push(48+s,48+c,48+l),r+=s.toString()+c.toString()+l.toString(),a-=3}if(a===2){var o=e.readBits(7);if(o>=100)throw Error(`Invalid numeric value above 99`);var s=Math.floor(o/10),c=o%10;n.push(48+s,48+c),r+=s.toString()+c.toString()}else if(a===1){var o=e.readBits(4);if(o>=10)throw Error(`Invalid numeric value above 9`);n.push(48+o),r+=o.toString()}return{bytes:n,text:r}}var c=`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:`.split(``);function l(e,t){for(var n=[],r=``,i=[9,11,13][t],a=e.readBits(i);a>=2;){var o=e.readBits(11),s=Math.floor(o/45),l=o%45;n.push(c[s].charCodeAt(0),c[l].charCodeAt(0)),r+=c[s]+c[l],a-=2}if(a===1){var s=e.readBits(6);n.push(c[s].charCodeAt(0)),r+=c[s]}return{bytes:n,text:r}}function u(e,t){for(var n=[],r=``,i=[8,16,16][t],a=e.readBits(i),o=0;o<a;o++){var s=e.readBits(8);n.push(s)}try{r+=decodeURIComponent(n.map(function(e){return`%`+(`0`+e.toString(16)).substr(-2)}).join(``))}catch{}return{bytes:n,text:r}}function d(e,t){for(var n=[],r=``,a=[8,10,12][t],o=e.readBits(a),s=0;s<o;s++){var c=e.readBits(13),l=Math.floor(c/192)<<8|c%192;l<7936?l+=33088:l+=49472,n.push(l>>8,l&255),r+=String.fromCharCode(i.shiftJISTable[l])}return{bytes:n,text:r}}function f(e,t){for(var n,i,c,f,p=new r.BitStream(e),m=t<=9?0:t<=26?1:2,h={text:``,bytes:[],chunks:[],version:t};p.available()>=4;){var g=p.readBits(4);if(g===o.Terminator)return h;if(g===o.ECI)p.readBits(1)===0?h.chunks.push({type:a.ECI,assignmentNumber:p.readBits(7)}):p.readBits(1)===0?h.chunks.push({type:a.ECI,assignmentNumber:p.readBits(14)}):p.readBits(1)===0?h.chunks.push({type:a.ECI,assignmentNumber:p.readBits(21)}):h.chunks.push({type:a.ECI,assignmentNumber:-1});else if(g===o.Numeric){var _=s(p,m);h.text+=_.text,(n=h.bytes).push.apply(n,_.bytes),h.chunks.push({type:a.Numeric,text:_.text})}else if(g===o.Alphanumeric){var v=l(p,m);h.text+=v.text,(i=h.bytes).push.apply(i,v.bytes),h.chunks.push({type:a.Alphanumeric,text:v.text})}else if(g===o.Byte){var y=u(p,m);h.text+=y.text,(c=h.bytes).push.apply(c,y.bytes),h.chunks.push({type:a.Byte,bytes:y.bytes,text:y.text})}else if(g===o.Kanji){var b=d(p,m);h.text+=b.text,(f=h.bytes).push.apply(f,b.bytes),h.chunks.push({type:a.Kanji,bytes:b.bytes,text:b.text})}}if(p.available()===0||p.readBits(p.available())===0)return h}t.decode=f}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0}),t.BitStream=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw Error(`Cannot read `+e.toString()+` bits`);var t=0;if(this.bitOffset>0){var n=8-this.bitOffset,r=e<n?e:n,i=n-r,a=255>>8-r<<i;t=(this.bytes[this.byteOffset]&a)>>i,e-=r,this.bitOffset+=r,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,e-=8;if(e>0){var i=8-e,a=255>>i<<i;t=t<<e|(this.bytes[this.byteOffset]&a)>>i,this.bitOffset+=e}}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}()}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=n(1),i=n(2);function a(e,t,n,r){var i;t.degree()<n.degree()&&(i=[n,t],t=i[0],n=i[1]);for(var a=t,o=n,s=e.zero,c=e.one;o.degree()>=r/2;){var l=a,u=s;if(a=o,s=c,a.isZero())return null;o=l;for(var d=e.zero,f=a.getCoefficient(a.degree()),p=e.inverse(f);o.degree()>=a.degree()&&!o.isZero();){var m=o.degree()-a.degree(),h=e.multiply(o.getCoefficient(o.degree()),p);d=d.addOrSubtract(e.buildMonomial(m,h)),o=o.addOrSubtract(a.multiplyByMonomial(m,h))}if(c=d.multiplyPoly(s).addOrSubtract(u),o.degree()>=a.degree())return null}var g=c.getCoefficient(0);if(g===0)return null;var _=e.inverse(g);return[c.multiply(_),o.multiply(_)]}function o(e,t){var n=t.degree();if(n===1)return[t.getCoefficient(1)];for(var r=Array(n),i=0,a=1;a<e.size&&i<n;a++)t.evaluateAt(a)===0&&(r[i]=e.inverse(a),i++);return i===n?r:null}function s(e,t,n){for(var i=n.length,a=Array(i),o=0;o<i;o++){for(var s=e.inverse(n[o]),c=1,l=0;l<i;l++)o!==l&&(c=e.multiply(c,r.addOrSubtractGF(1,e.multiply(n[l],s))));a[o]=e.multiply(t.evaluateAt(s),e.inverse(c)),e.generatorBase!==0&&(a[o]=e.multiply(a[o],s))}return a}function c(e,t){var n=new Uint8ClampedArray(e.length);n.set(e);for(var c=new r.default(285,256,0),l=new i.default(c,n),u=new Uint8ClampedArray(t),d=!1,f=0;f<t;f++){var p=l.evaluateAt(c.exp(f+c.generatorBase));u[u.length-1-f]=p,p!==0&&(d=!0)}if(!d)return n;var m=new i.default(c,u),h=a(c,c.buildMonomial(t,1),m,t);if(h===null)return null;var g=o(c,h[0]);if(g==null)return null;for(var _=s(c,h[1],g),v=0;v<g.length;v++){var y=n.length-1-c.log(g[v]);if(y<0)return null;n[y]=r.addOrSubtractGF(n[y],_[v])}return n}t.decode=c}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=n(0);function i(e,t,n,r){var i=e.x-t.x+n.x-r.x,a=e.y-t.y+n.y-r.y;if(i===0&&a===0)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:n.x-t.x,a22:n.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var o=t.x-n.x,s=r.x-n.x,c=t.y-n.y,l=r.y-n.y,u=o*l-s*c,d=(i*l-s*a)/u,f=(o*a-i*c)/u;return{a11:t.x-e.x+d*t.x,a12:t.y-e.y+d*t.y,a13:d,a21:r.x-e.x+f*r.x,a22:r.y-e.y+f*r.y,a23:f,a31:e.x,a32:e.y,a33:1}}function a(e,t,n,r){var a=i(e,t,n,r);return{a11:a.a22*a.a33-a.a23*a.a32,a12:a.a13*a.a32-a.a12*a.a33,a13:a.a12*a.a23-a.a13*a.a22,a21:a.a23*a.a31-a.a21*a.a33,a22:a.a11*a.a33-a.a13*a.a31,a23:a.a13*a.a21-a.a11*a.a23,a31:a.a21*a.a32-a.a22*a.a31,a32:a.a12*a.a31-a.a11*a.a32,a33:a.a11*a.a22-a.a12*a.a21}}function o(e,t){return{a11:e.a11*t.a11+e.a21*t.a12+e.a31*t.a13,a12:e.a12*t.a11+e.a22*t.a12+e.a32*t.a13,a13:e.a13*t.a11+e.a23*t.a12+e.a33*t.a13,a21:e.a11*t.a21+e.a21*t.a22+e.a31*t.a23,a22:e.a12*t.a21+e.a22*t.a22+e.a32*t.a23,a23:e.a13*t.a21+e.a23*t.a22+e.a33*t.a23,a31:e.a11*t.a31+e.a21*t.a32+e.a31*t.a33,a32:e.a12*t.a31+e.a22*t.a32+e.a32*t.a33,a33:e.a13*t.a31+e.a23*t.a32+e.a33*t.a33}}function s(e,t){for(var n=a({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),s=i(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),c=o(s,n),l=r.BitMatrix.createEmpty(t.dimension,t.dimension),u=function(e,t){var n=c.a13*e+c.a23*t+c.a33;return{x:(c.a11*e+c.a21*t+c.a31)/n,y:(c.a12*e+c.a22*t+c.a32)/n}},d=0;d<t.dimension;d++)for(var f=0;f<t.dimension;f++){var p=f+.5,m=d+.5,h=u(p,m);l.set(f,d,e.get(Math.floor(h.x),Math.floor(h.y)))}return{matrix:l,mappingFunction:u}}t.extract=s}),(function(e,t,n){Object.defineProperty(t,`__esModule`,{value:!0});var r=4,i=.5,a=1.5,o=function(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)};function s(e){return e.reduce(function(e,t){return e+t})}function c(e,t,n){var r,i,a,s,c=o(e,t),l=o(t,n),u=o(e,n),d,f,p;return l>=c&&l>=u?(r=[t,e,n],d=r[0],f=r[1],p=r[2]):u>=l&&u>=c?(i=[e,t,n],d=i[0],f=i[1],p=i[2]):(a=[e,n,t],d=a[0],f=a[1],p=a[2]),(p.x-f.x)*(d.y-f.y)-(p.y-f.y)*(d.x-f.x)<0&&(s=[p,d],d=s[0],p=s[1]),{bottomLeft:d,topLeft:f,topRight:p}}function l(e,t,n,r){var i=(s(d(e,n,r,5))/7+s(d(e,t,r,5))/7+s(d(n,e,r,5))/7+s(d(t,e,r,5))/7)/4;if(i<1)throw Error(`Invalid module size`);var a=Math.round(o(e,t)/i),c=Math.round(o(e,n)/i),l=Math.floor((a+c)/2)+7;switch(l%4){case 0:l++;break;case 2:l--;break}return{dimension:l,moduleSize:i}}function u(e,t,n,r){var i=[{x:Math.floor(e.x),y:Math.floor(e.y)}],a=Math.abs(t.y-e.y)>Math.abs(t.x-e.x),s,c,l,u;a?(s=Math.floor(e.y),c=Math.floor(e.x),l=Math.floor(t.y),u=Math.floor(t.x)):(s=Math.floor(e.x),c=Math.floor(e.y),l=Math.floor(t.x),u=Math.floor(t.y));for(var d=Math.abs(l-s),f=Math.abs(u-c),p=Math.floor(-d/2),m=s<l?1:-1,h=c<u?1:-1,g=!0,_=s,v=c;_!==l+m;_+=m){var y=a?v:_,b=a?_:v;if(n.get(y,b)!==g&&(g=!g,i.push({x:y,y:b}),i.length===r+1))break;if(p+=f,p>0){if(v===u)break;v+=h,p-=d}}for(var x=[],S=0;S<r;S++)i[S]&&i[S+1]?x.push(o(i[S],i[S+1])):x.push(0);return x}function d(e,t,n,r){var i,a=t.y-e.y,o=t.x-e.x,s=u(e,t,n,Math.ceil(r/2)),c=u(e,{x:e.x-o,y:e.y-a},n,Math.ceil(r/2)),l=s.shift()+c.shift()-1;return(i=c.concat(l)).concat.apply(i,s)}function f(e,t){var n=s(e)/s(t),r=0;return t.forEach(function(t,i){r+=(e[i]-t*n)**2}),{averageSize:n,error:r}}function p(e,t,n){try{var r=d(e,{x:-1,y:e.y},n,t.length),i=d(e,{x:e.x,y:-1},n,t.length),a={x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},o=d(e,a,n,t.length),s={x:Math.min(n.width,e.x+e.y)+1,y:Math.min(n.height,e.y+e.x)+1},c=d(e,s,n,t.length),l=f(r,t),u=f(i,t),p=f(o,t),m=f(c,t),h=Math.sqrt(l.error*l.error+u.error*u.error+p.error*p.error+m.error*m.error),g=(l.averageSize+u.averageSize+p.averageSize+m.averageSize)/4,_=((l.averageSize-g)**2+(u.averageSize-g)**2+(p.averageSize-g)**2+(m.averageSize-g)**2)/g;return h+_}catch{return 1/0}}function m(e,t){for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n--;for(var r=Math.round(t.x);e.get(r,Math.round(t.y));)r++;for(var i=(n+r)/2,a=Math.round(t.y);e.get(Math.round(i),a);)a--;for(var o=Math.round(t.y);e.get(Math.round(i),o);)o++;var s=(a+o)/2;return{x:i,y:s}}function h(e){for(var t=[],n=[],o=[],l=[],u=function(r){for(var c=0,u=!1,d=[0,0,0,0,0],f=function(t){var o=e.get(t,r);if(o===u)c++;else{d=[d[1],d[2],d[3],d[4],c],c=1,u=o;var f=s(d)/7,p=Math.abs(d[0]-f)<f&&Math.abs(d[1]-f)<f&&Math.abs(d[2]-3*f)<3*f&&Math.abs(d[3]-f)<f&&Math.abs(d[4]-f)<f&&!o,m=s(d.slice(-3))/3,h=Math.abs(d[2]-m)<m&&Math.abs(d[3]-m)<m&&Math.abs(d[4]-m)<m&&o;if(p){var g=t-d[3]-d[4],_=g-d[2],v={startX:_,endX:g,y:r},y=n.filter(function(e){return _>=e.bottom.startX&&_<=e.bottom.endX||g>=e.bottom.startX&&_<=e.bottom.endX||_<=e.bottom.startX&&g>=e.bottom.endX&&d[2]/(e.bottom.endX-e.bottom.startX)<a&&d[2]/(e.bottom.endX-e.bottom.startX)>i});y.length>0?y[0].bottom=v:n.push({top:v,bottom:v})}if(h){var b=t-d[4],x=b-d[3],v={startX:x,y:r,endX:b},y=l.filter(function(e){return x>=e.bottom.startX&&x<=e.bottom.endX||b>=e.bottom.startX&&x<=e.bottom.endX||x<=e.bottom.startX&&b>=e.bottom.endX&&d[2]/(e.bottom.endX-e.bottom.startX)<a&&d[2]/(e.bottom.endX-e.bottom.startX)>i});y.length>0?y[0].bottom=v:l.push({top:v,bottom:v})}}},p=-1;p<=e.width;p++)f(p);t.push.apply(t,n.filter(function(e){return e.bottom.y!==r&&e.bottom.y-e.top.y>=2})),n=n.filter(function(e){return e.bottom.y===r}),o.push.apply(o,l.filter(function(e){return e.bottom.y!==r})),l=l.filter(function(e){return e.bottom.y===r})},d=0;d<=e.height;d++)u(d);t.push.apply(t,n.filter(function(e){return e.bottom.y-e.top.y>=2})),o.push.apply(o,l);var f=t.filter(function(e){return e.bottom.y-e.top.y>=2}).map(function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,r=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(n),Math.round(r))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],a=s(i)/i.length;return{score:p({x:Math.round(n),y:Math.round(r)},[1,1,3,1,1],e),x:n,y:r,size:a}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score}).map(function(e,t,n){if(t>r)return null;var i=n.filter(function(e,n){return t!==n}).map(function(t){return{x:t.x,y:t.y,score:t.score+(t.size-e.size)**2/e.size,size:t.size}}).sort(function(e,t){return e.score-t.score});if(i.length<2)return null;var a=e.score+i[0].score+i[1].score;return{points:[e].concat(i.slice(0,2)),score:a}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});if(f.length===0)return null;var h=c(f[0].points[0],f[0].points[1],f[0].points[2]),_=h.topRight,v=h.topLeft,y=h.bottomLeft,b=g(e,o,_,v,y),x=[];b&&x.push({alignmentPattern:{x:b.alignmentPattern.x,y:b.alignmentPattern.y},bottomLeft:{x:y.x,y:y.y},dimension:b.dimension,topLeft:{x:v.x,y:v.y},topRight:{x:_.x,y:_.y}});var S=m(e,_),C=m(e,v),w=m(e,y),T=g(e,o,S,C,w);return T&&x.push({alignmentPattern:{x:T.alignmentPattern.x,y:T.alignmentPattern.y},bottomLeft:{x:w.x,y:w.y},topLeft:{x:C.x,y:C.y},topRight:{x:S.x,y:S.y},dimension:T.dimension}),x.length===0?null:x}t.locate=h;function g(e,t,n,r,i){var a,c,u;try{a=l(r,n,i,e),c=a.dimension,u=a.moduleSize}catch{return null}var d={x:n.x-r.x+i.x,y:n.y-r.y+i.y},f=(o(r,i)+o(r,n))/2/u,m=1-3/f,h={x:r.x+m*(d.x-r.x),y:r.y+m*(d.y-r.y)},g=t.map(function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,r=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.floor(n),Math.floor(r))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1];s(i)/i.length;var a=p({x:Math.floor(n),y:Math.floor(r)},[1,1,1],e)+o({x:n,y:r},h);return{x:n,y:r,score:a}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});return{alignmentPattern:f>=15&&g.length?g[0]:h,dimension:c}}})]).default})}))());function VN(){let e=Le(),t=(0,b.useRef)(null),n=(0,b.useRef)(null),[r,i]=(0,b.useState)(!0),[a,o]=(0,b.useState)(null),[s,c]=(0,b.useState)(``),[l]=(0,b.useState)({}.REACT_APP_API_URL||`http://localhost:3001`),[u,d]=(0,b.useState)({total:0,pending:0,printing:0,completed:0}),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(null);(0,b.useEffect)(()=>{g(),S();let e=setInterval(S,5e3);return()=>{clearInterval(e),m&&m.getTracks().forEach(e=>e.stop())}},[]);let g=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:`environment`,width:{ideal:1280},height:{ideal:720}}});h(e),t.current&&(t.current.srcObject=e,t.current.play()),_()}catch(e){console.error(`Camera access error:`,e),c(` Camera access denied`)}},_=()=>{let e=()=>{if(!r||!t.current||!n.current){r&&setTimeout(e,100);return}let i=n.current,o=i.getContext(`2d`),s=t.current;if(s.readyState===s.HAVE_ENOUGH_DATA){i.width=s.videoWidth,i.height=s.videoHeight,o.drawImage(s,0,0,i.width,i.height);let e=o.getImageData(0,0,i.width,i.height);try{let t=v(e);t&&t.startsWith(`FREMIO-`)&&t!==a&&y(t)}catch{}}r&&setTimeout(e,100)};e()},v=e=>{try{let t=(0,BN.default)(e.data,e.width,e.height,{inversionAttempts:`dontInvert`});return t?t.data:null}catch{return null}},y=async e=>{o(e),i(!1),c(` QR Code detected, fetching photo...`);try{console.log(` Detected QR code:`,e);let t=await fetch(`${l}/api/photo/${e}`);if(!t.ok)throw Error(`Photo not found or already printed`);let n=await t.json();c(` Sending to printer...`),await x(n.photoUrl,n.frameType,e),c(` Print job completed!`),await fetch(`${l}/api/print-completed/${e}`,{method:`POST`})}catch(e){console.error(`Print error:`,e),c(` Error: ${e.message}`)}setTimeout(()=>{i(!0),o(null),c(``)},3e3)},x=async(e,t,n)=>(console.log(` Printing:`,{photoUrl:e,frameType:t,code:n}),await new Promise(e=>setTimeout(e,2e3)),!0),S=async()=>{try{let e=await fetch(`${l}/api/health`);if(e.ok){let t=await e.json();d({total:t.queueSize||0,pending:t.queueSize||0,printing:0,completed:0}),p(!0)}else p(!1)}catch(e){console.error(`Failed to fetch stats:`,e),p(!1)}};return(0,G.jsxs)(`div`,{style:{width:`100vw`,height:`100vh`,display:`flex`,flexDirection:`column`,background:`linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)`,color:`white`,fontFamily:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`},children:[(0,G.jsxs)(`header`,{style:{padding:`1.5rem`,background:`rgba(0,0,0,0.2)`,backdropFilter:`blur(10px)`,display:`flex`,justifyContent:`space-between`,alignItems:`center`,flexWrap:`wrap`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{style:{margin:0,fontSize:`2rem`,fontWeight:`700`,background:`linear-gradient(135deg, #fff 0%, #e2e8f0 100%)`,backgroundClip:`text`,WebkitBackgroundClip:`text`,WebkitTextFillColor:`transparent`},children:` Fremio Printer Agent`}),(0,G.jsx)(`p`,{style:{margin:`0.25rem 0 0 0`,opacity:.9,fontSize:`0.9rem`},children:`Scan QR code from photobooth to print photos`})]}),(0,G.jsx)(`button`,{onClick:()=>e(`/`),style:{background:`rgba(255,255,255,0.1)`,border:`1px solid rgba(255,255,255,0.2)`,color:`white`,padding:`0.5rem 1rem`,borderRadius:`8px`,cursor:`pointer`,fontSize:`0.9rem`},children:` Back to Photobooth`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,justifyContent:`center`,gap:`1rem`,padding:`1rem`,flexWrap:`wrap`},children:[(0,G.jsxs)(`div`,{style:{background:`rgba(255,255,255,0.1)`,padding:`0.5rem 1rem`,borderRadius:`12px`,backdropFilter:`blur(10px)`,fontSize:`0.85rem`},children:[` Server: `,f?` Connected`:` Disconnected`]}),(0,G.jsxs)(`div`,{style:{background:`rgba(255,255,255,0.1)`,padding:`0.5rem 1rem`,borderRadius:`12px`,backdropFilter:`blur(10px)`,fontSize:`0.85rem`},children:[` Queue: `,u.total]}),(0,G.jsxs)(`div`,{style:{background:`rgba(255,255,255,0.1)`,padding:`0.5rem 1rem`,borderRadius:`12px`,backdropFilter:`blur(10px)`,fontSize:`0.85rem`},children:[` Printer: `,f?` Ready`:` Offline`]})]}),(0,G.jsx)(`main`,{style:{flex:1,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,padding:`1rem`},children:r?(0,G.jsxs)(`div`,{style:{width:`100%`,maxWidth:`600px`,background:`white`,borderRadius:`20px`,overflow:`hidden`,boxShadow:`0 20px 60px rgba(0,0,0,0.3)`,position:`relative`},children:[(0,G.jsx)(`video`,{ref:t,style:{width:`100%`,height:`400px`,objectFit:`cover`},playsInline:!0,muted:!0}),(0,G.jsx)(`canvas`,{ref:n,style:{display:`none`}}),(0,G.jsx)(`div`,{style:{position:`absolute`,top:0,left:0,right:0,bottom:0,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`rgba(0,0,0,0.3)`},children:(0,G.jsx)(`div`,{style:{width:`250px`,height:`250px`,border:`3px solid white`,borderRadius:`20px`,position:`relative`,background:`rgba(255,255,255,0.1)`},children:[{top:`-3px`,left:`-3px`},{top:`-3px`,right:`-3px`},{bottom:`-3px`,left:`-3px`},{bottom:`-3px`,right:`-3px`}].map((e,t)=>(0,G.jsx)(`div`,{style:{position:`absolute`,width:`20px`,height:`20px`,border:`3px solid #10b981`,borderRadius:`4px`,...e}},t))})}),(0,G.jsx)(`div`,{style:{padding:`1rem`,textAlign:`center`,color:`#666`,fontSize:`0.9rem`},children:`Position QR code within the green frame`})]}):(0,G.jsxs)(`div`,{style:{textAlign:`center`,fontSize:`1.5rem`,padding:`3rem 2rem`,background:`rgba(255,255,255,0.15)`,borderRadius:`20px`,backdropFilter:`blur(20px)`,border:`1px solid rgba(255,255,255,0.2)`,boxShadow:`0 20px 60px rgba(0,0,0,0.3)`,maxWidth:`500px`},children:[(0,G.jsx)(`div`,{style:{marginBottom:`1rem`,fontSize:`3rem`,color:(()=>s.includes(``)?`#ef4444`:s.includes(``)?`#10b981`:s.includes(``)?`#f59e0b`:`#6b7280`)()},children:s.includes(``)?``:s.includes(``)?``:s.includes(``)?``:``}),s,s.includes(`completed`)&&(0,G.jsx)(`div`,{style:{marginTop:`1rem`,fontSize:`1rem`,opacity:.8},children:`Ready for next scan...`})]})}),(0,G.jsxs)(`div`,{style:{padding:`1rem`,display:`flex`,justifyContent:`center`,gap:`1rem`,flexWrap:`wrap`},children:[(0,G.jsx)(`button`,{onClick:()=>{let e=prompt(`Enter QR Code (for testing):`);e&&e.startsWith(`FREMIO-`)&&y(e)},style:{background:`rgba(255,255,255,0.1)`,border:`1px solid rgba(255,255,255,0.2)`,color:`white`,padding:`0.75rem 1.5rem`,borderRadius:`12px`,cursor:`pointer`,fontSize:`0.9rem`,backdropFilter:`blur(10px)`},children:` Manual Input (Test)`}),(0,G.jsx)(`button`,{onClick:S,style:{background:`rgba(255,255,255,0.1)`,border:`1px solid rgba(255,255,255,0.2)`,color:`white`,padding:`0.75rem 1.5rem`,borderRadius:`12px`,cursor:`pointer`,fontSize:`0.9rem`,backdropFilter:`blur(10px)`},children:` Refresh Status`}),(0,G.jsx)(`button`,{onClick:()=>window.location.reload(),style:{background:`#E8A889`,border:`none`,color:`white`,padding:`0.75rem 1.5rem`,borderRadius:`12px`,cursor:`pointer`,fontSize:`0.9rem`},children:` Restart Scanner`})]}),(0,G.jsx)(`footer`,{style:{padding:`1rem`,textAlign:`center`,background:`rgba(0,0,0,0.1)`,fontSize:`0.8rem`,opacity:.8},children:(0,G.jsxs)(`div`,{children:[`Fremio Tablet Printer Agent v1.0.0 | API: `,l]})})]})}console.warn(` frameConfigs.js is DEPRECATED. Use customFrameService.js instead.`),console.warn(` All frames must be uploaded via Admin Panel: /admin/upload-frame`);const HN=e=>(console.warn(` getFrameConfig("${e}") deprecated. Frames are now admin-uploaded only.`),null);function UN(){let[e,t]=(0,b.useState)(`Testframe1`),[n,r]=(0,b.useState)(null),i=(e,t)=>{let n=e.slots[t];return n?{left:Math.round(n.left*350),top:Math.round(n.top*525),width:Math.round(n.width*350),height:Math.round(n.height*525),aspectRatio:n.aspectRatio,calculatedRatio:n.width*350/(n.height*525)}:null};return(0,b.useEffect)(()=>{let t=HN(e);t&&r(t)},[e]),(0,G.jsxs)(`div`,{style:{padding:`2rem`,background:`#f5f5f5`,minHeight:`100vh`},children:[(0,G.jsx)(`h1`,{children:`Frame Debug Tool`}),(0,G.jsxs)(`div`,{style:{marginBottom:`2rem`},children:[(0,G.jsx)(`label`,{children:`Select Frame: `}),(0,G.jsxs)(`select`,{value:e,onChange:e=>t(e.target.value),style:{padding:`0.5rem`,fontSize:`1rem`},children:[(0,G.jsx)(`option`,{value:`Testframe1`,children:`Testframe1 (2 slots)`}),(0,G.jsx)(`option`,{value:`Testframe2`,children:`Testframe2 (3 slots)`}),(0,G.jsx)(`option`,{value:`Testframe3`,children:`Testframe3 (4 slots)`})]})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`2rem`},children:[(0,G.jsxs)(`div`,{style:{background:`#fff`,padding:`2rem`,borderRadius:`10px`},children:[(0,G.jsx)(`h3`,{children:`Frame dengan Slot Overlay`}),n&&(0,G.jsxs)(`div`,{style:{position:`relative`,width:`350px`,height:`525px`,margin:`0 auto`,border:`1px solid #ddd`,background:`#e0e0e0`},children:[(0,G.jsx)(`div`,{style:{position:`absolute`,top:0,left:0,width:`100%`,height:`100%`,background:`linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%)`,backgroundSize:`20px 20px`,backgroundPosition:`0 0, 0 10px, 10px -10px, -10px 0px`},children:(0,G.jsxs)(`div`,{style:{position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,fontSize:`14px`,color:`#666`,textAlign:`center`},children:[n.name,(0,G.jsx)(`br`,{}),`Frame Area`,(0,G.jsx)(`br`,{}),`350x525px`]})}),n.slots.map((e,t)=>{let r=i(n,t);return(0,G.jsxs)(`div`,{style:{position:`absolute`,left:`${e.left*100}%`,top:`${e.top*100}%`,width:`${e.width*100}%`,height:`${e.height*100}%`,border:`3px dashed #ff0000`,background:`rgba(255, 0, 0, 0.15)`,zIndex:5,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`14px`,fontWeight:`bold`,color:`#ff0000`,boxSizing:`border-box`},children:[e.id,(0,G.jsx)(`br`,{}),r.width,`x`,r.height,`px`]},e.id)})]})]}),(0,G.jsxs)(`div`,{style:{background:`#fff`,padding:`2rem`,borderRadius:`10px`},children:[(0,G.jsx)(`h3`,{children:`Slot Metadata Debug`}),n&&(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{style:{marginBottom:`1rem`},children:[(0,G.jsx)(`strong`,{children:`Frame:`}),` `,n.name,(0,G.jsx)(`br`,{}),(0,G.jsx)(`strong`,{children:`Max Captures:`}),` `,n.maxCaptures,(0,G.jsx)(`br`,{}),(0,G.jsx)(`strong`,{children:`Layout Ratio:`}),` `,n.layout?.aspectRatio??`9:16`]}),(0,G.jsxs)(`table`,{style:{width:`100%`,borderCollapse:`collapse`,fontSize:`12px`},children:[(0,G.jsx)(`thead`,{children:(0,G.jsxs)(`tr`,{style:{background:`#f0f0f0`},children:[(0,G.jsx)(`th`,{style:{border:`1px solid #ddd`,padding:`8px`},children:`Slot ID`}),(0,G.jsx)(`th`,{style:{border:`1px solid #ddd`,padding:`8px`},children:`Percentage`}),(0,G.jsx)(`th`,{style:{border:`1px solid #ddd`,padding:`8px`},children:`Pixels`}),(0,G.jsx)(`th`,{style:{border:`1px solid #ddd`,padding:`8px`},children:`Aspect Ratio`})]})}),(0,G.jsx)(`tbody`,{children:n.slots.map((e,t)=>{let r=i(n,t);return(0,G.jsxs)(`tr`,{children:[(0,G.jsx)(`td`,{style:{border:`1px solid #ddd`,padding:`8px`},children:e.id}),(0,G.jsxs)(`td`,{style:{border:`1px solid #ddd`,padding:`8px`},children:[`L: `,(e.left*100).toFixed(1),`%`,(0,G.jsx)(`br`,{}),`T: `,(e.top*100).toFixed(1),`%`,(0,G.jsx)(`br`,{}),`W: `,(e.width*100).toFixed(1),`%`,(0,G.jsx)(`br`,{}),`H: `,(e.height*100).toFixed(1),`%`]}),(0,G.jsxs)(`td`,{style:{border:`1px solid #ddd`,padding:`8px`},children:[`L: `,r.left,`px`,(0,G.jsx)(`br`,{}),`T: `,r.top,`px`,(0,G.jsx)(`br`,{}),`W: `,r.width,`px`,(0,G.jsx)(`br`,{}),`H: `,r.height,`px`]}),(0,G.jsxs)(`td`,{style:{border:`1px solid #ddd`,padding:`8px`},children:[`Expected: `,e.aspectRatio,(0,G.jsx)(`br`,{}),`Actual: `,r.calculatedRatio.toFixed(2),(0,G.jsx)(`br`,{}),e.aspectRatio===`4:5`&&Math.abs(r.calculatedRatio-.8)>.01&&(0,G.jsx)(`span`,{style:{color:`red`},children:` Mismatch!`})]})]},e.id)})})]})]})]})]}),(0,G.jsxs)(`div`,{style:{background:`#fff`,padding:`2rem`,borderRadius:`10px`,marginTop:`2rem`},children:[(0,G.jsx)(`h3`,{children:`Instructions`}),(0,G.jsxs)(`ul`,{children:[(0,G.jsxs)(`li`,{children:[(0,G.jsx)(`strong`,{children:`Kotak merah putus-putus`}),` menunjukkan posisi slot foto`]}),(0,G.jsxs)(`li`,{children:[(0,G.jsx)(`strong`,{children:`Ganti frame`}),` dengan dropdown di atas`]}),(0,G.jsxs)(`li`,{children:[(0,G.jsx)(`strong`,{children:`Cek koordinat`}),` di tabel untuk melihat detail posisi`]}),(0,G.jsxs)(`li`,{children:[(0,G.jsx)(`strong`,{children:`Aspect ratio harus 0.80`}),` untuk rasio 4:5`]}),(0,G.jsxs)(`li`,{children:[(0,G.jsx)(`strong`,{children:`Bagian yang keluar frame`}),` akan terpotong saat foto ditempatkan`]})]})]})]})}function WN(){let[e,t]=(0,b.useState)(null),[n,r]=(0,b.useState)([]),[i,a]=(0,b.useState)(null),o=(0,b.useRef)(),s=(0,b.useRef)(),c=e=>{let n=e.target.files[0];if(!n)return;let r=URL.createObjectURL(n);t(r)},l=()=>{s.current?.click()},u=()=>{r([...n,{x:100,y:100,width:200,height:250,shape:`rect`,id:Date.now()}])},d=e=>{r(n.filter((t,n)=>n!==e))},f=(e,t)=>{a({idx:t,offsetX:e.nativeEvent.offsetX-n[t].x,offsetY:e.nativeEvent.offsetY-n[t].y})},p=e=>{if(!i)return;let{idx:t,offsetX:a,offsetY:o}=i,s=[...n];s[t].x=e.nativeEvent.offsetX-a,s[t].y=e.nativeEvent.offsetY-o,r(s)},m=()=>a(null),h=()=>{let e={frame_id:`custom_frame`,canvas_size:{width:1080,height:1920},slots:n.map(({x:e,y:t,width:n,height:r,shape:i,id:a})=>({id:a,shape:i,x:e,y:t,width:n,height:r}))};navigator.clipboard.writeText(JSON.stringify(e,null,2)),alert(` Config berhasil di-copy ke clipboard!`)};return(0,G.jsx)(`div`,{className:`frame-builder-wrapper`,children:(0,G.jsxs)(`div`,{className:`container frame-builder-container`,children:[(0,G.jsx)(`div`,{className:`frame-builder-header`,children:(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`frame-builder-title`,children:`Fremio Creator`}),(0,G.jsx)(`p`,{className:`frame-builder-subtitle`,children:`Susun frame sesuai gayamu`})]})}),(0,G.jsxs)(`div`,{className:`frame-builder-layout`,children:[(0,G.jsx)(`input`,{ref:s,type:`file`,accept:`image/*`,onChange:c,style:{position:`absolute`,left:`-9999px`,opacity:0,pointerEvents:`none`}}),(0,G.jsxs)(`div`,{className:`frame-builder-panel tools-panel`,children:[(0,G.jsx)(`h3`,{className:`panel-title`,children:`Tools`}),(0,G.jsxs)(`div`,{className:`tools-grid`,children:[(0,G.jsxs)(`button`,{className:`tool-button`,onClick:l,children:[(0,G.jsx)(`span`,{className:`tool-icon`,children:``}),(0,G.jsx)(`span`,{className:`tool-label`,children:`Background`})]}),(0,G.jsxs)(`button`,{className:`tool-button`,onClick:u,children:[(0,G.jsx)(`span`,{className:`tool-icon`,children:``}),(0,G.jsx)(`span`,{className:`tool-label`,children:`Area Foto`})]}),(0,G.jsxs)(`button`,{className:`tool-button`,children:[(0,G.jsx)(`span`,{className:`tool-icon`,children:`T`}),(0,G.jsx)(`span`,{className:`tool-label`,children:`Add Text`})]}),(0,G.jsxs)(`button`,{className:`tool-button`,children:[(0,G.jsx)(`span`,{className:`tool-icon`,children:``}),(0,G.jsx)(`span`,{className:`tool-label`,children:`Shape`})]}),(0,G.jsxs)(`button`,{className:`tool-button`,children:[(0,G.jsx)(`span`,{className:`tool-icon`,children:``}),(0,G.jsx)(`span`,{className:`tool-label`,children:`Unggahan`})]}),(0,G.jsxs)(`button`,{className:`tool-button`,onClick:h,children:[(0,G.jsx)(`span`,{className:`tool-icon`,children:``}),(0,G.jsx)(`span`,{className:`tool-label`,children:`Save Template`})]})]})]}),(0,G.jsxs)(`div`,{className:`frame-builder-preview`,children:[(0,G.jsx)(`h3`,{className:`panel-title`,children:`Preview`}),(0,G.jsx)(`div`,{className:`canvas-wrapper`,children:(0,G.jsxs)(`div`,{className:`canvas-container`,onMouseMove:p,onMouseUp:m,children:[(0,G.jsx)(`canvas`,{ref:o,width:540,height:960,className:`canvas-base`}),e&&(0,G.jsx)(`img`,{src:e,alt:`Frame`,className:`canvas-frame-image`}),n.map((e,t)=>(0,G.jsx)(`div`,{className:`canvas-slot`,style:{left:e.x,top:e.y,width:e.width,height:e.height},onMouseDown:e=>f(e,t),children:(0,G.jsx)(`button`,{className:`slot-delete-btn`,onClick:e=>{e.stopPropagation(),d(t)},children:``})},e.id))]})})]}),(0,G.jsxs)(`div`,{className:`frame-builder-panel properties-panel`,children:[(0,G.jsx)(`h3`,{className:`panel-title`,children:`Properties`}),(0,G.jsxs)(`div`,{className:`properties-content`,children:[(0,G.jsx)(`p`,{className:`properties-hint`,children:`Pilih elemen di kanvas untuk mengubah properti di sini.`}),(0,G.jsxs)(`p`,{className:`properties-tip`,children:[(0,G.jsx)(`strong`,{children:`Tip:`}),` klik tombol Background untuk mengganti warna dasar kanvas.`]})]})]})]}),(0,G.jsx)(`div`,{className:`frame-builder-actions`,children:(0,G.jsx)(`button`,{className:`action-button secondary`,onClick:h,children:` Save Template`})})]})})}var GN=350,KN=(e,t)=>typeof e==`number`&&Number.isFinite(e)?`${e}px`:typeof e==`string`&&e.trim().length>0?e:`${t}px`,qN=e=>{switch(e.type){case`shape`:case`photo`:case`upload`:return KN(e.data?.borderRadius,24);case`background-photo`:return KN(e.data?.borderRadius,0);case`text`:return`18px`;default:return`0px`}},JN=6,YN={top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},XN=e=>{let t=Math.max(e,.24),n=Math.min(Math.max(Math.round(16/t),14),28),r=Math.min(Math.max(Math.round(8/t),8),14),i=Math.min(Math.max(Math.round(30/t),28),50),a={display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#ffffff`,border:`${Math.max(1,Math.round(1.5/t))}px solid #f7a998`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.1)`,borderRadius:`50%`,cursor:`pointer`,opacity:1,touchAction:`manipulation`,pointerEvents:`auto`,zIndex:9999,userSelect:`none`,WebkitUserSelect:`none`,WebkitTouchCallout:`none`,transition:`opacity 0.2s ease, transform 0.2s ease`},o={display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#ffffff`,border:`none`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.1)`,borderRadius:`${r}px`,cursor:`pointer`,opacity:1,touchAction:`manipulation`,pointerEvents:`auto`,zIndex:9999,userSelect:`none`,WebkitUserSelect:`none`,WebkitTouchCallout:`none`,transition:`opacity 0.2s ease, transform 0.2s ease`};return{top:{...o,width:`${i}px`,height:`${r}px`,left:`50%`,top:0,transform:`translate(-50%, -50%)`,cursor:`ns-resize`},bottom:{...o,width:`${i}px`,height:`${r}px`,left:`50%`,bottom:0,transform:`translate(-50%, 50%)`,cursor:`ns-resize`},left:{...o,width:`${r}px`,height:`${i}px`,top:`50%`,left:0,transform:`translate(-50%, -50%)`,cursor:`ew-resize`},right:{...o,width:`${r}px`,height:`${i}px`,top:`50%`,right:0,transform:`translate(50%, -50%)`,cursor:`ew-resize`},topLeft:{...a,width:`${n}px`,height:`${n}px`,top:0,left:0,transform:`translate(-50%, -50%)`,cursor:`nwse-resize`},topRight:{...a,width:`${n}px`,height:`${n}px`,top:0,right:0,transform:`translate(50%, -50%)`,cursor:`nesw-resize`},bottomRight:{...a,width:`${n}px`,height:`${n}px`,bottom:0,right:0,transform:`translate(50%, 50%)`,cursor:`nwse-resize`},bottomLeft:{...a,width:`${n}px`,height:`${n}px`,bottom:0,left:0,transform:`translate(-50%, 50%)`,cursor:`nesw-resize`}}},ZN=(e,t)=>{switch(e.type){case`text`:return{fontFamily:e.data?.fontFamily??`Inter`,fontSize:`${e.data?.fontSize??24}px`,color:e.data?.color??`#111827`,fontWeight:e.data?.fontWeight??500,textAlign:e.data?.align??`left`,whiteSpace:`pre-wrap`,lineHeight:1.25,display:`flex`,alignItems:`center`,justifyContent:e.data?.align===`left`?`flex-start`:e.data?.align===`right`?`flex-end`:`center`,padding:`12px 18px`,borderRadius:`18px`,backgroundColor:t?`rgba(255,255,255,0.65)`:`transparent`};case`shape`:{let t=Number(e.data?.strokeWidth??0),n=!!e.data?.stroke&&t>0,r=e.data?.shapeType||`rectangle`,i=r===`rectangle`,a=r===`circle`;return{background:i||a?e.data?.fill??`#f4d3c2`:`transparent`,backgroundColor:i||a?e.data?.fill??`#f4d3c2`:`transparent`,borderRadius:a?`50%`:i?`${e.data?.borderRadius??24}px`:`0`,border:(i||a)&&n?`${t}px solid ${e.data.stroke}`:`none`,overflow:`visible`}}case`upload`:case`photo`:case`background-photo`:{let t=Number(e.data?.strokeWidth??0),n=!!e.data?.stroke&&t>0,r=e.data?.borderRadius??(e.type===`background-photo`?0:24),i=Number.isFinite(e?.rotation)?e.rotation:0,a=e.data?.image,o=e.type===`background-photo`?e.data?.fill??`transparent`:a?`transparent`:e.data?.fill??`#dbeafe`;return{borderRadius:`${r}px`,border:n?`${t}px solid ${e.data.stroke}`:`none`,background:o,backgroundColor:o,backgroundImage:`none`,overflow:`hidden`,display:`flex`,alignItems:`center`,justifyContent:`center`,transform:i?`rotate(${i}deg)`:void 0,transformOrigin:`50% 50%`}}default:return{}}},QN=()=>({pointerActive:!1,hadDrag:!1,didTriggerTap:!1,hadHold:!1,holdTimer:null,totalDistance:0,startX:null,startY:null,rndRef:null,isDragging:!1,isResizing:!1,dragStartClientX:null,dragStartClientY:null,dragStartElementX:null,dragStartElementY:null,isPinching:!1,pinchStartDistance:null,pinchStartWidth:null,pinchStartHeight:null,pinchStartX:null,pinchStartY:null}),$N=e=>{if(!e?.rndRef)return;let t=typeof e.startX==`number`?e.startX:null,n=typeof e.startY==`number`?e.startY:null;t===null||n===null||typeof e.rndRef.updatePosition==`function`&&e.rndRef.updatePosition({x:t,y:n})},eP=(0,b.forwardRef)(({element:e,isSelected:t,isEditing:n,editingValue:r,onTextChange:i,onTextBlur:a,textInputRef:o},s)=>{let c=e.type===`photo`,l=c?{width:`100%`,height:`100%`,overflow:`hidden`,display:`flex`,alignItems:`center`,justifyContent:`center`,borderRadius:`${e.data?.borderRadius??24}px`}:{width:`100%`,height:`100%`,...ZN(e,t)};if(e.type===`text`)return n?(0,G.jsx)(`textarea`,{ref:o,value:r,onChange:e=>i(e.target.value),onBlur:a,autoFocus:!0,style:{...l,resize:`none`,border:`none`,outline:`none`,background:`rgba(255,255,255,0.95)`,cursor:`text`,overflow:`hidden`},onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation()}):(0,G.jsx)(`div`,{style:l,children:e.data?.text??`Teks`});if(e.type===`shape`){let t=e.data?.shapeType||`rectangle`,n=e.data?.fill??`#f4d3c2`,r=e.data?.stroke,i=Number(e.data?.strokeWidth??0),a=!!r&&i>0;if(t===`rectangle`||t===`circle`)return(0,G.jsx)(`div`,{style:l});let o={width:`100%`,height:`100%`,viewBox:`0 0 100 100`,preserveAspectRatio:`none`,style:{display:`block`}},s={fill:n,stroke:a?r:`none`,strokeWidth:a?i/Math.min(e.width,e.height)*100:0},c;switch(t){case`triangle`:c=(0,G.jsx)(`polygon`,{points:`50,5 95,95 5,95`,...s});break;case`star`:c=(0,G.jsx)(`polygon`,{points:`50,5 61,40 98,40 68,62 79,97 50,75 21,97 32,62 2,40 39,40`,...s});break;case`heart`:c=(0,G.jsx)(`path`,{d:`M50,88 C20,60 5,40 5,25 C5,10 20,5 35,5 C45,5 50,15 50,15 C50,15 55,5 65,5 C80,5 95,10 95,25 C95,40 80,60 50,88 Z`,...s});break;case`hexagon`:c=(0,G.jsx)(`polygon`,{points:`50,3 93,25 93,75 50,97 7,75 7,25`,...s});break;case`diamond`:c=(0,G.jsx)(`polygon`,{points:`50,5 95,50 50,95 5,50`,...s});break;case`pentagon`:c=(0,G.jsx)(`polygon`,{points:`50,5 97,38 79,95 21,95 3,38`,...s});break;case`octagon`:c=(0,G.jsx)(`polygon`,{points:`30,5 70,5 95,30 95,70 70,95 30,95 5,70 5,30`,...s});break;case`arrow-right`:c=(0,G.jsx)(`polygon`,{points:`5,30 60,30 60,10 95,50 60,90 60,70 5,70`,...s});break;case`arrow-up`:c=(0,G.jsx)(`polygon`,{points:`50,5 90,40 70,40 70,95 30,95 30,40 10,40`,...s});break;case`cross`:c=(0,G.jsx)(`polygon`,{points:`35,5 65,5 65,35 95,35 95,65 65,65 65,95 35,95 35,65 5,65 5,35 35,35`,...s});break;case`line-horizontal`:c=(0,G.jsx)(`rect`,{x:`0`,y:`45`,width:`100`,height:`10`,...s});break;case`line-vertical`:c=(0,G.jsx)(`rect`,{x:`45`,y:`0`,width:`10`,height:`100`,...s});break;default:return(0,G.jsx)(`div`,{style:l})}return(0,G.jsx)(`div`,{style:{...l,background:`transparent`,backgroundColor:`transparent`},children:(0,G.jsx)(`svg`,{...o,children:c})})}if(e.type===`upload`){let t=e.data?.__capturedOverlay===!0;return console.log(` Upload element rendering:`,{id:e.id?.slice(0,8),width:e.width,height:e.height}),(0,G.jsx)(`div`,{style:l,className:t?`captured-photo-overlay-content`:void 0,"data-captured-overlay":t?`true`:void 0,"data-export-allow":t?`photo-overlay`:void 0,children:e.data?.image?(0,G.jsx)(`img`,{src:e.data.image,alt:`Unggahan`,style:{width:`100%`,height:`100%`,objectFit:`fill`,pointerEvents:`none`,display:`block`},draggable:!1}):(0,G.jsx)(`div`,{className:`text-xs font-medium uppercase tracking-widest text-slate-600`,children:e.data?.label??`Unggahan`})})}if(e.type===`background-photo`)return(0,G.jsx)(`div`,{style:{...l,position:`relative`},ref:s,children:e.data?.image?(0,G.jsx)(`img`,{src:e.data.image,alt:`Background`,style:{width:`100%`,height:`100%`,objectFit:`fill`,pointerEvents:`none`,display:`block`},draggable:!1}):(0,G.jsx)(`div`,{className:`text-xs font-semibold uppercase tracking-widest text-slate-500`,children:e.data?.label??`Background`})});if(e.type===`photo`){let n=e.data?.slotNumber||e.data?.label||`Area Foto`,r=Number.isFinite(e?.rotation)?e.rotation:0;return console.log(` Rendering photo slot:`,{id:e.id,label:n,position:{x:e.x,y:e.y},size:{width:e.width,height:e.height},zIndex:e.zIndex,hasCustomStyle:c}),(0,G.jsxs)(`div`,{style:{...l,background:`linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%)`,position:`relative`,transform:r?`rotate(${r}deg)`:void 0,transformOrigin:`50% 50%`},className:`h-full w-full creator-photo-placeholder`,"data-photo-placeholder":`true`,children:[(0,G.jsx)(`div`,{style:{position:`absolute`,inset:0,border:`2px dashed rgb(129 140 248 / 0.7)`,borderRadius:`inherit`,pointerEvents:`none`},"aria-hidden":`true`}),(0,G.jsxs)(`svg`,{style:{position:`absolute`,inset:0,margin:`auto`,color:`rgb(165 180 252 / 0.4)`,pointerEvents:`none`,width:`40%`,height:`40%`},viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,G.jsx)(`path`,{d:`M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z`}),(0,G.jsx)(`circle`,{cx:`12`,cy:`13`,r:`4`})]}),(0,G.jsxs)(`div`,{style:{position:`relative`,zIndex:1,borderRadius:`8px`,background:`rgba(255, 255, 255, 0.9)`,backdropFilter:`blur(4px)`,padding:`6px 12px`,fontSize:`11px`,fontWeight:700,textTransform:`uppercase`,letterSpacing:`0.1em`,color:`rgb(79 70 229)`,boxShadow:`0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)`,pointerEvents:`none`,border:`1px solid rgb(199 210 254)`},children:[` `,n]}),t&&(0,G.jsx)(`div`,{style:{position:`absolute`,inset:0,border:`2px solid rgb(99 102 241)`,borderRadius:`inherit`,pointerEvents:`none`}})]})}return(0,G.jsx)(`div`,{className:`h-full w-full rounded-lg bg-white/80`})});function tP({elements:e,selectedElementId:t,canvasBackground:n,aspectRatio:r=`9:16`,previewConstraints:i=null,onSelect:a,onUpdate:o,onBringToFront:s,onRemove:c,onDuplicate:l,onToggleLock:u,onResizeUpload:d,isBackgroundLocked:f=!1,onToggleBackgroundLock:p,onResetBackground:m}){let[h,g]=(0,b.useState)(null),[_,v]=(0,b.useState)(``),[y,x]=(0,b.useState)(!1),S=(0,b.useRef)(null),C=(0,b.useRef)(null),w=(0,b.useRef)(new Map),T=(0,b.useRef)(QN()),E=(0,b.useRef)({isActive:!1,elementId:null,pointerId:null,startY:0,startRotation:0,rafId:null,pendingRotation:null,suppressClickUntil:0}),D=(0,b.useCallback)((e,t)=>{if(!e||typeof o!=`function`)return;let n=E.current;n.pendingRotation=t,n.rafId??=requestAnimationFrame(()=>{n.rafId=null;let t=n.pendingRotation;n.pendingRotation=null,t!=null&&o(e,{rotation:t})})},[o]),O=(0,b.useCallback)((e,t)=>{if(!t?.id)return;e.preventDefault(),e.stopPropagation();let n=E.current;n.isActive=!0,n.elementId=t.id,n.pointerId=e.pointerId,n.startY=Number(e.clientY)||0,n.startRotation=Number(t.rotation)||0,n.pendingRotation=null;try{e.currentTarget?.setPointerCapture?.(e.pointerId)}catch{}},[]),k=(0,b.useCallback)(e=>{let t=E.current;if(!t.isActive||t.pointerId!=null&&e.pointerId!==t.pointerId)return;e.preventDefault(),e.stopPropagation();let n=(Number(e.clientY)||0)-(Number(t.startY)||0),r=(Number(t.startRotation)||0)+n*.45;D(t.elementId,r)},[D]),A=(0,b.useCallback)(e=>{let t=E.current;if(t.isActive&&!(t.pointerId!=null&&e.pointerId!==t.pointerId)){e.preventDefault(),e.stopPropagation();try{e.currentTarget?.releasePointerCapture?.(e.pointerId)}catch{}t.isActive=!1,t.elementId=null,t.pointerId=null,t.startY=0,t.startRotation=0,t.pendingRotation=null,t.suppressClickUntil=(typeof performance<`u`?performance.now():Date.now())+350,t.rafId!=null&&(cancelAnimationFrame(t.rafId),t.rafId=null)}},[]);(0,b.useEffect)(()=>{if(typeof window>`u`)return;let e=e=>{let t=E.current,n=typeof performance<`u`?performance.now():Date.now();t.suppressClickUntil&&n<t.suppressClickUntil&&(t.suppressClickUntil=0,e.preventDefault(),e.stopPropagation(),typeof e.stopImmediatePropagation==`function`&&e.stopImmediatePropagation())};return window.addEventListener(`click`,e,!0),()=>{window.removeEventListener(`click`,e,!0)}},[]);let j=e=>{e.type===`text`&&(g(e.id),v(e.data?.text??``),setTimeout(()=>{S.current&&(S.current.focus(),S.current.select())},10))},M=(0,b.useCallback)(e=>{v(e)},[]),N=(0,b.useCallback)(()=>{h&&(o(h,{data:{text:_}}),g(null),v(``))},[h,_,o]);(0,b.useEffect)(()=>{t!==h&&(g(null),v(``))},[t,h]);let P=e=>{e?.holdTimer&&(clearTimeout(e.holdTimer),e.holdTimer=null)},ee=e=>{P(e),e.hadHold=!1,!(typeof window>`u`)&&(e.holdTimer=window.setTimeout(()=>{e.hadHold=!0,$N(e)},GN))};(0,b.useEffect)(()=>{let t=new Set(e.map(e=>e.id));w.current.forEach((e,n)=>{t.has(n)||(P(e),w.current.delete(n))})},[e]),(0,b.useEffect)(()=>()=>{w.current.forEach(e=>P(e)),P(T.current)},[]);let F=e=>(w.current.has(e)||w.current.set(e,QN()),w.current.get(e)),I=(0,b.useMemo)(()=>{let t=[...e].sort((e,t)=>(e.zIndex??1)-(t.zIndex??1));return console.log(` [CanvasPreview] sortedElements:`,{total:t.length,elements:t.map(e=>({id:e.id?.slice(0,8),type:e.type,zIndex:e.zIndex,x:e.x,y:e.y,width:e.width,height:e.height}))}),t},[e]),L=(0,b.useMemo)(()=>{let e={width:UM,height:WM};if(typeof r!=`string`)return e;let[t,n]=r.split(`:`).map(Number),i=Number.isFinite(t)&&t>0?t:null,a=Number.isFinite(n)&&n>0?n:null;if(!i||!a)return e;if(a>=i){let e=Math.round(UM*a/i);return{width:UM,height:e}}return{width:Math.round(WM*i/a),height:WM}},[r]),{maxWidth:R,maxHeight:te}=(0,b.useMemo)(()=>i?{maxWidth:i.maxWidth??L.width,maxHeight:i.maxHeight??L.height}:{maxWidth:L.width,maxHeight:L.height},[i,L.width,L.height]),z=(0,b.useMemo)(()=>{let e=R/L.width,t=te/L.height,n=Math.min(e,t,1);return console.log(` [CanvasPreview] previewScale calculated:`,{canvasDimensions:L,maxWidth:R,maxHeight:te,scaleX:e,scaleY:t,previewScale:n}),n},[R,te,L.width,L.height]),B=(0,b.useMemo)(()=>({width:L.width*z,height:L.height*z}),[L.width,L.height,z]),V=T.current,H=e=>{e.target===e.currentTarget&&(V.pointerActive=!0,V.hadDrag=!1,V.didTriggerTap=!1,V.hadHold=!1,ee(V),a(`background`,{interaction:`pointerdown`}))},ne=e=>{if(e.target===e.currentTarget&&V.pointerActive){if(V.pointerActive=!1,P(V),V.hadHold){V.hadHold=!1;return}V.didTriggerTap=!0,a(`background`,{interaction:`tap`})}},re=e=>{e.target===e.currentTarget&&(V.pointerActive=!1,V.hadDrag=!1,V.didTriggerTap=!1,V.hadHold=!1,P(V))};return(0,b.useEffect)(()=>{t&&t!==`background`&&x(!1)},[t]),(0,b.useEffect)(()=>{let t=e.find(e=>e.type===`background-photo`);if(!t||!t.id)return;let n=F(t.id),r=null,i=null,a=!0,s=setTimeout(()=>{if(!a)return;let e=C.current;if(!e){console.warn(` Background element DOM not found for touch listeners`);return}console.log(` Touch listeners attached to background photo`);let s=i=>{if(i.stopImmediatePropagation(),console.log(` Touch start:`,i.touches.length,`fingers`),i.touches.length===2){i.preventDefault(),i.stopPropagation();let a=i.touches[0],o=i.touches[1];r={type:`pinch`,startDistance:Math.hypot(a.clientX-o.clientX,a.clientY-o.clientY),startWidth:t.width,startHeight:t.height,startX:t.x,startY:t.y,currentScale:1},e.style.willChange=`transform`,n.pointerActive=!1,n.isDragging=!1,console.log(` Pinch started`)}else if(i.touches.length===1){i.preventDefault(),i.stopPropagation();let n=i.touches[0];r={type:`drag`,startClientX:n.clientX,startClientY:n.clientY,startX:t.x,startY:t.y},e.style.willChange=`transform`,console.log(` Drag started`)}},c=n=>{if(r){if(n.preventDefault(),n.stopImmediatePropagation(),r.type===`pinch`&&n.touches.length===2){let i=n.touches[0],a=n.touches[1],o=Math.hypot(i.clientX-a.clientX,i.clientY-a.clientY)/r.startDistance;r.currentScale=o;let s=(i.clientX+a.clientX)/2,c=(i.clientY+a.clientY)/2,l=document.getElementById(`creator-canvas`);if(!l)return;let u=l.getBoundingClientRect(),d=(s-u.left)/z,f=(c-u.top)/z,p=t.data?.imageAspectRatio||r.startWidth/r.startHeight,m=r.startWidth*o,h=m/p,g=(d-r.startX)/r.startWidth,_=(f-r.startY)/r.startHeight,v=d-m*g,y=f-h*_;r.finalWidth=m,r.finalHeight=h,r.finalX=v,r.finalY=y;let b=v-r.startX,x=y-r.startY;e.style.transform=`translate(${b}px, ${x}px) scale(${o})`,e.style.transformOrigin=`0 0`}else if(r.type===`drag`&&n.touches.length===1){let t=n.touches[0],i=(t.clientX-r.startClientX)/z,a=(t.clientY-r.startClientY)/z;r.finalX=r.startX+i,r.finalY=r.startY+a,e.style.transform=`translate(${i}px, ${a}px)`}}},l=i=>{if(!r)return;console.log(` Touch end:`,r.type);let a=null;r.type===`pinch`?a={width:r.finalWidth,height:r.finalHeight,x:r.finalX,y:r.finalY}:r.type===`drag`&&(a={x:r.finalX,y:r.finalY}),a&&(typeof a.x==`number`&&typeof a.y==`number`&&(n.startX=a.x,n.startY=a.y,n?.rndRef?.updatePosition&&n.rndRef.updatePosition({x:a.x,y:a.y})),typeof a.width==`number`&&typeof a.height==`number`&&(n.startWidth=a.width,n.startHeight=a.height,n?.rndRef?.updateSize&&n.rndRef.updateSize({width:a.width,height:a.height})),e&&(e.style.transform=``,e.style.transformOrigin=``,e.style.willChange=``),o(t.id,a)),r=null,n.pointerActive=!1,n.isDragging=!1};e.addEventListener(`touchstart`,s,{passive:!1,capture:!0}),e.addEventListener(`touchmove`,c,{passive:!1,capture:!0}),e.addEventListener(`touchend`,l,{passive:!1,capture:!0}),e.addEventListener(`touchcancel`,l,{passive:!1,capture:!0}),i=()=>{e&&(e.removeEventListener(`touchstart`,s,{capture:!0}),e.removeEventListener(`touchmove`,c,{capture:!0}),e.removeEventListener(`touchend`,l,{capture:!0}),e.removeEventListener(`touchcancel`,l,{capture:!0}),console.log(` Touch listeners removed`))}},100);return()=>{a=!1,clearTimeout(s),typeof i==`function`&&i()}},[e,z,o,F]),(0,G.jsxs)(`div`,{className:`create-preview__canvas-wrapper`,style:{width:`${B.width}px`,height:`${B.height}px`,position:`relative`,overflow:`visible`},children:[y&&t===`background`&&(0,G.jsxs)(`div`,{style:{position:`absolute`,top:`-60px`,left:`50%`,transform:`translateX(-50%)`,display:`flex`,gap:`10px`,zIndex:10001,pointerEvents:`auto`},children:[(0,G.jsx)(`button`,{onClick:e=>{e.stopPropagation(),p?.()},style:{width:`48px`,height:`48px`,borderRadius:`12px`,background:f?`linear-gradient(135deg, #f7a998 0%, #e89985 100%)`:`#ffffff`,border:`2px solid #f7a998`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:f?`0 4px 12px rgba(247, 169, 152, 0.4)`:`0 2px 8px rgba(0, 0, 0, 0.15)`,transition:`all 0.2s ease`},onMouseEnter:e=>e.currentTarget.style.transform=`scale(1.1)`,onMouseLeave:e=>e.currentTarget.style.transform=`scale(1)`,title:f?`Buka Kunci Background`:`Kunci Background`,children:(0,G.jsx)(`img`,{src:f?`/assets/create-lock-mjujrh6i-DNNRm1ud.png`:`/assets/create-unlock-mjujrh6i-DMBUag17.png`,alt:f?`Locked`:`Unlocked`,style:{width:`28px`,height:`28px`}})}),(0,G.jsx)(`button`,{onClick:e=>{e.stopPropagation(),f||(m?.(),x(!1))},style:{width:`48px`,height:`48px`,borderRadius:`12px`,background:f?`#e5e7eb`:`#ffffff`,border:`2px solid #f7a998`,cursor:f?`not-allowed`:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.15)`,transition:`all 0.2s ease`,opacity:f?.5:1},onMouseEnter:e=>{f||(e.currentTarget.style.transform=`scale(1.1)`)},onMouseLeave:e=>e.currentTarget.style.transform=`scale(1)`,title:f?`Background Terkunci`:`Reset Background`,disabled:f,children:(0,G.jsx)(`img`,{src:`/assets/create-trash-mjujrh6i-CitdFrdI.png`,alt:`Reset Background`,style:{width:`28px`,height:`28px`}})})]}),(0,G.jsx)(Qf.div,{id:`creator-canvas`,className:`relative mx-auto overflow-hidden shadow-[0_42px_90px_rgba(58,38,32,0.28)]`,style:{background:n,border:`none`,outline:`4px solid rgba(92, 62, 48, 0.65)`,outlineOffset:`-4px`,boxShadow:`0 42px 90px rgba(58,38,32,0.28), 0 0 0 2px rgba(255,255,255,0.18) inset`,borderRadius:0,width:`${L.width}px`,height:`${L.height}px`,position:`absolute`,top:`50%`,left:`50%`,overflow:`hidden`,touchAction:`none`,userSelect:`none`,transform:`translate(-50%, -50%) scale(${z})`,transformOrigin:`50% 50%`},onPointerDown:H,onTouchStart:H,onPointerUp:ne,onTouchEnd:ne,onPointerCancel:re,onTouchCancel:re,onClick:e=>{if(e.target===e.currentTarget){if(V.didTriggerTap){V.didTriggerTap=!1;return}x(e=>!e),a(`background`,{interaction:`tap`})}},onWheel:e=>{e.stopPropagation(),e.preventDefault()},children:I.map(e=>{console.log(` [Rnd] Element ${e.type}:`,{id:e.id?.slice(0,8),width:e.width,height:e.height,x:e.x,y:e.y,zIndex:e.zIndex});let n=t===e.id,r=e.type===`background-photo`,i=r?Number(e.data?.imageAspectRatio)>0?Number(e.data?.imageAspectRatio):e.width>0&&e.height>0?e.width/e.height:1:1,s=i>0?i:1,f=e.type===`upload`,p=f&&e.data?.imageAspectRatio?e.data.imageAspectRatio:null,m=r?`transition-colors`:`border border-transparent transition-colors`,g=e.type===`upload`&&e.data?.__capturedOverlay===!0,v=[m,`creator-element`,`creator-element--type-${e.type}`,g?`creator-element--captured-overlay`:``,n?`creator-element--selected`:``].filter(Boolean).join(` `),y=UM/WM;r&&s>y&&Math.round(1920*s),r&&(s>y||Math.round(1080/s));let b=F(e.id),x=qN(e),w=t=>{if(r&&t.touches&&console.log(`[Background Photo PointerDown]`,{touchCount:t.touches.length,isBackgroundPhoto:r,eventType:t.type}),b.pointerActive||b.isResizing)return;let i=t.target?.classList;if(i&&Array.from(i).some(e=>e.includes(`react-rnd-handle`)||e.includes(`creator-resize-wrapper`))){t.stopPropagation();return}if(t.stopPropagation(),r&&t.touches)return;let o=t.touches?.[0]?.clientX??t.clientX,s=t.touches?.[0]?.clientY??t.clientY;if(b.pointerActive=!0,b.hadDrag=!1,b.didTriggerTap=!1,b.hadHold=!1,b.totalDistance=0,b.startX=e.x,b.startY=e.y,b.isDragging=!1,b.isResizing=!1,b.dragStartClientX=o,b.dragStartClientY=s,b.dragStartElementX=e.x,b.dragStartElementY=e.y,!n&&(a(e.id,{interaction:`pointerdown`}),!r)){b.pointerActive=!1;return}ee(b)},T=t=>{if(b.isResizing||e.isLocked||r&&t.touches||!b.pointerActive||!n&&!r)return;t.preventDefault(),t.stopPropagation();let i=t.touches?.[0]?.clientX??t.clientX,a=t.touches?.[0]?.clientY??t.clientY;if(b.dragStartClientX===null||b.dragStartClientY===null)return;let s=(i-b.dragStartClientX)/z,c=(a-b.dragStartClientY)/z,l=Math.abs(s)+Math.abs(c);if(b.totalDistance=l,!b.hadDrag&&l>=JN&&(b.hadDrag=!0,b.didTriggerTap=!1,b.isDragging=!0,P(b)),b.isDragging){let t=b.dragStartElementX+s,n=b.dragStartElementY+c;if(r)o(e.id,{x:t,y:n});else{let r=Math.max(0,Math.min(L.width-e.width,t)),i=Math.max(0,Math.min(L.height-e.height,n));o(e.id,{x:r,y:i})}}},E=e=>{if(e.stopPropagation(),P(b),b.isPinching){b.isPinching=!1,b.pinchStartDistance=null,b.pinchStartWidth=null,b.pinchStartHeight=null,b.pinchStartX=null,b.pinchStartY=null;return}if(b.pointerActive){if(b.hadDrag||b.isDragging){b.pointerActive=!1,b.hadDrag=!1,b.isDragging=!1,b.totalDistance=0,b.isResizing=!1;return}if(b.pointerActive=!1,b.hadHold){b.hadHold=!1,b.totalDistance=0,b.isResizing=!1;return}b.didTriggerTap=!0,b.totalDistance=0,b.isResizing=!1}},D=e=>{e.stopPropagation(),b.pointerActive=!1,b.hadDrag=!1,b.didTriggerTap=!1,b.hadHold=!1,b.totalDistance=0,b.isDragging=!1,b.isResizing=!1,b.isPinching=!1,b.pinchStartDistance=null,b.pinchStartWidth=null,b.pinchStartHeight=null,b.pinchStartX=null,b.pinchStartY=null,$N(b),P(b)},I=t=>{if(t.stopPropagation(),b.didTriggerTap){b.didTriggerTap=!1;return}a(e.id,{interaction:`tap`})},R=t=>{if(!r||!n)return;t.preventDefault(),t.stopPropagation();let i=-t.deltaY>0?1.1:.9,a=e.data?.imageAspectRatio||e.width/e.height,s=e.width*i,c=s/a,l=t.currentTarget.getBoundingClientRect(),u=(t.clientX-l.left)/z,d=(t.clientY-l.top)/z,f=s/e.width,p=e.x-(u-e.x)*(f-1),m=e.y-(d-e.y)*(f-1);o(e.id,{width:s,height:c,x:p,y:m})},te=(t,n)=>{if(!t)return;let r=parseFloat(t.style.width),i=parseFloat(t.style.height);!Number.isFinite(r)||!Number.isFinite(i)||o(e.id,{width:r,height:i,x:n.x,y:n.y})};return(0,G.jsxs)(vj,{"data-element-id":e.id,"data-element-type":e.type,"data-element-width":e.width,"data-element-height":e.height,"data-element-zindex":Number.isFinite(e.zIndex)?e.zIndex:void 0,size:{width:e.width,height:e.height},position:{x:e.x,y:e.y},bounds:`parent`,scale:z,enableResizing:n&&!r?YN:!1,disableDragging:!0,resizeHandleStyles:n&&!r?XN(z):void 0,resizeHandleWrapperClassName:`creator-resize-wrapper`,resizeHandleComponent:{top:(0,G.jsx)(`div`,{className:`react-rnd-handle react-rnd-handle-top`,"data-export-ignore":`true`}),right:(0,G.jsx)(`div`,{className:`react-rnd-handle react-rnd-handle-right`,"data-export-ignore":`true`}),bottom:(0,G.jsx)(`div`,{className:`react-rnd-handle react-rnd-handle-bottom`,"data-export-ignore":`true`}),left:(0,G.jsx)(`div`,{className:`react-rnd-handle react-rnd-handle-left`,"data-export-ignore":`true`}),topRight:(0,G.jsx)(`div`,{className:`react-rnd-handle react-rnd-handle-topRight`,"data-export-ignore":`true`}),bottomRight:(0,G.jsx)(`div`,{className:`react-rnd-handle react-rnd-handle-bottomRight`,"data-export-ignore":`true`}),bottomLeft:(0,G.jsx)(`div`,{className:`react-rnd-handle react-rnd-handle-bottomLeft`,"data-export-ignore":`true`}),topLeft:(0,G.jsx)(`div`,{className:`react-rnd-handle react-rnd-handle-topLeft`,"data-export-ignore":`true`})},onResizeStart:t=>{t?.nativeEvent&&(t.nativeEvent.stopPropagation(),t.nativeEvent.preventDefault()),t?.stopPropagation?.(),t?.preventDefault?.(),b.isResizing=!0,b.pointerActive=!1,b.hadDrag=!1,b.isDragging=!1,b.hadHold=!1,b.didTriggerTap=!1,P(b),n||a(e.id,{interaction:`resize-start`})},onResize:(e,t,n,r,i)=>{b.isResizing&&te(n,i)},onDragStart:t=>{if(b.isResizing)return t?.nativeEvent&&(t.nativeEvent.stopPropagation(),t.nativeEvent.preventDefault()),t?.stopPropagation?.(),t?.preventDefault?.(),!1;b.hadHold=!1,b.didTriggerTap=!1,b.isDragging=!1,b.hadDrag=!1,b.totalDistance=0,P(b),typeof t?.stopPropagation==`function`&&t.stopPropagation(),a(e.id,{interaction:`drag`})},onDrag:(e,t)=>{if(b.isResizing)return e?.nativeEvent&&(e.nativeEvent.stopPropagation(),e.nativeEvent.preventDefault()),e?.stopPropagation?.(),e?.preventDefault?.(),!1;b.totalDistance+=Math.abs(t.deltaX)+Math.abs(t.deltaY),!b.hadDrag&&b.totalDistance>=JN&&(b.hadDrag=!0,b.didTriggerTap=!1,b.isDragging=!0)},onDragStop:(t,n)=>{if(b.isResizing)return b.pointerActive=!1,b.hadDrag=!1,b.didTriggerTap=!1,b.hadHold=!1,b.totalDistance=0,b.isDragging=!1,!1;let r=Math.abs((b.startX??n.x)-n.x)+Math.abs((b.startY??n.y)-n.y),i=b.hadDrag||r>=1;if(b.pointerActive=!1,b.hadDrag=!1,b.didTriggerTap=!1,b.hadHold=!1,b.totalDistance=0,b.isDragging=!1,b.isResizing=!1,P(b),!i){$N(b);return}o(e.id,{x:n.x,y:n.y}),b.startX=n.x,b.startY=n.y},onResizeStop:(t,n,r,i,a)=>{if(b.isResizing){if(te(r,a),f&&d){let t=parseFloat(r.style.width),n=parseFloat(r.style.height);Number.isFinite(t)&&Number.isFinite(n)&&d(e.id,t,n)}b.isResizing=!1,b.pointerActive=!1,b.hadDrag=!1,b.isDragging=!1}},minWidth:qM,minHeight:qM,dragMomentum:!1,lockAspectRatio:r?i:p||!1,enableUserSelectHack:!1,dragGrid:[1,1],resizeGrid:[1,1],style:{zIndex:e.zIndex,boxShadow:`none`,position:`absolute`,borderRadius:x,backgroundColor:`transparent`,touchAction:r?`none`:`auto`,pointerEvents:g||r&&!n?`none`:`auto`},className:v,ref:e=>{b.rndRef=e},onPointerDown:r?void 0:w,onTouchStart:r?void 0:w,onPointerMove:r?void 0:T,onTouchMove:r?void 0:T,onPointerUp:r?void 0:E,onTouchEnd:r?void 0:E,onPointerCancel:r?void 0:D,onTouchCancel:r?void 0:D,onClick:r?void 0:I,onDoubleClick:t=>{t.stopPropagation(),j(e)},onWheel:R,children:[n&&!r&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`div`,{"data-export-ignore":`true`,style:{position:`absolute`,top:0,left:0,right:0,bottom:0,border:`2px solid #f7a998`,borderRadius:0,pointerEvents:`none`,zIndex:-1}}),(0,G.jsxs)(`div`,{"data-export-ignore":`true`,style:{position:`absolute`,...e.y<100?{bottom:-76,top:`auto`}:{top:-76,bottom:`auto`},left:`50%`,transform:`translateX(-50%)`,display:`flex`,gap:`12px`,zIndex:1e4,pointerEvents:`auto`},children:[(0,G.jsx)(`button`,{onClick:t=>{t.stopPropagation(),u?.(e.id)},style:{width:`64px`,height:`64px`,borderRadius:`14px`,background:e.isLocked?`linear-gradient(135deg, #f7a998 0%, #e89985 100%)`:`#ffffff`,border:(e.isLocked,`2px solid #f7a998`),cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:e.isLocked?`0 4px 12px rgba(247, 169, 152, 0.4)`:`0 2px 8px rgba(0, 0, 0, 0.15)`,transition:`all 0.2s ease`},onMouseEnter:e=>e.currentTarget.style.transform=`scale(1.1)`,onMouseLeave:e=>e.currentTarget.style.transform=`scale(1)`,children:(0,G.jsx)(`img`,{src:e.isLocked?`/assets/create-lock-mjujrh6i-DNNRm1ud.png`:`/assets/create-unlock-mjujrh6i-DMBUag17.png`,alt:e.isLocked?`Locked`:`Unlocked`,style:{width:`36px`,height:`36px`}})}),(0,G.jsx)(`button`,{onClick:t=>{t.stopPropagation(),l?.(e.id)},style:{width:`64px`,height:`64px`,borderRadius:`14px`,background:`#ffffff`,border:`2px solid #f7a998`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.15)`,transition:`transform 0.2s ease`},onMouseEnter:e=>e.currentTarget.style.transform=`scale(1.1)`,onMouseLeave:e=>e.currentTarget.style.transform=`scale(1)`,children:(0,G.jsx)(`img`,{src:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAACLlBMVEUAAAABAQECAgIDAwMEBAQFBQUGBgYGBgYJCQkICAgMDAwKCgoFBQUCAgIAAAAAAAAAAAAHBwcAAAAAAAACAgICAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBQUBAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAADAwMBAQEAAAAAAAAAAAACAgIBAQEAAAACAgIBAQECAgIAAAABAQEBAQECAgIJCQkJCQkJCQkAAAABAQEBAQEBAQEDAwMAAAAAAAAAAAACAgIBAQEAAAADAwMGBgYAAAABAQEBAQEAAAAAAAABAQEAAAAAAAAFBQUAAAAAAAACAgIAAAABAQEBAQEDAwMEBAQBAQEAAAAAAAAJCQkAAAABAQEAAAAAAAACAgIAAAADAwMBAQEAAAACAgIAAAAAAAAAAAAHBwcGBgYAAAAAAAAAAAAAAAAAAAABAQEGBgYBAQECAgIAAAAAAAAAAAABAQEEBAQBAQECAgIAAAAAAAABAQEDAwMCAgICAgIEBAQCAgIBAQEFBQUAAAABAQEAAAADAwMEBAQDAwMDAwMAAAAEBAQBAQEKCgoFBQUBAQECAgIHBwcDAwMGBgYBAQEBAQEBAQEAAAABAQEFBQUBAQEEBAQGBgYAAAAJCQkAAAAICAgKCgoEBAQHBwcBAQEFBQUDAwMEBAQBAQEGBgYEBAQEBAQAAAALCwsICAgLCwsJCQkMDAwICAgAAABHcExQ6xjqAAAAunRSTlP////////////////84BQZSsRLF2tsAQspBgMCJRUqbyck1xYEEf4JKyDdO+MHnw119UEj97XP+f147uvwOPzaRg8FU+w/KNNE+DzRNDEc7t/7kE3zVseI65r7ch4i80f+DhB+XoXAsnvk3Db2+iES1OFM6dydqlf68bj+PWcy1pag58swpJj6zXpqgrBQwhqGw/TPWqLAY/JlkmLEX7rvyLdJ6d6rmK3MnNiL4S3Qjr1bu53Xs8LTbQBRPDyCAAAMm0lEQVR42uydiVsURxbAX1V198fAalyRmTCAKCJeQe6gZr1AjVckrAgqGg8O0bheeKDoehuiqHFNPBONrkk2ybrJ3lv/3Vb1gNPVM/b09FT1TPPxotHvw+7qX9d7r6pevX4FdIIITIJMgvgKUry86FLT1YpXU7zJxxVXfz1VO31/lkHKZjzbgOwCKcT+73T2u+q/P1/LHkj9aDsxgECmUgAGMKyK8khWQOo7MYcwMubgEJp5ozU9Ed9Btoxm3hMJPAiOn/EZpPcsBvmC2E0PHPURpHoxUwUin4OwmxoHF/kGcrSTeRpDOoc+9r/mv/sEUlhhEKRAsdi70QDlIQPKfQGZ+hN3M4b8HmG9gfL5nwRu+gBSfRUAg4Hk65Zm3hJpzHvt3aYe5DrniHl+6cbORnvNHFag7rVqkIeAk1kpJt69GDL/i5udxt3XwohakF0dyXoCa9Y5VLpiuivdrmSX1IIcMBJfPDbVjBgZOV5EiLWDQRtepBJkFX/vSdym+RDYo3DfoQsvxhxtr6oEGUk2oCMTwvvQQkwzISIKA7ytDmRPHkli63D4wMCZ6dOSy/REEf9Ba/mpvzKWuGYBYtMGZvDwF3UgL/jrs1v7ezczdTDh8y9i/Trew+ZMjsA1VSB3lxBI6JEn82Tc/MSg5QUxtxHiw/wOVSDdiOuzbp2sruiVdPctF82JD2sg3jXLwopA7rGGdMGmtafSbl/4CiCPvyYcH002qwGJ7uRrW6TF/b3xo8T7Xxsyxudb4w30qAFZGzOQuJHgwRqZDXzB+pvPGN+4ZTyqBqQWE6tzYT3SLbWB/WdNhbK08EoNyGI2cWAvLe7wm1fLbeGGUWB9UaBXVSoBucN9ltWrvJDcwioQvCJraY4SkJUGt8S4MeKlklvYh4WpCvvbOiUgfzYN0dL3W2U3MahbnCIfqNb6AyLdzVdwvSLxcQS2+QMifTn6q4GE2TVpDShIFzN1ZBmn4HVAQV4jIfCHDtKAgtBR6yIBw0BgQXY9t44j/6oOLAitb4ybyJUGReuRD8YX6OMyX0Erm0/y8AZhv/rv0iCD0OKH/c0G2n56lbq4lj8gTErmKt2B8w9EsSSCzJwEmQSRArLMDvLuJMgkyCTIhAT53SRIroPMknDXyNTCd9xJoU3KIuHcANl3oq9p5WHwnmWE4dH7p3vWpr36gk8kghy92b9CUpZB87NvajIEKfWKMfNyMxJ31jNK8tIav2/IBsiR01UGSM5bW3L9rt8gLT2N5jahPBIeQtK0us8rPYPM9sBROoJjgRIsMbsopHHT/3a3S5A/SQDZ2oEAYzCINBPh2baxHW3omO4bSHmVgccjVxmTiDvzGmC04oJPIAOx9BtACEvokTdZMQiPBSgNqHUDcljEAEg3gNatYUCgJB0yltTDft/0AaS1ijWkDMNUMISHTygHmV/H8xqIQhJTv87OTh9kdzoc1cfimb3KQJg/hPtRtSBdGspDYmaDZOEunb+lpUpB5u/kV+QjhR3CMzwBhaBxt0qQcxiZOQ2Gijzb8bmKbpqg/lUKkA12kCPuOZabKqWBiw9+MnK/Gu/xFaUpQOwbPWmAjPIUpvjciPcMG8aGmooWLZhTFpOpaUphw/qBTjMrSjc9r0XFdigD2TUszo3y+F7O0C+FGa+U53+nmyS6NWtJ64i4UC0LyALX7fWANfcjloj5k5ydu5dreNYHsvQIBvxUFcgx20BIdNK5T1JQpGEK5vlX8R5hTf3bEeQzzyALsDVfGPGBq0JeilRDG9MmXbMOjHXRFCDgDeQhv8oygGB9SOZu11ZDeCzMdG2jE8hOzyCLhYUtv8MvUkNuTQizgdCaal+uBuQ+vwxbQBrLpIJ8Kqg8z4370QlkhX0scw1SZx+7vpMcBT1mb+DrtEB2uY3GIdvKjsj+ru1nO8hKJSCz7BeiXZJBttlB1jiBLPEK8kdki9k2yw6wf2oHaXcEATkgQK7IBjmSEHl0AtkrC6TgoGyQmrRAqryCbLar1nuyQSL2R9vrBJIQF/MIAiTLILF5n2Vl9K5HEKQABImfyjpV2oBGWwBdr89REMjD2AnklX0n4Ms0ZhA+guRzM3QCGbE9D+7LTRBAxFm1ztkt6p5XkONKQXQgGDmB7LBH4wu25ApIjT00TpxAuhMCYl0uY0H+gmiADEfVqk/Y565b4A1kimyQfWKPIOTotVr+IC7amRPrj+YGyGrR2NkvJxB6hz18SAS/kasgYSeQ7hAG4QMPDeCyiwyKRXaQj2WD7E8P5O4Ss16RZW2MMfxtcw6AzE0AKXECoU08YIssHwfzKkx7D+xpSRPkVbZB6jHoGFv9Fv8qEaG6/1x+8vuYdF0ozQLI0QSQSkcQ2imUETHjYoQ5bUYUiod7+u3KtjELIC3OIIvAEvvE5mYXZ+H1ABjReFWN33SnAFmYdZBYeRc+4XfcsMFFwpXnswBSnAKkbBBwyi00HXbOzHUQ+nJ4bMqvOVVlggPWK9faQQ7JBpmaAFKdCoT2aeZ+k8PuLC8sNDw150HCp8c2nwyHHkFw21eQMg8gtPoZtw+HVAzMNz7Lcx+EzmtCKZJjNBGkXjnIHE8gtPIGBnh7upK5O9XqBLIyR0AofdxI3lyCknVI1RxfQQoTQOa5A6EzR9h6kkBBskQyDNgQqihkAyTiEoRGy9sQwFuyfdCKjwIDwqbOfY+0ZIrFS9SJqYU5DkJpTdH7bLqSnziO2D7fXp/rIExKa//RYecYOU9TgFTkHgi3ltLb5V2XTi2OyY3axKpY6kHekQGSWrIBUqMCZJV61SJiETsdIsEEqa6yFO/gPdIc9gXkomwQetEQy1WO0ICC9Fkz6Nh8Y0AJyB71IIUdxKpZZ6cGFYReEDZuvqGBBaFd8V2CqlvUJ5BjCkBob9vY7dtSbNJ6B5nmCwjd393ftrftQXmqrxJzHsSteAeZbgf5cBJkEmQSZEKCnJioIGRTQEG22lMBJwgIFEwUEPk5jT6B2AJ0COoCCjI7IaV8dTBBCu3Gjjcqf1olwYfoEvv+yS2lEPvK75zFjSO33pENQo+DeCYDWaiSY9uasWYaa8OSQc7p1pPUsKGo/m1MPo9nL+VdDssF+cL8QtsaeXpVraw/rKUgoEcuyEsAywEsOpAQOaXKPrZbMxm09lKpIJENQuF883tUNVX66f+EU0xCZIdUEDqab4gOGIj+pFgFyIN44Rge1saDckFarZkSmOflMpZNKk7heW79sjIEGBdKBSkexEJNg9getn7vqexSuGFxvDKSfRuS0eGnA4knsJh7M2jw/m9dyoOvLqQ+WTSa0IhkkNVt+C0lcxB2fd4VqbtVnG0QWo4cav+4rhaifb062yCVmxxqALnsEe4uHkSzDEI/GnoLQxp1T/gQ5FzmqFI9CK2VUNoMgb6mOtsg4R8kVHAxUpyx4QcIjXRmimEWPulLD2SdfBB6dEQfz3nEHspsodi1/0y88f7ZpWMyP+Hz1WmzxqS0TBoIPdrJK51p/KgfDyXPsGkk8L3tpnP6Drmr26VdudQgCYTOOx17Ik3zUt6Quy1Dt7mt3kdaimRRS5cODYRlnc/e3UwAF4CnAm7meaJYyGmjSzVwXbeLQAhOSTto/vUIihWQ0j2RGGJOw3R+9Eoef0bDhWqy67VyWSA0OmM7eDrw2cxerRLm/sXH88wRNR+5qXZF+HmedRFZIJTWLL2CvBSj488qWsgZw6zQCG+O+0x1ObPMpfJAKG05c67dg7WjdlvhlutjqfjgcqbDnAL5ViYId8VndnzYHpt2uJX2H+yFejbFyoO5H4eYC/9EMoip4qXrv3w8oyguM5LJ2M8er0qcwp+EUBoaWmAeADysACRjGYE0zsDWuBlp+rJcBNkRSrOMYwhwfy6CTIP0SPhxvUW5CFKyKY0ClrGCUttLchGEbm5OY9LGlmUE3aY5CUK37XTPgWL1QXMThC4/ybWLFzgkPIJpLapni6Ux1dreSnMWhLb0Nn0w9r2tGVMWpv35uOrN1OV5f1ENzWEQMx4QLSkJh2mYVltizIh/gwvzo5WV7Kfs5/KWuj5IVNAmTAyjVMGa3Qep1HWhOiCQdcEEKbFUZ8XmobOzggoiLG2xAUHtESJ+7AWhgIKEkVB5EgMOao9Y4mVs2o71wIKIS3cdgmojVIuTEDMgEdBxhG4XplcY6XMDCtJk2QbnsdQkZYqCAdJLxO2UrqCCFB8SEiw6CoMKQhd99v+BelCM0PUC2PYoDRGP7Az1BB9Nzwkqsix3DmGP7KybDFoeAkxYa7BfPjRkPLJTzKNtgf2Kqc44zg8aOh4hAEY9MuoRGgEA8J+WrTIkcJkAAAAASUVORK5CYII=`,alt:`Duplicate`,style:{width:`36px`,height:`36px`}})}),(0,G.jsx)(`button`,{onClick:t=>{t.stopPropagation(),c?.(e.id)},style:{width:`64px`,height:`64px`,borderRadius:`14px`,background:`#ffffff`,border:`2px solid #f7a998`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.15)`,transition:`transform 0.2s ease`},onMouseEnter:e=>e.currentTarget.style.transform=`scale(1.1)`,onMouseLeave:e=>e.currentTarget.style.transform=`scale(1)`,children:(0,G.jsx)(`img`,{src:`/assets/create-trash-mjujrh6i-CitdFrdI.png`,alt:`Delete`,style:{width:`36px`,height:`36px`}})})]}),e.type===`photo`&&(()=>{let t=Number(e.x)+Number(e.width)+76>1080,n=Number(e.x)-76<0,r=t&&!n;return(0,G.jsx)(`button`,{"data-export-ignore":`true`,title:`Tahan & geser atas/bawah untuk rotate`,"aria-label":`Rotate`,style:{position:`absolute`,top:`50%`,transform:`translateY(-50%)`,...r?{left:`-76px`}:{right:`-76px`},width:`64px`,height:`64px`,borderRadius:`14px`,background:`#ffffff`,border:`2px solid #f7a998`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.15)`,transition:`transform 0.2s ease`,pointerEvents:`auto`,touchAction:`none`,zIndex:10001},onMouseEnter:e=>e.currentTarget.style.transform=`translateY(-50%) scale(1.1)`,onMouseLeave:e=>e.currentTarget.style.transform=`translateY(-50%)`,onPointerDown:t=>O(t,e),onPointerMove:k,onPointerUp:A,onPointerCancel:A,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,G.jsx)(`img`,{src:`/assets/rotate-mjujrh6i-B0dihYVd.png`,alt:`Rotate`,draggable:!1,style:{width:`34px`,height:`34px`}})})})()]}),n&&r&&(0,G.jsx)(`div`,{"data-export-ignore":`true`,style:{position:`absolute`,top:0,left:0,right:0,bottom:0,border:`2px solid #f7a998`,borderRadius:0,pointerEvents:`none`,zIndex:-1}}),(0,G.jsx)(eP,{element:e,isSelected:n,isEditing:h===e.id,editingValue:_,onTextChange:M,onTextBlur:N,textInputRef:S,ref:r?C:null})]},e.id)})},`canvas-${r}-${L.width}-${L.height}`)]})}var nP=(0,b.memo)(tP);function rP(){return(rP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function iP(e,t){if(e==null)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}function aP(e){var t=(0,b.useRef)(e),n=(0,b.useRef)(function(e){t.current&&t.current(e)});return t.current=e,n.current}var oP=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},sP=function(e){return`touches`in e},cP=function(e){return e&&e.ownerDocument.defaultView||self},lP=function(e,t,n){var r=e.getBoundingClientRect(),i=sP(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:oP((i.pageX-(r.left+cP(e).pageXOffset))/r.width),top:oP((i.pageY-(r.top+cP(e).pageYOffset))/r.height)}},uP=function(e){!sP(e)&&e.preventDefault()},dP=b.memo(function(e){var t=e.onMove,n=e.onKey,r=iP(e,[`onMove`,`onKey`]),i=(0,b.useRef)(null),a=aP(t),o=aP(n),s=(0,b.useRef)(null),c=(0,b.useRef)(!1),l=(0,b.useMemo)(function(){var e=function(e){uP(e),(sP(e)?e.touches.length>0:e.buttons>0)&&i.current?a(lP(i.current,e,s.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=c.current,a=cP(i.current),o=n?a.addEventListener:a.removeEventListener;o(r?`touchmove`:`mousemove`,e),o(r?`touchend`:`mouseup`,t)}return[function(e){var t=e.nativeEvent,r=i.current;if(r&&(uP(t),!function(e,t){return t&&!sP(e)}(t,c.current)&&r)){if(sP(t)){c.current=!0;var o=t.changedTouches||[];o.length&&(s.current=o[0].identifier)}r.focus(),a(lP(r,t,s.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),o({left:t===39?.05:t===37?-.05:0,top:t===40?.05:t===38?-.05:0}))},n]},[o,a]),u=l[0],d=l[1],f=l[2];return(0,b.useEffect)(function(){return f},[f]),b.createElement(`div`,rP({},r,{onTouchStart:u,onMouseDown:u,className:`react-colorful__interactive`,ref:i,onKeyDown:d,tabIndex:0,role:`slider`}))}),fP=function(e){return e.filter(Boolean).join(` `)},pP=function(e){var t=e.color,n=e.left,r=e.top,i=r===void 0?.5:r,a=fP([`react-colorful__pointer`,e.className]);return b.createElement(`div`,{className:a,style:{top:100*i+`%`,left:100*n+`%`}},b.createElement(`div`,{className:`react-colorful__pointer-fill`,style:{backgroundColor:t}}))},mP=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=10**t),Math.round(n*e)/n};360/(2*Math.PI);var hP=function(e){return CP(gP(e))},gP=function(e){return e[0]===`#`&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?mP(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?mP(parseInt(e.substring(6,8),16)/255,2):1}},_P=function(e){return SP(bP(e))},vP=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:mP(e.h),s:mP(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:mP(i/2),a:mP(r,2)}},yP=function(e){var t=vP(e);return`hsl(`+t.h+`, `+t.s+`%, `+t.l+`%)`},bP=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),c=r*(1-(1-t+a)*n),l=a%6;return{r:mP(255*[r,s,o,o,c,r][l]),g:mP(255*[c,r,r,s,o,o][l]),b:mP(255*[o,o,c,r,r,s][l]),a:mP(i,2)}},xP=function(e){var t=e.toString(16);return t.length<2?`0`+t:t},SP=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=i<1?xP(mP(255*i)):``;return`#`+xP(t)+xP(n)+xP(r)+a},CP=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:mP(60*(s<0?s+6:s)),s:mP(a?o/a*100:0),v:mP(a/255*100),a:i}},wP=b.memo(function(e){var t=e.hue,n=e.onChange,r=fP([`react-colorful__hue`,e.className]);return b.createElement(`div`,{className:r},b.createElement(dP,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:oP(t+360*e.left,0,360)})},"aria-label":`Hue`,"aria-valuenow":mP(t),"aria-valuemax":`360`,"aria-valuemin":`0`},b.createElement(pP,{className:`react-colorful__hue-pointer`,left:t/360,color:yP({h:t,s:100,v:100,a:1})})))}),TP=b.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:yP({h:t.h,s:100,v:100,a:1})};return b.createElement(`div`,{className:`react-colorful__saturation`,style:r},b.createElement(dP,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:oP(t.s+100*e.left,0,100),v:oP(t.v-100*e.top,0,100)})},"aria-label":`Color`,"aria-valuetext":`Saturation `+mP(t.s)+`%, Brightness `+mP(t.v)+`%`},b.createElement(pP,{className:`react-colorful__saturation-pointer`,top:1-t.v/100,left:t.s/100,color:yP(t)})))}),EP=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},DP=function(e,t){return e.toLowerCase()===t.toLowerCase()||EP(gP(e),gP(t))};function OP(e,t,n){var r=aP(n),i=(0,b.useState)(function(){return e.toHsva(t)}),a=i[0],o=i[1],s=(0,b.useRef)({color:t,hsva:a});(0,b.useEffect)(function(){if(!e.equal(t,s.current.color)){var n=e.toHsva(t);s.current={hsva:n,color:t},o(n)}},[t,e]),(0,b.useEffect)(function(){var t;EP(a,s.current.hsva)||e.equal(t=e.fromHsva(a),s.current.color)||(s.current={hsva:a,color:t},r(t))},[a,e,r]);var c=(0,b.useCallback)(function(e){o(function(t){return Object.assign({},t,e)})},[]);return[a,c]}var kP,AP=typeof window<`u`?b.useLayoutEffect:b.useEffect,jP=function(){return kP||(typeof __webpack_nonce__<`u`?__webpack_nonce__:void 0)},MP=new Map,NP=function(e){AP(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!MP.has(t)){var n=t.createElement(`style`);n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,MP.set(t,n);var r=jP();r&&n.setAttribute(`nonce`,r),t.head.appendChild(n)}},[])},PP=function(e){var t=e.className,n=e.colorModel,r=e.color,i=r===void 0?n.defaultColor:r,a=e.onChange,o=iP(e,[`className`,`colorModel`,`color`,`onChange`]),s=(0,b.useRef)(null);NP(s);var c=OP(n,i,a),l=c[0],u=c[1],d=fP([`react-colorful`,t]);return b.createElement(`div`,rP({},o,{ref:s,className:d}),b.createElement(TP,{hsva:l,onChange:u}),b.createElement(wP,{hue:l.h,onChange:u,className:`react-colorful__last-control`}))},FP={defaultColor:`000`,toHsva:hP,fromHsva:function(e){return _P({h:e.h,s:e.s,v:e.v,a:1})},equal:DP},IP=function(e){return b.createElement(PP,rP({},e,{colorModel:FP}))},LP=e=>/^#([0-9A-Fa-f]{6})$/.test(e??``);function RP({value:e=`#FFFFFF`,onChange:t}){let n=(0,b.useMemo)(()=>typeof e==`string`?e.startsWith(`#`)?e.toUpperCase():`#${e.toUpperCase()}`:`#FFFFFF`,[e]),[r,i]=(0,b.useState)(n);(0,b.useEffect)(()=>{i(n)},[n]);let a=e=>{let n=e.startsWith(`#`)?e.toUpperCase():`#${e.toUpperCase()}`;i(n),t?.(n)},o=e=>{let n=e.target.value.toUpperCase();i(n),LP(n)&&t?.(n)},s=(0,b.useMemo)(()=>LP(r)?r:n,[r,n]);return(0,G.jsxs)(`div`,{className:`color-picker`,children:[(0,G.jsx)(`div`,{className:`color-picker__preview`,children:(0,G.jsx)(IP,{color:s,onChange:a})}),(0,G.jsxs)(`div`,{className:`color-picker__controls`,children:[(0,G.jsx)(`div`,{className:`color-picker__swatch`,style:{backgroundColor:s}}),(0,G.jsx)(`input`,{type:`text`,className:`color-picker__hex-input`,value:r,maxLength:7,onChange:o}),(0,G.jsx)(`button`,{type:`button`,className:`color-picker__pipette`,disabled:!0,children:(0,G.jsx)(em,{size:16,strokeWidth:2.5})})]})]})}const zP=Object.freeze(`Inter.Plus Jakarta Sans.Manrope.DM Sans.Urbanist.Mulish.Outfit.Red Hat Display.Lexend.Public Sans.Figtree.DM Serif Display.Fraunces.Spectral.Lora.Crimson Pro.Alegreya.Bodoni Moda.Cormorant Infant.Archivo Black.Space Grotesk.Syne.Unbounded.Sacramento.Allura.Dancing Script.Satisfy.Caveat.Patrick Hand.Archivo Narrow.Encode Sans.IBM Plex Sans Condensed.Barlow Condensed.Saira Condensed`.split(`.`));var BP={hidden:{opacity:0,y:16},visible:{opacity:1,y:0}},VP=({title:e,children:t,isOpen:n,onToggle:r})=>(0,G.jsxs)(`div`,{style:{width:`100%`,display:`block`,boxSizing:`border-box`,borderRadius:`16px`,background:`linear-gradient(to bottom right, #ffffff, #fefcfb, rgba(253, 247, 244, 0.8))`,boxShadow:n?`0 4px 20px rgba(224, 183, 169, 0.18)`:`0 2px 12px rgba(224, 183, 169, 0.1)`,overflow:`hidden`,transition:`all 0.3s ease-out`,border:n?`1px solid rgba(224, 183, 169, 0.25)`:`1px solid rgba(224, 183, 169, 0.08)`},children:[(0,G.jsxs)(`button`,{type:`button`,onClick:r,style:{width:`100%`,boxSizing:`border-box`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,padding:`14px 18px`,background:n?`linear-gradient(to right, rgba(253, 247, 244, 0.6), rgba(247, 235, 229, 0.4))`:`transparent`,border:`none`,cursor:`pointer`,transition:`all 0.3s ease-out`},children:[(0,G.jsx)(`h4`,{style:{fontSize:`14px`,fontWeight:600,letterSpacing:`0.02em`,color:n?`#c89585`:`#5a3d38`,margin:0,transition:`color 0.3s ease`},children:e}),(0,G.jsx)(Qf.div,{style:{display:`flex`,alignItems:`center`,justifyContent:`center`,width:`28px`,height:`28px`,borderRadius:`50%`,background:n?`rgba(224, 183, 169, 0.2)`:`rgba(224, 183, 169, 0.1)`,transition:`background 0.3s ease`},animate:{rotate:n?180:0},transition:{duration:.3,ease:`easeInOut`},children:(0,G.jsx)(hp,{size:16,style:{color:n?`#c89585`:`#d4a99a`},strokeWidth:2.5})})]}),(0,G.jsx)(Ls,{children:n&&(0,G.jsx)(Qf.div,{initial:{height:0,opacity:0},animate:{height:`auto`,opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:[.4,0,.2,1],opacity:{duration:.2}},style:{width:`100%`,overflow:`hidden`},children:(0,G.jsx)(`div`,{style:{width:`100%`,padding:`4px 18px 18px 18px`,display:`flex`,flexDirection:`column`,gap:`16px`,fontSize:`14px`,color:`#64748b`},children:t})})})]}),HP=({label:e,children:t})=>(0,G.jsxs)(`label`,{className:`flex w-full flex-col gap-3 text-xs font-bold text-slate-500`,children:[(0,G.jsx)(`span`,{className:`uppercase tracking-[0.2em] text-[#e0b7a9]`,children:e}),t]});function UP({selectedElement:e,canvasBackground:t,onBackgroundChange:n,onUpdateElement:r,onDeleteElement:i,clearSelection:a,onSelectBackgroundPhoto:o=()=>{},onFitBackgroundPhoto:s=()=>{},backgroundPhoto:c=null,onBringToFront:l,onSendToBack:u,onBringForward:d,onSendBackward:f,canvasAspectRatio:p,onCanvasAspectRatioChange:m,showCanvasSizeMode:h=!1,isBackgroundLocked:g=!1,onToggleBackgroundLock:_=()=>{},gradientColor1:v=`#667eea`,gradientColor2:y=`#764ba2`,setGradientColor1:x=()=>{},setGradientColor2:S=()=>{},pendingPhotoTool:C=!1,onConfirmAddPhoto:w=()=>{},onCancelPhotoTool:T=()=>{}}){let[E,D]=(0,b.useState)(``),[O,k]=(0,b.useState)(``),[A,j]=(0,b.useState)(null);(0,b.useEffect)(()=>{e&&(D(Math.round(e.width??0).toString()),k(Math.round(e.height??0).toString()))},[e?.id,e?.width,e?.height]),(0,b.useEffect)(()=>{e?.type===`background-photo`?j(`foto-background`):j(e?`dimensi`:`upload-background`)},[e?.id]);let M=(t,n)=>{if(!e)return;let i=parseFloat(n);if(isNaN(i)||i<=0){t===`width`?D(Math.round(e.width??60).toString()):k(Math.round(e.height??60).toString());return}let a=Math.max(60,Math.round(i));r(e.id,{[t]:a}),t===`width`?D(a.toString()):k(a.toString())},N=()=>(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(VP,{title:`Dimensi`,isOpen:A===`dimensi`,onToggle:()=>j(A===`dimensi`?null:`dimensi`),children:(0,G.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,G.jsx)(HP,{label:`Lebar`,children:(0,G.jsx)(`input`,{type:`number`,className:`rounded-2xl border-2 border-[#e0b7a9]/20 bg-white px-4 py-3 text-slate-700 shadow-[0_2px_8px_rgba(224,183,169,0.08)] transition-all focus:border-[#e0b7a9]/50 focus:shadow-[0_4px_12px_rgba(224,183,169,0.15)] focus:outline-none`,value:E,onChange:e=>D(e.target.value),onKeyDown:e=>{e.key===`Enter`&&(M(`width`,E),e.target.blur())},onBlur:()=>M(`width`,E)})}),(0,G.jsx)(HP,{label:`Tinggi`,children:(0,G.jsx)(`input`,{type:`number`,className:`rounded-2xl border-2 border-[#e0b7a9]/20 bg-white px-4 py-3 text-slate-700 shadow-[0_2px_8px_rgba(224,183,169,0.08)] transition-all focus:border-[#e0b7a9]/50 focus:shadow-[0_4px_12px_rgba(224,183,169,0.15)] focus:outline-none`,value:O,onChange:e=>k(e.target.value),onKeyDown:e=>{e.key===`Enter`&&(M(`height`,O),e.target.blur())},onBlur:()=>M(`height`,O)})})]})})}),P=()=>(0,G.jsxs)(VP,{title:`Pengaturan Teks`,isOpen:A===`pengaturan-teks`,onToggle:()=>j(A===`pengaturan-teks`?null:`pengaturan-teks`),children:[(0,G.jsx)(HP,{label:`Isi Teks`,children:(0,G.jsx)(`textarea`,{rows:3,className:`min-h-[100px] rounded-2xl border-2 border-[#e0b7a9]/20 bg-white px-4 py-3 text-sm text-slate-700 shadow-[0_2px_8px_rgba(224,183,169,0.08)] transition-all focus:border-[#e0b7a9]/50 focus:shadow-[0_4px_12px_rgba(224,183,169,0.15)] focus:outline-none`,value:e.data?.text??``,onChange:t=>r(e.id,{data:{text:t.target.value}})})}),(0,G.jsx)(HP,{label:`Font`,children:(0,G.jsx)(`select`,{className:`w-full rounded-2xl border-2 border-[#e0b7a9]/35 bg-gradient-to-br from-white to-[#fdf7f4]/50 px-4 py-3 text-sm font-semibold text-[#4a302b] shadow-[0_4px_12px_rgba(224,183,169,0.15)] transition-all hover:border-[#d4a99a] hover:shadow-[0_6px_16px_rgba(224,183,169,0.25)] focus:border-[#d4a99a] focus:shadow-[0_6px_20px_rgba(224,183,169,0.3)] focus:outline-none cursor-pointer appearance-none bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23e0b7a9%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22%3e%3cpolyline points=%226 9 12 15 18 9%22%3e%3c/polyline%3e%3c/svg%3e')] bg-[length:20px] bg-[right_12px_center] bg-no-repeat pr-12`,value:e.data?.fontFamily??`Inter`,onChange:t=>r(e.id,{data:{fontFamily:t.target.value}}),children:zP.map(e=>(0,G.jsx)(`option`,{value:e,style:{fontFamily:e},children:e},e))})}),(0,G.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,G.jsxs)(HP,{label:`Ukuran`,children:[(0,G.jsx)(`input`,{type:`range`,min:12,max:64,value:e.data?.fontSize??24,onChange:t=>r(e.id,{data:{fontSize:Number(t.target.value)}})}),(0,G.jsxs)(`div`,{className:`text-xs font-semibold text-slate-500`,children:[e.data?.fontSize??24,`px`]})]}),(0,G.jsx)(HP,{label:`Warna`,children:(0,G.jsx)(RP,{value:e.data?.color??`#1F2933`,onChange:t=>r(e.id,{data:{color:t}})})})]}),(0,G.jsx)(HP,{label:`Perataan`,children:(0,G.jsx)(`div`,{className:`grid grid-cols-3 gap-3`,children:[`left`,`center`,`right`].map(t=>(0,G.jsx)(`button`,{type:`button`,onClick:()=>r(e.id,{data:{align:t}}),className:`rounded-2xl px-4 py-3 text-sm font-bold capitalize transition-all ${e.data?.align===t?`bg-gradient-to-r from-[#e0b7a9] to-[#d4a99a] text-white shadow-[0_4px_12px_rgba(224,183,169,0.3)]`:`border-2 border-[#e0b7a9]/20 bg-white text-slate-600 shadow-[0_2px_6px_rgba(0,0,0,0.04)] hover:border-[#e0b7a9]/40 hover:bg-[#fdf7f4]/50 hover:shadow-[0_4px_12px_rgba(224,183,169,0.15)]`}`,children:t},t))})})]}),ee=[{id:`rectangle`,label:`Kotak`,icon:``},{id:`circle`,label:`Lingkaran`,icon:``},{id:`triangle`,label:`Segitiga`,icon:``},{id:`star`,label:`Bintang`,icon:``},{id:`heart`,label:`Hati`,icon:``},{id:`diamond`,label:`Belah Ketupat`,icon:``},{id:`hexagon`,label:`Segi Enam`,icon:``},{id:`pentagon`,label:`Segi Lima`,icon:``},{id:`octagon`,label:`Segi Delapan`,icon:``},{id:`arrow-right`,label:`Panah Kanan`,icon:``},{id:`arrow-up`,label:`Panah Atas`,icon:``},{id:`cross`,label:`Plus`,icon:``}],F=()=>(0,G.jsx)(VP,{title:`Pilih Bentuk`,isOpen:A===`pilih-bentuk`,onToggle:()=>j(A===`pilih-bentuk`?null:`pilih-bentuk`),children:(0,G.jsx)(`div`,{className:`grid grid-cols-4 gap-2`,children:ee.map(t=>{let n=(e.data?.shapeType||`rectangle`)===t.id;return(0,G.jsxs)(`button`,{type:`button`,onClick:()=>r(e.id,{data:{shapeType:t.id}}),className:`flex flex-col items-center justify-center p-2 rounded-xl transition-all ${n?`bg-gradient-to-br from-[#e0b7a9] to-[#d4a99a] text-white shadow-lg ring-2 ring-[#d4a99a]/50`:`bg-white border-2 border-[#e0b7a9]/20 text-slate-600 hover:border-[#e0b7a9]/40 hover:bg-[#fdf7f4]/50`}`,title:t.label,children:[(0,G.jsx)(`span`,{className:`text-2xl leading-none`,children:t.icon}),(0,G.jsx)(`span`,{className:`text-[9px] mt-1 font-medium truncate w-full text-center`,children:t.label})]},t.id)})})}),I=({showBorderRadius:t=!0}={})=>(0,G.jsxs)(VP,{title:`Warna & Bentuk`,isOpen:A===`warna-bentuk`,onToggle:()=>j(A===`warna-bentuk`?null:`warna-bentuk`),children:[(0,G.jsx)(HP,{label:`Warna Isi`,children:(0,G.jsx)(RP,{value:e.data?.fill??`#F4D3C2`,onChange:t=>r(e.id,{data:{fill:t}})})}),t&&(0,G.jsx)(HP,{label:`Radius`,children:(0,G.jsx)(`input`,{type:`range`,min:0,max:120,value:e.data?.borderRadius??24,onChange:t=>r(e.id,{data:{borderRadius:Number(t.target.value)}})})})]}),L=()=>(0,G.jsx)(VP,{title:`Kelengkungan Sudut`,isOpen:A===`border-radius`,onToggle:()=>j(A===`border-radius`?null:`border-radius`),children:(0,G.jsxs)(HP,{label:`Radius`,children:[(0,G.jsx)(`input`,{type:`range`,min:0,max:120,value:e.data?.borderRadius??24,onChange:t=>r(e.id,{data:{borderRadius:Number(t.target.value)}})}),(0,G.jsxs)(`div`,{className:`text-xs font-semibold text-slate-500`,children:[Math.round(e.data?.borderRadius??24),`px`]})]})}),R=({defaultColor:t=`#d9b9ab`,maxWidth:n=24}={})=>{let i=Number(e.data?.strokeWidth??0),a=typeof e.data?.stroke==`string`&&e.data.stroke.length>0?e.data.stroke:t;return(0,G.jsxs)(VP,{title:`Outline`,isOpen:A===`outline`,onToggle:()=>j(A===`outline`?null:`outline`),children:[(0,G.jsxs)(HP,{label:`Ketebalan`,children:[(0,G.jsx)(`input`,{type:`range`,min:0,max:n,value:i,onChange:t=>{let n=Number(t.target.value);if(!Number.isFinite(n))return;let i={strokeWidth:Math.max(0,n)};n>0&&!e.data?.stroke&&(i.stroke=a),r(e.id,{data:i})}}),(0,G.jsxs)(`div`,{className:`text-xs font-semibold text-slate-500`,children:[Math.round(i),`px`]})]}),(0,G.jsx)(HP,{label:`Warna Outline`,children:(0,G.jsx)(RP,{value:a,onChange:t=>r(e.id,{data:{stroke:t}})})})]})};return e===`background`?(0,G.jsxs)(Qf.div,{variants:BP,initial:`hidden`,animate:`visible`,className:`flex h-full w-full flex-col gap-3`,children:[(0,G.jsx)(`div`,{className:`w-full px-4 py-3`,children:(0,G.jsx)(`button`,{type:`button`,onClick:_,className:`w-full flex items-center justify-center gap-2 rounded-xl px-4 py-3 font-medium transition-all duration-200 ${g?`bg-gradient-to-r from-red-50 to-red-100 text-red-700 border-2 border-red-300 hover:from-red-100 hover:to-red-200`:`bg-gradient-to-r from-green-50 to-green-100 text-green-700 border-2 border-green-300 hover:from-green-100 hover:to-green-200`}`,style:{fontSize:`14px`},children:g?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Up,{size:18}),(0,G.jsx)(`span`,{children:`Background Terkunci`})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Hp,{size:18}),(0,G.jsx)(`span`,{children:`Kunci Background`})]})})}),(0,G.jsx)(VP,{title:`Upload Background`,isOpen:A===`upload-background`,onToggle:()=>j(A===`upload-background`?null:`upload-background`),children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,style:{margin:`16px 0`},children:[(0,G.jsxs)(`button`,{type:`button`,id:`upload-bg-btn-v4-final`,"data-version":`4.0`,"data-timestamp":Date.now(),onClick:()=>{if(e===`background`&&typeof window<`u`){let e=new CustomEvent(`creator:request-background-upload`);window.dispatchEvent(e)}},style:{padding:`12px 16px`,fontSize:`14px`,minHeight:`44px`,fontWeight:`600`,background:`linear-gradient(135deg, #f5e5df 0%, #ecddd5 50%, #e8d4c9 100%)`,color:`#4a302b`,border:`1px solid rgba(224, 183, 169, 0.3)`,borderRadius:`14px`,boxShadow:`0 3px 12px rgba(224, 183, 169, 0.15)`,cursor:`pointer`,transition:`all 0.3s ease`,width:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`8px`},className:`group relative overflow-hidden upload-bg-v4`,onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-1px)`,e.currentTarget.style.boxShadow=`0 5px 16px rgba(224, 183, 169, 0.25)`,e.currentTarget.style.background=`linear-gradient(135deg, #ecddd5 0%, #e8d4c9 50%, #e0c5b8 100%)`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`0 3px 12px rgba(224, 183, 169, 0.15)`,e.currentTarget.style.background=`linear-gradient(135deg, #f5e5df 0%, #ecddd5 50%, #e8d4c9 100%)`},children:[(0,G.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 pointer-events-none`}),(0,G.jsx)(`span`,{style:{fontSize:`16px`},children:``}),(0,G.jsx)(`span`,{className:`relative z-10`,children:`Unggah Background`})]}),c&&(0,G.jsxs)(`div`,{className:`w-full flex flex-col gap-3`,children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>o?.(),style:{padding:`14px 20px`,fontSize:`15px`},className:`w-full flex items-center justify-center rounded-xl border-2 border-[#e0b7a9]/40 bg-white text-[#4a302b] font-medium shadow-sm transition-all duration-200 hover:bg-[#fdf7f4] hover:border-[#e0b7a9]/60 hover:shadow-md`,children:`Edit foto background`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>s?.(),style:{padding:`14px 20px`,fontSize:`15px`},className:`w-full flex items-center justify-center rounded-xl border-2 border-[#e0b7a9]/40 bg-white text-[#4a302b] font-medium shadow-sm transition-all duration-200 hover:bg-[#fdf7f4] hover:border-[#e0b7a9]/60 hover:shadow-md`,children:`Sesuaikan ke kanvas`})]})]})}),(0,G.jsx)(VP,{title:`Warna Latar`,isOpen:A===`warna-latar`,onToggle:()=>j(A===`warna-latar`?null:`warna-latar`),children:(0,G.jsx)(`div`,{className:`flex flex-col gap-3`,children:(()=>{let e=t?.startsWith(`linear-gradient`)||t?.startsWith(`radial-gradient`),r=e?`#ffffff`:t||`#ffffff`;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{className:`flex gap-2`,children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>n(r),className:`flex-1 px-3 py-2 text-xs font-semibold rounded-lg transition-all ${e?`bg-white text-slate-600 border border-slate-200 hover:bg-slate-50`:`bg-purple-100 text-purple-700 border-2 border-purple-500`}`,children:`Solid`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>n(`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`),className:`flex-1 px-3 py-2 text-xs font-semibold rounded-lg transition-all ${e?`bg-purple-100 text-purple-700 border-2 border-purple-500`:`bg-white text-slate-600 border border-slate-200 hover:bg-slate-50`}`,children:`Gradient`})]}),e?(0,G.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,G.jsx)(`div`,{className:`h-20 rounded-xl border-2 border-slate-200 shadow-md`,style:{background:`linear-gradient(135deg, ${v} 0%, ${y} 100%)`}}),(0,G.jsxs)(`div`,{className:`flex flex-col gap-1.5`,children:[(0,G.jsx)(`div`,{className:`text-xs font-semibold text-slate-600`,children:`Warna Titik 1:`}),(0,G.jsx)(RP,{value:v,onChange:e=>{x(e),n(`linear-gradient(135deg, ${e} 0%, ${y} 100%)`)}})]}),(0,G.jsxs)(`div`,{className:`flex flex-col gap-1.5`,children:[(0,G.jsx)(`div`,{className:`text-xs font-semibold text-slate-600`,children:`Warna Titik 2:`}),(0,G.jsx)(RP,{value:y,onChange:e=>{S(e),n(`linear-gradient(135deg, ${v} 0%, ${e} 100%)`)}})]}),(0,G.jsx)(`div`,{className:`text-xs font-semibold text-slate-700 mt-1`,children:`Quick Presets:`}),(0,G.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:[{name:`Purple`,c1:`#667eea`,c2:`#764ba2`},{name:`Ocean`,c1:`#667eea`,c2:`#0093E9`},{name:`Sunset`,c1:`#f093fb`,c2:`#f5576c`},{name:`Forest`,c1:`#11998e`,c2:`#38ef7d`},{name:`Pink`,c1:`#FA8BFF`,c2:`#2BD2FF`},{name:`Gold`,c1:`#FFB75E`,c2:`#ED8F03`}].map(e=>(0,G.jsx)(`button`,{type:`button`,onClick:()=>{x(e.c1),S(e.c2),n(`linear-gradient(135deg, ${e.c1} 0%, ${e.c2} 100%)`)},className:`relative h-14 rounded-lg overflow-hidden ring-1 ring-slate-200 hover:ring-purple-300 transition-all`,style:{background:`linear-gradient(135deg, ${e.c1} 0%, ${e.c2} 100%)`},children:(0,G.jsx)(`span`,{className:`absolute bottom-1 left-1/2 -translate-x-1/2 text-[9px] font-bold text-white drop-shadow-md whitespace-nowrap`,children:e.name})},e.name))})]}):(0,G.jsx)(RP,{value:r,onChange:n})]})})()})}),(0,G.jsx)(VP,{title:`Ukuran Canvas`,isOpen:A===`ukuran-canvas`,onToggle:()=>j(A===`ukuran-canvas`?null:`ukuran-canvas`),children:(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:[{label:`Story Instagram`,ratio:`9:16`,desc:`1080  1920`,icon:``},{label:`Instagram Feeds`,ratio:`4:5`,desc:`1080  1350`,icon:``},{label:`Photostrip`,ratio:`2:3`,desc:`1200  1800`,icon:``}].map(e=>{let t=p===e.ratio;return(0,G.jsx)(`button`,{onClick:()=>m?.(e.ratio),style:{padding:`14px 16px`,borderRadius:`14px`,border:t?`2px solid #d4a99a`:`1px solid rgba(224, 183, 169, 0.15)`,background:t?`linear-gradient(135deg, #fdf7f4 0%, #f7ebe5 50%, #f1dfd6 100%)`:`linear-gradient(135deg, #ffffff 0%, #fefcfb 100%)`,cursor:`pointer`,textAlign:`left`,transition:`all 0.25s ease`,boxShadow:t?`0 4px 16px rgba(212, 169, 154, 0.25), inset 0 1px 0 rgba(255,255,255,0.8)`:`0 2px 8px rgba(224, 183, 169, 0.08)`,transform:t?`scale(1.02)`:`scale(1)`},onMouseEnter:e=>{t||(e.currentTarget.style.border=`1px solid rgba(224, 183, 169, 0.35)`,e.currentTarget.style.background=`linear-gradient(135deg, #fefcfb 0%, #fdf7f4 100%)`,e.currentTarget.style.boxShadow=`0 4px 12px rgba(224, 183, 169, 0.15)`,e.currentTarget.style.transform=`translateY(-1px)`)},onMouseLeave:e=>{t||(e.currentTarget.style.border=`1px solid rgba(224, 183, 169, 0.15)`,e.currentTarget.style.background=`linear-gradient(135deg, #ffffff 0%, #fefcfb 100%)`,e.currentTarget.style.boxShadow=`0 2px 8px rgba(224, 183, 169, 0.08)`,e.currentTarget.style.transform=`scale(1)`)},children:(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsx)(`span`,{style:{fontSize:`20px`},children:e.icon}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{style:{fontWeight:t?700:600,fontSize:`14px`,color:t?`#4a302b`:`#5a3d38`,marginBottom:`2px`},children:e.label}),(0,G.jsx)(`div`,{style:{fontSize:`12px`,color:t?`#c89585`:`#9ca3af`,fontWeight:500},children:e.desc})]})]}),t&&(0,G.jsx)(`div`,{style:{width:`24px`,height:`24px`,borderRadius:`50%`,background:`linear-gradient(135deg, #e0b7a9 0%, #d4a99a 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:`0 2px 8px rgba(212, 169, 154, 0.4)`},children:(0,G.jsx)(`svg`,{width:`12`,height:`12`,viewBox:`0 0 12 12`,fill:`none`,children:(0,G.jsx)(`path`,{d:`M10 3L4.5 8.5L2 6`,stroke:`white`,strokeWidth:`2.5`,strokeLinecap:`round`,strokeLinejoin:`round`})})})]})},e.ratio)})}),(0,G.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #fdf7f4 0%, #f7ebe5 50%, #f1dfd6 100%)`,borderRadius:`14px`,padding:`14px 16px`,border:`1px solid rgba(224, 183, 169, 0.2)`,boxShadow:`inset 0 1px 0 rgba(255,255,255,0.6)`},children:[(0,G.jsx)(`div`,{style:{fontSize:`11px`,fontWeight:700,color:`#c89585`,textTransform:`uppercase`,letterSpacing:`0.08em`,marginBottom:`4px`},children:`Rasio Saat Ini`}),(0,G.jsx)(`div`,{style:{fontSize:`22px`,fontWeight:800,color:`#4a302b`,letterSpacing:`-0.02em`},children:p})]})]})})]}):h?(0,G.jsx)(Qf.div,{variants:BP,initial:`hidden`,animate:`visible`,className:`flex h-full w-full flex-col gap-3`,children:(0,G.jsx)(VP,{title:`Ukuran Canvas`,isOpen:!0,onToggle:()=>{},children:(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:[{label:`Story Instagram`,ratio:`9:16`,desc:`1080  1920`,icon:``},{label:`Instagram Feeds`,ratio:`4:5`,desc:`1080  1350`,icon:``},{label:`Photostrip`,ratio:`2:3`,desc:`1200  1800`,icon:``}].map(e=>{let t=p===e.ratio;return(0,G.jsx)(`button`,{onClick:()=>m?.(e.ratio),style:{padding:`14px 16px`,borderRadius:`14px`,border:t?`2px solid #d4a99a`:`1px solid rgba(224, 183, 169, 0.15)`,background:t?`linear-gradient(135deg, #fdf7f4 0%, #f7ebe5 50%, #f1dfd6 100%)`:`linear-gradient(135deg, #ffffff 0%, #fefcfb 100%)`,cursor:`pointer`,textAlign:`left`,transition:`all 0.25s ease`,boxShadow:t?`0 4px 16px rgba(212, 169, 154, 0.25), inset 0 1px 0 rgba(255,255,255,0.8)`:`0 2px 8px rgba(224, 183, 169, 0.08)`,transform:t?`scale(1.02)`:`scale(1)`},onMouseEnter:e=>{t||(e.currentTarget.style.border=`1px solid rgba(224, 183, 169, 0.35)`,e.currentTarget.style.background=`linear-gradient(135deg, #fefcfb 0%, #fdf7f4 100%)`,e.currentTarget.style.boxShadow=`0 4px 12px rgba(224, 183, 169, 0.15)`,e.currentTarget.style.transform=`translateY(-1px)`)},onMouseLeave:e=>{t||(e.currentTarget.style.border=`1px solid rgba(224, 183, 169, 0.15)`,e.currentTarget.style.background=`linear-gradient(135deg, #ffffff 0%, #fefcfb 100%)`,e.currentTarget.style.boxShadow=`0 2px 8px rgba(224, 183, 169, 0.08)`,e.currentTarget.style.transform=`scale(1)`)},children:(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsx)(`span`,{style:{fontSize:`20px`},children:e.icon}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{style:{fontWeight:t?700:600,fontSize:`14px`,color:t?`#4a302b`:`#5a3d38`,marginBottom:`2px`},children:e.label}),(0,G.jsx)(`div`,{style:{fontSize:`12px`,color:t?`#c89585`:`#9ca3af`,fontWeight:500},children:e.desc})]})]}),t&&(0,G.jsx)(`div`,{style:{width:`24px`,height:`24px`,borderRadius:`50%`,background:`linear-gradient(135deg, #e0b7a9 0%, #d4a99a 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:`0 2px 8px rgba(212, 169, 154, 0.4)`},children:(0,G.jsx)(`svg`,{width:`12`,height:`12`,viewBox:`0 0 12 12`,fill:`none`,children:(0,G.jsx)(`path`,{d:`M10 3L4.5 8.5L2 6`,stroke:`white`,strokeWidth:`2.5`,strokeLinecap:`round`,strokeLinejoin:`round`})})})]})},e.ratio)})}),(0,G.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #fdf7f4 0%, #f7ebe5 50%, #f1dfd6 100%)`,borderRadius:`14px`,padding:`14px 16px`,border:`1px solid rgba(224, 183, 169, 0.2)`,boxShadow:`inset 0 1px 0 rgba(255,255,255,0.6)`},children:[(0,G.jsx)(`div`,{style:{fontSize:`11px`,fontWeight:700,color:`#c89585`,textTransform:`uppercase`,letterSpacing:`0.08em`,marginBottom:`4px`},children:`Rasio Saat Ini`}),(0,G.jsx)(`div`,{style:{fontSize:`22px`,fontWeight:800,color:`#4a302b`,letterSpacing:`-0.02em`},children:p})]})]})})}):C?(0,G.jsx)(Qf.div,{variants:BP,initial:`hidden`,animate:`visible`,className:`flex h-full w-full flex-col gap-3`,children:(0,G.jsx)(VP,{title:`Area Foto`,isOpen:!0,onToggle:()=>{},children:(0,G.jsxs)(`div`,{className:`flex flex-col gap-4`,children:[(0,G.jsx)(`div`,{className:`bg-gradient-to-br from-[#fdf7f4] to-[#f5e5df] rounded-xl p-4 border border-[#e0b7a9]/20`,children:(0,G.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[`Area Foto adalah tempat dimana foto yang diambil di halaman `,(0,G.jsx)(`strong`,{children:`TakeMoment`}),` akan ditampilkan dalam frame.`]})}),(0,G.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,G.jsx)(`label`,{className:`text-xs font-bold uppercase tracking-wider text-[#e0b7a9]`,children:`Pilih Layout Grid`}),(0,G.jsx)(`div`,{className:`grid grid-cols-4 gap-2`,children:[{rows:1,cols:1,label:`11`},{rows:2,cols:1,label:`21`},{rows:2,cols:2,label:`22`},{rows:3,cols:2,label:`32`}].map(e=>(0,G.jsxs)(`button`,{type:`button`,onClick:()=>w(e.rows,e.cols),className:`flex flex-col items-center justify-center gap-1 rounded-xl border-2 border-[#e0b7a9]/30 bg-white p-3 transition-all hover:border-[#e0b7a9] hover:bg-[#fdf7f4] hover:shadow-md active:scale-95`,children:[(0,G.jsx)(`div`,{className:`grid gap-0.5 w-10 h-12 p-0.5`,style:{gridTemplateRows:`repeat(${e.rows}, 1fr)`,gridTemplateColumns:`repeat(${e.cols}, 1fr)`},children:Array.from({length:e.rows*e.cols}).map((e,t)=>(0,G.jsx)(`div`,{className:`bg-[#d1e3f0] rounded-sm border border-[#a8c8e0]`},t))}),(0,G.jsx)(`span`,{className:`text-xs font-semibold text-slate-600`,children:e.label})]},e.label))})]}),(0,G.jsx)(`div`,{className:`bg-blue-50 rounded-xl p-3 border border-blue-200`,children:(0,G.jsxs)(`p`,{className:`text-xs text-blue-700 font-medium`,children:[` `,(0,G.jsx)(`strong`,{children:`Tips:`}),` Pilih layout grid untuk menambahkan beberapa area foto sekaligus dengan susunan simetris.`]})}),(0,G.jsxs)(`button`,{type:`button`,onClick:T,className:`flex items-center justify-center gap-2 rounded-xl border-2 border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-600 transition-all hover:border-slate-300 hover:bg-slate-50 active:scale-95`,children:[(0,G.jsx)(Cm,{size:16}),`Batal`]})]})})}):e?(0,G.jsxs)(Qf.div,{variants:BP,initial:`hidden`,animate:`visible`,className:`flex h-full flex-col gap-3`,children:[e.type===`text`&&P(),e.type===`shape`&&(0,G.jsxs)(G.Fragment,{children:[F(),I({showBorderRadius:(e.data?.shapeType||`rectangle`)===`rectangle`}),R({defaultColor:`#d9b9ab`,maxWidth:32})]}),e.type===`photo`&&(0,G.jsx)(G.Fragment,{children:L()}),e.type===`upload`&&(0,G.jsxs)(G.Fragment,{children:[(()=>(0,G.jsxs)(VP,{title:`Gambar`,isOpen:A===`gambar`,onToggle:()=>j(A===`gambar`?null:`gambar`),children:[(0,G.jsx)(HP,{label:`Objek Fit`,children:(0,G.jsxs)(`select`,{className:`w-full rounded-2xl border-2 border-[#e0b7a9]/35 bg-gradient-to-br from-white to-[#fdf7f4]/50 px-4 py-3 text-sm font-semibold text-[#4a302b] shadow-[0_4px_12px_rgba(224,183,169,0.15)] transition-all hover:border-[#d4a99a] hover:shadow-[0_6px_16px_rgba(224,183,169,0.25)] focus:border-[#d4a99a] focus:shadow-[0_6px_20px_rgba(224,183,169,0.3)] focus:outline-none cursor-pointer appearance-none bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23e0b7a9%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22%3e%3cpolyline points=%226 9 12 15 18 9%22%3e%3c/polyline%3e%3c/svg%3e')] bg-[length:20px] bg-[right_12px_center] bg-no-repeat pr-12`,value:e.data?.objectFit??`contain`,onChange:t=>r(e.id,{data:{objectFit:t.target.value}}),children:[(0,G.jsx)(`option`,{value:`cover`,children:`Cover`}),(0,G.jsx)(`option`,{value:`contain`,children:`Contain`}),(0,G.jsx)(`option`,{value:`fill`,children:`Fill`})]})}),e.data?.image&&(0,G.jsxs)(`button`,{type:`button`,className:`flex items-center justify-center gap-2 rounded-xl border border-rose-100 bg-rose-50/90 px-3 py-2 text-xs font-semibold text-rose-600`,onClick:()=>r(e.id,{data:{image:null}}),children:[(0,G.jsx)(Cm,{size:14}),` Hapus gambar`]})]}))(),I({showBorderRadius:!0}),R({defaultColor:`#f4f4f4`,maxWidth:24})]}),e.type===`background-photo`&&(()=>(0,G.jsxs)(VP,{title:`Foto Background`,isOpen:A===`foto-background`,onToggle:()=>j(A===`foto-background`?null:`foto-background`),children:[(0,G.jsx)(HP,{label:`Mode Isi`,children:(0,G.jsxs)(`select`,{className:`w-full rounded-2xl border-2 border-[#e0b7a9]/35 bg-gradient-to-br from-white to-[#fdf7f4]/50 px-4 py-3 text-sm font-semibold text-[#4a302b] shadow-[0_4px_12px_rgba(224,183,169,0.15)] transition-all hover:border-[#d4a99a] hover:shadow-[0_6px_16px_rgba(224,183,169,0.25)] focus:border-[#d4a99a] focus:shadow-[0_6px_20px_rgba(224,183,169,0.3)] focus:outline-none cursor-pointer appearance-none bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23e0b7a9%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22%3e%3cpolyline points=%226 9 12 15 18 9%22%3e%3c/polyline%3e%3c/svg%3e')] bg-[length:20px] bg-[right_12px_center] bg-no-repeat pr-12`,value:e.data?.objectFit??`contain`,onChange:t=>r(e.id,{data:{objectFit:t.target.value}}),children:[(0,G.jsx)(`option`,{value:`cover`,children:`Cover`}),(0,G.jsx)(`option`,{value:`contain`,children:`Contain`}),(0,G.jsx)(`option`,{value:`fill`,children:`Fill`})]})}),(0,G.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>{if(typeof window<`u`){let e=new CustomEvent(`creator:request-background-upload`);window.dispatchEvent(e)}},className:`flex items-center justify-center gap-3 rounded-2xl border-2 border-[#e0b7a9]/40 bg-gradient-to-r from-[#f7e3da] to-[#f1cfc0] px-5 py-3 text-sm font-semibold text-[#4a302b] shadow-[0_6px_16px_rgba(224,183,169,0.25)] transition-all hover:translate-y-[-2px] hover:shadow-[0_12px_26px_rgba(224,183,169,0.35)]`,children:`Ganti foto background`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>s?.(),className:`flex items-center justify-center gap-3 rounded-2xl border-2 border-[#e0b7a9]/40 bg-white px-5 py-3 text-sm font-semibold text-[#4a302b] shadow-[0_4px_12px_rgba(224,183,169,0.18)] transition-all hover:translate-y-[-2px] hover:shadow-[0_10px_24px_rgba(224,183,169,0.24)]`,children:`Sesuaikan ke kanvas`}),e.data?.image&&(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{i(e.id),a()},className:`flex items-center justify-center gap-3 rounded-2xl border-2 border-red-200/50 bg-gradient-to-r from-red-50 to-red-100/60 px-5 py-3 text-sm font-semibold text-red-600 shadow-[0_4px_12px_rgba(239,68,68,0.18)] transition-all hover:translate-y-[-2px] hover:shadow-[0_10px_22px_rgba(239,68,68,0.25)]`,children:[(0,G.jsx)(Cm,{size:14}),` Hapus foto background`]})]})]}))(),e.type!==`background-photo`&&N(),(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{i(e.id),a()},className:`mt-auto flex items-center justify-center gap-3 rounded-2xl border-2 border-red-200/50 bg-gradient-to-r from-red-50 to-red-100/50 px-5 py-4 text-sm font-bold text-red-600 shadow-[0_4px_12px_rgba(239,68,68,0.15)] transition-all hover:border-red-300 hover:bg-gradient-to-r hover:from-red-100 hover:to-red-100 hover:shadow-[0_6px_16px_rgba(239,68,68,0.25)] active:scale-95`,children:[(0,G.jsx)(hm,{size:18,strokeWidth:2.5}),` Hapus Element`]})]}):(()=>(0,G.jsxs)(Qf.div,{variants:BP,initial:`hidden`,animate:`visible`,className:`flex h-full flex-col items-center justify-center gap-4 rounded-[24px] border-2 border-[#e0b7a9]/15 bg-gradient-to-br from-white/95 via-white/90 to-[#fdf7f4]/50 p-8 text-center text-sm text-slate-500 shadow-[0_12px_32px_rgba(224,183,169,0.12)] backdrop-blur-sm`,children:[(0,G.jsx)(`p`,{className:`font-semibold text-slate-600`,children:`Pilih elemen di kanvas untuk mengubah properti di sini.`}),(0,G.jsx)(`p`,{className:`text-xs font-medium text-[#e0b7a9]`,children:` Tip: klik tombol Background untuk mengganti warna dasar kanvas.`})]}))()}var WP=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},GP=(e=>e?WP(e):WP),KP=e=>e;function qP(e,t=KP){let n=b.useSyncExternalStore(e.subscribe,b.useCallback(()=>t(e.getState()),[e,t]),b.useCallback(()=>t(e.getInitialState()),[e,t]));return b.useDebugValue(n),n}var JP=e=>{let t=GP(e),n=e=>qP(t,e);return Object.assign(n,t),n},YP=(e=>e?JP(e):JP),XP=`#f7f1ed`,ZP=480,QP=853,$P=UM/ZP,eF=WM/QP,tF=($P+eF)/2,nF=e=>Math.round(e*$P),rF=e=>Math.round(e*eF),iF=e=>Math.round(e*tF),aF=()=>typeof crypto<`u`&&crypto.randomUUID?crypto.randomUUID():`el-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,oF=(e,t={})=>({id:aF(),type:e,x:nF(80),y:rF(80),width:nF(160),height:rF(160),rotation:0,zIndex:1,isLocked:!1,data:{},...t}),sF=e=>{switch(e){case`photo`:return{width:nF(220),height:rF(280),data:{fill:`#d1e3f0`,borderRadius:iF(24),stroke:null,strokeWidth:0,label:`Foto`}};case`text`:return{width:nF(320),height:rF(90),data:{text:`Judul Baru`,fontSize:iF(28),fontFamily:`Inter`,color:`#1f2933`,align:`center`,fontWeight:600}};case`shape`:return{width:nF(200),height:rF(200),data:{fill:`#f4d3c2`,borderRadius:iF(32),stroke:null,strokeWidth:0,shapeType:`rectangle`}};case`upload`:return{width:JM,height:YM,data:{image:null,objectFit:`contain`,label:`Unggahan`,fill:`#d1e3f0`,borderRadius:0,stroke:null,strokeWidth:0}};case`background-photo`:return{x:0,y:0,width:UM,height:WM,zIndex:0,data:{image:null,objectFit:`contain`,aspectRatio:UM/WM,label:`Background`}};default:return{}}},cF=(e,t,n)=>{if(e===`background-photo`)return 0;if(e===`photo`)return typeof t?.zIndex==`number`?t.zIndex:0;if(typeof t?.zIndex==`number`)return t.zIndex;let r=Number.isFinite(n)?n:1;return Math.max(r+1,1)},lF=(e,t=UM,n=WM)=>{if(!Number.isFinite(e)||e<=0)return{width:t,height:n};let r=t,i=r/e;return i>n&&(i=n,r=i*e),{width:Math.round(r),height:Math.round(i)}},uF=(e,t)=>({x:Math.round((UM-e)/2),y:Math.round((WM-t)/2)}),dF=e=>!!e?.data?.__capturedOverlay,fF=e=>(Number.isFinite(e?.zIndex)?e.zIndex:1)+lN,pF=(e,t)=>{if(!e||!t)return null;let n=Number.isFinite(t?.x)?t.x:0,r=Number.isFinite(t?.y)?t.y:0,i=Number.isFinite(t?.width)?t.width:0,a=Number.isFinite(t?.height)?t.height:0,o=fF(t),s=e.data||{},c=Number.isFinite(t?.data?.borderRadius)?t.data.borderRadius:s.borderRadius??0,l=t.id||null,u=Number.isFinite(t?.rotation)?t.rotation:0;return(Number.isFinite(e.x)?e.x:0)!==n||(Number.isFinite(e.y)?e.y:0)!==r||(Number.isFinite(e.width)?e.width:0)!==i||(Number.isFinite(e.height)?e.height:0)!==a||(Number.isFinite(e.rotation)?e.rotation:0)!==u||e.zIndex!==o||e.isLocked!==!0||s.borderRadius!==c||s.__sourcePlaceholderId!==l?{...e,x:n,y:r,width:i,height:a,rotation:u,zIndex:o,isLocked:!0,data:{...s,borderRadius:c,__sourcePlaceholderId:l}}:e},mF=(e=[],t)=>!t||!Array.isArray(e)?e:e.filter(e=>dF(e)?e?.data?.__sourcePlaceholderId!==t:!0),hF=(e=[])=>{if(!Array.isArray(e)||e.length===0)return e;let t=new Map,n=[],r=!1;return e.forEach(e=>{if(dF(e)){let n=e?.data?.__sourcePlaceholderId;n&&t.set(n,e)}}),t.size===0?e:(e.forEach(e=>{if(!dF(e)){if(e?.type===`photo`&&e.id){let i=t.get(e.id);if(i){let a=pF(i,e);a!==i&&(r=!0),n.push(a),t.delete(e.id)}}n.push(e)}}),t.size>0&&(r=!0),r?n:e)},gF=(e=[])=>e,_F=e=>{if(!Array.isArray(e)||e.length===0)return e;let t=e.reduce((e,t)=>{if(!t||t.type===`background-photo`||t.type===`photo`)return e;let n=Number.isFinite(t.zIndex)?t.zIndex:null;return n!==null&&n>=1&&n>e?n:e},0),n=!1,r=e.map(e=>{if(!e)return e;if(e.type===`background-photo`){let t=cN;return e.zIndex===t?e:(n=!0,{...e,zIndex:t})}if(Number.isFinite(e.zIndex))return t=e.zIndex>t?e.zIndex:t,e;if(e.type===`photo`||e.type===`upload`)return n=!0,{...e,zIndex:0};let r=Math.max(t+1,1);return t=r,n=!0,{...e,zIndex:r}});return n?r:e},vF=e=>{let t=hF(e),n=gF(t),r=_F(n);return hF(r)};console.log(`[useCreatorStore] Store module loaded`);var yF=YP((e,t)=>({elements:[],selectedElementId:null,canvasBackground:XP,lastZIndex:1,addElement:(n,r={})=>{let i=sF(n),a={...i.data||{},...r.data||{}};if(n===`photo`&&typeof a.photoIndex!=`number`){let e=t().elements.filter(e=>e.type===`photo`).length;a.photoIndex=e,console.log(` [addElement] Auto-assigned photoIndex ${e} to new photo element`)}let o=t().lastZIndex,s=cF(n,i,o),c=typeof r.zIndex==`number`?r.zIndex:s,l=oF(n,{...i,...r,data:a,zIndex:c});return e(e=>{let t=vF([...e.elements,l]),r=n===`photo`||n===`background-photo`?e.lastZIndex:c>e.lastZIndex?c:e.lastZIndex;return{elements:t,selectedElementId:l.id,lastZIndex:r}}),l.id},addUploadElement:n=>{let r=`upload_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i=new Image;return i.onload=()=>{let a=i.width/i.height;UM/3,WM/3;let o,s;i.width/360>i.height/640?(o=360,s=o/a):(s=640,o=s*a);let c=document.createElement(`canvas`);c.width=Math.round(o),c.height=Math.round(s);let l=c.getContext(`2d`,{alpha:!0});l.clearRect(0,0,c.width,c.height),l.drawImage(i,0,0,Math.round(o),Math.round(s));let u=c.toDataURL(`image/png`),d=Math.round((UM-o)/2),f=Math.round((WM-s)/2),p=t().lastZIndex+1,m={id:r,type:`upload`,x:d,y:f,width:Math.round(o),height:Math.round(s),zIndex:p,locked:!1,data:{image:u,originalImage:n,imageAspectRatio:a,objectFit:`contain`,label:`Unggahan`,borderRadius:0}};e(e=>({elements:vF([...e.elements,m]),selectedElementId:r,lastZIndex:p}))},i.onerror=()=>{console.error(`[addUploadElement] Failed to load image`),t().addElement(`upload`,{x:Math.round((UM-JM)/2),y:Math.round((WM-YM)/2),data:{image:n,objectFit:`contain`,label:`Unggahan`}})},i.src=n,r},addBackgroundPhoto:(n,r={})=>{let i=t().elements.find(e=>e.type===`background-photo`),a=r.canvasWidth||1080,o=r.canvasHeight||1920,s=new Image;s.src=n;let c=()=>{let t=s.width/s.height,r=a/o,i,c;t>r?(c=o,i=c*t):(i=a,c=i/t);let l=Math.round((a-i)/2),u=Math.round((o-c)/2),d={image:n,objectFit:`cover`,imageAspectRatio:t,label:`Background`};e(e=>{let t=e.elements.find(e=>e.type===`background-photo`);if(!t)return console.log(`[addBackgroundPhoto] No background element found, will be created in sync path`),e;let n=!1,r=e.elements.map(e=>{if(e.id===t.id)return n=!0,{...e,x:l,y:u,width:Math.round(i),height:Math.round(c),zIndex:0,data:{...e.data,...d}};if(e.type===`background-photo`)return e;let r;return e.type===`photo`||e.type===`upload`?(cN+1,r=e.zIndex===void 0?PHOTO_SLOT_MIN_Z:Math.max(e.zIndex,-3999)):r=e.zIndex===void 0?1:Math.max(e.zIndex,1),r===e.zIndex?e:(n=!0,{...e,zIndex:r})});return n?{elements:vF(r)}:e})};if(i){let t=i.id;return e(e=>{let r=e.elements.map(e=>e.id===t?{...e,data:{...e.data,image:n,label:`Background`}}:e);return{elements:vF(r)}}),s.complete?c():s.onload=c,t}let l=Number(r.aspectRatio),u=(Number.isFinite(l)&&l>0?l:void 0)||a/o,d=lF(u),f=uF(d.width,d.height),p=t().addElement(`background-photo`,{...f,zIndex:cN,data:{image:n,objectFit:`cover`,label:`Background`},width:d.width,height:d.height});return s.complete?c():s.onload=c,e(e=>{let t=e.elements.map(e=>e.id===p?{...e,zIndex:cN}:e),n=vF(t),r=n.reduce((e,t)=>{if(t.type===`background-photo`||t.type===`photo`)return e;let n=Number.isFinite(t.zIndex)?t.zIndex:e;return n>e?n:e},e.lastZIndex),i=Math.max(r,e.lastZIndex,1);return{elements:n,lastZIndex:i}}),p},fitBackgroundPhotoToCanvas:(n={})=>{let r=t().elements.find(e=>e.type===`background-photo`);if(!r)return;let i=n.canvasWidth||1080,a=n.canvasHeight||1920,o=Number(r.data?.imageAspectRatio)>0?r.data.imageAspectRatio:r.width>0&&r.height>0?r.width/r.height:i/a,s=i/a,c,l;o>s?(l=a,c=l*o):(c=i,l=c/o);let u={x:Math.round((i-c)/2),y:Math.round((a-l)/2)};e(e=>{let t=e.elements.map(e=>e.id===r.id?{...e,width:Math.round(c),height:Math.round(l),...u,data:{...e.data,objectFit:`cover`}}:e);return{elements:vF(t),selectedElementId:r.id}})},updateElement:(t,n)=>{e(e=>{let r=null,i=e.elements.map(e=>{if(e.id!==t)return e;let i={...n};e.type===`background-photo`&&(delete i.zIndex,i.zIndex=0);let a=i.data?{...e.data,...i.data}:e.data;return r={...e,...i,data:a},r});return{elements:vF(i)}})},updateElementData:(t,n)=>{e(e=>{let r=e.elements.map(e=>e.id===t?{...e,data:{...e.data,...n}}:e);return{elements:vF(r)}})},resizeUploadImage:(e,n,r)=>{let i=t().elements.find(t=>t.id===e);if(!i||i.type!==`upload`||!i.data?.originalImage)return;let a=new Image;a.src=i.data.originalImage,a.onload=()=>{let i=document.createElement(`canvas`);i.width=Math.round(n),i.height=Math.round(r);let o=i.getContext(`2d`);o.imageSmoothingEnabled=!0,o.imageSmoothingQuality=`high`,o.drawImage(a,0,0,Math.round(n),Math.round(r));let s=i.toDataURL(`image/png`,.95);t().updateElement(e,{data:{image:s}})}},selectElement:t=>{e({selectedElementId:t})},removeElement:t=>{e(e=>{let n=e.elements.find(e=>e.id===t),r=e.elements.filter(e=>e.id!==t);return n?.type===`photo`&&(r=mF(r,t)),{elements:vF(r),selectedElementId:e.selectedElementId===t?null:e.selectedElementId}})},duplicateElement:n=>{let r=t().elements.find(e=>e.id===n);if(!r)return;let i=r.type===`photo`?r.zIndex??0:t().lastZIndex+1,a={...r.data};if(r.type===`photo`){let e=t().elements.filter(e=>e.type===`photo`).reduce((e,t)=>{let n=t.data?.photoIndex;return Number.isFinite(n)?Math.max(e,n):e},-1);a={...r.data,photoIndex:e+1}}let o={...r,id:aF(),x:r.x+20,y:r.y+20,zIndex:i,data:a};e(e=>{let t=vF([...e.elements,o]),n=r.type===`photo`?e.lastZIndex:e.lastZIndex+1;return{elements:t,lastZIndex:n,selectedElementId:o.id}})},toggleLock:t=>{e(e=>{let n=e.elements.map(e=>e.id===t?{...e,isLocked:!e.isLocked}:e);return{elements:vF(n)}})},bringToFront:n=>{if(t().elements.find(e=>e.id===n)?.type===`background-photo`){e({selectedElementId:n});return}let r=t().lastZIndex+1;e(e=>{let t=e.elements.map(e=>e.id===n?{...e,zIndex:r}:e);return{elements:vF(t),lastZIndex:r}})},sendToBack:n=>{let r=t().elements.find(e=>e.id===n);if(!r||r.type===`background-photo`)return;let i=t().elements.filter(e=>e.type!==`background-photo`&&!dF(e)).map(e=>Number.isFinite(e?.zIndex)?e.zIndex:1),a=i.length>0?Math.min(...i):1;cN+1;let o=Math.max(-3999,a-1);e(e=>{let t=e.elements.map(e=>e.id===n?{...e,zIndex:o}:e);return{elements:vF(t),lastZIndex:Math.max(e.lastZIndex,o)}})},bringForward:n=>{let r=t().elements.find(e=>e.id===n);if(r?.type===`background-photo`)return;let i=t().elements.filter(e=>e.type!==`background-photo`&&!dF(e)).sort((e,t)=>{let n=Number.isFinite(e.zIndex)?e.zIndex:1,r=Number.isFinite(t.zIndex)?t.zIndex:1;return n-r}),a=i.findIndex(e=>e.id===n);if(a===-1||a===i.length-1)return;let o=i[a+1],s=Number.isFinite(r.zIndex)?r.zIndex:1,c=Number.isFinite(o.zIndex)?o.zIndex:1;e(e=>{let t=e.elements.map(e=>e.id===n?{...e,zIndex:c}:e.id===o.id?{...e,zIndex:s}:e);return{elements:vF(t)}})},sendBackward:n=>{let r=t().elements.find(e=>e.id===n);if(r?.type===`background-photo`)return;let i=t().elements.filter(e=>e.type!==`background-photo`&&!dF(e)).sort((e,t)=>{let n=Number.isFinite(e.zIndex)?e.zIndex:1,r=Number.isFinite(t.zIndex)?t.zIndex:1;return n-r}),a=i.findIndex(e=>e.id===n);if(a===-1||a===0)return;let o=i[a-1],s=Number.isFinite(r.zIndex)?r.zIndex:1,c=Number.isFinite(o.zIndex)?o.zIndex:1;e(e=>{let t=e.elements.map(e=>e.id===n?{...e,zIndex:c}:e.id===o.id?{...e,zIndex:s}:e);return{elements:vF(t)}})},setCanvasBackground:t=>{e({canvasBackground:t,selectedElementId:`background`})},setElements:t=>{let n=vF(t),r=n.reduce((e,t)=>{if(!t||t.type===`background-photo`||t.type===`photo`)return e;let n=Number.isFinite(t?.zIndex)?t.zIndex:e;return n>e?n:e},1);e({elements:n,lastZIndex:r})},clearSelection:()=>e({selectedElementId:null}),reset:()=>e({elements:[],selectedElementId:null,canvasBackground:XP,lastZIndex:1})})),bF=e=>Symbol.iterator in e,xF=e=>`entries`in e,SF=(e,t)=>{let n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(let[e,t]of n)if(!r.has(e)||!Object.is(t,r.get(e)))return!1;return!0},CF=(e,t)=>{let n=e[Symbol.iterator](),r=t[Symbol.iterator](),i=n.next(),a=r.next();for(;!i.done&&!a.done;){if(!Object.is(i.value,a.value))return!1;i=n.next(),a=r.next()}return!!i.done&&!!a.done};function wF(e,t){return Object.is(e,t)?!0:typeof e!=`object`||!e||typeof t!=`object`||!t||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:bF(e)&&bF(t)?xF(e)&&xF(t)?SF(e,t):CF(e,t):SF({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}function TF(e){let t=b.useRef(void 0);return n=>{let r=e(n);return wF(t.current,r)?t.current:t.current=r}}var EF=()=>`https://api.fremio.id/api`;const DF=new class{async getToken(){let e=(localStorage.getItem(`fremio_token`))||(localStorage.getItem(`auth_token`))||(localStorage.getItem(`token`));if(e)return console.log(` [DraftService] Using JWT token`),e;try{let{getAuth:e}=await(w(async()=>{let{getAuth:e}=await import(`./index.esm-mjujrh6i-ByFb6CUn.js`);return{getAuth:e}},[])),t=(e()).currentUser;if(t){let e=await(t.getIdToken());return console.log(` [DraftService] Using Firebase ID token`),e}}catch(e){console.warn(` Could not get Firebase token:`,e.message)}return console.warn(` [DraftService] No token available`),null}async getHeaders(){let e=await(this.getToken());return{"Content-Type":`application/json`,...e&&{Authorization:`Bearer ${e}`}}}async saveDraftToCloud(e){try{let t=(EF()),n=null;try{n=JSON.parse(e.frameData)}catch{console.warn(` Could not parse frameData for logging`)}console.log(` [DraftService] Saving draft to cloud:`,{title:e.title,hasDraftId:!!e.draftId,frameDataSize:e.frameData?.length,parsedElements:n?.elements?.length,elementTypes:n?.elements?.map(e=>e.type),hasBackground:n?.elements?.some(e=>e.type===`background-photo`),hasOverlay:n?.elements?.some(e=>e.type===`upload`)});let r=await(this.getHeaders()),i=await(fetch(`${t}/drafts`,{method:`POST`,headers:r,body:JSON.stringify(e)}));if((i.status===401||i.status===403)&&(console.log(` [DraftService] Auth failed, using public share endpoint...`),i=await fetch(`${t}/drafts/public-share`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify(e)})),!i.ok){let e=await(i.json());throw Error(e.error||`Failed to save draft`)}let a=await(i.json());return console.log(` [DraftService] Draft saved to cloud:`,a.draft?.share_id),a}catch(e){throw console.error(` [DraftService] Error saving draft:`,e),e}}async getCloudDrafts(){try{let e=(EF()),t=await(this.getHeaders()),n=await(fetch(`${e}/drafts`,{headers:t}));if(!n.ok)throw Error(`Failed to fetch drafts`);return(await n.json()).drafts||[]}catch(e){return console.error(` [DraftService] Error fetching cloud drafts:`,e),[]}}async getDraftById(e){try{let t=(EF()),n=await(this.getHeaders()),r=await(fetch(`${t}/drafts/${e}`,{headers:n}));if(!r.ok)throw Error(`Draft not found`);return(await r.json()).draft}catch(e){throw console.error(` [DraftService] Error fetching draft:`,e),e}}async getSharedDraft(e){try{let t=(EF());console.log(` [DraftService] Fetching shared draft:`,e);let n=await(fetch(`${t}/drafts/share/${e}`));if(!n.ok)throw Error(`Frame not found`);let r=await(n.json());return console.log(` [DraftService] Shared draft loaded:`,r.draft?.title),r.draft}catch(e){throw console.error(` [DraftService] Error fetching shared draft:`,e),e}}async updateVisibility(e,t){try{let n=(EF()),r=await(this.getHeaders()),i=await(fetch(`${n}/drafts/${e}/visibility`,{method:`PATCH`,headers:r,body:JSON.stringify({isPublic:t})}));if(!i.ok)throw Error(`Failed to update visibility`);let a=await(i.json());return console.log(` [DraftService] Visibility updated:`,t?`public`:`private`),a.draft}catch(e){throw console.error(` [DraftService] Error updating visibility:`,e),e}}async deleteDraftFromCloud(e){try{let t=(EF()),n=await(this.getHeaders()),r=await(fetch(`${t}/drafts/${e}`,{method:`DELETE`,headers:n}));if(!r.ok)throw Error(`Failed to delete draft`);return await r.json()}catch(e){throw console.error(` [DraftService] Error deleting draft:`,e),e}}getShareUrl(e){return`${window.location.origin}/s/${e}`}};var OF=DF,kF=u(dN()),AF={hidden:{opacity:0,y:16},visible:{opacity:1,y:0}},jF={saveError:`Gagal menyimpan draft. Coba lagi.`,pasteSuccess:`Gambar ditempel ke kanvas.`,pasteError:`Gagal menempel gambar. Pastikan clipboard berisi gambar.`,deleteSuccess:`Elemen dihapus dari kanvas.`},MF=(e,t=0)=>{if(typeof e==`number`&&Number.isFinite(e))return e;if(typeof e==`string`){let t=Number.parseFloat(e);if(Number.isFinite(t))return t}return t},NF=(e,{timeoutMs:t=8e3,crossOrigin:n=`anonymous`}={})=>new Promise((r,i)=>{if(typeof e!=`string`||e.length===0){i(Error(`Invalid image source`));return}let a=e.startsWith(`data:`),o=e.startsWith(`blob:`),s=/^https?:/i.test(e),c=e.startsWith(`/`)||e.startsWith(`./`)||e.startsWith(`../`);if(!a&&!o&&!s&&!c){i(Error(`Unsupported image source format: ${e.slice(0,32)}...`));return}let l=new Image,u=null,d=()=>{u!==null&&clearTimeout(u),l.onload=null,l.onerror=null};(s||c)&&(l.crossOrigin=n),l.onload=()=>{d(),r(l)},l.onerror=e=>{d(),i(e instanceof Error?e:Error(`Failed to load image`))},Number.isFinite(t)&&t>0&&(u=setTimeout(()=>{d(),i(Error(`Image load timed out after ${t}ms`))},t)),l.decoding=`async`,l.src=e}),PF=(e,{timeoutMs:t=1e4,timeoutMessage:n,onTimeout:r}={})=>!Number.isFinite(t)||t<=0?e:new Promise((i,a)=>{let o=!1,s=setTimeout(()=>{if(o)return;o=!0;try{r?.()}catch(e){console.warn(` withTimeout onTimeout handler failed:`,e)}let e=Error(n||`Operation timed out after ${t}ms`);e.name=`TimeoutError`,a(e)},t);e.then(e=>{o||(o=!0,clearTimeout(s),i(e))}).catch(e=>{o||(o=!0,clearTimeout(s),a(e))})}),FF=(e,t=2e4)=>{if(!Number.isFinite(e)||e<=0)return t;let n=e/(1024*1024),r=Math.max(0,Math.ceil(Math.max(0,n-1))*8e3),i=t+r;return Math.min(Math.max(t,i),9e4)},IF=(e,{makePhotoSlotsTransparent:t=!0}={})=>{if(e)try{e.setAttribute(`data-export-clone`,`true`),e.querySelectorAll(`[data-export-ignore]`).forEach(e=>e.remove()),e.querySelectorAll(`.react-rnd-handle, .creator-resize-wrapper`).forEach(e=>e.remove()),t&&e.querySelectorAll(`.creator-element--type-photo`).forEach(e=>{e.style.background=`transparent`,e.style.backgroundColor=`transparent`,e.style.boxShadow=`none`,e.style.color=`transparent`,e.style.textShadow=`none`,e.style.fontSize=`0px`,e.style.filter=`none`,e.style.mixBlendMode=`normal`,Array.from(e.children||[]).forEach(t=>e.removeChild(t))});let n=Array.from(e.querySelectorAll(`.creator-element`));if(n.length>0){let e=n[0].parentNode,t=n.sort((e,t)=>{let n=Number.parseFloat(e.getAttribute(`data-element-zindex`))||Number.parseFloat(e.style.zIndex)||0,r=Number.parseFloat(t.getAttribute(`data-element-zindex`))||Number.parseFloat(t.style.zIndex)||0;return n-r});t.forEach(e=>e.remove()),t.forEach(t=>{let n=t.getAttribute(`data-element-zindex`);n&&Number.isFinite(Number.parseFloat(n))&&(t.style.zIndex=n),e.appendChild(t)}),console.log(` [prepareCanvasExportClone] DOM reordered by z-index:`,t.map(e=>({type:e.className.match(/creator-element--type-(\w+)/)?.[1],zIndex:e.style.zIndex,dataZIndex:e.getAttribute(`data-element-zindex`)})))}}catch(e){console.error(` [prepareCanvasExportClone] Error during clone preparation:`,e)}},LF=(e=[])=>{if(!Array.isArray(e)||e.length===0)return e;let t=!1,n=e.map(e=>{if(!e||typeof e!=`object`||e.type===`background-photo`||Number.isFinite(e.zIndex))return e;let n=cN+1,r=1;(e.type===`photo`||e.type===`upload`)&&(r=0);let i=r;return i<n&&(i=n),t=!0,{...e,zIndex:i}});return t?n:e},RF=(e,t)=>typeof crypto<`u`&&typeof crypto.randomUUID==`function`?crypto.randomUUID():`captured-overlay-${e||`slot`}-${t}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,zF=e=>(Number.isFinite(e?.zIndex)?e.zIndex:1)+lN,BF=(e,t,n)=>{let r=RF(e?.id,n),i=zF(e);return{id:r,type:`upload`,x:e?.x??0,y:e?.y??0,width:e?.width??0,height:e?.height??0,rotation:e?.rotation??0,zIndex:i,isLocked:!0,data:{image:t,objectFit:`cover`,borderRadius:e?.data?.borderRadius??0,stroke:null,strokeWidth:0,label:`Foto ${n+1}`,__capturedOverlay:!0,__sourcePlaceholderId:e?.id??null,__photoIndex:n}}},VF=(e=[])=>{if(!Array.isArray(e)||e.length===0)return e;let t=W.getJSON(`capturedPhotos`);if(!Array.isArray(t)||t.length===0)return e.filter(e=>!e?.data?.__capturedOverlay);let n=e.filter(e=>!e?.data?.__capturedOverlay),r=n.filter(e=>e?.type===`photo`);if(!r.length)return n;let i=[];if(r.forEach((e,n)=>{let r=n,a=t[r];if(typeof a!=`string`||!a.startsWith(`data:`))return;let o=BF(e,a,r);console.log(` [injectCapturedPhotoOverlays] Creating overlay ${r} with z-index:`,o.zIndex),i.push(o)}),!i.length)return n;let a=new Map;i.forEach(e=>{let t=e?.data?.__sourcePlaceholderId;t&&a.set(t,e)});let o=[];return n.forEach(e=>{e?.type===`photo`&&e.id&&a.has(e.id)?(o.push(a.get(e.id)),o.push(e),a.delete(e.id)):o.push(e)}),a.forEach(e=>o.push(e)),console.log(` [injectCapturedPhotoOverlays] Final result:`,{totalElements:o.length,overlaysAdded:i.length,zIndexes:o.map(e=>({type:e.type,zIndex:e.zIndex,isOverlay:e?.data?.__capturedOverlay}))}),o};function HF(){console.log(`[Create] Component rendering...`);let e=(0,b.useRef)(null),t=(0,b.useRef)(`upload`),n=(0,b.useRef)(null),[r,i]=(0,b.useState)(!1),[a,o]=(0,b.useState)(null),[s,c]=(0,b.useState)(!1),[l,u]=(0,b.useState)(null),[d,f]=(0,b.useState)(!1),[p,m]=(0,b.useState)(`#667eea`),[h,g]=(0,b.useState)(`#764ba2`),[_,v]=(0,b.useState)(`9:16`),[y,x]=(0,b.useState)(null),[S,C]=(0,b.useState)(``),[T,E]=(0,b.useState)(``),[D,O]=(0,b.useState)(!1),[k,A]=(0,b.useState)(!1),[j,M]=(0,b.useState)(!1),[N,P]=(0,b.useState)(!1),ee=(0,b.useRef)(null),[F,I]=(0,b.useState)({maxWidth:460,maxHeight:480}),L=(0,b.useRef)(!1),R=(0,b.useRef)(!1),te=(0,b.useRef)(null),z=(0,b.useRef)(new Set),B=Pe(),V=Le(),{user:H}=In(),ne=(0,b.useCallback)(e=>{let t={width:UM,height:WM};if(typeof e!=`string`)return t;if(e===`1200:1800`||e===`photostrip`)return{width:1200,height:1800};let[n,r]=e.split(`:`).map(Number),i=Number.isFinite(n)&&n>0?n:null,a=Number.isFinite(r)&&r>0?r:null;return!i||!a?t:a>=i?{width:UM,height:Math.round(UM*a/i)}:{width:Math.round(WM*i/a),height:WM}},[]),re=(0,b.useCallback)((e,t)=>{if(!e)return[];let n=ne(t),r=n.width,i=n.height,a=[];Array.isArray(e.slots)&&e.slots.forEach((e,t)=>{if(!e)return;let n=Number(e.left),o=Number(e.top),s=Number(e.width),c=Number(e.height);!Number.isFinite(n)||!Number.isFinite(o)||!Number.isFinite(s)||!Number.isFinite(c)||a.push({id:e.id||`photo_${t+1}`,type:`photo`,x:n*r,y:o*i,width:s*r,height:c*i,rotation:typeof e.rotation==`number`?e.rotation:0,zIndex:1,data:{photoIndex:e.photoIndex===void 0?t:e.photoIndex,borderRadius:e.borderRadius||0}})});let o=e?.layout?.elements;return Array.isArray(o)&&o.forEach(e=>{if(!e||typeof e!=`object`)return;let t=e.widthNorm===void 0?e.width:e.widthNorm*r,n=e.heightNorm===void 0?e.height:e.heightNorm*i;e.type===`upload`&&e.data?.imageAspectRatio&&(n=t/e.data.imageAspectRatio);let o=e.type===`upload`?Math.max(e.zIndex||100,100):Math.max(e.zIndex||10,10),s={...e,x:e.xNorm===void 0?e.x:e.xNorm*r,y:e.yNorm===void 0?e.y:e.yNorm*i,width:t,height:n,zIndex:o};delete s.xNorm,delete s.yNorm,delete s.widthNorm,delete s.heightNorm,a.push(s)}),a},[ne]);(0,b.useEffect)(()=>()=>{L.current=!1},[]),(0,b.useEffect)(()=>{if(H?.email)try{let e=JSON.stringify(H);localStorage.setItem(`fremio_user`,e),sessionStorage.setItem(`fremio_user_cache`,e),console.log(` [Create] Synced user to storage:`,H.email)}catch(e){console.warn(` [Create] Failed to sync user to storage`,e)}},[H?.email]);let U=(0,b.useCallback)((e,t,r=3200)=>{n.current&&clearTimeout(n.current),o({type:e,message:t}),n.current=setTimeout(()=>{o(null),n.current=null},r)},[]),{elements:ie,selectedElementId:ae,canvasBackground:oe,addElement:se,addUploadElement:ce,addBackgroundPhoto:le,updateElement:ue,selectElement:de,setCanvasBackground:fe,removeElement:pe,duplicateElement:me,toggleLock:he,resizeUploadImage:ge,bringToFront:_e,sendToBack:ve,bringForward:ye,sendBackward:be,clearSelection:xe,fitBackgroundPhotoToCanvas:Se,setElements:Ce}=yF(TF(e=>({elements:e.elements,selectedElementId:e.selectedElementId,canvasBackground:e.canvasBackground,addElement:e.addElement,addUploadElement:e.addUploadElement,addBackgroundPhoto:e.addBackgroundPhoto,updateElement:e.updateElement,selectElement:e.selectElement,setCanvasBackground:e.setCanvasBackground,removeElement:e.removeElement,duplicateElement:e.duplicateElement,toggleLock:e.toggleLock,resizeUploadImage:e.resizeUploadImage,bringToFront:e.bringToFront,sendToBack:e.sendToBack,bringForward:e.bringForward,sendBackward:e.sendBackward,clearSelection:e.clearSelection,fitBackgroundPhotoToCanvas:e.fitBackgroundPhotoToCanvas,setElements:e.setElements}))),we=(0,b.useMemo)(()=>ae===`background`?`background`:ie.find(e=>e.id===ae)||null,[ie,ae]);(0,b.useEffect)(()=>{if(aA(),R.current){console.log(` [useEffect] Skipping overlay injection - draft is loading`);return}let e=W.getJSON(`capturedPhotos`),t=Array.isArray(e)&&e.length>0,n=ie.some(e=>e?.data?.__capturedOverlay);if(t&&!n){let e=VF(ie);e.length!==ie.length&&Ce(e);return}if(!t&&n){let e=ie.filter(e=>!e?.data?.__capturedOverlay);e.length!==ie.length&&Ce(e)}},[ie,Ce]),(0,b.useEffect)(()=>{if(!s){u(null);return}ae||u(null)},[s,ae]);let Te=(0,b.useMemo)(()=>ie.find(e=>e.type===`background-photo`)||null,[ie]),Ee=we&&we!==`background`?we:null,De=we===`background`,Oe=s&&(De||!!Ee);(0,b.useEffect)(()=>{if(!s)return;let e=e=>{let t=ee.current?.querySelector(`#creator-canvas`),n=document.querySelector(`.create-mobile-toolbar`),r=document.querySelector(`.create-mobile-property-panel`),i=e.target,a=t?.contains(i),o=n?.contains(i),s=r?.contains(i);!a&&!o&&!s&&(xe(),u(null))};return document.addEventListener(`pointerdown`,e),()=>document.removeEventListener(`pointerdown`,e)},[s,xe]);let ke=(0,b.useMemo)(()=>{if(!Oe)return[];if(De)return[{id:`background-color`,label:`Warna`,icon:Xp},{id:`background-photo`,label:Te?`Foto`:`Tambah Foto`,icon:Rp},{id:`canvas-size`,label:`Ukuran`,icon:qp}];if(!Ee)return[];switch(Ee.type){case`text`:return[{id:`text-edit`,label:`Edit`,icon:vm},{id:`text-font`,label:`Font`,icon:vm},{id:`text-color`,label:`Warna`,icon:Xp},{id:`text-size`,label:`Ukuran`,icon:qp},{id:`text-align`,label:`Rata`,icon:ip},{id:`layer-order`,label:`Lapisan`,icon:Bp}];case`shape`:return[{id:`shape-color`,label:`Warna`,icon:Xp},{id:`shape-size`,label:`Ukuran`,icon:qp},{id:`shape-radius`,label:`Sudut`,icon:Ep},{id:`shape-outline`,label:`Outline`,icon:pm},{id:`layer-order`,label:`Lapisan`,icon:Bp}];case`photo`:return[{id:`photo-color`,label:`Warna`,icon:Xp},{id:`photo-fit`,label:`Gaya`,icon:sm},{id:`photo-size`,label:`Ukuran`,icon:qp},{id:`photo-radius`,label:`Sudut`,icon:Ep},{id:`photo-outline`,label:`Outline`,icon:pm},{id:`layer-order`,label:`Lapisan`,icon:Bp}];case`upload`:return[{id:`photo-color`,label:`Warna`,icon:Xp},{id:`photo-fit`,label:`Gaya`,icon:sm},{id:`photo-size`,label:`Ukuran`,icon:qp},{id:`photo-radius`,label:`Sudut`,icon:Ep},{id:`upload-outline`,label:`Outline`,icon:pm},{id:`layer-order`,label:`Lapisan`,icon:Bp}];case`background-photo`:return[{id:`bg-photo-fit`,label:`Gaya`,icon:sm},{id:`bg-photo-size`,label:`Ukuran`,icon:qp},{id:`bg-photo-manage`,label:`Foto`,icon:Rp}];default:return[]}},[Oe,De,Te,Ee]);(0,b.useEffect)(()=>{if(l){if(!Oe){u(null);return}new Set(ke.map(e=>e.id)).has(l)||u(null)}},[l,Oe,ke]);let Ae=(0,b.useCallback)(e=>new Promise(t=>{let n=new Image;n.onload=()=>{t({width:n.naturalWidth,height:n.naturalHeight,aspectRatio:n.naturalWidth>0&&n.naturalHeight>0?n.naturalWidth/n.naturalHeight:void 0})},n.onerror=()=>t({}),n.decoding=`async`,n.src=e}),[]),je=(0,b.useCallback)(e=>{if(!e)return`9:16`;if(typeof e.aspectRatio==`string`&&e.aspectRatio.includes(`:`))return e.aspectRatio;let t=Number(e.canvasWidth),n=Number(e.canvasHeight);if(!Number.isFinite(t)||!Number.isFinite(n)||t<=0||n<=0)return`9:16`;let r=e=>Math.round(Number(e)),i=(e,t)=>{let n=Math.abs(e),r=Math.abs(t);for(;r;){let e=r;r=n%r,n=e}return n||1},a=Math.max(1,r(t)),o=Math.max(1,r(n)),s=i(a,o),c=Math.max(1,Math.round(a/s)),l=Math.max(1,Math.round(o/s));return`${c}:${l}`},[]),Me=(0,b.useCallback)((e,t,n,r,i)=>{if(!Array.isArray(e))return[];if(!Number.isFinite(t)||!Number.isFinite(n)||t<=0||n<=0||!Number.isFinite(r)||!Number.isFinite(i)||r<=0||i<=0)return e;let a=r/t,o=i/n;if(Math.abs(a-1)<.001&&Math.abs(o-1)<.001)return e;let s=(a+o)/2;return e.map(e=>{if(!e||typeof e!=`object`)return e;let t={...e};if(typeof t.x==`number`&&(t.x=Math.round(t.x*a)),typeof t.y==`number`&&(t.y=Math.round(t.y*o)),typeof t.width==`number`&&(t.width=Math.round(t.width*a)),typeof t.height==`number`&&(t.height=Math.round(t.height*o)),t?.data&&typeof t.data==`object`){let e={...t.data};typeof e.borderRadius==`number`&&(e.borderRadius=Math.max(0,Math.round(e.borderRadius*s))),typeof e.strokeWidth==`number`&&(e.strokeWidth=Math.max(0,Math.round(e.strokeWidth*s))),typeof e.fontSize==`number`&&(e.fontSize=Math.max(1,Math.round(e.fontSize*o))),typeof e.lineHeight==`number`&&(e.lineHeight=Math.max(.1,e.lineHeight*o)),typeof e.letterSpacing==`number`&&(e.letterSpacing*=a),typeof e.outlineWidth==`number`&&(e.outlineWidth=Math.max(0,Math.round(e.outlineWidth*s))),t.data=e}return t})},[]),Ne=(0,b.useCallback)(async()=>{let e=document.getElementById(`creator-canvas`);if(!e)return``;let{width:t,height:n}=ne(_),r=document.createElement(`div`);Object.assign(r.style,{position:`fixed`,top:`-10000px`,left:`-10000px`,width:`${t}px`,height:`${n}px`,overflow:`hidden`,pointerEvents:`none`,opacity:`0`,zIndex:`-1`});let i=e.cloneNode(!0);i.id=`creator-canvas-export-thumb`,Object.assign(i.style,{transform:`none`,transformOrigin:`top left`,position:`relative`,top:`0`,left:`0`,width:`${t}px`,height:`${n}px`,margin:`0`,boxShadow:`none`}),r.appendChild(i),document.body.appendChild(r);try{IF(i,{makePhotoSlotsTransparent:!1});let e=await PF((0,kF.default)(i,{backgroundColor:null,useCORS:!0,scale:1,width:t,height:n,windowWidth:t,windowHeight:n,scrollX:0,scrollY:0,allowTaint:!0,logging:!1,ignoreElements:e=>e?!!(e.nodeType===Node.ELEMENT_NODE&&(e.classList?.contains(`creator-element--captured-overlay`)||e.getAttribute?.(`data-export-ignore`)===`true`||e.closest?.(`[data-export-ignore="true"]`))):!1}),{timeoutMs:2e4,timeoutMessage:`Rendering thumbnail took too long`});if(e.width>400){let t=400/e.width,n=document.createElement(`canvas`);n.width=Math.max(1,Math.round(e.width*t)),n.height=Math.max(1,Math.round(e.height*t));let r=n.getContext(`2d`);r&&(r.imageSmoothingEnabled=!0,r.imageSmoothingQuality=`medium`,r.drawImage(e,0,0,n.width,n.height),e=n)}return e.toDataURL(`image/jpeg`,.55)}catch(e){return console.warn(` Failed to auto-generate thumbnail`,e),``}finally{r.parentNode&&r.parentNode.removeChild(r)}},[_,ne]),Fe=(0,b.useCallback)(async(e,{notify:t=!0,userEmail:n=null}={})=>{if(console.log(` [loadDraftIntoEditor] STARTED with draftId:`,e),console.log(` [loadDraftIntoEditor] userEmail provided:`,n),!e)return console.log(` [loadDraftIntoEditor] No draftId provided`),!1;R.current=!0,console.log(` [loadDraftIntoEditor] Set loading flag to TRUE`);let r=await HM.getDraftById(e,n);if(console.log(` [loadDraftIntoEditor] Draft from storage:`,{found:!!r,id:r?.id,elementsCount:r?.elements?.length,hasPreview:!!r?.preview,hasCapturedPhotos:r?.capturedPhotos?.length||0}),!r)return t&&U(`error`,`Draft tidak ditemukan.`),R.current=!1,!1;Array.isArray(r.capturedPhotos)&&r.capturedPhotos.length>0?(console.log(` [loadDraftIntoEditor] Restoring captured photos:`,r.capturedPhotos.length),W.setJSON(`capturedPhotos`,r.capturedPhotos)):(console.log(` [loadDraftIntoEditor] No captured photos to restore`),W.removeItem(`capturedPhotos`));let i=Array.isArray(r.elements)?typeof structuredClone==`function`?structuredClone(r.elements):JSON.parse(JSON.stringify(r.elements)):[];console.log(` [loadDraftIntoEditor] Cloned elements:`,i.length),i=i.map(e=>e?.type===`background-photo`?{...e,zIndex:0}:e),console.log(` [loadDraftIntoEditor] Cloned elements (WITHOUT adding frame artwork separately):`,{count:i.length,types:i.map(e=>e.type)});let a=je(r),o=ne(a),s=Number(r.canvasWidth)||o.width,c=Number(r.canvasHeight)||o.height;console.log(` [loadDraftIntoEditor] Scaling info:`,{targetAspectRatio:a,targetDimensions:o,sourceWidth:s,sourceHeight:c,draftCanvasWidth:r.canvasWidth,draftCanvasHeight:r.canvasHeight,scaleX:o.width/s,scaleY:o.height/c,needsScaling:s!==o.width||c!==o.height}),console.log(` [loadDraftIntoEditor] Elements BEFORE scaling:`),i.forEach((e,t)=>{(e.type===`upload`||e.type===`background-photo`)&&console.log(`   ${t}. ${e.type}: ${e.width}x${e.height} at (${e.x}, ${e.y})`)});let l=Me(i,s,c,o.width,o.height);console.log(` [loadDraftIntoEditor] Elements AFTER scaling:`),l.forEach((e,t)=>{(e.type===`upload`||e.type===`background-photo`)&&console.log(`   ${t}. ${e.type}: ${e.width}x${e.height} at (${e.x}, ${e.y})`)});let d=Array.isArray(l)?l.filter(e=>e?.type!==`transparent-area`):[],f=LF(d);console.log(` [loadDraftIntoEditor] Using normalized elements WITHOUT overlay injection:`,{elementsCount:f.length,types:f.map(e=>({type:e.type,zIndex:e.zIndex}))});let p=f;console.log(` [loadDraftIntoEditor] Setting elements:`,{normalizedCount:f.length,runtimeCount:p.length,aspectRatio:a,detailedElements:p.map(e=>({id:e.id?.slice(0,8),type:e.type,x:e.x,y:e.y,width:e.width,height:e.height,zIndex:e.zIndex,hasImage:!!e.data?.image,text:e.data?.text}))}),v(a),Ce(p),r.canvasBackground&&fe(r.canvasBackground),x(r.id),A(!0),r.title&&C(r.title),E(r.description||``),xe(),u(null),!r.thumbnail&&!z.current.has(r.id)&&(z.current.add(r.id),requestAnimationFrame(()=>{requestAnimationFrame(async()=>{try{let e=await Ne();e&&e.startsWith(`data:image`)&&await HM.saveDraft({id:r.id,thumbnail:e})}catch(e){console.warn(` Failed to persist auto thumbnail`,e)}})}));let m=r.signature||iN(f,r.canvasBackground,a);return jn.setItem(`activeDraftId`,r.id),m&&jn.setItem(`activeDraftSignature`,m),L.current=!0,te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{R.current=!1,te.current=null,console.log(` [loadDraftIntoEditor] Cleared loading flag`)},100),t&&U(`success`,`Draft dimuat. Lanjutkan edit sesuai kebutuhan.`),!0},[xe,je,Ne,ne,Me,x,u,v,fe,Ce,U]);(0,b.useEffect)(()=>{let e=!1,t=B.state?.draftId,n=B.state?.newFrameName,r=!!t,i=!!B.state?.prefillFromBaseFrame,a=B.state?.baseFrame;if(console.log(` [Create useEffect] Navigation detected:`,{hasDraftId:!!t,draftId:t,newFrameName:n,comeFromDraftsPage:r,pathname:B.pathname,state:B.state}),n&&!r&&(C(n),E(``)),r){console.log(` [Create] Loading draft from Drafts page:`,t);let n=H?.email;if(!n){console.warn(` [Create] Waiting for user authentication before loading draft...`),console.warn(`   User:`,H);return}return console.log(` [Create] User authenticated:`,n),L.current=!1,Fe(t,{notify:!0,userEmail:n}).then(t=>{console.log(` [Create] loadDraftIntoEditor result:`,t),e||V(B.pathname,{replace:!0,state:null})}).catch(e=>{console.error(` [Create] Failed to load draft:`,e)}),()=>{e=!0}}else if(i&&a&&!L.current){let e=typeof a?.layout?.aspectRatio==`string`&&a.layout.aspectRatio.includes(`:`)?a.layout.aspectRatio:je({canvasWidth:a?.canvasWidth,canvasHeight:a?.canvasHeight});console.log(` [Create] Prefill from base frame:`,{id:a?.id,name:a?.name,aspectRatio:e});let t=re(a,e);v(e),Ce(t),fe(a?.canvasBackground||a?.layout?.backgroundColor||`#f7f1ed`),x(null),A(!1),O(!1),C(a?.name||``),E(``),xe(),u(null),jn.removeItem(`activeDraftId`),jn.removeItem(`activeDraftSignature`),L.current=!0}else if(!L.current){if(R.current){console.log(` [Create] Draft load in progress - skipping reset`);return}console.log(` [Create] First time entry - resetting canvas`),Ce([]),fe(`#f7f1ed`),v(`9:16`),x(null),A(!1),O(!1),n||(C(``),E(``)),xe(),jn.removeItem(`activeDraftId`),jn.removeItem(`activeDraftSignature`),jn.removeItem(`capturedPhotos`),W.removeItem(`capturedPhotos`),W.removeItem(`capturedVideos`),jn.removeItem(`draftFrameArtwork`),L.current=!0}return()=>{e=!0}},[B.state?.draftId,H?.email]),(0,b.useEffect)(()=>{if(L.current)return;if(!H?.email){console.warn(` [Create] Waiting for user auth before loading stored draft...`);return}try{let e=[];for(let t=0;t<localStorage.length;t++){let n=localStorage.key(t);n&&n.startsWith(`guest:`)&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),e.length>0&&console.log(` [Create] Removed ${e.length} guest keys to prevent conflict`)}catch(e){console.warn(` [Create] Failed to clean guest keys:`,e)}try{let e=localStorage.getItem(`activeDraftId`),t=localStorage.getItem(`activeDraftSignature`);e&&(jn.setItem(`activeDraftId`,e),localStorage.removeItem(`activeDraftId`),console.log(` [Create] Migrated global activeDraftId to user storage`)),t&&(jn.setItem(`activeDraftSignature`,t),localStorage.removeItem(`activeDraftSignature`),console.log(` [Create] Migrated global activeDraftSignature to user storage`))}catch(e){console.warn(` [Create] Failed to migrate global active draft keys:`,e)}let e=jn.getItem(`activeDraftId`);e&&Fe(e,{notify:!1,userEmail:H.email}).then(async t=>{if(t){let t=jn.getItem(`activeDraftSignature`),n=await HM.getDraftById(e,H.email);t&&n?.signature&&t!==n.signature&&W.setItem(`activeDraftSignature`,n.signature)}}).catch(e=>{console.error(` [Create] Failed to load stored draft:`,e)})},[Fe]),(0,b.useEffect)(()=>{if(Te&&!Te.data?.imageAspectRatio){let{width:e,height:t}=ne(_),n=Te.width>0&&Te.height>0?Te.width/Te.height:e/t;ue(Te.id,{data:{imageAspectRatio:n}})}},[Te,ue,_,ne]),(0,b.useEffect)(()=>()=>{n.current&&clearTimeout(n.current),te.current&&(clearTimeout(te.current),R.current=!1)},[]);let Ie=(0,b.useCallback)(()=>{t.current=`upload`,e.current&&(e.current.value=``,e.current.click())},[]),Re=(0,b.useCallback)(()=>{t.current=`background`,e.current&&(e.current.value=``,e.current.click())},[]),ze=e=>{let n=e.target.files?.[0];if(!n)return;let r=new FileReader;r.onload=async()=>{let e=r.result;if(typeof e==`string`)if(t.current===`background`){let t=await Ae(e),{width:n,height:r}=ne(_);le(e,{...t,canvasWidth:n,canvasHeight:r}),U(`success`,`Background foto diperbarui.`,2200)}else ce(e)},r.readAsDataURL(n)},Be=async()=>{if(r)return;let e=document.getElementById(`creator-canvas`);if(!e)return;let t=null;i(!0);try{let{width:n,height:r}=ne(_);console.log(` [SAVE DRAFT DEBUG]`),console.log(`  canvasAspectRatio state:`,_),console.log(`  Calculated dimensions:`,{canvasWidth:n,canvasHeight:r}),console.log(`  Calculated aspect ratio:`,n/r),console.log(`  Expected for 9:16:`,9/16,`=`,1080/1920);let i=document.createElement(`div`);Object.assign(i.style,{position:`fixed`,top:`-10000px`,left:`-10000px`,width:`${n}px`,height:`${r}px`,overflow:`hidden`,pointerEvents:`none`,opacity:`0`,zIndex:`-1`});let a=e.cloneNode(!0);a.id=`creator-canvas-export`,Object.assign(a.style,{transform:`none`,transformOrigin:`top left`,position:`relative`,top:`0`,left:`0`,width:`${n}px`,height:`${r}px`,margin:`0`,boxShadow:`none`}),i.appendChild(a),document.body.appendChild(i);let o=``;try{let e=a.cloneNode(!0);e.id=`creator-canvas-export-thumb`,i.removeChild(a),i.appendChild(e),IF(e,{makePhotoSlotsTransparent:!1});let t=await PF((0,kF.default)(e,{backgroundColor:null,useCORS:!0,scale:1,width:n,height:r,windowWidth:n,windowHeight:r,scrollX:0,scrollY:0,allowTaint:!0,logging:!1,ignoreElements:e=>e?!!(e.nodeType===Node.ELEMENT_NODE&&(e.classList?.contains(`creator-element--captured-overlay`)||e.getAttribute?.(`data-export-ignore`)===`true`||e.closest?.(`[data-export-ignore="true"]`))):!1}),{timeoutMs:2e4,timeoutMessage:`Rendering thumbnail took too long`});if(t.width>400){let e=400/t.width,n=document.createElement(`canvas`);n.width=Math.max(1,Math.round(t.width*e)),n.height=Math.max(1,Math.round(t.height*e));let r=n.getContext(`2d`);r&&(r.imageSmoothingEnabled=!0,r.imageSmoothingQuality=`medium`,r.drawImage(t,0,0,n.width,n.height),t=n)}o=t.toDataURL(`image/jpeg`,.55)}catch(e){console.warn(` Failed to generate thumbnail, will fallback`,e),o=``}i.removeChild(i.firstChild),i.appendChild(a),IF(a,{makePhotoSlotsTransparent:!0}),t=()=>{i.parentNode&&i.parentNode.removeChild(i)},console.log(` [html2canvas] Starting capture with scale:`,1);let s=Date.now(),c=(0,kF.default)(a,{backgroundColor:null,useCORS:!0,scale:1,width:n,height:r,windowWidth:n,windowHeight:r,scrollX:0,scrollY:0,allowTaint:!0,logging:!1,ignoreElements:e=>e?!!(e.nodeType===Node.ELEMENT_NODE&&(e.classList?.contains(`creator-element--captured-overlay`)||e.getAttribute?.(`data-export-ignore`)===`true`||e.closest?.(`[data-export-ignore="true"]`))):!1}),l=null;try{l=await PF(c,{timeoutMs:2e4,timeoutMessage:`Rendering canvas took too long`,onTimeout:()=>console.warn(` html2canvas timed out while saving draft`)});let e=Date.now()-s;console.log(` [html2canvas] Capture completed in ${e}ms`)}catch(e){let t=Date.now()-s;console.warn(` html2canvas failed after ${t}ms:`,e)}l&&console.log(` [html2canvas result]`,{width:l.width,height:l.height});let u=document.createElement(`canvas`);u.width=l?.width??Math.round(n*1),u.height=l?.height??Math.round(r*1);let d=u.getContext(`2d`,{alpha:!0});if(d){let e=ie.filter(e=>e.type===`photo`),t=[];e.forEach((e,n)=>{let r=Number(e?.x)||0,i=Number(e?.y)||0,a=Number(e?.width)||0,o=Number(e?.height)||0;if(a<=0||o<=0)return;let s=Number(e?.data?.photoIndex),c=Number.isFinite(s)?s:n;t.push({elementId:e?.id??null,placeholderIndex:n,photoIndex:c,x:r*1,y:i*1,width:a*1,height:o*1,centerX:(r+a/2)*1,centerY:(i+o/2)*1,borderRadius:MF(e?.data?.borderRadius)*1,rotationRadians:(Number(e?.rotation)||0)*Math.PI/180})});let n=oe||`#ffffff`;if(n.startsWith(`linear-gradient`)||n.startsWith(`radial-gradient`)){let e=n.match(/(linear|radial)-gradient\((.*)\)/);if(e){let[,t,n]=e,r=n.match(/#[0-9A-Fa-f]{6}|#[0-9A-Fa-f]{3}|rgba?\([^)]+\)/g)||[],i;if(t===`linear`)i=d.createLinearGradient(0,0,u.width,u.height);else{let e=u.width/2,t=u.height/2,n=Math.max(u.width,u.height)/2;i=d.createRadialGradient(e,t,0,e,t,n)}r.length>=2&&(i.addColorStop(0,r[0]),i.addColorStop(1,r[r.length-1]),r.length>2&&r.slice(1,-1).forEach((e,t)=>{i.addColorStop((t+1)/(r.length-1),e)})),d.fillStyle=i}else d.fillStyle=`#ffffff`}else d.fillStyle=n;d.fillRect(0,0,u.width,u.height),l&&d.drawImage(l,0,0),console.log(` [Preview] Generated without carving (preserves layering for custom frames)`)}let f=u;if(f.width>400){let e=400/f.width,t=document.createElement(`canvas`);t.width=Math.max(1,Math.round(f.width*e)),t.height=Math.max(1,Math.round(f.height*e));let n=t.getContext(`2d`);n&&(n.imageSmoothingEnabled=!0,n.imageSmoothingQuality=`medium`,n.drawImage(f,0,0,t.width,t.height),f=t)}console.log(` [Preview canvas after scaling]`,{width:f.width,height:f.height});let p=``;try{p=f.toDataURL(`image/jpeg`,.5);let e=Math.round(p.length/1024);console.log(` [Preview compressed]`,{format:`JPEG`,quality:.5,sizeKB:e,purpose:`thumbnail only`})}catch(e){console.warn(` JPEG preview error, trying lower quality`,e);try{p=f.toDataURL(`image/jpeg`,.4)}catch(e){console.error(` Failed to generate preview:`,e);let t=document.createElement(`canvas`);t.width=1,t.height=1,p=t.toDataURL(`image/jpeg`,.5)}}if(!p||!p.startsWith(`data:image`)){let e=document.createElement(`canvas`);e.width=1,e.height=1,p=e.toDataURL(`image/jpeg`,.5),console.warn(` Using emergency 1x1 preview fallback`)}let m=typeof structuredClone==`function`?structuredClone(ie):JSON.parse(JSON.stringify(ie));console.log(` [SAVE DEBUG] serializedElements z-index info:`,m.map(e=>({type:e.type,id:e.id?.slice(0,8),zIndex:e.zIndex,isOverlay:e?.data?.__capturedOverlay})));let h=m.filter(e=>e?.type!==`transparent-area`&&!e?.data?.__capturedOverlay);console.log(` [SAVING DRAFT] Elements breakdown:`,{total:m.length,cleaned:h.length,types:h.map(e=>({type:e.type,zIndex:e.zIndex,hasImage:!!e.data?.image}))});let g=h.map(e=>{if(!e||typeof e!=`object`)return e;if(e.type===`photo`)return Number.isFinite(e.zIndex)?e.zIndex<0?(console.warn(` Photo slot z-index ${e.zIndex} is below minimum, setting to 0`),{...e,zIndex:0}):e:{...e,zIndex:0};if(e.type===`background-photo`){let t=cN;return e.zIndex===t?e:{...e,zIndex:t}}return e});console.log(` [SAVE DEBUG] Final layeredElements z-index info:`,g.map(e=>({type:e.type,id:e.id?.slice(0,8),zIndex:e.zIndex}))),console.log(` [Compression] Starting image compression for elements:`,g.length);let v=Date.now(),b=await Promise.all(g.map(async e=>{let t=e?.data?.image;if(!(typeof t==`string`&&(e.type===`background-photo`||e.type===`upload`)))return e;try{let n=e.type===`background-photo`?8e3:6e3,r=await NF(t,{timeoutMs:n});if(!r||!Number.isFinite(r.width)||!Number.isFinite(r.height))throw Error(`Invalid image dimensions`);let i=(e.type,1080),a=e.type===`background-photo`?.85:.9,o=r.width,s=r.height;if(o>i){let e=i/o;o=i,s=Math.max(1,Math.round(s*e))}let c=document.createElement(`canvas`);c.width=Math.max(1,Math.round(o)),c.height=Math.max(1,Math.round(s));let l=c.getContext(`2d`,{alpha:!0});if(!l)throw Error(`Failed to acquire 2D context`);l.drawImage(r,0,0,c.width,c.height);let u=String(t||``).toLowerCase().split(`?`)[0].split(`#`)[0],d=u.startsWith(`data:image/png`),f=u.startsWith(`data:image/webp`),p=u.endsWith(`.png`),m=u.endsWith(`.webp`),h=e.type===`upload`||d||f||p||m,g;if(h){let n=f||m?`image/webp`:`image/png`;g=n===`image/webp`?c.toDataURL(`image/webp`,a):c.toDataURL(`image/png`),console.log(` Keeping alpha-capable format:`,{type:e.type,format:n===`image/webp`?`WEBP`:`PNG`,original:t.length,compressed:g.length})}else g=c.toDataURL(`image/jpeg`,a),console.log(` Compressed image:`,{type:e.type,format:`JPEG`,original:t.length,compressed:g.length,saved:t.length-g.length,reductionPercent:Math.round((t.length-g.length)/t.length*100)+`%`});return{...e,data:{...e.data,image:g,originalImage:void 0}}}catch(t){return console.warn(` Failed to compress ${e.type} image, using original:`,t),e}})),C=Date.now()-v;console.log(` [Compression] Completed in ${C}ms`);let E=iN(b,oe,_);console.log(` [SAVING DRAFT] Final data being saved:`,{canvasWidth:n,canvasHeight:r,aspectRatio:_,"Calculated ratio":n/r,"Expected 9:16":9/16,"Match?":Math.abs(n/r-9/16)<.001});let D=W.getJSON(`capturedPhotos`),k=Array.isArray(D)?D.length:0;k>0&&console.log(` [SAVING DRAFT] Detected captured photos in storage but skipping persist to keep drafts lean:`,{capturedPhotosCount:k});let A={id:y||void 0,title:S||void 0,description:T||void 0,canvasBackground:oe,canvasWidth:n,canvasHeight:r,aspectRatio:_,elements:b,preview:p,thumbnail:o||void 0,signature:E,capturedPhotos:void 0},j=JSON.stringify(A),M=Math.round(j.length/1024),N=(j.length/1024/1024).toFixed(2);console.log(` [SAVE SIZE] Draft size before save:`,{bytes:j.length,kilobytes:M+` KB`,megabytes:N+` MB`,elementsCount:b.length,backgroundPhotoCount:b.filter(e=>e.type===`background-photo`).length,uploadCount:b.filter(e=>e.type===`upload`).length});try{let{default:e}=await w(async()=>{let{default:e}=await import(`./indexedDBStorage-mjujrh6i-Cfsze504.js`);return{default:e}},[]),t=await e.getStorageEstimate();console.log(` [STORAGE] IndexedDB usage:`,{usageMB:(t.usage/1024/1024).toFixed(2)+` MB`,quotaMB:(t.quota/1024/1024).toFixed(2)+` MB`,percentage:t.percentage+`%`,newDraftSizeMB:N+` MB`})}catch(e){console.warn(` Could not check storage usage:`,e)}console.log(` [DRAFT SAVE] Starting save operation...`);let P=Date.now(),ee=HM.saveDraft(A),F=FF(j.length),I=Math.round(F/1e3);console.log(` [DRAFT SAVE] Timeout budget:`,{bytes:j.length,approxMB:N,primaryTimeoutMs:F,primaryTimeoutSeconds:I});let L=async(e,t,n)=>{let r=Math.round(t/1e3);return PF(e,{timeoutMs:t,timeoutMessage:`Menyimpan draft melebihi batas waktu (${n}, ${r}s)`,onTimeout:()=>console.warn(` Draft save timed out (${n}, ${r}s)`)})},R;try{R=await L(ee,F,`utama`);let e=Date.now()-P;console.log(` [DRAFT SAVE] Save completed in ${e}ms`)}catch(e){if(e?.name===`TimeoutError`){let e=Math.min(F+2e4,6e4),t=Math.round(e/1e3);console.warn(` [DRAFT SAVE] Primary timeout elapsed, retrying with extended budget`,{primaryTimeoutMs:F,extendedTimeoutMs:e,extendedSeconds:t}),R=await L(ee,e,`lanjutan`);let n=Date.now()-P;console.log(` [DRAFT SAVE] Save completed (extended) in ${n}ms`)}else throw e}console.log(` [DRAFT SAVED] Success! Draft ID:`,R.id),console.log(` [DRAFT SAVED] Elements with preserved z-index:`,b.map(e=>({type:e.type,id:e.id?.slice(0,8),zIndex:e.zIndex}))),console.log(` [VERIFICATION] Reading draft from storage...`);let te=await HM.getDraftById(R.id);te?console.log(` [VERIFICATION] Draft loaded from storage:`,{id:te.id,elementsCount:te.elements?.length,elementsZIndex:te.elements?.map(e=>({type:e.type,id:e.id?.slice(0,8),zIndex:e.zIndex}))}):console.error(` [VERIFICATION] Failed to load draft from storage!`),x(R.id),O(!0);try{console.log(` [CLOUD SAVE] Starting cloud save...`,H?`for user: ${H.uid}`:`(anonymous)`);let e=JSON.stringify(A),t=await OF.saveDraftToCloud({title:S||R.title||`Untitled Frame`,frameData:e,previewUrl:p,draftId:R.cloudId});if(t?.draft){let e=t.draft;R.cloudId=e.id,R.shareId=e.share_id,await HM.saveDraft({...R,cloudId:e.id,shareId:e.share_id}),console.log(` [CLOUD SAVE] Success! Cloud ID:`,e.id,`Share ID:`,e.share_id),console.log(` [SHARE URL]:`,`${window.location.origin}/s/${e.share_id}`)}}catch(e){console.warn(` [CLOUD SAVE] Failed (frame still saved locally):`,e)}let z=R.title||`Draft`;return U(`success`,`${z} tersimpan! Lihat di Profile  Drafts.`),R.id}catch(e){console.error(`Failed to save draft`,e);let t=e?.name===`TimeoutError`?`Proses menyimpan terlalu lama. Coba kurangi ukuran gambar atau ulangi beberapa saat lagi.`:e?.message&&/quota|persist/i.test(e.message)?`Penyimpanan penuh. Hapus draft lama terlebih dahulu.`:jF.saveError;return U(`error`,t),null}finally{try{t?.()}catch(e){console.warn(` Failed to clean up capture node`,e)}i(!1)}},Ve=e=>{if(e===`background`){if(j){U(`info`,`Background dikunci. Unlock untuk mengedit.`,2e3);return}de(`background`);return}if(e===`upload`){Ie();return}let t=se(e);t&&de(t)},He=(0,b.useCallback)(()=>{M(e=>!e),U(`success`,j?`Background unlocked`:`Background locked`,1500)},[j,U]),Ue=(0,b.useCallback)(()=>{fe(`#f7f1ed`);let e=ie.find(e=>e.type===`background-photo`);e&&pe(e.id),U(`success`,`Background direset ke default`,1500)},[ie,pe,fe,U]),We=async()=>{if(!y&&ie.length===0){U(`error`,`Tidak ada frame untuk digunakan.`);return}try{console.log(` [handleUseThisFrame] Auto-saving before use...`),U(`info`,`Menyimpan frame...`);let e=await Be()||y||jn.getItem(`activeDraftId`);if(console.log(` [handleUseThisFrame] Auto-save completed, draftId:`,e),!e)throw Error(`Draft ID tidak tersedia setelah save. Coba lagi.`);jn.setItem(`activeDraftId`,e),x(e),console.log(` [handleUseThisFrame] Looking for draft:`,e);let t=await HM.loadDrafts();console.log(` [handleUseThisFrame] All drafts in storage:`,t.map(e=>({id:e.id,title:e.title,hasElements:!!e.elements})));let n=await HM.getDraftById(e,H?.email);if(!n)throw console.error(` [handleUseThisFrame] Draft not found!`,{searchedId:e,availableIds:t.map(e=>e.id)}),Error(`Draft tidak ditemukan setelah save. Coba lagi.`);console.log(` [handleUseThisFrame] Draft loaded:`,{id:n.id,title:n.title,hasElements:!!n.elements,elementsCount:n.elements?.length});let{activateDraftFrame:r}=await w(async()=>{let{activateDraftFrame:e}=await import(`./draftHelpers-mjujrh6i-CY0F5TmK.js`);return{activateDraftFrame:e}},[]),i=r(n);if(!i)throw Error(`Gagal membuat konfigurasi frame dari draft`);console.log(` [CREATE] Frame activated:`,i.id),V(`/take-moment`)}catch(e){console.error(` Failed to activate frame:`,e),U(`error`,`Gagal menggunakan frame: ${e.message}`)}};(0,b.useEffect)(()=>{let e=()=>{Re()};window.addEventListener(`creator:request-background-upload`,e);let t=e=>{let t=e.clipboardData;if(!t)return;let n=e.target;if(n&&(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n.isContentEditable))return;let r=(t.items?Array.from(t.items):[]).find(e=>e.type.startsWith(`image/`));if(!r)return;let i=r.getAsFile();if(!i)return;e.preventDefault();let a=new FileReader;a.onload=()=>{let e=a.result;typeof e==`string`?(ce(e),U(`success`,jF.pasteSuccess)):U(`error`,jF.pasteError)},a.onerror=()=>{U(`error`,jF.pasteError)},a.readAsDataURL(i)};return window.addEventListener(`paste`,t),()=>{window.removeEventListener(`paste`,t),window.removeEventListener(`creator:request-background-upload`,e)}},[ce,U,Re]),(0,b.useEffect)(()=>{let e=e=>{if(e.defaultPrevented||e.key!==`Delete`&&e.key!==`Backspace`)return;let t=e.target;t&&(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t.isContentEditable)||!ae||ae===`background`||(e.preventDefault(),pe(ae),U(`success`,jF.deleteSuccess,2200))};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[ae,pe,U]);let Ge=(0,b.useMemo)(()=>[{id:`background`,label:`Background`,mobileLabel:`Background`,icon:Xp,onClick:()=>{f(!1),de(`background`)},isActive:ae===`background`||we?.type===`background-photo`},{id:`photo`,label:`Area Foto`,mobileLabel:`Foto`,icon:Rp,onClick:()=>{f(!1),xe(),P(!0)},isActive:N||we?.type===`photo`},{id:`text`,label:`Add Text`,mobileLabel:`Teks`,icon:vm,onClick:()=>{f(!1),Ve(`text`)},isActive:we?.type===`text`},{id:`shape`,label:`Shape`,mobileLabel:`Bentuk`,icon:lm,onClick:()=>{f(!1),Ve(`shape`)},isActive:we?.type===`shape`},{id:`upload`,label:`Unggahan`,mobileLabel:`Unggah`,icon:Cp,onClick:()=>{f(!1),Ve(`upload`)},isActive:we?.type===`upload`}],[Ve,de,we?.type,ae,Te,Re,s,N,xe]);(0,b.useEffect)(()=>{if(typeof window>`u`)return;let e=window.matchMedia(`(max-width: 768px)`),t=e=>{c(e.matches)};return c(e.matches),typeof e.addEventListener==`function`?(e.addEventListener(`change`,t),()=>e.removeEventListener(`change`,t)):(e.addListener(t),()=>e.removeListener(t))},[]),(0,b.useEffect)(()=>{s||u(null)},[s]);let Ke=e=>{u(null),e.onClick()};(0,b.useLayoutEffect)(()=>{if(typeof window>`u`)return;let e=ee.current;if(!e)return;let t=()=>{let{clientWidth:t,clientHeight:n}=e,r=Math.max(0,Math.floor(t-40)),i=Math.max(0,Math.floor(n-40));r>0&&i>0&&I({maxWidth:r,maxHeight:i})};if(requestAnimationFrame(()=>{t()}),typeof ResizeObserver<`u`){let n=new ResizeObserver(()=>t());return n.observe(e),()=>n.disconnect()}return window.addEventListener(`resize`,t),()=>window.removeEventListener(`resize`,t)},[s]);let qe=(0,b.useCallback)((e,t)=>{if(!Ee)return;let n=Number(t);if(!Number.isFinite(n))return;let r=Math.round(Math.max(40,n));ue(Ee.id,{[e]:r})},[Ee,ue]),Je=e=>{switch(e){case`text-edit`:return`Edit Teks`;case`text-font`:return`Pilih Font`;case`text-color`:return`Warna Teks`;case`text-size`:return`Ukuran Teks`;case`text-align`:return`Perataan`;case`shape-color`:return`Warna Bentuk`;case`shape-size`:return`Ukuran Bentuk`;case`shape-radius`:return`Sudut Bentuk`;case`photo-color`:return`Warna`;case`photo-fit`:return`Gaya Foto`;case`photo-size`:return`Ukuran`;case`photo-radius`:return`Sudut`;case`shape-outline`:return`Outline Bentuk`;case`photo-outline`:return`Outline Foto`;case`upload-outline`:return`Outline Unggahan`;case`layer-order`:return`Atur Lapisan`;case`background-color`:return`Warna Latar`;case`background-photo`:return Te?`Foto Latar`:`Tambah Foto`;case`bg-photo-fit`:return`Mode Foto`;case`bg-photo-size`:return`Ukuran Foto`;case`bg-photo-manage`:return`Kelola Foto`;default:return`Properti`}},Ye=()=>{if(!Oe||!l)return null;let e=null,t=Je(l);if(De)if(l===`background-color`){let t=oe?.startsWith(`linear-gradient`)||oe?.startsWith(`radial-gradient`),n=t?`#ffffff`:oe||`#ffffff`;e=(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`8px`},children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>fe(n),style:{flex:1,padding:`8px 12px`,borderRadius:`8px`,border:t?`1px solid #e2e8f0`:`2px solid #8B5CF6`,background:t?`#fff`:`#F3E8FF`,color:t?`#64748b`:`#8B5CF6`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Solid`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>fe(`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`),style:{flex:1,padding:`8px 12px`,borderRadius:`8px`,border:t?`2px solid #8B5CF6`:`1px solid #e2e8f0`,background:t?`#F3E8FF`:`#fff`,color:t?`#8B5CF6`:`#64748b`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Gradient`})]}),t?(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,G.jsx)(`div`,{style:{height:`80px`,borderRadius:`12px`,background:`linear-gradient(135deg, ${p} 0%, ${h} 100%)`,border:`2px solid #e2e8f0`,boxShadow:`0 4px 12px rgba(0,0,0,0.1)`}}),(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`},children:[(0,G.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#64748b`},children:`Warna Titik 1:`}),(0,G.jsx)(RP,{value:p,onChange:e=>{m(e),fe(`linear-gradient(135deg, ${e} 0%, ${h} 100%)`)}})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`},children:[(0,G.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#64748b`},children:`Warna Titik 2:`}),(0,G.jsx)(RP,{value:h,onChange:e=>{g(e),fe(`linear-gradient(135deg, ${p} 0%, ${e} 100%)`)}})]}),(0,G.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#475569`,marginTop:`4px`},children:`Quick Presets:`}),(0,G.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(3, 1fr)`,gap:`6px`},children:[{name:`Purple`,c1:`#667eea`,c2:`#764ba2`},{name:`Ocean`,c1:`#667eea`,c2:`#0093E9`},{name:`Sunset`,c1:`#f093fb`,c2:`#f5576c`},{name:`Forest`,c1:`#11998e`,c2:`#38ef7d`},{name:`Pink`,c1:`#FA8BFF`,c2:`#2BD2FF`},{name:`Gold`,c1:`#FFB75E`,c2:`#ED8F03`}].map(e=>(0,G.jsx)(`button`,{type:`button`,onClick:()=>{m(e.c1),g(e.c2),fe(`linear-gradient(135deg, ${e.c1} 0%, ${e.c2} 100%)`)},style:{padding:`20px 6px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,background:`linear-gradient(135deg, ${e.c1} 0%, ${e.c2} 100%)`,cursor:`pointer`,position:`relative`,overflow:`hidden`},children:(0,G.jsx)(`span`,{style:{position:`absolute`,bottom:`3px`,left:`50%`,transform:`translateX(-50%)`,fontSize:`9px`,fontWeight:700,color:`#fff`,textShadow:`0 1px 3px rgba(0,0,0,0.6)`,whiteSpace:`nowrap`},children:e.name})},e.name))})]}):(0,G.jsx)(RP,{value:n,onChange:e=>fe(e)})]})}else l===`background-photo`?e=(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__actions`,children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>{Re(),u(null)},className:`create-mobile-property-panel__action`,children:Te?`Ganti foto background`:`Tambah foto background`}),Te&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>{let{width:e,height:t}=ne(_);Se({canvasWidth:e,canvasHeight:t}),u(null)},className:`create-mobile-property-panel__action`,children:`Sesuaikan ke kanvas`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>{pe(Te.id),xe(),u(null)},className:`create-mobile-property-panel__action create-mobile-property-panel__action--danger`,children:`Hapus foto background`})]})]}):l===`canvas-size`&&(e=(0,G.jsx)(`div`,{className:`create-mobile-property-panel__select`,children:(0,G.jsx)(`select`,{value:_,onChange:e=>{v(e.target.value),u(null)},children:[{value:`9:16`,label:`Story Instagram`},{value:`1:1`,label:`Instagram Feeds`},{value:`1200:1800`,label:`Photostrip (ukuran cetak)`}].map(e=>(0,G.jsx)(`option`,{value:e.value,children:e.label},e.value))})}));else if(Ee){let t=Ee.data??{};switch(l){case`text-edit`:e=(0,G.jsx)(`textarea`,{className:`create-mobile-property-panel__textarea`,rows:4,value:t.text??``,onChange:e=>ue(Ee.id,{data:{text:e.target.value}})});break;case`text-font`:e=(0,G.jsx)(`div`,{className:`create-mobile-property-panel__actions`,children:zP.map(e=>(0,G.jsx)(`button`,{type:`button`,onClick:()=>{ue(Ee.id,{data:{fontFamily:e}})},className:`create-mobile-property-panel__action ${(t.fontFamily??`Inter`)===e?`create-mobile-property-panel__action--active`:``}`.trim(),style:{fontFamily:e},children:e},e))});break;case`text-color`:e=(0,G.jsx)(RP,{value:t.color??`#1F2933`,onChange:e=>ue(Ee.id,{data:{color:e}})});break;case`text-size`:{let n=t.fontSize??24;e=(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__slider`,children:[(0,G.jsx)(`input`,{type:`range`,min:12,max:72,value:n,onChange:e=>ue(Ee.id,{data:{fontSize:Number(e.target.value)}})}),(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__value-label`,children:[n,`px`]})]});break}case`text-align`:e=(0,G.jsx)(`div`,{className:`create-mobile-property-panel__button-group`,children:[{id:`left`,Icon:ap},{id:`center`,Icon:ip},{id:`right`,Icon:op}].map(e=>(0,G.jsx)(`button`,{type:`button`,onClick:()=>ue(Ee.id,{data:{align:e.id}}),className:`create-mobile-property-panel__button ${(t.align??`center`)===e.id?`create-mobile-property-panel__button--active`:``}`.trim(),children:(0,G.jsx)(e.Icon,{size:18,strokeWidth:2.5})},e.id))});break;case`shape-color`:case`photo-color`:e=(0,G.jsx)(RP,{value:t.fill??`#F4D3C2`,onChange:e=>ue(Ee.id,{data:{fill:e}})});break;case`shape-size`:case`photo-size`:e=(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__form-grid`,children:[(0,G.jsxs)(`label`,{className:`create-mobile-property-panel__input`,children:[(0,G.jsx)(`span`,{children:`Lebar`}),(0,G.jsx)(`input`,{type:`number`,min:40,value:Math.round(Ee.width??0),onChange:e=>qe(`width`,e.target.value)})]}),(0,G.jsxs)(`label`,{className:`create-mobile-property-panel__input`,children:[(0,G.jsx)(`span`,{children:`Tinggi`}),(0,G.jsx)(`input`,{type:`number`,min:40,value:Math.round(Ee.height??0),onChange:e=>qe(`height`,e.target.value)})]})]});break;case`shape-radius`:case`photo-radius`:{let n=t.borderRadius??24;e=(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__slider`,children:[(0,G.jsx)(`input`,{type:`range`,min:0,max:120,value:n,onChange:e=>ue(Ee.id,{data:{borderRadius:Number(e.target.value)}})}),(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__value-label`,children:[n,`px`]})]});break}case`shape-outline`:case`photo-outline`:case`upload-outline`:{let n=Ee.type,r=Number(t.strokeWidth??0),i=n===`shape`?`#d9b9ab`:`#f4f4f4`,a=typeof t.stroke==`string`&&t.stroke.length>0?t.stroke:i;e=(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__outline`,children:[(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__slider`,children:[(0,G.jsx)(`input`,{type:`range`,min:0,max:n===`shape`?32:24,value:r,onChange:e=>{let n=Number(e.target.value);if(!Number.isFinite(n))return;let r={strokeWidth:Math.max(0,n)};n>0&&!t.stroke&&(r.stroke=a),ue(Ee.id,{data:r})}}),(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__value-label`,children:[Math.round(r),`px`]})]}),(0,G.jsx)(`div`,{className:`create-mobile-property-panel__color-picker`,children:(0,G.jsx)(RP,{value:a,onChange:e=>ue(Ee.id,{data:{stroke:e}})})})]});break}case`photo-fit`:case`bg-photo-fit`:e=(0,G.jsx)(`div`,{className:`create-mobile-property-panel__select`,children:(0,G.jsxs)(`select`,{value:t.objectFit??`cover`,onChange:e=>ue(Ee.id,{data:{objectFit:e.target.value}}),children:[(0,G.jsx)(`option`,{value:`cover`,children:`Cover`}),(0,G.jsx)(`option`,{value:`contain`,children:`Contain`}),(0,G.jsx)(`option`,{value:`fill`,children:`Fill`})]})});break;case`bg-photo-size`:e=(0,G.jsx)(`div`,{className:`create-mobile-property-panel__actions`,children:(0,G.jsx)(`button`,{type:`button`,onClick:()=>{let{width:e,height:t}=ne(_);Se({canvasWidth:e,canvasHeight:t}),u(null)},className:`create-mobile-property-panel__action`,children:`Sesuaikan ke kanvas`})});break;case`bg-photo-manage`:e=(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__actions`,children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>{Re(),u(null)},className:`create-mobile-property-panel__action`,children:`Ganti foto background`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>{pe(Ee.id),xe(),u(null)},className:`create-mobile-property-panel__action create-mobile-property-panel__action--danger`,children:`Hapus foto background`})]});break;case`layer-order`:Ee?.type!==`background-photo`&&(e=(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__actions`,style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`},children:[(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{_e(Ee.id)},className:`create-mobile-property-panel__action`,children:[(0,G.jsx)(_p,{size:18,style:{marginRight:`8px`}}),`Paling Depan`]}),(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{ye(Ee.id)},className:`create-mobile-property-panel__action`,children:[(0,G.jsx)(lp,{size:18,style:{marginRight:`8px`}}),`Kedepankan`]}),(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{ve(Ee.id)},className:`create-mobile-property-panel__action`,children:[(0,G.jsx)(gp,{size:18,style:{marginRight:`8px`}}),`Paling Belakang`]}),(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{be(Ee.id)},className:`create-mobile-property-panel__action`,children:[(0,G.jsx)(sp,{size:18,style:{marginRight:`8px`}}),`Kebelakangkan`]})]}));break;default:break}}return e?(0,G.jsxs)(Qf.div,{className:`create-mobile-property-panel`,initial:{opacity:0,y:32},animate:{opacity:1,y:0},exit:{opacity:0,y:32},transition:{type:`spring`,stiffness:360,damping:32},children:[(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__header`,children:[(0,G.jsx)(`span`,{children:t}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>u(null),className:`create-mobile-property-panel__close`,"aria-label":`Tutup pengaturan`,children:(0,G.jsx)(Cm,{size:18,strokeWidth:2.5})})]}),(0,G.jsx)(`div`,{className:`create-mobile-property-panel__content`,children:e})]},l):null};return(0,G.jsxs)(`div`,{className:`create-page`,children:[a&&(0,G.jsx)(Qf.div,{className:`create-toast-wrapper`,initial:{opacity:0,y:-12,scale:.94},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:.94},transition:{type:`spring`,stiffness:460,damping:26},children:(0,G.jsxs)(`div`,{className:`create-toast ${a.type===`success`?`create-toast--success`:`create-toast--error`}`,children:[a.type===`success`?(0,G.jsx)(bp,{size:18,strokeWidth:2.5}):(0,G.jsx)(_m,{size:18,strokeWidth:2.5}),(0,G.jsx)(`span`,{children:a.message})]})}),(0,G.jsxs)(`div`,{className:`create-grid`,children:[!s&&(0,G.jsxs)(Qf.aside,{variants:AF,initial:`hidden`,animate:`visible`,transition:{delay:.05},className:`create-panel create-panel--tools`,children:[(0,G.jsx)(`h2`,{className:`create-panel__title`,children:`Tools`}),(0,G.jsx)(`div`,{className:`create-tools__list`,children:Ge.map(e=>{let t=e.icon;return(0,G.jsxs)(`button`,{type:`button`,onClick:()=>Ke(e),className:`create-tools__button ${e.isActive?`create-tools__button--active`:``}`.trim(),children:[(0,G.jsx)(t,{size:20,strokeWidth:2}),(0,G.jsx)(`span`,{children:e.label})]},e.id)})}),(0,G.jsxs)(`div`,{className:`create-tools__name-input`,children:[(0,G.jsx)(`label`,{className:`create-tools__name-label`,children:`Nama Frame`}),(0,G.jsx)(`input`,{type:`text`,className:`create-tools__name-field`,placeholder:`Masukkan nama frame...`,value:S,onChange:e=>C(e.target.value)}),(0,G.jsx)(`label`,{className:`create-tools__name-label`,style:{marginTop:12},children:`Deskripsi Frame`}),(0,G.jsx)(`textarea`,{className:`create-tools__name-field create-tools__description-field`,placeholder:`Tulis deskripsi singkat...`,value:T,onChange:e=>E(e.target.value),rows:3})]})]}),(0,G.jsxs)(Qf.section,{variants:AF,initial:`hidden`,animate:`visible`,transition:{delay:.1},className:`create-preview`,children:[(0,G.jsx)(`h2`,{className:`create-preview__title`,children:`Preview`}),(0,G.jsx)(`div`,{className:`create-preview__body`,children:(0,G.jsx)(`div`,{ref:ee,className:`create-preview__frame`,"data-canvas-ratio":_,children:(0,G.jsx)(nP,{elements:ie,selectedElementId:ae,canvasBackground:oe,aspectRatio:_,previewConstraints:F,onSelect:e=>{u(null),e===null?xe():de(e===`background`?`background`:e)},onUpdate:ue,onBringToFront:_e,onRemove:pe,onDuplicate:me,onToggleLock:he,onResizeUpload:ge,isBackgroundLocked:j,onToggleBackgroundLock:He,onResetBackground:Ue})})}),(0,G.jsxs)(`div`,{className:`create-actions`,children:[(0,G.jsx)(Qf.button,{type:`button`,onClick:Be,disabled:r,className:`create-save`,whileTap:{scale:.97},whileHover:{y:-3},children:r?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`svg`,{className:`create-save__spinner`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,children:[(0,G.jsx)(`circle`,{className:`create-save__spinner-track`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,G.jsx)(`path`,{className:`create-save__spinner-head`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}),`Menyimpan...`]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(bp,{size:18,strokeWidth:2.5}),`Save`]})}),ie.length>0&&(0,G.jsxs)(Qf.button,{type:`button`,onClick:We,className:`create-use-frame`,whileTap:{scale:.97},whileHover:{y:-3},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[(0,G.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`18`,height:`18`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2.5`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,G.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`2`,ry:`2`}),(0,G.jsx)(`circle`,{cx:`8.5`,cy:`8.5`,r:`1.5`}),(0,G.jsx)(`polyline`,{points:`21 15 16 10 5 21`})]}),`Gunakan Frame`]})]})]}),!s&&(0,G.jsxs)(Qf.aside,{variants:AF,initial:`hidden`,animate:`visible`,transition:{delay:.15},className:`create-panel create-panel--properties`,children:[(0,G.jsx)(`h2`,{className:`create-panel__title`,children:`Properties`}),(0,G.jsx)(`div`,{className:`create-panel__body`,children:(0,G.jsx)(UP,{selectedElement:we,canvasBackground:oe,onBackgroundChange:e=>fe(e),onUpdateElement:ue,onDeleteElement:pe,clearSelection:xe,onSelectBackgroundPhoto:()=>{if(j){U(`info`,`Background dikunci. Unlock untuk mengedit.`,2e3);return}Te?de(Te.id):Re()},onFitBackgroundPhoto:Se,backgroundPhoto:Te,onBringToFront:_e,onSendToBack:ve,onBringForward:ye,onSendBackward:be,canvasAspectRatio:_,onCanvasAspectRatioChange:e=>{v(e)},showCanvasSizeMode:d,gradientColor1:p,gradientColor2:h,setGradientColor1:m,setGradientColor2:g,isBackgroundLocked:j,onToggleBackgroundLock:He,pendingPhotoTool:N,onConfirmAddPhoto:(e=1,t=1)=>{P(!1);let n=950-(t-1)*30,r=1640-(e-1)*30,i=Math.floor(n/t),a=Math.floor(r/e),o=null;for(let n=0;n<e;n++)for(let e=0;e<t;e++){let t=65+e*(i+30),r=140+n*(a+30),s=se(`photo`,{x:t,y:r,width:i,height:a});s&&(o=s)}o&&de(o)},onCancelPhotoTool:()=>P(!1)})})]})]}),s&&(0,G.jsxs)(G.Fragment,{children:[Ye(),N?(0,G.jsxs)(`nav`,{className:`create-mobile-toolbar create-mobile-toolbar--grid`,children:[(0,G.jsxs)(`button`,{type:`button`,onClick:()=>P(!1),className:`create-mobile-toolbar__button create-mobile-toolbar__button--back`,children:[(0,G.jsx)(Cm,{size:20,strokeWidth:2.4}),(0,G.jsx)(`span`,{children:`Batal`})]}),[{id:`1x1`,rows:1,cols:1,label:`11`},{id:`2x1`,rows:2,cols:1,label:`21`},{id:`1x2`,rows:1,cols:2,label:`12`},{id:`2x2`,rows:2,cols:2,label:`22`},{id:`3x2`,rows:3,cols:2,label:`32`}].map(e=>(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{P(!1);let t=950-(e.cols-1)*30,n=1640-(e.rows-1)*30,r=Math.floor(t/e.cols),i=Math.floor(n/e.rows),a=null;for(let t=0;t<e.rows;t++)for(let n=0;n<e.cols;n++){let e=65+n*(r+30),o=140+t*(i+30),s=se(`photo`,{x:e,y:o,width:r,height:i});s&&(a=s)}a&&de(a)},className:`create-mobile-toolbar__button`,children:[(0,G.jsx)(Fp,{size:20,strokeWidth:2.4}),(0,G.jsx)(`span`,{children:e.label})]},e.id))]}):(0,G.jsx)(`nav`,{className:`create-mobile-toolbar ${Oe?`create-mobile-toolbar--properties`:``}`.trim(),children:(Oe?ke:Ge).map(e=>{let t=e.icon,n=Oe?l===e.id:!!e.isActive,r=Oe?e.label:e.mobileLabel??e.label;return(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{Oe?u(t=>t===e.id?null:e.id):Ke(e)},className:`create-mobile-toolbar__button ${n?`create-mobile-toolbar__button--active`:``}`.trim(),children:[(0,G.jsx)(t,{size:20,strokeWidth:2.4}),(0,G.jsx)(`span`,{children:r})]},e.id)})})]}),(0,G.jsx)(`input`,{ref:e,type:`file`,accept:`image/*`,style:{position:`absolute`,left:`-9999px`,opacity:0,pointerEvents:`none`},onChange:ze})]})}var UF=e=>btoa(e).replace(/\+/g,`-`).replace(/\//g,`_`).replace(/=+$/,``),WF=e=>{let t=e.replace(/-/g,`+`).replace(/_/g,`/`);for(;t.length%4;)t+=`=`;return atob(t)};const GF=e=>{if(!e)return null;let t=e.elements?.filter(e=>e.type===`photo`||e.type===`text`||e.type===`background`)||[],n={t:e.title||`Shared`,a:e.aspectRatio||`9:16`,b:e.canvasBackground||`#f7f1ed`,e:t.map(e=>{let t={tp:e.type?.substring(0,2),x:Math.round(e.x||0),y:Math.round(e.y||0),w:Math.round(e.width||100),h:Math.round(e.height||100),z:e.zIndex||1};return e.type===`photo`?t.d={ar:e.data?.aspectRatio}:e.type===`text`&&e.data&&(t.d={txt:e.data.text,fs:e.data.fontSize,fc:e.data.fontColor,ff:e.data.fontFamily}),t})};try{let e=JSON.stringify(n);return UF(unescape(encodeURIComponent(e)))}catch(e){return console.error(`Error compressing frame data:`,e),null}},KF=e=>{if(!e)return null;try{let t=decodeURIComponent(escape(WF(e))),n=JSON.parse(t);return{id:`shared-${Date.now()}`,title:n.t,aspectRatio:n.a,canvasBackground:n.b,elements:n.e?.map((e,t)=>{let n={ph:`photo`,te:`text`,ba:`background`},r=n[e.tp]||e.tp;if(!n[e.tp])return console.warn(`Unknown element type:`,e.tp),null;let i={id:`el-${t}`,type:r,x:e.x,y:e.y,width:e.w,height:e.h,zIndex:e.z};return r===`photo`&&e.d?i.data={aspectRatio:e.d.ar}:r===`text`&&e.d&&(i.data={text:e.d.txt,fontSize:e.d.fs,fontColor:e.d.fc,fontFamily:e.d.ff}),i}).filter(Boolean)||[]}}catch(e){return console.error(`Error decompressing frame data:`,e),null}},qF=e=>{let t=GF(e);return t?`${window.location.origin}/take-moment?d=${t}`:null};var JF=`fremio-creator-draft-groups:`,YF=e=>Array.isArray(e)?e:[],XF=()=>new Date().toISOString(),ZF=e=>`${JF}${e||`guest`}`;const QF=e=>{try{let t=ZF(e),n=W.getJSON(t,[]);return YF(n)}catch{return[]}},$F=(e,t)=>{try{let n=ZF(e);W.setJSON(n,YF(t))}catch{}},eI=(e,{name:t}={})=>{let n=QF(e),r=n.length+1,i={id:typeof crypto<`u`&&typeof crypto.randomUUID==`function`?crypto.randomUUID():`group-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:t||`Group ${r}`,draftIds:[],preferences:{logoDataUrl:null,headerColor:`#ffffff`,backgroundColor:`#fdf7f4`,title1Text:``,title2Text:``,text:``},createdAt:XF(),updatedAt:XF()},a=[...n,i];return $F(e,a),i},tI=(e,t,n)=>{if(!t)return QF(e);let r=QF(e).map(e=>{if(!e||e.id!==t)return e;let r=e?.preferences&&typeof e.preferences==`object`?e.preferences:{},i=n&&typeof n==`object`?n:{};return{...e,preferences:{logoDataUrl:r?.logoDataUrl??null,headerColor:r?.headerColor||`#ffffff`,backgroundColor:r?.backgroundColor||`#fdf7f4`,title1Text:r?.title1Text||``,title2Text:r?.title2Text||``,text:r?.text||``,...i},updatedAt:XF()}});return $F(e,r),r},nI=(e,t,n)=>{if(!t||!n)return QF(e);let r=QF(e).map(e=>{if(!e||e.id!==t)return e;let r=new Set(YF(e.draftIds));return r.has(n)?r.delete(n):r.add(n),{...e,draftIds:Array.from(r),updatedAt:XF()}});return $F(e,r),r};function rI(){let{user:e}=In(),{showToast:t}=Mm(),n=Le(),[r,i]=(0,b.useState)([]),[a,o]=(0,b.useState)([]),[s,c]=(0,b.useState)(!0),[l,u]=(0,b.useState)(!1),[d,f]=(0,b.useState)(``),[p,m]=(0,b.useState)(``),[h,g]=(0,b.useState)(!1),[_,v]=(0,b.useState)(!1),y=(0,b.useRef)(!0),[x,S]=(0,b.useState)(()=>new Set),[C,w]=(0,b.useState)([]),[T,E]=(0,b.useState)({type:`all`}),[D,O]=(0,b.useState)(null),[k,A]=(0,b.useState)(`frames`);(0,b.useEffect)(()=>(y.current=!0,()=>{y.current=!1}),[]),(0,b.useEffect)(()=>{if(e?.email)try{let t=JSON.stringify(e);localStorage.setItem(`fremio_user`,t),sessionStorage.setItem(`fremio_user_cache`,t),console.log(` [CreateHub] Synced user to storage:`,e.email)}catch(e){console.warn(` [CreateHub] Failed to sync user to storage`,e)}},[e?.email]),(0,b.useEffect)(()=>{e?.email&&w(QF(e.email))},[e?.email]),(0,b.useEffect)(()=>{if(e?.email)try{let e=[];for(let t=0;t<localStorage.length;t++){let n=localStorage.key(t);n&&n.startsWith(`guest:`)&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),e.length>0&&console.log(` [CreateHub] Removed ${e.length} guest keys`);let t=localStorage.getItem(`activeDraftId`);t&&(jn.setItem(`activeDraftId`,t),localStorage.removeItem(`activeDraftId`),console.log(` [CreateHub] Migrated global activeDraftId to user storage`))}catch(e){console.warn(` [CreateHub] Failed to clean up storage:`,e)}},[e?.email]);let j=(0,b.useCallback)(async()=>{if(y.current){if(!e?.email){console.log(` [CreateHub] Waiting for user auth before loading drafts...`),c(!1);return}console.log(` [CreateHub] Loading drafts for user:`,e.email);try{let t=HM.getCachedDraftSummaries?HM.getCachedDraftSummaries(e.email):[];Array.isArray(t)&&t.length>0&&y.current?(i(t),c(!1)):c(!0)}catch{c(!0)}try{let t=HM.loadDraftSummaries?await HM.loadDraftSummaries():await HM.loadDrafts();y.current&&(i(Array.isArray(t)?t:[]),console.log(` [CreateHub] Loaded ${t?.length||0} local drafts`)),e&&(async()=>{try{let e=await OF.getCloudDrafts();y.current&&o(Array.isArray(e)?e:[])}catch(e){console.log(` Cloud drafts not available:`,e.message)}})()}catch(e){console.error(` Failed to load drafts`,e),y.current&&i([])}finally{y.current&&c(!1)}}},[e]);(0,b.useEffect)(()=>{j()},[j]);let M=(0,b.useMemo)(()=>[...r].sort((e,t)=>{let n=new Date(e?.updatedAt||e?.createdAt||0).getTime();return new Date(t?.updatedAt||t?.createdAt||0).getTime()-n}),[r]),N=(0,b.useMemo)(()=>T?.type===`group`&&C.find(e=>e?.id===T?.groupId)||null,[T,C]),P=(0,b.useMemo)(()=>{let e=N?.draftIds;return new Set(Array.isArray(e)?e:[])},[N]),ee=(0,b.useMemo)(()=>D&&C.find(e=>e?.id===D)||null,[D,C]),F=(0,b.useMemo)(()=>{let e=ee?.draftIds;return new Set(Array.isArray(e)?e:[])},[ee]),I=()=>{jn.removeItem(`activeDraftId`),jn.removeItem(`activeDraftSignature`),n(`/create/editor`)},L=e=>{e&&(jn.setItem(`activeDraftId`,e.id),e.signature?jn.setItem(`activeDraftSignature`,e.signature):jn.removeItem(`activeDraftSignature`),n(`/create/editor`,{state:{draftId:e.id}}))},R=async(n,r)=>{if(n.stopPropagation(),r?.id){v(!0);try{let n=r;if(Array.isArray(n?.elements)||(n=await HM.getDraftById(r.id,e?.email)),!n)throw Error(`Draft tidak ditemukan`);console.log(` [SHARE] Draft data being shared:`,{title:n.title,elementsCount:n.elements?.length,elementTypes:n.elements?.map(e=>e.type),hasBackground:n.elements?.some(e=>e.type===`background-photo`),hasOverlay:n.elements?.some(e=>e.type===`upload`),canvasWidth:n.canvasWidth,canvasHeight:n.canvasHeight});let i=JSON.stringify({aspectRatio:n.aspectRatio||`9:16`,canvasBackground:n.canvasBackground||`#f7f1ed`,canvasWidth:n.canvasWidth||1080,canvasHeight:n.canvasHeight||1920,elements:n.elements||[]}),a=await OF.saveDraftToCloud({title:n.title||`Shared Frame`,frameData:i,previewUrl:n.preview||null,draftId:null});if(!a?.draft?.share_id)throw Error(`Gagal mendapatkan share ID`);await OF.updateVisibility(a.draft.id,!0);let o=`${window.location.origin}/take-moment?share=${a.draft.share_id}`;f(o),m(n.title||`Draft`),u(!0),g(!1),v(!1),t(`success`,` Link siap di-share ke teman!`)}catch(e){console.error(`Error generating share link:`,e);try{let e=qF(r);if(e){f(e),m(r.title||`Draft`),u(!0),g(!1),v(!1),t(`warning`,` Link dibuat dengan mode offline`);return}}catch{}v(!1),t(`error`,`Gagal membuat link share. Pastikan sudah login.`)}}},te=()=>{if(!e?.email){t(`error`,`Login diperlukan`);return}let n=eI(e.email),r=QF(e.email);w(r),E({type:`group`,groupId:n.id}),O(null),A(`frames`)},z=(t,n)=>{if(!e?.email||!t||!n)return;let r=nI(e.email,t,n);w(r)},B=()=>{!e?.email||!N?.id||(O(N.id),E({type:`all`}),A(`frames`))},V=()=>{T.type!==`group`||!N?.id||A(e=>e===`preferences`?`frames`:`preferences`)},H=t=>{if(!e?.email||!N?.id)return;let n=tI(e.email,N.id,t);w(n)},ne=async e=>{if(e)try{let t=await new Promise((t,n)=>{let r=new FileReader;r.onload=()=>t(String(r.result||``)),r.onerror=()=>n(Error(`Gagal membaca file`)),r.readAsDataURL(e)});H({logoDataUrl:t})}catch(e){t(`error`,e?.message||`Gagal upload logo`)}},re=async()=>{if(N?.id){v(!0);try{let n=M.filter(e=>P.has(e?.id));if(n.length===0){t(`info`,`Pilih minimal 1 frame untuk group ini`),v(!1);return}let r=[];for(let t of n){let n=t;if(Array.isArray(n?.elements)||(n=await HM.getDraftById(t.id,e?.email)),!n)continue;let i=JSON.stringify({aspectRatio:n.aspectRatio||`9:16`,canvasBackground:n.canvasBackground||`#f7f1ed`,canvasWidth:n.canvasWidth||1080,canvasHeight:n.canvasHeight||1920,elements:n.elements||[]}),a=(await OF.saveDraftToCloud({title:n.title||`Shared Frame`,frameData:i,previewUrl:n.thumbnail||n.preview||null,draftId:null}))?.draft?.share_id;if(!a)continue;r.push({shareId:a,title:n.title||`Draft`,description:n.description||``,thumbnail:n.thumbnail||n.preview||null})}if(r.length===0)throw Error(`Gagal membuat share untuk frame di group`);let i=`https://api.fremio.id/api`.replace(/\/+$/,``),a=await fetch(`${i}/groups/public-share`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({title:N.name||`Group Frames`,frames:r,preferences:N.preferences||null})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e?.error||`Gagal membuat link group`)}let o=(await a.json())?.group?.share_id;if(!o)throw Error(`Gagal mendapatkan group share ID`);let s=`${window.location.origin}/g/${o}`;f(s),m(N.name||`Group Frames`),u(!0),g(!1),t(`success`,` Link group siap di-share!`)}catch(e){console.error(`Error generating group share link:`,e),t(`error`,e?.message||`Gagal membuat link group`)}finally{v(!1)}}},U=async()=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(d);else{let e=document.createElement(`textarea`);e.value=d,e.style.position=`fixed`,e.style.left=`-999999px`,e.style.top=`-999999px`,document.body.appendChild(e),e.focus(),e.select(),document.execCommand(`copy`),e.remove()}g(!0),t(`success`,`Link berhasil disalin!`),setTimeout(()=>g(!1),2e3)}catch(e){console.error(`Failed to copy:`,e),t(`info`,`Tekan lama pada link untuk menyalin`)}},ie=e=>{let t=e.thumbnail||e.preview||e.thumbnailUrl||e.thumbnail_path||e.previewImage;return t?(0,G.jsx)(`img`,{src:t,alt:e.title||`Draft`,style:{width:`100%`,height:`100%`,objectFit:`contain`,borderRadius:`4px`}}):(0,G.jsx)(`div`,{style:{position:`absolute`,inset:`12px`,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,color:`#9ca3af`},children:(0,G.jsx)(`span`,{style:{fontSize:`12px`},children:`Gambar tidak tersedia`})})};function ae({draft:e,index:t,mode:n}){let r=e?.description||``,i=r.length>50,a=x.has(e?.id),o=a?r:r.slice(0,50);return(0,G.jsxs)(`div`,{className:`frame-card`,style:{display:`flex`,flexDirection:`column`,overflow:`hidden`,borderRadius:`8px`,backgroundColor:`white`,boxShadow:`0 1px 3px rgba(0,0,0,0.12)`,border:`2px solid transparent`,cursor:`pointer`,transition:`transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease`,position:`relative`},onClick:()=>{if(n===`select`){z(D,e.id);return}L(e)},onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-3px)`,e.currentTarget.style.boxShadow=`0 8px 20px rgba(0,0,0,0.15)`,e.currentTarget.style.borderColor=`#e0a899`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`0 1px 3px rgba(0,0,0,0.12)`,e.currentTarget.style.borderColor=`transparent`},children:[n===`all`&&(0,G.jsx)(`button`,{type:`button`,onClick:t=>R(t,e),onTouchEnd:t=>R(t,e),title:`Bagikan frame`,style:{position:`absolute`,top:`8px`,right:`8px`,background:`linear-gradient(to right, #e0b7a9, #d4a99a)`,color:`white`,border:`none`,width:`32px`,height:`28px`,borderRadius:`8px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,zIndex:10,boxShadow:`0 10px 22px rgba(224, 183, 169, 0.25)`},children:(0,G.jsx)(um,{size:14})}),n===`select`&&(0,G.jsx)(`button`,{type:`button`,onClick:t=>{t.stopPropagation(),z(D,e.id)},title:F.has(e.id)?`Remove from group`:`Add to group`,style:{position:`absolute`,top:`8px`,left:`8px`,background:F.has(e.id)?`linear-gradient(to right, #e0b7a9, #d4a99a)`:`rgba(255, 255, 255, 0.95)`,color:F.has(e.id)?`white`:`#1e293b`,border:F.has(e.id)?`none`:`1px solid rgba(224, 183, 169, 0.6)`,width:`28px`,height:`28px`,borderRadius:`8px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,zIndex:10,boxShadow:`0 10px 22px rgba(224, 183, 169, 0.18)`},children:F.has(e.id)?(0,G.jsx)(mp,{size:16}):`+`}),(0,G.jsx)(`div`,{style:{position:`relative`,overflow:`hidden`,backgroundColor:`#f9fafb`,aspectRatio:`9/16`,width:`100%`,padding:`12px`,boxSizing:`border-box`},children:ie(e)}),(0,G.jsx)(`div`,{style:{padding:`8px 8px 4px 8px`,textAlign:`center`,fontSize:e?.title&&String(e.title).length>25?`10px`:`12px`,fontWeight:600,color:`#1e293b`,lineHeight:`1.3`,wordWrap:`break-word`,overflowWrap:`break-word`,hyphens:`auto`,minHeight:`32px`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:e?.title?.trim()||`Draft - ${t+1}`}),r&&(0,G.jsxs)(`div`,{style:{padding:`0 8px 8px 8px`,textAlign:`center`,fontSize:`10px`,color:`#64748b`,lineHeight:`1.4`},children:[(0,G.jsxs)(`span`,{children:[o,i&&!a&&`...`]}),i&&(0,G.jsx)(`button`,{type:`button`,onClick:t=>{t.stopPropagation(),S(t=>{let n=new Set(t);return a?n.delete(e.id):n.add(e.id),n})},style:{display:`inline`,marginLeft:`4px`,padding:0,border:`none`,background:`none`,color:`#c89585`,fontSize:`10px`,fontWeight:600,cursor:`pointer`},children:a?`Sembunyikan`:`Selengkapnya`})]})]})}return(0,G.jsxs)(`section`,{className:`anchor create-hub-wrap`,children:[(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsxs)(`div`,{className:`create-hub-section`,children:[(0,G.jsx)(`h2`,{className:`create-hub-title`,children:`Create your frame`}),(0,G.jsx)(`div`,{className:`create-hub-create-card`,onClick:I,children:(0,G.jsx)(`div`,{className:`create-hub-create-icon`,children:(0,G.jsx)(tm,{size:48,strokeWidth:1})})})]}),(0,G.jsxs)(`div`,{className:`create-hub-section`,children:[(0,G.jsx)(`h2`,{className:`create-hub-title`,children:`Drafts`}),(0,G.jsxs)(`div`,{className:`create-hub-tabs`,children:[(0,G.jsx)(`button`,{type:`button`,className:T.type===`all`?`create-hub-tab create-hub-tab--active`:`create-hub-tab`,onClick:()=>{E({type:`all`}),O(null),A(`frames`)},children:`All Frames`}),C.map(e=>(0,G.jsx)(`button`,{type:`button`,className:T.type===`group`&&T.groupId===e.id?`create-hub-tab create-hub-tab--active`:`create-hub-tab`,onClick:()=>{E({type:`group`,groupId:e.id}),O(null),A(`frames`)},children:e.name||`Group`},e.id)),(0,G.jsx)(`button`,{type:`button`,className:`create-hub-tab create-hub-tab--add`,onClick:te,title:`Tambah group`,children:(0,G.jsx)(tm,{size:18,strokeWidth:2})})]}),T.type===`group`&&N&&(0,G.jsxs)(`div`,{className:`create-hub-group-share`,children:[(0,G.jsx)(`h3`,{className:`create-hub-group-share-title`,children:k===`preferences`?`Preferences`:`Share Group Link`}),(0,G.jsxs)(`div`,{className:`create-hub-group-share-actions`,children:[(0,G.jsx)(`button`,{type:`button`,className:k===`preferences`?`create-hub-group-add-btn create-hub-group-add-btn--active`:`create-hub-group-add-btn`,onClick:V,children:(0,G.jsx)(`span`,{children:`Preferences`})}),k!==`preferences`&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`button`,{type:`button`,className:`create-hub-group-share-btn`,onClick:re,children:[(0,G.jsx)(um,{size:16}),(0,G.jsx)(`span`,{children:`Share`})]}),(0,G.jsxs)(`button`,{type:`button`,className:`create-hub-group-add-btn`,onClick:B,children:[(0,G.jsx)(tm,{size:16}),(0,G.jsx)(`span`,{children:`Add Frame`})]})]})]})]}),T.type===`group`&&N&&(0,G.jsx)(G.Fragment,{}),s?(0,G.jsxs)(`div`,{className:`create-hub-loading`,children:[(0,G.jsx)(`div`,{className:`create-hub-spinner`}),(0,G.jsx)(`span`,{children:`Memuat draft...`})]}):M.length===0?(0,G.jsx)(`div`,{className:`create-hub-empty`,children:(0,G.jsx)(`p`,{children:`Belum ada draft. Buat frame baru untuk memulai!`})}):(()=>{let e=T.type===`all`&&!!D,t=T.type===`group`?M.filter(e=>P.has(e?.id)):M;if(T.type===`group`&&t.length===0)return(0,G.jsx)(`div`,{className:`create-hub-empty`,children:(0,G.jsx)(`p`,{children:`Belum ada frame di group ini.`})});if(T.type===`group`&&N&&k===`preferences`){let e=N?.preferences&&typeof N.preferences==`object`?N.preferences:{},n=e?.headerColor||`#ffffff`,r=e?.backgroundColor||`#ffffff`,i=e?.logoDataUrl||null,a=e?.title1Text||``,o=e?.title2Text||``,s=e?.text||``,c=a||N.name||`Group Frames`;return(0,G.jsxs)(`div`,{className:`create-hub-pref-layout`,children:[(0,G.jsx)(`div`,{className:`create-hub-pref-preview`,children:(0,G.jsx)(`div`,{className:`create-hub-pref-phone`,children:(0,G.jsxs)(`div`,{className:`create-hub-pref-phone-screen`,style:{background:r},children:[(0,G.jsxs)(`div`,{className:`create-hub-pref-phone-topbar`,style:{background:n},children:[(0,G.jsx)(`img`,{className:`create-hub-pref-phone-topbar-logo`,src:i||`/assets/logo-salem-mjujrh6i-D7QQumWy.png`,alt:`Logo`}),(0,G.jsx)(`button`,{type:`button`,className:`create-hub-pref-phone-topbar-menu`,children:(0,G.jsx)(`img`,{src:zm,alt:`Menu`})})]}),(0,G.jsxs)(`div`,{className:`create-hub-pref-phone-body`,children:[(0,G.jsx)(`div`,{className:`create-hub-pref-phone-page-title create-hub-pref-phone-page-title--top`,children:c}),(0,G.jsx)(`div`,{className:`create-hub-pref-phone-grid`,children:t.slice(0,12).map((e,t)=>(0,G.jsxs)(`div`,{className:`create-hub-pref-phone-card`,children:[(0,G.jsx)(`div`,{className:`create-hub-pref-phone-thumb`,children:ie(e)}),(0,G.jsx)(`div`,{className:`create-hub-pref-phone-name`,children:e?.title?.trim()||`Draft - ${t+1}`}),e?.description?(0,G.jsxs)(`div`,{className:`create-hub-pref-phone-desc`,children:[String(e.description).slice(0,40),String(e.description).length>40?`... `:` `,(0,G.jsx)(`span`,{className:`create-hub-pref-phone-more`,children:`Selengkapnya`})]}):null]},e?.id||t))}),o?(0,G.jsx)(`div`,{className:`create-hub-pref-phone-page-title create-hub-pref-phone-page-title--below`,children:o}):null,s?(0,G.jsx)(`div`,{className:`create-hub-pref-phone-page-text create-hub-pref-phone-page-text--below`,children:s}):null]})]})})}),(0,G.jsx)(`div`,{className:`create-hub-pref-form`,children:(0,G.jsxs)(`div`,{className:`create-hub-group-preferences`,children:[(0,G.jsxs)(`div`,{className:`create-hub-group-pref-row`,children:[(0,G.jsx)(`div`,{className:`create-hub-group-pref-label`,children:`Add Logo`}),(0,G.jsxs)(`div`,{className:`create-hub-group-pref-control`,children:[(0,G.jsx)(`input`,{type:`file`,accept:`image/*`,onChange:e=>ne(e.target.files?.[0])}),N?.preferences?.logoDataUrl?(0,G.jsx)(`button`,{type:`button`,className:`create-hub-group-pref-clear`,onClick:()=>H({logoDataUrl:null}),children:`Hapus`}):null]})]}),(0,G.jsxs)(`div`,{className:`create-hub-group-pref-row`,children:[(0,G.jsx)(`div`,{className:`create-hub-group-pref-label`,children:`Header Color`}),(0,G.jsx)(`div`,{className:`create-hub-group-pref-control`,children:(0,G.jsx)(`input`,{type:`color`,value:N?.preferences?.headerColor||`#ffffff`,onChange:e=>H({headerColor:e.target.value})})})]}),(0,G.jsxs)(`div`,{className:`create-hub-group-pref-row`,children:[(0,G.jsx)(`div`,{className:`create-hub-group-pref-label`,children:`Background Color`}),(0,G.jsx)(`div`,{className:`create-hub-group-pref-control`,children:(0,G.jsx)(`input`,{type:`color`,value:N?.preferences?.backgroundColor||`#ffffff`,onChange:e=>H({backgroundColor:e.target.value})})})]}),(0,G.jsxs)(`div`,{className:`create-hub-group-pref-row`,children:[(0,G.jsx)(`div`,{className:`create-hub-group-pref-label`,children:`Judul 1 teks`}),(0,G.jsx)(`div`,{className:`create-hub-group-pref-control`,children:(0,G.jsx)(`input`,{type:`text`,value:N?.preferences?.title1Text||``,onChange:e=>H({title1Text:e.target.value})})})]}),(0,G.jsxs)(`div`,{className:`create-hub-group-pref-row`,children:[(0,G.jsx)(`div`,{className:`create-hub-group-pref-label`,children:`Judul 2 teks`}),(0,G.jsx)(`div`,{className:`create-hub-group-pref-control`,children:(0,G.jsx)(`input`,{type:`text`,value:N?.preferences?.title2Text||``,onChange:e=>H({title2Text:e.target.value})})})]}),(0,G.jsxs)(`div`,{className:`create-hub-group-pref-row`,children:[(0,G.jsx)(`div`,{className:`create-hub-group-pref-label`,children:`Teks`}),(0,G.jsx)(`div`,{className:`create-hub-group-pref-control`,children:(0,G.jsx)(`input`,{type:`text`,value:N?.preferences?.text||``,onChange:e=>H({text:e.target.value})})})]})]})})]})}return T.type===`group`&&N?(0,G.jsx)(`div`,{className:`frames-grid`,children:t.map((e,t)=>(0,G.jsx)(ae,{draft:e,index:t,mode:`all`},e.id||t))}):(0,G.jsx)(`div`,{className:`frames-grid`,children:t.map((t,n)=>(0,G.jsx)(ae,{draft:t,index:n,mode:e?`select`:`all`},t.id||n))})})()]})]}),_&&(0,G.jsx)(`div`,{className:`create-hub-fullscreen-loading`,children:(0,G.jsxs)(`div`,{className:`create-hub-fullscreen-loading-content`,children:[(0,G.jsx)(`div`,{className:`create-hub-fullscreen-spinner`}),(0,G.jsx)(`p`,{children:`Menyiapkan link share...`})]})}),l&&(0,G.jsx)(`div`,{className:`create-hub-modal-overlay`,onClick:()=>u(!1),children:(0,G.jsxs)(`div`,{className:`create-hub-modal`,onClick:e=>e.stopPropagation(),children:[(0,G.jsx)(`h3`,{className:`create-hub-modal-title`,children:`Bagikan`}),(0,G.jsx)(`p`,{className:`create-hub-modal-desc`,children:`Orang lain dapat menggunakan frame ini dengan link berikut:`}),(0,G.jsxs)(`div`,{className:`create-hub-share-link-container`,children:[(0,G.jsx)(`input`,{type:`text`,className:`create-hub-share-input`,value:d,readOnly:!0}),(0,G.jsxs)(`button`,{className:h?`create-hub-copy-btn copied`:`create-hub-copy-btn`,onClick:U,children:[h?(0,G.jsx)(mp,{size:18}):(0,G.jsx)(Tp,{size:18}),h?`Tersalin!`:`Salin`]})]}),(0,G.jsx)(`button`,{className:`create-hub-modal-close`,onClick:()=>u(!1),children:`Tutup`})]})})]})}var iI=`__fremio_shared_frame_temp__`;function aI(){let{shareId:e}=Ve(),t=Le(),{showToast:n}=Mm(),[r,i]=(0,b.useState)(!0),[a,o]=(0,b.useState)(null);return(0,b.useEffect)(()=>{e&&(async()=>{try{console.log(` [SharedFrame] Loading shared frame:`,e);let r=await OF.getSharedDraft(e);if(!r||!r.frame_data)throw Error(`Frame data not found`);console.log(` [SharedFrame] Draft loaded:`,{id:r.id,title:r.title,shareId:r.share_id});let i=typeof r.frame_data==`string`?JSON.parse(r.frame_data):r.frame_data;console.log(` [SharedFrame] Frame data:`,{aspectRatio:i.aspectRatio,elementsCount:i.elements?.length,hasPhotoSlots:!!i.photoSlots});let a=i.elements?.filter(e=>e.type===`photo`)||[],o=i.canvasWidth||1080,s=i.canvasHeight||1920,c={id:`shared-${r.share_id}`,title:r.title||`Shared Frame`,aspectRatio:i.aspectRatio||`9:16`,canvasBackground:i.canvasBackground||i.background||`#f7f1ed`,canvasWidth:o,canvasHeight:s,elements:i.elements||[],maxCaptures:a.length||1,slots:a.map((e,t)=>({id:e.id||`slot_${t+1}`,left:e.x/o,top:e.y/s,width:e.width/o,height:e.height/s,zIndex:e.zIndex||1,photoIndex:t,aspectRatio:e.data?.aspectRatio||`4:5`})),designer:{elements:i.elements||[],canvasBackground:i.canvasBackground||i.background||`#f7f1ed`,aspectRatio:i.aspectRatio||`9:16`,canvasWidth:o,canvasHeight:s},isCustom:!0,isShared:!0,shareId:r.share_id,preview:r.preview_url};console.log(` [SharedFrame] Frame config created:`,{id:c.id,maxCaptures:c.maxCaptures,slotsCount:c.slots?.length,hasDesigner:!!c.designer,designerElementsCount:c.designer?.elements?.length,elementTypes:c.designer?.elements?.map(e=>e.type)});let l={frameConfig:{...c,__timestamp:Date.now(),__savedFrom:`SharedFrame`,__isSharedFrame:!0},draftData:{id:`shared-${r.share_id}`,title:r.title,aspectRatio:i.aspectRatio,elements:i.elements,canvasBackground:i.canvasBackground||i.background,canvasWidth:o,canvasHeight:s,preview:r.preview_url}};try{sessionStorage.setItem(iI,JSON.stringify(l)),console.log(` [SharedFrame] Saved to sessionStorage:`,{frameConfigId:c.id,isSharedFrame:!0})}catch(e){throw console.error(` [SharedFrame] Failed to save to sessionStorage:`,e),Error(`Failed to save shared frame data`)}try{await Gk.setCustomFrame(c)}catch(e){console.warn(` [SharedFrame] frameProvider failed, but storage backup exists:`,e)}n(`success`,`Frame "${c.title}" dimuat!`),setTimeout(()=>{t(`/take-moment`,{replace:!0})},300)}catch(e){console.error(` [SharedFrame] Error:`,e),o(e.message||`Frame tidak ditemukan`),n(`error`,`Frame tidak ditemukan atau tidak tersedia`),setTimeout(()=>{t(`/frames`,{replace:!0})},2500)}finally{i(!1)}})()},[e,t,n]),r?(0,G.jsxs)(`div`,{className:`shared-frame-container`,children:[(0,G.jsx)(`div`,{className:`shared-frame-spinner`}),(0,G.jsx)(`p`,{className:`shared-frame-text`,children:`Memuat frame...`})]}):a?(0,G.jsxs)(`div`,{className:`shared-frame-container`,children:[(0,G.jsx)(`div`,{className:`shared-frame-emoji`,children:``}),(0,G.jsx)(`h2`,{className:`shared-frame-title`,children:`Frame Tidak Ditemukan`}),(0,G.jsx)(`p`,{className:`shared-frame-error`,children:a}),(0,G.jsx)(`p`,{className:`shared-frame-redirect`,children:`Mengalihkan ke halaman Frames...`})]}):null}var oI=()=>`https://api.fremio.id/api`;async function sI(e){let t=oI(),n=await fetch(`${t}/groups/share/${e}`);if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e?.error||`Group not found`)}return(await n.json()).group}function cI({frame:e,onSelect:t}){let[n,r]=(0,b.useState)(!1),i=e?.description||``,a=i.length>50,o=n?i:i.slice(0,50),s=()=>{typeof t==`function`&&t()};return(0,G.jsxs)(`div`,{className:`frame-card`,style:{display:`flex`,flexDirection:`column`,overflow:`hidden`,borderRadius:`8px`,backgroundColor:`white`,boxShadow:`0 1px 3px rgba(0,0,0,0.12)`,border:`2px solid transparent`,cursor:`pointer`,transition:`transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease`,position:`relative`},role:`button`,tabIndex:0,onClick:s,onTouchEnd:e=>{e.preventDefault(),s()},onKeyDown:e=>{(e.key===`Enter`||e.key===` `)&&(e.preventDefault(),s())},onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-3px)`,e.currentTarget.style.boxShadow=`0 8px 20px rgba(0,0,0,0.15)`,e.currentTarget.style.borderColor=`#e0a899`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`0 1px 3px rgba(0,0,0,0.12)`,e.currentTarget.style.borderColor=`transparent`},children:[(0,G.jsx)(`div`,{style:{position:`relative`,overflow:`hidden`,backgroundColor:`#f9fafb`,aspectRatio:`9/16`,width:`100%`,padding:`12px`,boxSizing:`border-box`},children:e?.thumbnail?(0,G.jsx)(`img`,{src:e.thumbnail,alt:e?.title||`Frame`,style:{width:`100%`,height:`100%`,objectFit:`contain`,borderRadius:`4px`}}):(0,G.jsx)(`div`,{style:{position:`absolute`,inset:`12px`,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,color:`#9ca3af`},children:(0,G.jsx)(`span`,{style:{fontSize:`12px`},children:`Gambar tidak tersedia`})})}),(0,G.jsx)(`div`,{style:{padding:`8px 8px 4px 8px`,textAlign:`center`,fontSize:e?.title&&String(e.title).length>25?`10px`:`12px`,fontWeight:600,color:`#1e293b`,lineHeight:`1.3`,wordWrap:`break-word`,overflowWrap:`break-word`,hyphens:`auto`,minHeight:`32px`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:e?.title||`Frame`}),i?(0,G.jsxs)(`div`,{style:{padding:`0 8px 8px 8px`,textAlign:`center`,fontSize:`10px`,color:`#64748b`,lineHeight:`1.4`},children:[(0,G.jsxs)(`span`,{children:[o,a&&!n&&`...`]}),a?(0,G.jsx)(`button`,{onClick:e=>{e.stopPropagation(),r(!n)},style:{display:`inline`,marginLeft:`4px`,padding:0,border:`none`,background:`none`,color:`#c89585`,fontSize:`10px`,fontWeight:600,cursor:`pointer`},children:n?`Sembunyikan`:`Selengkapnya`}):null]}):null]})}function lI(){let{shareId:e}=Ve(),{setBranding:t,clearBranding:n}=Rm(),[r,i]=(0,b.useState)(!0),[a,o]=(0,b.useState)(null),[s,c]=(0,b.useState)(null),l=(0,b.useMemo)(()=>Array.isArray(a?.frames)?a.frames:[],[a?.frames]),u=(0,b.useMemo)(()=>{let e=a?.preferences;if(e&&typeof e==`object`)return e;if(typeof e==`string`)try{return JSON.parse(e)}catch{return null}return null},[a?.preferences]),d=u?.headerColor||`#ffffff`,f=u?.backgroundColor||`#ffffff`,p=u?.logoDataUrl||null,m=u?.title1Text||``,h=u?.title2Text||``,g=u?.text||``;if((0,b.useEffect)(()=>(t({logoSrc:null,headerColor:d||null}),()=>{n()}),[n,d,p,t]),(0,b.useEffect)(()=>{let t=!1;return e&&(async()=>{try{i(!0);let n=await sI(e);if(t)return;let r=n?.frames,a=Array.isArray(r)?r:typeof r==`string`?JSON.parse(r):[];o({title:n?.title||`Group Frames`,frames:a,preferences:n?.preferences||null})}catch(e){t||c(e?.message||`Group tidak ditemukan`)}finally{t||i(!1)}})(),()=>{t=!0}},[e]),r)return(0,G.jsx)(`section`,{style:{minHeight:`100vh`,background:`linear-gradient(to bottom, #fdf7f4, white, #f7f1ed)`,paddingTop:`48px`,paddingBottom:`48px`},children:(0,G.jsx)(`div`,{style:{maxWidth:`1280px`,margin:`0 auto`,padding:`0 16px`},children:(0,G.jsx)(`h2`,{style:{marginBottom:`24px`,textAlign:`center`,fontSize:`24px`,fontWeight:`bold`,color:`#1e293b`},children:`Memuat group...`})})});if(s)return(0,G.jsx)(`section`,{style:{minHeight:`100vh`,background:`linear-gradient(to bottom, #fdf7f4, white, #f7f1ed)`,paddingTop:`48px`,paddingBottom:`48px`},children:(0,G.jsxs)(`div`,{style:{maxWidth:`1280px`,margin:`0 auto`,padding:`0 16px`},children:[(0,G.jsx)(`h2`,{style:{marginBottom:`12px`,textAlign:`center`,fontSize:`24px`,fontWeight:`bold`,color:`#1e293b`},children:`Group Tidak Ditemukan`}),(0,G.jsx)(`p`,{style:{textAlign:`center`,color:`#64748b`},children:s})]})});let _=m||a?.title||`Group Frames`;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`style`,{children:`
        .frames-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 12px;
        }
        .frames-grid .frame-card {
          width: 100%;
          max-width: 220px;
        }
        @media (min-width: 768px) {
          .frames-grid {
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
          }
          .frames-grid .frame-card {
            width: 100%;
            max-width: 220px;
          }
        }
      `}),(0,G.jsx)(`section`,{style:{minHeight:`100vh`,background:f||`#ffffff`,paddingTop:`28px`,paddingBottom:`48px`},children:(0,G.jsxs)(`div`,{style:{maxWidth:`1280px`,margin:`0 auto`,padding:`0 16px`},children:[p?(0,G.jsx)(`div`,{style:{display:`flex`,justifyContent:`center`,margin:`6px 0 14px 0`},children:(0,G.jsx)(`img`,{src:p,alt:`Logo`,style:{maxHeight:`52px`,maxWidth:`220px`,objectFit:`contain`}})}):null,(0,G.jsx)(`h2`,{style:{margin:`0 0 10px 0`,textAlign:`center`,fontSize:`22px`,fontWeight:900,color:`#1e293b`},children:_}),(0,G.jsx)(`div`,{className:`frames-grid`,children:l.map((e,t)=>{let n=e?.shareId||e?.share_id;return(0,G.jsx)(cI,{frame:{title:e?.title||`Frame ${t+1}`,thumbnail:e?.thumbnail||null,description:e?.description||``},onSelect:()=>{if(!n)return;let e=`/take-moment?share=${encodeURIComponent(n)}`,t=new URL(e,window.location.origin).toString();window.location.assign(t)}},n||t)})}),h?(0,G.jsx)(`div`,{style:{marginTop:`18px`,textAlign:`left`,fontSize:`22px`,fontWeight:900,color:`#1e293b`},children:h}):null,g?(0,G.jsx)(`div`,{style:{marginTop:`8px`,textAlign:`left`,fontSize:`12px`,color:`#475569`,lineHeight:1.5,whiteSpace:`pre-wrap`},children:g}):null]})})]})}function uI(){return(0,G.jsxs)(`section`,{className:`container pad center`,children:[(0,G.jsx)(`h2`,{children:`404  Halaman tidak ditemukan`}),(0,G.jsx)(nn,{to:`/`,className:`btn`,children:`Kembali ke Home`})]})}function dI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var fI=dI,pI=new eg(`auth`,`Firebase`,dI()),mI=new Eg(`@firebase/auth`);function hI(e,...t){mI.logLevel<=xg.WARN&&mI.warn(`Auth (${z_}): ${e}`,...t)}function gI(e,...t){mI.logLevel<=xg.ERROR&&mI.error(`Auth (${z_}): ${e}`,...t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function _I(e,...t){throw xI(e,...t)}function vI(e,...t){return xI(e,...t)}function yI(e,t,n){let r={...fI(),[t]:n};return new eg(`auth`,`Firebase`,r).create(t,{appName:e.name})}function bI(e){return yI(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function xI(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return pI.create(e,...t)}function $(e,t,...n){if(!e)throw xI(t,...n)}function SI(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw gI(t),Error(t)}function CI(e,t){e||SI(t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function wI(){return typeof self<`u`&&self.location?.href||``}function TI(){return EI()===`http:`||EI()===`https:`}function EI(){return typeof self<`u`&&self.location?.protocol||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function DI(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(TI()||Kh()||`connection`in navigator)?navigator.onLine:!0}function OI(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var kI=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,CI(t>e,`Short delay should be less than long delay!`),this.isMobile=Uh()||qh()}get(){return DI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function AI(e,t){CI(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var jI=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;SI(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;SI(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;SI(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},MI={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},NI=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],PI=new kI(3e4,6e4);function FI(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function II(e,t,n,r,i={}){return LI(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=og({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return Gh()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&Fh(e.emulatorConfig.host)&&(c.credentials=`include`),jI.fetch()(await zI(e,e.config.apiHost,n,o),c)})}async function LI(e,t,n){e._canInitEmulator=!1;let r={...MI,...t};try{let t=new VI(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw HI(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw HI(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw HI(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw HI(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw yI(e,o,n);_I(e,o)}}catch(t){if(t instanceof $h)throw t;_I(e,`network-request-failed`,{message:String(t)})}}async function RI(e,t,n,r,i={}){let a=await II(e,t,n,r,i);return`mfaPendingCredential`in a&&_I(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function zI(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?AI(e.config,i):`${e.config.apiScheme}://${i}`;return NI.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function BI(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var VI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(vI(this.auth,`network-request-failed`)),PI.get())})}};function HI(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=vI(e,t,r);return i.customData._tokenResponse=n,i}function UI(e){return e!==void 0&&e.enterprise!==void 0}var WI=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function GI(e,t){return II(e,`GET`,`/v2/recaptchaConfig`,FI(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function KI(e,t){return II(e,`POST`,`/v1/accounts:delete`,t)}async function qI(e,t){return II(e,`POST`,`/v1/accounts:lookup`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function JI(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function YI(e,t=!1){let n=pg(e),r=await n.getIdToken(t),i=ZI(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:JI(XI(i.auth_time)),issuedAtTime:JI(XI(i.iat)),expirationTime:JI(XI(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function XI(e){return Number(e)*1e3}function ZI(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return gI(`JWT malformed, contained fewer than 3 sections`),null;try{let e=Th(n);return e?JSON.parse(e):(gI(`Failed to decode base64 JWT payload`),null)}catch(e){return gI(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function QI(e){let t=ZI(e);return $(t,`internal-error`),$(t.exp!==void 0,`internal-error`),$(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function $I(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof $h&&eL(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function eL({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var tL=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},nL=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=JI(this.lastLoginAt),this.creationTime=JI(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function rL(e){let t=e.auth,n=await e.getIdToken(),r=await $I(e,qI(t,{idToken:n}));$(r?.users.length,t,`internal-error`);let i=r.users[0];e._notifyReloadListener(i);let a=i.providerUserInfo?.length?oL(i.providerUserInfo):[],o=aL(e.providerData,a),s=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!o?.length,l=s?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new nL(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)}async function iL(e){let t=pg(e);await rL(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function aL(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function oL(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function sL(e,t){let n=await LI(e,{},async()=>{let n=og({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await zI(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&Fh(e.emulatorConfig.host)&&(s.credentials=`include`),jI.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cL(e,t){return II(e,`POST`,`/v2/accounts:revokeToken`,FI(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var lL=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,`internal-error`),$(e.idToken!==void 0,`internal-error`),$(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):QI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$(e.length!==0,`internal-error`);let t=QI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await sL(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&($(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&($(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&($(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return SI(`not implemented`)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function uL(e,t){$(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var dL=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new tL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new nL(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await $I(this,this.stsTokenManager.getToken(this.auth,e));return $(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YI(this,e)}reload(){return iL(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await rL(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(I_(this.auth.app))return Promise.reject(bI(this.auth));let e=await this.getIdToken();return await $I(this,KI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;$(d&&h,t,`internal-error`);let g=lL.fromJSON(this.name,h);$(typeof d==`string`,t,`internal-error`),uL(r,t.name),uL(i,t.name),$(typeof f==`boolean`,t,`internal-error`),$(typeof p==`boolean`,t,`internal-error`),uL(a,t.name),uL(o,t.name),uL(s,t.name),uL(c,t.name),uL(l,t.name),uL(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new lL;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await rL(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];$(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:oL(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new lL;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new nL(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},fL=new Map;function pL(e){CI(e instanceof Function,`Expected a class definition`);let t=fL.get(e);return t?(CI(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,fL.set(e,t),t)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var mL=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};mL.type=`NONE`;var hL=mL;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function gL(e,t,n){return`firebase:${e}:${t}:${n}`}var _L=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=gL(this.userKey,r.apiKey,i),this.fullPersistenceKey=gL(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await qI(this.auth,{idToken:e}).catch(()=>void 0);return t?dL._fromGetAccountInfoResponse(this.auth,t,e):null}return dL._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(pL(hL),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||pL(hL),o=gL(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await qI(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await dL._fromGetAccountInfoResponse(t,e,n)}else r=dL._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function vL(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(SL(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(yL(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(wL(t))return`Blackberry`;if(TL(t))return`Webos`;if(bL(t))return`Safari`;if((t.includes(`chrome/`)||xL(t))&&!t.includes(`edge/`))return`Chrome`;if(CL(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function yL(e=Hh()){return/firefox\//i.test(e)}function bL(e=Hh()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function xL(e=Hh()){return/crios\//i.test(e)}function SL(e=Hh()){return/iemobile/i.test(e)}function CL(e=Hh()){return/android/i.test(e)}function wL(e=Hh()){return/blackberry/i.test(e)}function TL(e=Hh()){return/webos/i.test(e)}function EL(e=Hh()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function DL(e=Hh()){return EL(e)&&!!window.navigator?.standalone}function OL(){return Jh()&&document.documentMode===10}function kL(e=Hh()){return EL(e)||CL(e)||TL(e)||wL(e)||/windows phone/i.test(e)||SL(e)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function AL(e,t=[]){let n;switch(e){case`Browser`:n=vL(Hh());break;case`Worker`:n=`${vL(Hh())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${z_}/${r}`}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var jL=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{let r=e(t);n(r)}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function ML(e,t={}){return II(e,`GET`,`/v2/passwordPolicy`,FI(e,t))}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var NL=6,PL=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??NL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},FL=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LL(this),this.idTokenSubscription=new LL(this),this.beforeStateQueue=new jL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pL(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _L.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await qI(this,{idToken:e}),n=await dL._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(I_(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rL(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(I_(this.app))return Promise.reject(bI(this));let t=e?pg(e):null;return t&&$(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return I_(this.app)?Promise.reject(bI(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return I_(this.app)?Promise.reject(bI(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pL(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await ML(this),t=new PL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eg(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),n={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await cL(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&pL(e)||this._popupRedirectResolver;$(t,this,`argument-error`),this.redirectPersistenceManager=await _L.create(this,[pL(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if($(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(I_(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hI(`Error while retrieving App Check token: ${e.error}`),e?.token}};function IL(e){return pg(e)}var LL=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=lg(e=>this.observer=e)}get next(){return $(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},RL={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function zL(e){RL=e}function BL(e){return RL.loadJS(e)}function VL(){return RL.recaptchaEnterpriseScript}function HL(){return RL.gapiScript}function UL(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var WL=class{constructor(){this.enterprise=new GL}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},GL=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},KL=`recaptcha-enterprise`,qL=`NO_RECAPTCHA`,JL=class{constructor(e){this.type=KL,this.auth=IL(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{GI(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new WI(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;UI(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(qL)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new WL().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&UI(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=VL();t.length!==0&&(t+=n),BL(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function YL(e,t,n,r=!1,i=!1){let a=new JL(e),o;if(i)o=qL;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function XL(e,t,n,r,i){if(i===`EMAIL_PASSWORD_PROVIDER`)if(e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)){let i=await YL(e,t,n,n===`getOobCode`);return r(e,i)}else return r(e,t).catch(async i=>{if(i.code===`auth/missing-recaptcha-token`){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let i=await YL(e,t,n,n===`getOobCode`);return r(e,i)}else return Promise.reject(i)});else if(i===`PHONE_PROVIDER`)if(e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)){let i=await YL(e,t,n);return r(e,i).catch(async i=>{if(e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let i=await YL(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}else{let i=await YL(e,t,n,!1,!0);return r(e,i)}else return Promise.reject(i+` provider is not supported.`)}async function ZL(e){let t=IL(e),n=await GI(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}),r=new WI(n);t.tenantId==null?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()&&new JL(t).verify()}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function QL(e,t){let n=F_(e,`auth`);if(n.isInitialized()){let e=n.getImmediate(),r=n.getOptions();if(ig(r,t??{}))return e;_I(e,`already-initialized`)}return n.initialize({options:t})}function $L(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(pL);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function eR(e,t,n){let r=IL(e);$(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=tR(t),{host:o,port:s}=nR(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),$(ig(l,r.config.emulator)&&ig(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Fh(o)?(Ih(`${a}//${o}${c}`),Vh(`Auth`,!0)):i||iR()}function tR(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function nR(e){let t=tR(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:rR(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:rR(t)}}}function rR(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function iR(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var aR=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return SI(`not implemented`)}_getIdTokenResponse(e){return SI(`not implemented`)}_linkToIdToken(e,t){return SI(`not implemented`)}_getReauthenticationResolver(e){return SI(`not implemented`)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function oR(e,t){return II(e,`POST`,`/v1/accounts:resetPassword`,FI(e,t))}async function sR(e,t){return II(e,`POST`,`/v1/accounts:signUp`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function cR(e,t){return RI(e,`POST`,`/v1/accounts:signInWithPassword`,FI(e,t))}async function lR(e,t){return II(e,`POST`,`/v1/accounts:sendOobCode`,FI(e,t))}async function uR(e,t){return lR(e,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function dR(e,t){return RI(e,`POST`,`/v1/accounts:signInWithEmailLink`,FI(e,t))}async function fR(e,t){return RI(e,`POST`,`/v1/accounts:signInWithEmailLink`,FI(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var pR=class e extends aR{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`};return XL(e,t,`signInWithPassword`,cR,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return dR(e,{email:this._email,oobCode:this._password});default:_I(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:let n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`};return XL(e,n,`signUpPassword`,sR,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return fR(e,{idToken:t,email:this._email,oobCode:this._password});default:_I(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function mR(e,t){return RI(e,`POST`,`/v1/accounts:signInWithIdp`,FI(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var hR=`http://localhost`,gR=class e extends aR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):_I(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return mR(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,mR(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,mR(e,t)}buildRequest(){let e={requestUri:hR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=og(t)}return e}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function _R(e,t){return II(e,`POST`,`/v1/accounts:sendVerificationCode`,FI(e,t))}async function vR(e,t){return RI(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,FI(e,t))}async function yR(e,t){let n=await RI(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,FI(e,t));if(n.temporaryProof)throw HI(e,`account-exists-with-different-credential`,n);return n}var bR={USER_NOT_FOUND:`user-not-found`};async function xR(e,t){let n={...t,operation:`REAUTH`};return RI(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,FI(e,n),bR)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var SR=class e extends aR{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return vR(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return yR(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return xR(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function CR(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function wR(e){let t=sg(cg(e)).link,n=t?sg(cg(t)).deep_link_id:null,r=sg(cg(e)).deep_link_id;return(r?sg(cg(r)).link:null)||r||n||t||e}var TR=class e{constructor(e){let t=sg(cg(e)),n=t.apiKey??null,r=t.oobCode??null,i=CR(t.mode??null);$(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=wR(t);try{return new e(n)}catch{return null}}},ER=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return pR._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=TR.parseLink(t);return $(n,`argument-error`),pR._fromEmailAndCode(e,n.code,n.tenantId)}};ER.PROVIDER_ID=`password`,ER.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,ER.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var DR=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},OR=class extends DR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},kR=class e extends OR{constructor(){super(`facebook.com`)}static credential(t){return gR._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};kR.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,kR.PROVIDER_ID=`facebook.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var AR=class e extends OR{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return gR._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};AR.GOOGLE_SIGN_IN_METHOD=`google.com`,AR.PROVIDER_ID=`google.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var jR=class e extends OR{constructor(){super(`github.com`)}static credential(t){return gR._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};jR.GITHUB_SIGN_IN_METHOD=`github.com`,jR.PROVIDER_ID=`github.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var MR=class e extends OR{constructor(){super(`twitter.com`)}static credential(t,n){return gR._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};MR.TWITTER_SIGN_IN_METHOD=`twitter.com`,MR.PROVIDER_ID=`twitter.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var NR=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){let a=await dL._fromIdTokenResponse(t,r,i),o=PR(r);return new e({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);let i=PR(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})}};function PR(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var FR=class e extends $h{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function IR(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?FR._fromErrorAndOperation(e,n,t,r):n})}async function LR(e,t,n=!1){let r=await $I(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return NR._forOperation(e,`link`,r)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function RR(e,t,n=!1){let{auth:r}=e;if(I_(r.app))return Promise.reject(bI(r));let i=`reauthenticate`;try{let a=await $I(e,IR(r,i,t,e),n);$(a.idToken,r,`internal-error`);let o=ZI(a.idToken);$(o,r,`internal-error`);let{sub:s}=o;return $(e.uid===s,r,`user-mismatch`),NR._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&_I(r,`user-mismatch`),e}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function zR(e,t,n=!1){if(I_(e.app))return Promise.reject(bI(e));let r=`signIn`,i=await IR(e,r,t),a=await NR._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var BR=class{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return`phoneInfo`in t?VR._fromServerResponse(e,t):`totpInfo`in t?HR._fromServerResponse(e,t):_I(e,`internal-error`)}},VR=class e extends BR{constructor(e){super(`phone`,e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(t,n){return new e(n)}},HR=class e extends BR{constructor(e){super(`totp`,e)}static _fromServerResponse(t,n){return new e(n)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function UR(e,t,n){$(n.url?.length>0,e,`invalid-continue-uri`),$(n.dynamicLinkDomain===void 0||n.dynamicLinkDomain.length>0,e,`invalid-dynamic-link-domain`),$(n.linkDomain===void 0||n.linkDomain.length>0,e,`invalid-hosting-link-domain`),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($(n.iOS.bundleId.length>0,e,`missing-ios-bundle-id`),t.iOSBundleId=n.iOS.bundleId),n.android&&($(n.android.packageName.length>0,e,`missing-android-pkg-name`),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function WR(e){let t=IL(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function GR(e,t,n){let r=IL(e),i={requestType:`PASSWORD_RESET`,email:t,clientType:`CLIENT_TYPE_WEB`};n&&UR(r,i,n),await XL(r,i,`getOobCode`,uR,`EMAIL_PASSWORD_PROVIDER`)}async function KR(e,t,n){await oR(pg(e),{oobCode:t,newPassword:n}).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&WR(e),t})}async function qR(e,t){let n=pg(e),r=await oR(n,{oobCode:t}),i=r.requestType;switch($(i,n,`internal-error`),i){case`EMAIL_SIGNIN`:break;case`VERIFY_AND_CHANGE_EMAIL`:$(r.newEmail,n,`internal-error`);break;case`REVERT_SECOND_FACTOR_ADDITION`:$(r.mfaInfo,n,`internal-error`);default:$(r.email,n,`internal-error`)}let a=null;return r.mfaInfo&&(a=BR._fromServerResponse(IL(n),r.mfaInfo)),{data:{email:(r.requestType===`VERIFY_AND_CHANGE_EMAIL`?r.newEmail:r.email)||null,previousEmail:(r.requestType===`VERIFY_AND_CHANGE_EMAIL`?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function JR(e,t){let{data:n}=await qR(pg(e),t);return n.email}function YR(e,t,n,r){return pg(e).onIdTokenChanged(t,n,r)}function XR(e,t,n){return pg(e).beforeAuthStateChanged(t,n)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ZR(e,t){return II(e,`POST`,`/v2/accounts/mfaEnrollment:start`,FI(e,t))}function QR(e,t){return II(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,FI(e,t))}function $R(e,t){return II(e,`POST`,`/v2/accounts/mfaEnrollment:start`,FI(e,t))}function ez(e,t){return II(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,FI(e,t))}var tz=`__sak`,nz=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tz,`1`),this.storage.removeItem(tz),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},rz=1e3,iz=10,az=class extends nz{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);OL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,iz):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},rz)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};az.type=`LOCAL`;var oz=az,sz=1e3;function cz(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function lz(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var uz=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=lz(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:cz(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=lz(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=lz(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=cz(n),i=setInterval(()=>{let e=cz(n);e!==r&&(t(e),r=e)},sz);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};uz.type=`COOKIE`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var dz=class extends nz{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};dz.type=`SESSION`;var fz=dz;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function pz(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var mz=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=Array.from(a).map(async e=>e(t.origin,i)),s=await pz(o);t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:s})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};mz.receivers=[];
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function hz(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var gz=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=hz(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function _z(){return window}function vz(e){_z().location.href=e}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function yz(){return _z().WorkerGlobalScope!==void 0&&typeof _z().importScripts==`function`}async function bz(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xz(){return navigator?.serviceWorker?.controller||null}function Sz(){return yz()?self:null}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Cz=`firebaseLocalStorageDb`,wz=1,Tz=`firebaseLocalStorage`,Ez=`fbase_key`,Dz=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function Oz(e,t){return e.transaction([Tz],t?`readwrite`:`readonly`).objectStore(Tz)}function kz(){let e=indexedDB.deleteDatabase(Cz);return new Dz(e).toPromise()}function Az(){let e=indexedDB.open(Cz,wz);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(Tz,{keyPath:Ez})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(Tz)?t(n):(n.close(),await kz(),t(await Az()))})})}async function jz(e,t,n){let r=Oz(e,!0).put({[Ez]:t,value:n});return new Dz(r).toPromise()}async function Mz(e,t){let n=Oz(e,!1).get(t),r=await new Dz(n).toPromise();return r===void 0?null:r.value}function Nz(e,t){let n=Oz(e,!0).delete(t);return new Dz(n).toPromise()}var Pz=800,Fz=3,Iz=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Az(),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>Fz)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return yz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mz._getInstance(Sz()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await bz(),!this.activeServiceWorker)return;this.sender=new gz(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xz()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Az();return await jz(e,tz,`1`),await Nz(e,tz),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>jz(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>Mz(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nz(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=Oz(e,!1).getAll();return new Dz(t).toPromise()});if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Pz)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Iz.type=`LOCAL`;var Lz=Iz;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Rz(e,t){return II(e,`POST`,`/v2/accounts/mfaSignIn:start`,FI(e,t))}function zz(e,t){return II(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,FI(e,t))}function Bz(e,t){return II(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,FI(e,t))}UL(`rcb`),new kI(3e4,6e4);
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Vz=`recaptcha`;async function Hz(e,t,n){if(!e._getRecaptchaConfig())try{await ZL(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r){$(t.type===`enroll`,e,`internal-error`);let i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}};return(await XL(e,i,`mfaSmsEnrollment`,async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===qL){$(n?.type===Vz,e,`argument-error`);let r=await Uz(e,t,n);return ZR(e,r)}return ZR(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}else{$(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;$(i,e,`missing-multi-factor-info`);let a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}};return(await XL(e,a,`mfaSmsSignIn`,async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===qL){$(n?.type===Vz,e,`argument-error`);let r=await Uz(e,t,n);return Rz(e,r)}return Rz(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else{let t={phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`};return(await XL(e,t,`sendVerificationCode`,async(e,t)=>{if(t.captchaResponse===qL){$(n?.type===Vz,e,`argument-error`);let r=await Uz(e,t,n);return _R(e,r)}return _R(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Uz(e,t,n){$(n.type===Vz,e,`argument-error`);let r=await n.verify();$(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Wz=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=IL(t)}verifyPhoneNumber(e,t){return Hz(this.auth,e,pg(t))}static credential(e,t){return SR._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?SR._fromTokenResponse(t,n):null}};Wz.PROVIDER_ID=`phone`,Wz.PHONE_SIGN_IN_METHOD=`phone`;
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Gz(e,t){return t?pL(t):($(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Kz=class extends aR{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return mR(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mR(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mR(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function qz(e){return zR(e.auth,new Kz(e),e.bypassAuthState)}function Jz(e){let{auth:t,user:n}=e;return $(n,t,`internal-error`),RR(n,new Kz(e),e.bypassAuthState)}async function Yz(e){let{auth:t,user:n}=e;return $(n,t,`internal-error`),LR(n,new Kz(e),e.bypassAuthState)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xz=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return qz;case`linkViaPopup`:case`linkViaRedirect`:return Yz;case`reauthViaPopup`:case`reauthViaRedirect`:return Jz;default:_I(this.auth,`internal-error`)}}resolve(e){CI(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){CI(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},Zz=new kI(2e3,1e4),Qz=class e extends Xz{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return $(e,this.auth,`internal-error`),e}async onExecution(){CI(this.filter.length===1,`Popup operations only handle one event`);let e=hz();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(vI(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vI(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vI(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,Zz.get())};e()}};Qz.currentPopupAction=null;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $z=`pendingRedirect`,eB=new Map,tB=class extends Xz{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=eB.get(this.auth._key());if(!e){try{let t=await nB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}eB.set(this.auth._key(),e)}return this.bypassAuthState||eB.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function nB(e,t){let n=aB(t),r=iB(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function rB(e,t){eB.set(e._key(),t)}function iB(e){return pL(e._redirectPersistence)}function aB(e){return gL($z,e.config.apiKey,e.name)}async function oB(e,t,n=!1){if(I_(e.app))return Promise.reject(bI(e));let r=IL(e),i=Gz(r,t),a=await new tB(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var sB=600*1e3,cB=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dB(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!uB(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(vI(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sB&&this.cachedEventUids.clear(),this.cachedEventUids.has(lB(e))}saveEventToCache(e){this.cachedEventUids.add(lB(e)),this.lastProcessedEventTime=Date.now()}};function lB(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function uB({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function dB(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return uB(e);default:return!1}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function fB(e,t={}){return II(e,`GET`,`/v1/projects`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var pB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mB=/^https?/;async function hB(e){if(e.config.emulator)return;let{authorizedDomains:t}=await fB(e);for(let e of t)try{if(gB(e))return}catch{}_I(e,`unauthorized-domain`)}function gB(e){let t=wI(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!mB.test(n))return!1;if(pB.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _B=new kI(3e4,6e4);function vB(){let e=_z().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function yB(e){return new Promise((t,n)=>{function r(){vB(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vB(),n(vI(e,`network-request-failed`))},timeout:_B.get()})}if(_z().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(_z().gapi?.load)r();else{let t=UL(`iframefcb`);return _z()[t]=()=>{gapi.load?r():n(vI(e,`network-request-failed`))},BL(`${HL()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw bB=null,e})}var bB=null;function xB(e){return bB||=yB(e),bB}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var SB=new kI(5e3,15e3),CB=`__/auth/iframe`,wB=`emulator/auth/iframe`,TB={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},EB=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function DB(e){let t=e.config;$(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?AI(t,wB):`https://${e.config.authDomain}/${CB}`,r={apiKey:t.apiKey,appName:e.name,v:z_},i=EB.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${og(r).slice(1)}`}async function OB(e){let t=await xB(e),n=_z().gapi;return $(n,e,`internal-error`),t.open({where:document.body,url:DB(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TB,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=vI(e,`network-request-failed`),a=_z().setTimeout(()=>{r(i)},SB.get());function o(){_z().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var kB={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},AB=500,jB=600,MB=`_blank`,NB=`http://localhost`,PB=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function FB(e,t,n,r=AB,i=jB){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...kB,width:r.toString(),height:i.toString(),top:a,left:o},l=Hh().toLowerCase();n&&(s=xL(l)?MB:n),yL(l)&&(t||=NB,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(DL(l)&&s!==`_self`)return IB(t||``,s),new PB(null);let d=window.open(t||``,s,u);$(d,e,`popup-blocked`);try{d.focus()}catch{}return new PB(d)}function IB(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var LB=`__/auth/handler`,RB=`emulator/auth/handler`,zB=`fac`;async function BB(e,t,n,r,i,a){$(e.config.authDomain,e,`auth-domain-config-required`),$(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:z_,eventId:i};if(t instanceof DR){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,rg(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof OR){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${zB}=${encodeURIComponent(c)}`:``;return`${VB(e)}?${og(s).slice(1)}${l}`}function VB({config:e}){return e.emulator?AI(e,RB):`https://${e.authDomain}/${LB}`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var HB=`webStorageSupport`,UB=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fz,this._completeRedirectFn=oB,this._overrideRedirectResult=rB}async _openPopup(e,t,n,r){CI(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`);let i=await BB(e,t,n,wI(),r);return FB(e,i,hz())}async _openRedirect(e,t,n,r){await this._originValidation(e);let i=await BB(e,t,n,wI(),r);return vz(i),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(CI(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await OB(e),n=new cB(e);return t.register(`authEvent`,t=>($(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(HB,{type:HB},n=>{let r=n?.[0]?.[HB];r!==void 0&&t(!!r),_I(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hB(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kL()||bL()||EL()}},WB=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return SI(`unexpected MultiFactorSessionType`)}}},GB=class e extends WB{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return QR(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return zz(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},KB=class{constructor(){}static assertion(e){return GB._fromCredential(e)}};KB.FACTOR_ID=`phone`;var qB=class{static assertionForEnrollment(e,t){return JB._fromSecret(e,t)}static assertionForSignIn(e,t){return JB._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;$(t.user?.auth!==void 0,`internal-error`);let n=await $R(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return YB._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};qB.FACTOR_ID=`totp`;var JB=class e extends WB{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return $(this.secret!==void 0,e,`argument-error`),ez(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){$(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return Bz(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},YB=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(XB(e)||XB(t))&&(n=!0),n&&(XB(e)&&(e=this.auth.currentUser?.email||`unknownuser`),XB(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function XB(e){return e===void 0||e?.length===0}var ZB=`@firebase/auth`,QB=`1.11.1`,$B=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function eV(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function tV(e){P_(new mg(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;$(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c={apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:AL(e)},l=new FL(r,i,a,c);return $L(l,n),l},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),P_(new mg(`auth-internal`,e=>(e=>new $B(e))(IL(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),H_(ZB,QB,eV(e)),H_(ZB,QB,`esm2020`)}var nV=Nh(`authIdTokenMaxAge`)||300,rV=null,iV=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nV)return;let i=n?.token;rV!==i&&(rV=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function aV(e=V_()){let t=F_(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=QL(e,{popupRedirectResolver:UB,persistence:[Lz,oz,fz]}),r=Nh(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=iV(e.toString());XR(n,t,()=>t(n.currentUser)),YR(n,e=>t(e))}}let i=jh(`auth`);return i&&eR(n,`http://${i}`),n}function oV(){return document.getElementsByTagName(`head`)?.[0]??document}zL({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=vI(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,oV().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),tV(`Browser`);function sV(){let e=Le(),t=Pe(),{authenticateUser:n}=In(),[r,i]=(0,b.useState)({email:``,password:``,rememberMe:!1}),[a,o]=(0,b.useState)(``),[s,c]=(0,b.useState)(t.state?.message||``),[l,u]=(0,b.useState)(!1),[d,f]=(0,b.useState)(!1),[p,m]=(0,b.useState)(``),[h,g]=(0,b.useState)(``),[_,v]=(0,b.useState)(!1),y=e=>{let{name:t,value:n,type:r,checked:a}=e.target;i(e=>({...e,[t]:r===`checkbox`?a:n})),o(``),c(``)};return(0,G.jsx)(`section`,{className:`anchor auth-wrap`,children:(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsx)(`div`,{className:`auth-titlebar`,children:(0,G.jsx)(`h1`,{children:`Log In`})}),(0,G.jsxs)(`div`,{className:`auth-card`,children:[(0,G.jsxs)(`div`,{className:`auth-tabs`,children:[(0,G.jsx)(tn,{to:`/login`,className:`auth-tab active`,children:` Log in`}),(0,G.jsx)(tn,{to:`/register`,className:`auth-tab`,children:` Register`})]}),(0,G.jsxs)(`form`,{className:`auth-body`,onSubmit:async i=>{if(i.preventDefault(),o(``),u(!0),!r.email||!r.password){o(`Please fill in all fields`),u(!1);return}try{let i=await n(r.email,r.password);if(i.success){let n=localStorage.getItem(`fremio_user`);if(n)if(JSON.parse(n).role===`admin`)e(`/admin/dashboard`,{replace:!0});else{let n=t.state?.from?.pathname||`/frames`;e(n,{replace:!0})}else{let n=t.state?.from?.pathname||`/frames`;e(n,{replace:!0})}}else o(i.message)}catch(e){console.error(`Login error:`,e),o(`Login failed. Please try again.`)}finally{u(!1)}},children:[a&&(0,G.jsx)(`div`,{style:{padding:`12px 16px`,background:`#fee`,border:`1px solid #fcc`,borderRadius:`8px`,color:`#c33`,fontSize:`0.9rem`,marginBottom:`16px`},children:a}),s&&(0,G.jsx)(`div`,{style:{padding:`12px 16px`,background:`#efe`,border:`1px solid #cfc`,borderRadius:`8px`,color:`#3c3`,fontSize:`0.9rem`,marginBottom:`16px`},children:s}),h&&(0,G.jsx)(`div`,{style:{padding:`16px`,background:`#d1fae5`,border:`1px solid #6ee7b7`,borderRadius:`8px`,color:`#065f46`,fontSize:`0.9rem`,marginBottom:`16px`,whiteSpace:`pre-line`,lineHeight:`1.6`},children:h}),d?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,G.jsx)(`h3`,{style:{fontSize:`1.2rem`,fontWeight:`bold`,marginBottom:`8px`},children:`Reset Password`}),(0,G.jsx)(`p`,{style:{fontSize:`0.9rem`,color:`#64748b`,marginBottom:`8px`},children:`Enter your email address and we'll send you a link to reset your password.`}),(0,G.jsx)(`div`,{style:{padding:`10px 12px`,background:`#f0f9ff`,border:`1px solid #bae6fd`,borderRadius:`6px`,fontSize:`0.85rem`,color:`#0369a1`},children:` Check your spam/junk folder if you don't see the email`})]}),(0,G.jsx)(`label`,{className:`auth-label`,children:`Email address`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`email`,placeholder:`you@example.com`,value:p,onChange:e=>m(e.target.value),disabled:_}),(0,G.jsx)(`button`,{className:`auth-btn`,onClick:async e=>{if(e.preventDefault(),o(``),g(``),v(!0),!p){o(`Please enter your email address`),v(!1);return}try{let e={url:window.location.origin+`/reset-password`,handleCodeInApp:!1};await GR(null,p,e),g(` Email reset password sudah dikirim!

 Silakan cek email Anda (termasuk folder Spam/Junk).

 Tips: Jika email masuk ke Spam, klik 'Bukan Spam' agar email selanjutnya masuk ke Inbox.`),m(``),setTimeout(()=>{f(!1),g(``)},8e3)}catch(e){console.error(`Password reset error:`,e),e.code===`auth/user-not-found`?o(`No account found with this email address`):e.code===`auth/invalid-email`?o(`Invalid email address`):e.code===`auth/too-many-requests`?o(`Too many requests. Please try again later.`):o(`Failed to send password reset email. Please try again.`)}finally{v(!1)}},disabled:_,style:{marginBottom:`12px`},children:_?`Sending...`:`Send Reset Link`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>{f(!1),m(``),o(``)},style:{width:`100%`,padding:`12px`,background:`white`,border:`1px solid #e2e8f0`,borderRadius:`8px`,color:`#64748b`,fontSize:`0.95rem`,cursor:`pointer`,fontWeight:500},children:`Back to Login`})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`label`,{className:`auth-label`,children:`Email address`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`email`,name:`email`,placeholder:`you@example.com`,value:r.email,onChange:y,disabled:l}),(0,G.jsx)(`label`,{className:`auth-label`,children:`Password`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`password`,name:`password`,placeholder:``,value:r.password,onChange:y,disabled:l}),(0,G.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`12px`},children:[(0,G.jsxs)(`label`,{className:`auth-check`,style:{margin:0},children:[(0,G.jsx)(`input`,{type:`checkbox`,name:`rememberMe`,checked:r.rememberMe,onChange:y,disabled:l}),` `,`remember me`]}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>f(!0),style:{background:`none`,border:`none`,color:`#c89585`,fontSize:`0.85rem`,cursor:`pointer`,textDecoration:`underline`,padding:0},children:`Forgot password?`})]}),(0,G.jsx)(`button`,{className:`auth-btn`,type:`submit`,disabled:l,children:l?`Logging in...`:`Login`}),(0,G.jsxs)(`p`,{className:`auth-help`,children:[`don't have account? `,(0,G.jsx)(tn,{to:`/register`,children:`register`})]})]})]})]})]})})}function cV(){let e=Le(),{register:t}=In(),[n,r]=(0,b.useState)({firstName:``,lastName:``,email:``,password:``,confirmPassword:``,agreeToTerms:!1}),[i,a]=(0,b.useState)(``),[o,s]=(0,b.useState)(!1),c=e=>{let{name:t,value:n,type:i,checked:o}=e.target;r(e=>({...e,[t]:i===`checkbox`?o:n})),a(``)};return(0,G.jsx)(`section`,{className:`anchor auth-wrap`,children:(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsx)(`div`,{className:`auth-titlebar`,children:(0,G.jsx)(`h1`,{children:`Register`})}),(0,G.jsxs)(`div`,{className:`auth-card`,children:[(0,G.jsxs)(`div`,{className:`auth-tabs`,children:[(0,G.jsx)(tn,{to:`/login`,className:`auth-tab`,children:` Log in`}),(0,G.jsx)(tn,{to:`/register`,className:`auth-tab active`,children:` Register`})]}),(0,G.jsxs)(`form`,{className:`auth-body`,onSubmit:async r=>{if(r.preventDefault(),a(``),s(!0),!n.firstName||!n.lastName||!n.email||!n.password||!n.confirmPassword){a(`Please fill in all fields`),s(!1);return}if(n.password!==n.confirmPassword){a(`Passwords do not match`),s(!1);return}if(n.password.length<6){a(`Password must be at least 6 characters`),s(!1);return}if(!n.agreeToTerms){a(`You must agree to the Terms of Service and Privacy Policy`),s(!1);return}try{let r={firstName:n.firstName,lastName:n.lastName,name:`${n.firstName} ${n.lastName}`,email:n.email,password:n.password,createdAt:new Date().toISOString()},i=await t(r);if(i.success){console.log(` Registration successful, user logged in`);let t=new URLSearchParams(window.location.search).get(`redirect`);t?(console.log(` Redirecting to:`,t),e(t,{replace:!0})):e(`/`,{replace:!0})}else a(i.message)}catch(e){console.error(`Registration error:`,e),a(`Registration failed. Please try again.`)}finally{s(!1)}},children:[i&&(0,G.jsx)(`div`,{style:{padding:`12px 16px`,background:`#fee`,border:`1px solid #fcc`,borderRadius:`8px`,color:`#c33`,fontSize:`0.9rem`,marginBottom:`16px`},children:i}),(0,G.jsxs)(`div`,{className:`auth-grid`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`auth-label`,children:`First Name`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`text`,name:`firstName`,value:n.firstName,onChange:c,disabled:o})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`auth-label`,children:`Last Name`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`text`,name:`lastName`,value:n.lastName,onChange:c,disabled:o})]})]}),(0,G.jsx)(`label`,{className:`auth-label`,children:`Email Address`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`email`,name:`email`,placeholder:`you@example.com`,value:n.email,onChange:c,disabled:o}),(0,G.jsx)(`label`,{className:`auth-label`,children:`Password`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`password`,name:`password`,placeholder:``,value:n.password,onChange:c,disabled:o}),(0,G.jsx)(`label`,{className:`auth-label`,children:`Confirm Password`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`password`,name:`confirmPassword`,placeholder:``,value:n.confirmPassword,onChange:c,disabled:o}),(0,G.jsxs)(`label`,{className:`auth-check`,style:{marginTop:12},children:[(0,G.jsx)(`input`,{type:`checkbox`,name:`agreeToTerms`,checked:n.agreeToTerms,onChange:c,disabled:o}),` `,`I agree to the Terms of Service and Privacy Policy`]}),(0,G.jsx)(`button`,{className:`auth-btn`,type:`submit`,disabled:o,children:o?`Creating Account...`:`Create Account`}),(0,G.jsxs)(`p`,{className:`auth-help`,children:[`already have account? `,(0,G.jsx)(tn,{to:`/login`,children:`login`})]})]})]})]})})}function lV(){let e=Le(),[t]=un(),n=t.get(`oobCode`),[r,i]=(0,b.useState)({newPassword:``,confirmPassword:``}),[a,o]=(0,b.useState)(``),[s,c]=(0,b.useState)(``),[l,u]=(0,b.useState)(!1),[d,f]=(0,b.useState)(!0),[p,m]=(0,b.useState)(``),[h,g]=(0,b.useState)(!1);(0,b.useEffect)(()=>{(async()=>{if(!n){g(!0),f(!1),o(`Invalid or missing reset code`);return}try{let e=await JR(null,n);m(e),f(!1)}catch(e){console.error(`Code verification error:`,e),g(!0),f(!1),e.code===`auth/expired-action-code`?o(`This password reset link has expired. Please request a new one.`):e.code===`auth/invalid-action-code`?o(`This password reset link is invalid or has already been used.`):o(`Unable to verify reset link. Please request a new one.`)}})()},[n]);let _=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),o(``),c(``)};return d?(0,G.jsx)(`section`,{className:`anchor auth-wrap`,children:(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsx)(`div`,{className:`auth-titlebar`,children:(0,G.jsx)(`h1`,{children:`Reset Password`})}),(0,G.jsx)(`div`,{className:`auth-card`,children:(0,G.jsxs)(`div`,{className:`auth-body`,style:{textAlign:`center`,padding:`40px 20px`},children:[(0,G.jsx)(`div`,{style:{fontSize:`2rem`,marginBottom:`16px`,animation:`spin 1s linear infinite`},children:``}),(0,G.jsx)(`p`,{style:{color:`#64748b`},children:`Verifying reset link...`})]})})]})}):h?(0,G.jsx)(`section`,{className:`anchor auth-wrap`,children:(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsx)(`div`,{className:`auth-titlebar`,children:(0,G.jsx)(`h1`,{children:`Reset Password`})}),(0,G.jsx)(`div`,{className:`auth-card`,children:(0,G.jsxs)(`div`,{className:`auth-body`,children:[(0,G.jsxs)(`div`,{style:{padding:`16px`,background:`#fee`,border:`1px solid #fcc`,borderRadius:`8px`,color:`#c33`,fontSize:`0.9rem`,marginBottom:`20px`,textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{fontSize:`2rem`,marginBottom:`12px`},children:``}),(0,G.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`8px`},children:`Invalid Reset Link`}),(0,G.jsx)(`div`,{children:a})]}),(0,G.jsxs)(`div`,{style:{padding:`16px`,background:`#f0f9ff`,border:`1px solid #bae6fd`,borderRadius:`8px`,fontSize:`0.85rem`,color:`#0369a1`,marginBottom:`20px`},children:[(0,G.jsx)(`strong`,{children:`What to do:`}),(0,G.jsxs)(`ul`,{style:{marginTop:`8px`,marginLeft:`20px`},children:[(0,G.jsx)(`li`,{children:`Go back to login page`}),(0,G.jsx)(`li`,{children:`Click "Forgot password?"`}),(0,G.jsx)(`li`,{children:`Request a new reset link`}),(0,G.jsx)(`li`,{children:`Check your email (including spam folder)`})]})]}),(0,G.jsx)(tn,{to:`/login`,children:(0,G.jsx)(`button`,{className:`auth-btn`,style:{width:`100%`,marginBottom:`12px`},children:`Go to Login`})}),(0,G.jsxs)(`p`,{className:`auth-help`,style:{textAlign:`center`},children:[`Need help?`,` `,(0,G.jsx)(`a`,{href:`mailto:support@fremio.com`,children:`Contact Support`})]})]})})]})}):(0,G.jsx)(`section`,{className:`anchor auth-wrap`,children:(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsxs)(`div`,{className:`auth-titlebar`,children:[(0,G.jsx)(`h1`,{children:`Reset Password`}),(0,G.jsx)(`p`,{style:{fontSize:`0.9rem`,color:`#64748b`,marginTop:`8px`},children:`Enter your new password below`})]}),(0,G.jsxs)(`div`,{className:`auth-card`,children:[(0,G.jsx)(`div`,{className:`auth-tabs`,children:(0,G.jsx)(`div`,{className:`auth-tab active`,children:` Reset Password`})}),(0,G.jsxs)(`form`,{className:`auth-body`,onSubmit:async t=>{if(t.preventDefault(),o(``),c(``),u(!0),!r.newPassword||!r.confirmPassword){o(`All fields are required`),u(!1);return}if(r.newPassword.length<6){o(`Password must be at least 6 characters`),u(!1);return}if(r.newPassword!==r.confirmPassword){o(`Passwords do not match`),u(!1);return}try{await KR(null,n,r.newPassword),c(` Password has been reset successfully!`),i({newPassword:``,confirmPassword:``}),setTimeout(()=>{e(`/login`,{state:{message:`Password reset successful! You can now log in with your new password.`}})},3e3)}catch(e){console.error(`Password reset error:`,e),e.code===`auth/weak-password`?o(`Password is too weak. Please use a stronger password.`):e.code===`auth/expired-action-code`?o(`This reset link has expired. Please request a new one.`):e.code===`auth/invalid-action-code`?o(`This reset link is invalid or has already been used.`):o(`Failed to reset password. Please try again.`)}finally{u(!1)}},children:[a&&(0,G.jsx)(`div`,{style:{padding:`12px 16px`,background:`#fee`,border:`1px solid #fcc`,borderRadius:`8px`,color:`#c33`,fontSize:`0.9rem`,marginBottom:`16px`},children:a}),s&&(0,G.jsxs)(`div`,{style:{padding:`16px`,background:`#d1fae5`,border:`1px solid #6ee7b7`,borderRadius:`8px`,color:`#065f46`,fontSize:`0.9rem`,marginBottom:`16px`,textAlign:`center`},children:[s,(0,G.jsx)(`div`,{style:{fontSize:`0.85rem`,marginTop:`8px`,opacity:.8},children:`Redirecting to login page...`})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`20px`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,border:`1px solid #e2e8f0`},children:[(0,G.jsx)(`div`,{style:{fontSize:`0.85rem`,color:`#64748b`,marginBottom:`4px`},children:`Reset password for:`}),(0,G.jsx)(`div`,{style:{fontSize:`0.9rem`,fontWeight:`600`,color:`#334155`},children:p})]}),(0,G.jsx)(`label`,{className:`auth-label`,children:`New Password`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`password`,name:`newPassword`,placeholder:`Enter new password (min. 6 characters)`,value:r.newPassword,onChange:_,disabled:l||s,autoFocus:!0}),(0,G.jsx)(`label`,{className:`auth-label`,children:`Confirm New Password`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`password`,name:`confirmPassword`,placeholder:`Re-enter new password`,value:r.confirmPassword,onChange:_,disabled:l||s}),(0,G.jsxs)(`div`,{style:{padding:`12px`,background:`#f0f9ff`,border:`1px solid #bae6fd`,borderRadius:`8px`,fontSize:`0.85rem`,color:`#0369a1`,marginBottom:`20px`},children:[(0,G.jsx)(`strong`,{children:` Password Requirements:`}),(0,G.jsxs)(`ul`,{style:{marginTop:`8px`,marginLeft:`20px`,marginBottom:0},children:[(0,G.jsx)(`li`,{children:`Minimum 6 characters`}),(0,G.jsx)(`li`,{children:`Should be unique and secure`}),(0,G.jsx)(`li`,{children:`Not easily guessable`})]})]}),(0,G.jsx)(`button`,{className:`auth-btn`,type:`submit`,disabled:l||s,style:{marginBottom:`12px`},children:l?`Resetting Password...`:`Reset Password`}),(0,G.jsxs)(`p`,{className:`auth-help`,style:{textAlign:`center`},children:[`Remember your password? `,(0,G.jsx)(tn,{to:`/login`,children:`Back to Login`})]})]})]})]})})}function uV(){let{user:e,logout:t}=In(),n=Le(),r=()=>{t(),n(`/`,{replace:!0})},i=e?.name||[e?.firstName,e?.lastName].filter(Boolean).join(` `)||(e?.email?e.email.split(`@`)[0]:`User`),a=e?.firstName||i.split(` `)[0]||`-`,o=e?.lastName||i.split(` `).slice(1).join(` `)||`-`,s=e?.username||(e?.email?e.email.split(`@`)[0]:i.replace(/\s+/g,``).toLowerCase()),c=e?.email||`-`,l=e?.phone||e?.phoneNumber||`-`,u=e?.bio||`-`,d=e?.createdAt?new Date(e.createdAt).toLocaleDateString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`}):`-`,f=(i||`U`).split(` `).filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()).join(``)||`U`,p=localStorage.getItem(`profilePhoto_${e?.uid}`)||localStorage.getItem(`profilePhoto_${e?.email}`);return(0,G.jsx)(`section`,{className:`profile-page`,children:(0,G.jsxs)(`div`,{className:`profile-shell container`,children:[(0,G.jsxs)(`div`,{className:`profile-header`,children:[(0,G.jsx)(`div`,{className:`profile-avatar`,"aria-hidden":!0,style:{background:p?`url(${p})`:`#d9d9d9`,backgroundSize:`cover`,backgroundPosition:`center`},children:!p&&(0,G.jsx)(`span`,{children:f})}),(0,G.jsx)(`h1`,{className:`profile-title`,children:i})]}),(0,G.jsxs)(`div`,{className:`profile-body`,children:[(0,G.jsxs)(`aside`,{className:`profile-sidebar`,"aria-label":`Profile navigation`,children:[(0,G.jsxs)(`nav`,{children:[(0,G.jsx)(`a`,{className:`nav-item active`,href:`#profile`,children:`My Profile`}),(0,G.jsx)(tn,{className:`nav-item`,to:`/settings`,children:`Settings`}),(0,G.jsx)(tn,{className:`nav-item`,to:`/drafts`,children:`Drafts`})]}),(0,G.jsx)(`button`,{className:`nav-logout`,onClick:r,children:`Logout`})]}),(0,G.jsxs)(`main`,{className:`profile-content`,id:`profile`,children:[(0,G.jsx)(`h2`,{className:`section-title`,children:`My Profile`}),(0,G.jsxs)(`div`,{className:`profile-details`,children:[(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Registration Date`}),(0,G.jsx)(`div`,{className:`value`,children:d})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`First Name`}),(0,G.jsx)(`div`,{className:`value`,children:a})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Last Name`}),(0,G.jsx)(`div`,{className:`value`,children:o})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Username`}),(0,G.jsx)(`div`,{className:`value`,children:s})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Email`}),(0,G.jsx)(`div`,{className:`value`,children:c})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Phone Number`}),(0,G.jsx)(`div`,{className:`value`,children:l})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Bio`}),(0,G.jsx)(`div`,{className:`value`,children:u})]})]})]})]})]})})}function dV(){let{user:e,logout:t,updateUser:n}=In(),[r,i]=(0,b.useState)(`account`),[a,o]=(0,b.useState)(null),[s,c]=(0,b.useState)(null),[l,u]=(0,b.useState)(!1),[d,f]=(0,b.useState)(1),[p,m]=(0,b.useState)({x:0,y:0}),[h,g]=(0,b.useState)(!1),[_,v]=(0,b.useState)({x:0,y:0}),[y,x]=(0,b.useState)(!1),[S,C]=(0,b.useState)({firstName:``,lastName:``,username:``,phone:``}),w=Pe(),T=Le(),E=()=>{t(),T(`/`,{replace:!0})};(0,b.useEffect)(()=>{if(!e)return;let t=e.uid?`profilePhoto_${e.uid}`:e.email?`profilePhoto_${e.email}`:null;if(t){let e=localStorage.getItem(t);e&&o(e)}},[e]),(0,b.useEffect)(()=>{y&&e&&C({firstName:e.firstName||``,lastName:e.lastName||``,username:e.username||(e.email?e.email.split(`@`)[0]:``),phone:e.phone||e.phoneNumber||``})},[y,e]);let D=e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith(`image/`)){alert(`Please select an image file`);return}if(t.size>5*1024*1024){alert(`Image size should be less than 5MB`);return}let n=new FileReader;n.onloadend=()=>{c(n.result),u(!0),f(1),m({x:0,y:0})},n.readAsDataURL(t)},O=e=>{l&&(e.preventDefault(),g(!0),v({x:e.clientX-p.x,y:e.clientY-p.y}))};(0,b.useEffect)(()=>{let e=e=>{h&&(e.preventDefault(),m({x:e.clientX-_.x,y:e.clientY-_.y}))},t=()=>{g(!1)};if(h)return window.addEventListener(`mousemove`,e),window.addEventListener(`mouseup`,t),()=>{window.removeEventListener(`mousemove`,e),window.removeEventListener(`mouseup`,t)}},[h,_.x,_.y]);let k=()=>{if(!s)return;let t=document.createElement(`canvas`),n=t.getContext(`2d`);t.width=400,t.height=400;let r=new Image;r.onload=()=>{let i=d,a=Math.min(r.width,r.height)*i,s=(r.width-a)/2+p.x/i,l=(r.height-a)/2+p.y/i;n.drawImage(r,s,l,a,a,0,0,400,400);let f=t.toDataURL(`image/jpeg`,.9);e?.uid&&localStorage.setItem(`profilePhoto_${e.uid}`,f),e?.email&&localStorage.setItem(`profilePhoto_${e.email}`,f),u(!1),c(null),o(f),setTimeout(()=>{alert(`Profile photo saved successfully!`)},50)},r.src=s},A=()=>{u(!1),c(null),f(1),m({x:0,y:0})},j=()=>{window.confirm(`Remove profile photo?`)&&(o(null),c(null),u(!1),e?.uid&&localStorage.removeItem(`profilePhoto_${e.uid}`),e?.email&&localStorage.removeItem(`profilePhoto_${e.email}`))},M=()=>{x(!0)},N=(e,t)=>{C(n=>({...n,[e]:t}))},P=()=>{if(!S.firstName.trim()){alert(`First name is required`);return}let t={...e,firstName:S.firstName.trim(),lastName:S.lastName.trim(),username:S.username.trim(),phone:S.phone.trim(),phoneNumber:S.phone.trim(),name:`${S.firstName.trim()} ${S.lastName.trim()}`.trim()};n(t),alert(`Profile updated successfully!`),x(!1)},ee=()=>{x(!1),C({firstName:``,lastName:``,username:``,phone:``})},F=(e?.name||[e?.firstName,e?.lastName].filter(Boolean).join(` `)||(e?.email?e.email.split(`@`)[0]:`User`)||`U`).split(` `).filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()).join(``)||`U`;return(0,b.useEffect)(()=>{let e=w.hash?.replace(`#`,``);e&&[`account`,`preferences`,`privacy`,`security`].includes(e)&&i(e)},[w.hash]),(0,G.jsx)(`section`,{className:`profile-page`,children:(0,G.jsxs)(`div`,{className:`profile-shell container`,children:[(0,G.jsxs)(`div`,{className:`profile-header`,children:[(0,G.jsx)(`div`,{className:`profile-avatar`,"aria-hidden":!0,style:{background:a?`url(${a})`:`#d9d9d9`,backgroundSize:`cover`,backgroundPosition:`center`},children:!a&&(0,G.jsx)(`span`,{children:F})},a),(0,G.jsx)(`h1`,{className:`profile-title`,children:`Settings`})]}),(0,G.jsxs)(`div`,{className:`profile-body`,children:[(0,G.jsxs)(`aside`,{className:`profile-sidebar`,"aria-label":`Settings navigation`,children:[(0,G.jsxs)(`nav`,{children:[(0,G.jsx)(tn,{className:`nav-item`,to:`/profile`,children:`My Profile`}),(0,G.jsx)(tn,{className:`nav-item active`,to:`/settings`,children:`Settings`}),(0,G.jsx)(tn,{className:`nav-item`,to:`/drafts`,children:`Drafts`})]}),(0,G.jsx)(`button`,{className:`nav-logout`,onClick:E,children:`Logout`})]}),(0,G.jsxs)(`main`,{className:`profile-content`,id:`settings`,children:[(0,G.jsx)(`h2`,{className:`section-title`,children:`Settings`}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`20px`,padding:`4px`,background:`#f5f5f5`,borderRadius:`12px`},children:[(0,G.jsx)(`button`,{onClick:()=>i(`account`),style:{flex:1,padding:`10px 16px`,fontWeight:600,border:`none`,borderRadius:`8px`,background:r===`account`?`#fff`:`transparent`,color:r===`account`?`#a2665a`:`#666`,cursor:`pointer`,transition:`all 0.2s`,boxShadow:r===`account`?`0 1px 3px rgba(0,0,0,0.1)`:`none`},children:`Account`}),(0,G.jsx)(`button`,{onClick:()=>i(`preferences`),style:{flex:1,padding:`10px 16px`,fontWeight:600,border:`none`,borderRadius:`8px`,background:r===`preferences`?`#fff`:`transparent`,color:r===`preferences`?`#a2665a`:`#666`,cursor:`pointer`,transition:`all 0.2s`,boxShadow:r===`preferences`?`0 1px 3px rgba(0,0,0,0.1)`:`none`},children:`Preferences`}),(0,G.jsx)(`button`,{onClick:()=>i(`privacy`),style:{flex:1,padding:`10px 16px`,fontWeight:600,border:`none`,borderRadius:`8px`,background:r===`privacy`?`#fff`:`transparent`,color:r===`privacy`?`#a2665a`:`#666`,cursor:`pointer`,transition:`all 0.2s`,boxShadow:r===`privacy`?`0 1px 3px rgba(0,0,0,0.1)`:`none`},children:`Privacy`}),(0,G.jsx)(`button`,{onClick:()=>i(`security`),style:{flex:1,padding:`10px 16px`,fontWeight:600,border:`none`,borderRadius:`8px`,background:r===`security`?`#fff`:`transparent`,color:r===`security`?`#a2665a`:`#666`,cursor:`pointer`,transition:`all 0.2s`,boxShadow:r===`security`?`0 1px 3px rgba(0,0,0,0.1)`:`none`},children:`Security`})]}),r===`account`&&(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{className:`profile-details`,children:[(0,G.jsxs)(`div`,{className:`profile-row`,style:{display:`block`,padding:`18px 0`},children:[(0,G.jsx)(`div`,{className:`label`,style:{marginBottom:`12px`},children:`Profile Photo`}),l?(0,G.jsx)(`div`,{className:`value`,children:(0,G.jsxs)(`div`,{style:{background:`#f9fafb`,border:`2px dashed #e0b7a9`,borderRadius:`12px`,padding:`20px`,marginBottom:`16px`},children:[(0,G.jsx)(`p`,{style:{fontSize:`14px`,color:`#666`,marginBottom:`16px`,textAlign:`center`},children:`Drag to reposition  Scroll or use slider to zoom`}),(0,G.jsx)(`div`,{style:{width:`300px`,height:`300px`,margin:`0 auto 20px`,borderRadius:`50%`,overflow:`hidden`,border:`3px solid #e0b7a9`,position:`relative`,cursor:h?`grabbing`:`grab`,background:`#f3f4f6`},onMouseDown:O,children:s&&(0,G.jsx)(`img`,{src:s,alt:`Preview`,style:{width:`${d*100}%`,height:`${d*100}%`,objectFit:`cover`,position:`absolute`,left:`50%`,top:`50%`,transform:`translate(calc(-50% + ${p.x}px), calc(-50% + ${p.y}px))`,userSelect:`none`,pointerEvents:`none`},draggable:!1})}),(0,G.jsx)(`div`,{style:{maxWidth:`300px`,margin:`0 auto 16px`},children:(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsx)(`span`,{style:{fontSize:`14px`,color:`#666`,fontWeight:600},children:`Zoom:`}),(0,G.jsx)(`input`,{type:`range`,min:`1`,max:`3`,step:`0.1`,value:d,onChange:e=>f(parseFloat(e.target.value)),style:{flex:1,accentColor:`#e0b7a9`}}),(0,G.jsxs)(`span`,{style:{fontSize:`14px`,color:`#666`,minWidth:`40px`},children:[d.toFixed(1),`x`]})]})}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,justifyContent:`center`,flexWrap:`wrap`},children:[(0,G.jsx)(`button`,{type:`button`,onClick:k,style:{padding:`10px 24px`,background:`linear-gradient(to right, #10b981, #059669)`,color:`#fff`,border:`none`,borderRadius:`8px`,fontWeight:600,fontSize:`14px`,cursor:`pointer`,transition:`all 0.2s`},children:` Save Photo`}),(0,G.jsx)(`button`,{type:`button`,onClick:A,style:{padding:`10px 24px`,background:`#fff`,color:`#666`,border:`1px solid #ddd`,borderRadius:`8px`,fontWeight:600,fontSize:`14px`,cursor:`pointer`,transition:`all 0.2s`},children:`Cancel`})]})]})}):(0,G.jsxs)(`div`,{className:`value`,style:{display:`flex`,alignItems:`center`,gap:`16px`},children:[(0,G.jsx)(`div`,{style:{width:`100px`,height:`100px`,borderRadius:`50%`,background:a?`url(${a})`:`#d9d9d9`,backgroundSize:`cover`,backgroundPosition:`center`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`#fff`,fontSize:`32px`,fontWeight:800,border:`3px solid #e0b7a9`,flexShrink:0},children:!a&&F}),(0,G.jsxs)(`div`,{style:{flex:1},children:[(0,G.jsx)(`p`,{style:{fontSize:`14px`,color:`#666`,marginBottom:`12px`},children:`Upload a profile photo. Recommended size: 400x400px. Max 5MB.`}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,flexWrap:`wrap`},children:[(0,G.jsx)(`label`,{htmlFor:`photoUpload`,style:{padding:`10px 20px`,background:`linear-gradient(to right, #e0b7a9, #c89585)`,color:`#fff`,border:`none`,borderRadius:`8px`,fontWeight:600,fontSize:`14px`,cursor:`pointer`,transition:`all 0.2s`,display:`inline-block`},children:a?`Change Photo`:`Upload Photo`}),(0,G.jsx)(`input`,{id:`photoUpload`,type:`file`,accept:`image/*`,onChange:D,style:{display:`none`}}),a&&(0,G.jsx)(`button`,{type:`button`,onClick:j,style:{padding:`10px 20px`,background:`#fff`,color:`#dc2626`,border:`1px solid #fecaca`,borderRadius:`8px`,fontWeight:600,fontSize:`14px`,cursor:`pointer`,transition:`all 0.2s`},children:`Remove Photo`})]})]})]})]}),y?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`First Name *`}),(0,G.jsx)(`div`,{className:`value`,children:(0,G.jsx)(`input`,{type:`text`,value:S.firstName,onChange:e=>N(`firstName`,e.target.value),placeholder:`Enter first name`,style:{width:`100%`,padding:`10px 12px`,border:`1px solid #ddd`,borderRadius:`8px`,fontSize:`14px`,transition:`all 0.2s`}})})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Last Name`}),(0,G.jsx)(`div`,{className:`value`,children:(0,G.jsx)(`input`,{type:`text`,value:S.lastName,onChange:e=>N(`lastName`,e.target.value),placeholder:`Enter last name`,style:{width:`100%`,padding:`10px 12px`,border:`1px solid #ddd`,borderRadius:`8px`,fontSize:`14px`,transition:`all 0.2s`}})})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Username`}),(0,G.jsx)(`div`,{className:`value`,children:(0,G.jsx)(`input`,{type:`text`,value:S.username,onChange:e=>N(`username`,e.target.value),placeholder:`Enter username`,style:{width:`100%`,padding:`10px 12px`,border:`1px solid #ddd`,borderRadius:`8px`,fontSize:`14px`,transition:`all 0.2s`}})})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Email Address`}),(0,G.jsxs)(`div`,{className:`value`,style:{fontSize:`14px`,color:`#999`,fontStyle:`italic`},children:[e?.email||`-`,` (Cannot be changed)`]})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Phone Number`}),(0,G.jsx)(`div`,{className:`value`,children:(0,G.jsx)(`input`,{type:`tel`,value:S.phone,onChange:e=>N(`phone`,e.target.value),placeholder:`Enter phone number`,style:{width:`100%`,padding:`10px 12px`,border:`1px solid #ddd`,borderRadius:`8px`,fontSize:`14px`,transition:`all 0.2s`}})})]})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Full Name`}),(0,G.jsx)(`div`,{className:`value`,children:e?.name||`${e?.firstName||``} ${e?.lastName||``}`.trim()||`-`})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Username`}),(0,G.jsx)(`div`,{className:`value`,children:e?.username||(e?.email?e.email.split(`@`)[0]:`-`)})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Email Address`}),(0,G.jsx)(`div`,{className:`value`,children:e?.email||`-`})]}),(0,G.jsxs)(`div`,{className:`profile-row`,children:[(0,G.jsx)(`div`,{className:`label`,children:`Phone Number`}),(0,G.jsx)(`div`,{className:`value`,children:e?.phone||e?.phoneNumber||`-`})]})]})]}),(0,G.jsx)(`div`,{style:{marginTop:`20px`,display:`flex`,gap:`12px`,flexWrap:`wrap`},children:y?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`button`,{style:{padding:`12px 24px`,background:`linear-gradient(to right, #10b981, #059669)`,color:`#fff`,border:`none`,borderRadius:`10px`,fontWeight:600,cursor:`pointer`,transition:`all 0.2s`},onClick:P,onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-2px)`,e.currentTarget.style.boxShadow=`0 4px 12px rgba(16, 185, 129, 0.4)`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`none`},children:` Save Changes`}),(0,G.jsx)(`button`,{style:{padding:`12px 24px`,background:`#fff`,color:`#666`,border:`1px solid #ddd`,borderRadius:`10px`,fontWeight:600,cursor:`pointer`,transition:`all 0.2s`},onClick:ee,onMouseEnter:e=>{e.currentTarget.style.background=`#f5f5f5`},onMouseLeave:e=>{e.currentTarget.style.background=`#fff`},children:`Cancel`})]}):(0,G.jsx)(`button`,{style:{padding:`12px 24px`,background:`linear-gradient(to right, #e0b7a9, #c89585)`,color:`#fff`,border:`none`,borderRadius:`10px`,fontWeight:600,cursor:`pointer`,transition:`all 0.2s`},onClick:M,onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-2px)`,e.currentTarget.style.boxShadow=`0 4px 12px rgba(224, 183, 169, 0.4)`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`none`},children:` Edit Profile`})})]}),r===`preferences`&&(0,G.jsx)(`div`,{children:(0,G.jsxs)(`div`,{className:`profile-details`,children:[(0,G.jsxs)(`div`,{className:`profile-row`,style:{alignItems:`center`},children:[(0,G.jsx)(`div`,{className:`label`,children:`Email Notifications`}),(0,G.jsxs)(`div`,{className:`value`,style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsx)(`span`,{style:{flex:1,fontSize:`14px`,color:`#666`},children:`Receive email updates about your activity`}),(0,G.jsxs)(`label`,{className:`relative inline-flex items-center cursor-pointer`,children:[(0,G.jsx)(`input`,{type:`checkbox`,className:`sr-only peer`}),(0,G.jsx)(`div`,{className:`w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#e0b7a9]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#e0b7a9]`})]})]})]}),(0,G.jsxs)(`div`,{className:`profile-row`,style:{alignItems:`center`},children:[(0,G.jsx)(`div`,{className:`label`,children:`Dark Mode`}),(0,G.jsxs)(`div`,{className:`value`,style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsx)(`span`,{style:{flex:1,fontSize:`14px`,color:`#666`},children:`Enable dark theme`}),(0,G.jsxs)(`label`,{className:`relative inline-flex items-center cursor-pointer`,children:[(0,G.jsx)(`input`,{type:`checkbox`,className:`sr-only peer`}),(0,G.jsx)(`div`,{className:`w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#e0b7a9]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#e0b7a9]`})]})]})]}),(0,G.jsxs)(`div`,{className:`profile-row`,style:{alignItems:`center`},children:[(0,G.jsx)(`div`,{className:`label`,children:`Auto-save Photos`}),(0,G.jsxs)(`div`,{className:`value`,style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsx)(`span`,{style:{flex:1,fontSize:`14px`,color:`#666`},children:`Automatically save captured photos`}),(0,G.jsxs)(`label`,{className:`relative inline-flex items-center cursor-pointer`,children:[(0,G.jsx)(`input`,{type:`checkbox`,className:`sr-only peer`,defaultChecked:!0}),(0,G.jsx)(`div`,{className:`w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#e0b7a9]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#e0b7a9]`})]})]})]})]})}),r===`privacy`&&(0,G.jsx)(`div`,{children:(0,G.jsxs)(`div`,{className:`profile-details`,children:[(0,G.jsxs)(`div`,{className:`profile-row`,style:{display:`block`,padding:`18px 0`},children:[(0,G.jsx)(`div`,{className:`label`,style:{marginBottom:`8px`},children:`Data Privacy`}),(0,G.jsxs)(`div`,{className:`value`,style:{marginBottom:`12px`},children:[(0,G.jsx)(`p`,{style:{fontSize:`14px`,color:`#666`,marginBottom:`12px`},children:`Control who can see your profile and activity`}),(0,G.jsxs)(`label`,{className:`relative inline-flex items-center cursor-pointer`,children:[(0,G.jsx)(`input`,{type:`checkbox`,className:`sr-only peer`}),(0,G.jsx)(`div`,{className:`w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#e0b7a9]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#e0b7a9]`}),(0,G.jsx)(`span`,{className:`ml-3 text-sm font-medium text-gray-700`,children:`Make profile private`})]})]})]}),(0,G.jsxs)(`div`,{className:`profile-row`,style:{display:`block`,padding:`18px 0`,borderBottom:`none`},children:[(0,G.jsx)(`div`,{className:`label`,style:{marginBottom:`8px`,color:`#b91c1c`},children:`Delete Account`}),(0,G.jsxs)(`div`,{className:`value`,style:{marginBottom:`12px`},children:[(0,G.jsx)(`p`,{style:{fontSize:`14px`,color:`#666`,marginBottom:`12px`},children:`Permanently delete your account and all your data. This action cannot be undone.`}),(0,G.jsx)(`button`,{style:{padding:`10px 20px`,background:`#b91c1c`,color:`#fff`,border:`none`,borderRadius:`8px`,fontWeight:600,cursor:`pointer`,transition:`all 0.2s`},onClick:()=>alert(`Please contact support to delete your account.`),children:`Delete Account`})]})]})]})}),r===`security`&&(0,G.jsx)(`div`,{children:(0,G.jsxs)(`div`,{className:`profile-details`,children:[(0,G.jsxs)(`div`,{className:`profile-row`,style:{display:`block`,padding:`18px 0`},children:[(0,G.jsx)(`div`,{className:`label`,style:{marginBottom:`16px`,fontSize:`18px`,fontWeight:`600`},children:`Password & Security`}),(0,G.jsxs)(`div`,{className:`value`,style:{marginBottom:`24px`},children:[(0,G.jsx)(`p`,{style:{fontSize:`14px`,color:`#666`,marginBottom:`16px`},children:`Keep your account secure by regularly updating your password`}),(0,G.jsx)(`button`,{onClick:()=>T(`/change-password`),style:{padding:`12px 24px`,background:`linear-gradient(to right, #e0b7a9, #c89585)`,color:`#fff`,border:`none`,borderRadius:`8px`,fontWeight:600,cursor:`pointer`,transition:`all 0.2s`,fontSize:`14px`},children:`Change Password `})]})]}),(0,G.jsxs)(`div`,{className:`profile-row`,style:{display:`block`,padding:`18px 0`,borderBottom:`none`},children:[(0,G.jsx)(`div`,{className:`label`,style:{marginBottom:`8px`},children:`Two-Factor Authentication`}),(0,G.jsxs)(`div`,{className:`value`,style:{marginBottom:`12px`},children:[(0,G.jsx)(`p`,{style:{fontSize:`14px`,color:`#666`,marginBottom:`12px`},children:`Add an extra layer of security to your account (Coming Soon)`}),(0,G.jsx)(`button`,{style:{padding:`10px 20px`,background:`#e5e5e5`,color:`#999`,border:`none`,borderRadius:`8px`,fontWeight:600,cursor:`not-allowed`,transition:`all 0.2s`},disabled:!0,children:`Enable 2FA`})]})]})]})})]})]})]})})}function fV(){let e=Le(),{changePassword:t,user:n}=In(),[r,i]=(0,b.useState)({currentPassword:``,newPassword:``,confirmPassword:``}),[a,o]=(0,b.useState)(``),[s,c]=(0,b.useState)(``),[l,u]=(0,b.useState)(!1),d=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),o(``),c(``)};return(0,G.jsx)(`section`,{className:`anchor auth-wrap`,children:(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsxs)(`div`,{className:`auth-titlebar`,children:[(0,G.jsx)(`h1`,{children:`Change Password`}),(0,G.jsx)(`p`,{style:{fontSize:`0.9rem`,color:`#64748b`,marginTop:`8px`},children:`Update your password to keep your account secure`})]}),(0,G.jsxs)(`div`,{className:`auth-card`,children:[(0,G.jsx)(`div`,{className:`auth-tabs`,children:(0,G.jsx)(`div`,{className:`auth-tab active`,children:` Change Password`})}),(0,G.jsxs)(`form`,{className:`auth-body`,onSubmit:async n=>{if(n.preventDefault(),o(``),c(``),u(!0),!r.currentPassword||!r.newPassword||!r.confirmPassword){o(`All fields are required`),u(!1);return}if(r.newPassword.length<6){o(`New password must be at least 6 characters`),u(!1);return}if(r.newPassword!==r.confirmPassword){o(`New passwords do not match`),u(!1);return}if(r.currentPassword===r.newPassword){o(`New password must be different from current password`),u(!1);return}try{let n=await t(r.currentPassword,r.newPassword);n.success?(c(`Password changed successfully! Redirecting...`),i({currentPassword:``,newPassword:``,confirmPassword:``}),setTimeout(()=>{e(`/settings#security`)},2e3)):o(n.message)}catch(e){console.error(`Password change error:`,e),o(`Failed to change password. Please try again.`)}finally{u(!1)}},children:[a&&(0,G.jsx)(`div`,{style:{padding:`12px 16px`,background:`#fee`,border:`1px solid #fcc`,borderRadius:`8px`,color:`#c33`,fontSize:`0.9rem`,marginBottom:`16px`},children:a}),s&&(0,G.jsx)(`div`,{style:{padding:`12px 16px`,background:`#efe`,border:`1px solid #cfc`,borderRadius:`8px`,color:`#3c3`,fontSize:`0.9rem`,marginBottom:`16px`},children:s}),(0,G.jsxs)(`div`,{style:{marginBottom:`12px`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,border:`1px solid #e2e8f0`},children:[(0,G.jsx)(`div`,{style:{fontSize:`0.85rem`,color:`#64748b`,marginBottom:`4px`},children:`Logged in as:`}),(0,G.jsx)(`div`,{style:{fontSize:`0.9rem`,fontWeight:`600`,color:`#334155`},children:n?.email||n?.displayName})]}),(0,G.jsx)(`label`,{className:`auth-label`,children:`Current Password`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`password`,name:`currentPassword`,placeholder:`Enter your current password`,value:r.currentPassword,onChange:d,disabled:l}),(0,G.jsx)(`label`,{className:`auth-label`,children:`New Password`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`password`,name:`newPassword`,placeholder:`Enter new password (min. 6 characters)`,value:r.newPassword,onChange:d,disabled:l}),(0,G.jsx)(`label`,{className:`auth-label`,children:`Confirm New Password`}),(0,G.jsx)(`input`,{className:`auth-input`,type:`password`,name:`confirmPassword`,placeholder:`Re-enter new password`,value:r.confirmPassword,onChange:d,disabled:l}),(0,G.jsx)(`button`,{className:`auth-btn`,type:`submit`,disabled:l,children:l?`Changing Password...`:`Change Password`}),(0,G.jsx)(`p`,{className:`auth-help`,children:(0,G.jsx)(tn,{to:`/settings#security`,children:` Back to Settings`})})]})]})]})})}var pV=[{id:`fw-301`,title:`Fremio Series Blue 3x2`,size:`3x2`,color:`Blue`},{id:`fw-302`,title:`Fremio Series Pink 3`,size:`3x3`,color:`Pink`},{id:`fw-401`,title:`Everything You Are 3x2`,size:`3x2`,color:`Cream`},{id:`fw-105`,title:`Fremio Series Black 3`,size:`3x3`,color:`Black`},{id:`fw-205`,title:`Fremio Series Green 3`,size:`3x3`,color:`Green`},{id:`fw-501`,title:`Fremio Series Maroon 3`,size:`3x3`,color:`Maroon`}];function mV(){let e=(0,b.useMemo)(()=>pV,[]),[t,n]=(0,b.useState)(e),r=e=>n(t=>t.filter(t=>t.id!==e));return(0,G.jsx)(`section`,{className:`min-h-screen bg-gradient-to-b from-[#fdf7f4] via-white to-[#f7f1ed] py-16`,children:(0,G.jsx)(`div`,{className:`container mx-auto px-4 max-w-5xl`,children:(0,G.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-lg overflow-hidden`,children:[(0,G.jsxs)(`div`,{className:`bg-gradient-to-r from-[#e0b7a9] to-[#c89585] p-8`,children:[(0,G.jsx)(`h2`,{className:`text-3xl font-bold text-white`,children:`Wishlist`}),(0,G.jsx)(`p`,{className:`text-white/90 mt-2`,children:`Frame yang kamu sukai`})]}),(0,G.jsx)(`div`,{className:`p-6 sm:p-8`,children:t.length===0?(0,G.jsx)(`div`,{className:`p-6 bg-gray-50 rounded-xl border border-gray-200 text-center text-gray-700`,children:`Belum ada item di Wishlist.`}):(0,G.jsx)(`div`,{className:`grid gap-4 sm:grid-cols-2 lg:grid-cols-3`,children:t.map(e=>(0,G.jsxs)(`div`,{className:`rounded-xl border border-gray-200 overflow-hidden bg-white shadow-sm`,children:[(0,G.jsx)(`div`,{className:`h-36 bg-gradient-to-br from-[#f6ece8] to-white grid place-items-center text-sm text-gray-500`,children:(0,G.jsx)(`span`,{className:`px-2 py-1 rounded bg-white/70 ring-1 ring-black/5`,children:e.size})}),(0,G.jsxs)(`div`,{className:`p-4`,children:[(0,G.jsx)(`div`,{className:`font-semibold text-gray-900 line-clamp-2`,children:e.title}),(0,G.jsxs)(`div`,{className:`mt-1 text-xs text-gray-500`,children:[`Color: `,e.color]}),(0,G.jsxs)(`div`,{className:`mt-3 flex items-center gap-2`,children:[(0,G.jsx)(`button`,{className:`flex-1 px-3 py-2 text-sm rounded-lg border border-gray-300 hover:bg-gray-50`,children:`Open`}),(0,G.jsx)(`button`,{onClick:()=>r(e.id),className:`px-3 py-2 text-sm rounded-lg bg-red-50 text-red-700 border border-red-200 hover:bg-red-100`,children:`Remove`})]})]})]},e.id))})})]})})})}function hV(){let{user:e,logout:t}=In(),n=Le(),[r,i]=(0,b.useState)([]),[a,o]=(0,b.useState)(!0),[s,c]=(0,b.useState)(null),[l,u]=(0,b.useState)(``),d=(0,b.useRef)(!0),f=()=>{t(),n(`/`,{replace:!0})},p=(e?.name||[e?.firstName,e?.lastName].filter(Boolean).join(` `)||(e?.email?e.email.split(`@`)[0]:`User`)||`U`).split(` `).filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()).join(``)||`U`,m=localStorage.getItem(`profilePhoto_${e?.uid}`)||localStorage.getItem(`profilePhoto_${e?.email}`);(0,b.useEffect)(()=>(d.current=!0,()=>{d.current=!1}),[]);let h=(0,b.useCallback)(async()=>{if(d.current){o(!0),u(``);try{let e=await HM.loadDrafts();d.current&&i(Array.isArray(e)?e:[])}catch(e){console.error(` Failed to load drafts`,e),d.current&&(u(`Gagal memuat draft. Coba lagi nanti.`),i([]))}finally{d.current&&o(!1)}}},[]);(0,b.useEffect)(()=>{h()},[h]);let g=(0,b.useMemo)(()=>[...r].sort((e,t)=>{let n=new Date(e?.updatedAt||e?.createdAt||0).getTime();return new Date(t?.updatedAt||t?.createdAt||0).getTime()-n}),[r]),_=async e=>{e&&(u(``),n(`/create/editor`,{state:{draftId:e.id}}),jn.setItem(`activeDraftId`,e.id),e.signature?jn.setItem(`activeDraftSignature`,e.signature):jn.removeItem(`activeDraftSignature`))},v=async e=>{if(e&&window.confirm(`Hapus draft ini?`)){d.current&&c(e);try{await HM.deleteDraft(e),await h()}catch(e){console.error(` Failed to delete draft`,e),d.current&&u(`Draft tidak bisa dihapus. Coba lagi.`)}finally{d.current&&c(null)}}},y=e=>{let t=e.title?.trim()||`Draft Frame`,n=9,r=16;if(e.aspectRatio&&typeof e.aspectRatio==`string`){let[t,i]=e.aspectRatio.split(`:`).map(Number);Number.isFinite(t)&&t>0&&Number.isFinite(i)&&i>0&&(n=t,r=i)}else if(e.canvasWidth&&e.canvasHeight){let t=Number(e.canvasWidth),i=Number(e.canvasHeight);Number.isFinite(t)&&t>0&&Number.isFinite(i)&&i>0&&(n=t,r=i)}let i=n/r,a=`9:16`;a=Math.abs(i-9/16)<.01?`9:16`:Math.abs(i-4/5)<.01?`4:5`:Math.abs(i-2/3)<.01?`2:3`:`${n}:${r}`;let o=e.updatedAt||e.createdAt,c=o?new Date(o).toLocaleDateString(`id-ID`,{day:`numeric`,month:`short`,year:`numeric`}):`-`,l=Math.round(80*(n/r));return(0,G.jsxs)(`div`,{className:`profile-row`,style:{alignItems:`center`},children:[(0,G.jsxs)(`div`,{className:`label`,style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsxs)(`div`,{style:{width:`${l}px`,height:`80px`,borderRadius:`8px`,overflow:`hidden`,border:`1px solid #e5e7eb`,flexShrink:0,position:`relative`},children:[e.preview?(0,G.jsx)(`img`,{src:e.preview,alt:t,style:{width:`100%`,height:`100%`,objectFit:`cover`,display:`block`},loading:`lazy`}):(0,G.jsx)(`div`,{style:{width:`100%`,height:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f3f4f6`,fontSize:`10px`,color:`#9ca3af`,fontWeight:600},children:`No Preview`}),(0,G.jsx)(`div`,{style:{position:`absolute`,bottom:`4px`,right:`4px`,background:`rgba(0,0,0,0.7)`,color:`#fff`,padding:`2px 6px`,borderRadius:`4px`,fontSize:`10px`,fontWeight:600},children:a})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{style:{fontWeight:700,color:`#222`,marginBottom:`4px`},children:t}),(0,G.jsxs)(`div`,{style:{fontSize:`13px`,color:`#999`},children:[`Updated: `,c]})]})]}),(0,G.jsxs)(`div`,{className:`value`,style:{display:`flex`,gap:`8px`,justifyContent:`flex-end`},children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>_(e),style:{padding:`8px 16px`,background:`linear-gradient(to right, #e0b7a9, #c89585)`,color:`#fff`,border:`none`,borderRadius:`6px`,fontSize:`13px`,fontWeight:600,cursor:`pointer`,transition:`all 0.2s`},children:`Gunakan`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>v(e.id),disabled:s===e.id,style:{padding:`8px 16px`,background:`#fff`,color:`#dc2626`,border:`1px solid #fecaca`,borderRadius:`6px`,fontSize:`13px`,fontWeight:600,cursor:s===e.id?`not-allowed`:`pointer`,opacity:s===e.id?.6:1,transition:`all 0.2s`},children:s===e.id?`Menghapus...`:`Hapus`})]})]},e.id)};return(0,G.jsx)(`section`,{className:`profile-page`,children:(0,G.jsxs)(`div`,{className:`profile-shell container`,children:[(0,G.jsxs)(`div`,{className:`profile-header`,children:[(0,G.jsx)(`div`,{className:`profile-avatar`,"aria-hidden":!0,style:{background:m?`url(${m})`:`#d9d9d9`,backgroundSize:`cover`,backgroundPosition:`center`},children:!m&&(0,G.jsx)(`span`,{children:p})}),(0,G.jsx)(`h1`,{className:`profile-title`,children:`My Drafts`})]}),(0,G.jsxs)(`div`,{className:`profile-body`,children:[(0,G.jsxs)(`aside`,{className:`profile-sidebar`,"aria-label":`Profile navigation`,children:[(0,G.jsxs)(`nav`,{children:[(0,G.jsx)(tn,{className:`nav-item`,to:`/profile`,children:`My Profile`}),(0,G.jsx)(tn,{className:`nav-item`,to:`/settings`,children:`Settings`}),(0,G.jsx)(tn,{className:`nav-item active`,to:`/drafts`,children:`Drafts`})]}),(0,G.jsx)(`button`,{className:`nav-logout`,onClick:f,children:`Logout`})]}),(0,G.jsxs)(`main`,{className:`profile-content`,children:[(0,G.jsx)(`h2`,{className:`section-title`,children:`My Drafts`}),(0,G.jsxs)(`div`,{style:{marginBottom:`20px`,display:`flex`,gap:`12px`,flexWrap:`wrap`},children:[(0,G.jsx)(tn,{to:`/create/editor`,style:{padding:`10px 20px`,background:`linear-gradient(to right, #e0b7a9, #c89585)`,color:`#fff`,textDecoration:`none`,borderRadius:`8px`,fontWeight:600,fontSize:`14px`,border:`none`,cursor:`pointer`,transition:`all 0.2s`},children:`Buat Draft Baru`}),(0,G.jsx)(`button`,{type:`button`,onClick:h,disabled:a,style:{padding:`10px 20px`,background:`#fff`,color:`#666`,border:`1px solid #ddd`,borderRadius:`8px`,fontWeight:600,fontSize:`14px`,cursor:a?`not-allowed`:`pointer`,opacity:a?.6:1,transition:`all 0.2s`},children:a?`Memuat...`:`Refresh`})]}),l?(0,G.jsx)(`div`,{style:{padding:`12px 16px`,background:`#fef2f2`,border:`1px solid #fecaca`,borderRadius:`8px`,color:`#dc2626`,fontSize:`14px`,marginBottom:`16px`},children:l}):null,a?(0,G.jsxs)(`div`,{style:{marginTop:`80px`,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`12px`,color:`#666`},children:[(0,G.jsx)(`div`,{style:{width:`32px`,height:`32px`,border:`3px solid #e5e7eb`,borderTop:`3px solid #a2665a`,borderRadius:`50%`,animation:`spin 1s linear infinite`}}),(0,G.jsx)(`span`,{style:{fontSize:`14px`},children:`Memuat draft...`})]}):g.length===0?(0,G.jsxs)(`div`,{style:{marginTop:`80px`,padding:`60px 24px`,background:`linear-gradient(to bottom, #fef8f5, #fff)`,border:`2px dashed #e0b7a9`,borderRadius:`12px`,textAlign:`center`,color:`#666`},children:[(0,G.jsx)(`p`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`12px`},children:`Belum ada draft tersimpan.`}),(0,G.jsx)(`p`,{style:{fontSize:`14px`,marginBottom:`24px`,maxWidth:`400px`,margin:`0 auto 24px`},children:`Buat frame pertama kamu di halaman Create, lalu simpan untuk digunakan kembali.`}),(0,G.jsx)(tn,{to:`/create/editor`,style:{display:`inline-block`,padding:`12px 24px`,background:`linear-gradient(to right, #e0b7a9, #c89585)`,color:`#fff`,textDecoration:`none`,borderRadius:`8px`,fontWeight:600,fontSize:`14px`,transition:`all 0.2s`},children:`Mulai Buat Frame`})]}):(0,G.jsx)(`div`,{className:`profile-details`,children:g.map(e=>y(e))})]})]})]})})}var gV=()=>{let e=Le(),{user:t}=In(),[n,r]=(0,b.useState)(!1),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)(!1),[c,l]=(0,b.useState)(!0),[u,d]=(0,b.useState)(null),[f,p]=(0,b.useState)(!1),m=[`Christmas Fremio Series`,`Holiday Fremio Series`,`Year-End Recap Fremio Series`],[h,g]=(0,b.useState)(m[0]),[_,v]=(0,b.useState)({}),[y,x]=(0,b.useState)(!0);(0,b.useEffect)(()=>{document.title=`Membership  Fremio`,t?C():(a(null),s(!1),l(!1)),T(),S()},[t]);let S=async()=>{try{x(!0);let e=await Ik.getAllFrames(),t=new Set(m),n=(e||[]).filter(e=>t.has(String(e.category||``))).reduce((e,t)=>{let n=String(t.category||`Uncategorized`);return e[n]||(e[n]=[]),e[n].push(t),e},{});Object.keys(n).forEach(e=>{n[e].sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999))}),v(n)}catch(e){console.error(`Load preview frames error:`,e),v({})}finally{x(!1)}},C=async()=>{try{l(!0),d(null);try{let e=await Jk.getAccess();e&&e.success&&e.hasAccess?a(e.data):a(null)}catch(e){console.log(` Could not load access info:`,e.message),a(null)}try{let e=await Jk.canPurchase();e&&e.success?s(e.canPurchase):s(!0)}catch(e){console.log(` Could not check purchase eligibility:`,e.message),s(!0)}try{let e=await Jk.getPending();e?.success&&e?.hasPending&&e?.data&&(d(e.data),s(!1))}catch(e){console.log(` Could not load pending payment:`,e.message)}}catch(e){console.error(`Load access info error:`,e),a(null),s(!0)}finally{l(!1)}},w=async(t=null,n=3)=>{try{t?await Jk.checkStatus(t):await Jk.reconcileLatest?.(),await new Promise(e=>setTimeout(e,1e3));let r=await Jk.getAccess();return r?.success&&r?.hasAccess?(alert(` Access berhasil! Sekarang Anda bisa menggunakan semua frame premium.`),e(`/frames`),!0):n>0?(await new Promise(e=>setTimeout(e,2e3)),w(t,n-1)):!1}catch{return n>0?(await new Promise(e=>setTimeout(e,2e3)),w(t,n-1)):!1}},T=async()=>{try{await Jk.loadSnapScript()}catch(e){console.error(`Load Snap script error:`,e)}},E=async()=>{if(console.log(` Buy package clicked`),console.log(` Current user:`,t),console.log(` Can purchase:`,o),console.log(` Has access:`,i),!t){console.warn(` User not logged in, redirecting to register`),confirm(`Anda perlu login untuk melakukan pembelian.

Klik OK untuk Register (akun baru)
Klik Cancel untuk Login (sudah punya akun)`)?e(`/register?redirect=/pricing`):e(`/login?redirect=/pricing`);return}if(!o&&i){alert(`Anda masih memiliki akses aktif. Tidak bisa membeli paket baru.`);return}if(!f){alert(`Sebelum melanjutkan pembayaran, Anda wajib menyetujui Syarat & Ketentuan (termasuk kebijakan No Refund).`);return}try{if(r(!0),u&&(u.snapToken||u.redirectUrl)){if(console.log(` Found pending payment, auto-resuming...`),await Jk.loadSnapScript(),u.snapToken){Jk.openSnapPayment(u.snapToken,{onSuccess:()=>w(u.orderId).finally(()=>r(!1)),onPending:()=>w(u.orderId).finally(()=>r(!1)),onError:async()=>{console.log(` Resume failed, auto-canceling and creating new payment...`);try{await Jk.cancelLatestPending(),d(null),s(!0),r(!1),await E()}catch(e){console.error(`Cancel pending error:`,e),alert(`Gagal melanjutkan pembayaran. Silakan refresh halaman dan coba lagi.`),r(!1)}}});return}if(u.redirectUrl){window.open(u.redirectUrl,`_blank`,`noopener,noreferrer`),setTimeout(()=>{w(u.orderId)},1500),r(!1);return}}console.log(` Creating payment for:`,t.email),console.log(` Request data:`,{email:t.email,name:t.displayName||`Fremio User`,phone:t.phoneNumber||``});let e=await Jk.createPayment({email:t.email,name:t.displayName||`Fremio User`,phone:t.phoneNumber||``});if(console.log(` Payment response:`,e),!e)throw console.error(` No response received`),Error(`Failed to create payment: No response`);let n=e.data||e;if(!n||!n.token||!n.orderId)throw console.error(` Payment token or orderId missing:`,e),Error(`Payment token not received from server`);console.log(` Payment token received:`,n.token.substring(0,20)+`...`),console.log(` Order ID:`,n.orderId);let i=n.orderId;if(console.log(` Opening Midtrans Snap popup...`),!window.snap){console.error(` window.snap not available! Snap script not loaded.`),alert(`Payment system not ready. Please refresh the page and try again.`),r(!1);return}Jk.openSnapPayment(n.token,{onSuccess:e=>{console.log(`Payment success:`,e),w(i).then(e=>{e||r(!1)})},onPending:e=>{console.log(`Payment pending:`,e),w(i).finally(()=>r(!1))},onError:e=>{console.error(`Payment error:`,e),alert(`Pembayaran gagal. Silakan coba lagi.`),r(!1)}})}catch(e){console.error(` Buy package error:`,e),console.error(`Error details:`,{message:e.message,response:e.response,data:e.data,stack:e.stack});let t=e.message||e.data?.message||`Terjadi kesalahan. Silakan coba lagi.`;alert(`Gagal membuat pembayaran:\n${t}\n\nSilakan refresh halaman dan coba lagi.`),r(!1)}};if(c)return(0,G.jsx)(`div`,{className:`pricing-container`,children:(0,G.jsxs)(`div`,{className:`loading`,children:[(0,G.jsx)(`div`,{className:`spinner`}),(0,G.jsx)(`p`,{children:`Memuat informasi...`})]})});let D=_[`Christmas Fremio Series`]||[],O=_[`Holiday Fremio Series`]||[],k=_[`Year-End Recap Fremio Series`]||[],A=_[h]||[];u&&!u.unavailable&&(u.snapToken||u.redirectUrl),u&&u.unavailable;let j=h===`Christmas Fremio Series`?`Christmas Frames untuk rayakan Natal`:h===`Holiday Fremio Series`?`Holiday Frames untuk temani liburan`:`Year-End Frames untuk rayakan tahun baru`;return(0,G.jsxs)(`div`,{className:`pricing-container`,children:[(0,G.jsxs)(`div`,{className:`pricing-preview`,children:[(0,G.jsx)(`h3`,{style:{fontSize:`24px`,fontWeight:`700`,textAlign:`center`,marginBottom:`20px`,color:`#333`},children:`Preview Frame Koleksi Fremio`}),(0,G.jsx)(`div`,{className:`preview-tabs`,children:m.map(e=>(0,G.jsx)(`button`,{className:`preview-tab ${h===e?`active`:``}`,onClick:()=>g(e),type:`button`,children:e},e))}),(0,G.jsxs)(`div`,{className:`preview-panel`,children:[(0,G.jsx)(`div`,{className:`preview-quote`,children:j}),y?(0,G.jsx)(`div`,{className:`preview-loading`,children:`Memuat preview frames...`}):A.length===0?(0,G.jsx)(`div`,{className:`preview-empty`,children:`Belum ada frames untuk kategori ini.`}):(0,G.jsx)(`div`,{className:`preview-grid`,children:A.slice(0,10).map((e,t)=>(0,G.jsxs)(`div`,{className:`preview-item`,children:[(0,G.jsx)(`div`,{className:`preview-thumb`,children:(0,G.jsx)(`img`,{src:e.thumbnailUrl||e.imageUrl||e.imagePath,alt:e.name||`Frame ${t+1}`,onError:e=>e.currentTarget.style.display=`none`})}),(0,G.jsxs)(`div`,{className:`preview-name`,children:[`Frame `,t+1]})]},e.id||t))})]})]}),(0,G.jsx)(`div`,{className:`pricing-hero`,children:(0,G.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #fef5f1 0%, #fff 100%)`,padding:`40px 30px`,borderRadius:`16px`,boxShadow:`0 4px 12px rgba(0,0,0,0.08)`,maxWidth:`800px`,margin:`0 auto 40px`},children:[(0,G.jsx)(`div`,{className:`pricing-tagline`,children:(0,G.jsx)(`span`,{className:`brand-soft`,children:`Jadi bagian dari perjalanan cerita di Fremio`})}),(0,G.jsxs)(`div`,{className:`pricing-subtitle`,style:{fontSize:`16px`,lineHeight:`1.6`,color:`#666`,marginTop:`20px`,textAlign:`center`},children:[`Setiap orang punya momen.`,(0,G.jsx)(`br`,{}),`Fremio hadir untuk memberi ruang agar momen itu bisa diekspresikan, dirasakan, dan diingat.`,(0,G.jsx)(`br`,{}),`Bukan sekadar frame.`,(0,G.jsx)(`br`,{}),`Ini tentang bagaimana kita memaknai cerita hidup.`,(0,G.jsx)(`br`,{}),(0,G.jsx)(`strong`,{children:`Mulai sebagai member, dan ikut menjaga ruang ini tetap hidup.`})]})]})}),i&&(0,G.jsx)(`div`,{className:`current-access`,children:(0,G.jsxs)(`div`,{className:`access-card`,children:[(0,G.jsxs)(`div`,{className:`access-header`,children:[(0,G.jsx)(`span`,{className:`access-badge active`,children:` Member Aktif`}),(0,G.jsxs)(`span`,{className:`days-remaining`,children:[i.daysRemaining,` hari tersisa`]})]}),(0,G.jsxs)(`div`,{className:`access-info`,children:[(0,G.jsxs)(`p`,{children:[(0,G.jsx)(`strong`,{children:`Akses Frame:`}),` `,i.totalFrames,` frames`]}),(0,G.jsxs)(`p`,{children:[(0,G.jsx)(`strong`,{children:`Status:`}),` Member Fremio Aktif`]}),(0,G.jsxs)(`p`,{children:[(0,G.jsx)(`strong`,{children:`Berakhir:`}),` `,new Date(i.accessEnd).toLocaleDateString(`id-ID`,{day:`numeric`,month:`long`,year:`numeric`})]})]})]})}),(0,G.jsxs)(`div`,{className:`why-fremio-section`,style:{padding:`30px 20px`,background:`linear-gradient(135deg, #fef5f1 0%, #fff 100%)`,marginBottom:`30px`,borderRadius:`12px`},children:[(0,G.jsx)(`h2`,{style:{fontSize:`24px`,fontWeight:`700`,textAlign:`center`,marginBottom:`15px`,color:`#333`},children:`Mengapa Fremio Ada?`}),(0,G.jsxs)(`div`,{style:{maxWidth:`650px`,margin:`0 auto`,fontSize:`15px`,lineHeight:`1.6`,color:`#555`,textAlign:`center`},children:[(0,G.jsx)(`p`,{style:{marginBottom:`12px`},children:`Di tengah dunia yang serba cepat, banyak momen berlalu tanpa sempat dirayakan.`}),(0,G.jsx)(`p`,{style:{marginBottom:`15px`},children:`Fremio diciptakan sebagai ruang kecil untuk berhenti sejenak  menyimpan, membingkai, dan merayakan cerita yang berarti.`}),(0,G.jsxs)(`div`,{style:{marginTop:`15px`,padding:`20px`,background:`white`,borderRadius:`10px`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:[(0,G.jsx)(`p`,{style:{fontWeight:`600`,marginBottom:`10px`,fontSize:`14px`},children:`Kami percaya:`}),(0,G.jsxs)(`ul`,{style:{listStyle:`none`,padding:0,textAlign:`left`,maxWidth:`450px`,margin:`0 auto`,fontSize:`14px`},children:[(0,G.jsx)(`li`,{style:{marginBottom:`8px`},children:` Setiap momen layak punya tempat`}),(0,G.jsx)(`li`,{style:{marginBottom:`8px`},children:` Ekspresi tidak harus ramai untuk bermakna`}),(0,G.jsx)(`li`,{style:{marginBottom:`8px`},children:` Cerita personal juga penting`})]})]})]})]}),(0,G.jsxs)(`div`,{className:`pricing-offer-card`,children:[i?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`div`,{className:`offer-title`,style:{color:`#10b981`},children:` Terima kasih sudah menjadi Member Fremio`}),(0,G.jsxs)(`div`,{className:`offer-subtitle`,style:{fontSize:`16px`,color:`#666`,marginTop:`10px`,textAlign:`center`},children:[`Keanggotaan Anda aktif hingga`,` `,new Date(i.accessEnd).toLocaleDateString(`id-ID`,{day:`numeric`,month:`long`,year:`numeric`})]}),(0,G.jsxs)(`div`,{className:`offer-columns`,style:{marginTop:`30px`},children:[(0,G.jsxs)(`div`,{className:`offer-col`,children:[(0,G.jsx)(`div`,{className:`offer-col-title`,children:`Yang Kamu Dapatkan:`}),(0,G.jsxs)(`ul`,{children:[(0,G.jsxs)(`li`,{children:[` Akses ke `,i.totalFrames,` premium frames`]}),(0,G.jsx)(`li`,{children:` Semua koleksi frame Fremio`}),(0,G.jsx)(`li`,{children:` Frame baru setiap bulan`}),(0,G.jsx)(`li`,{children:` Akses lebih awal ke seri mendatang`})]})]}),(0,G.jsxs)(`div`,{className:`offer-col`,children:[(0,G.jsx)(`div`,{className:`offer-col-title`,children:`Manfaatkan Keanggotaan:`}),(0,G.jsxs)(`ul`,{children:[(0,G.jsx)(`li`,{children:`Ekspresikan momen dengan frame pilihan`}),(0,G.jsx)(`li`,{children:`Download hasil tanpa watermark`}),(0,G.jsx)(`li`,{children:`Akses seri khusus (Holiday, Year-End, dll)`}),(0,G.jsx)(`li`,{children:`Perpanjang kapan saja sebelum berakhir`})]})]})]})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{style:{padding:`30px 20px 15px`,marginBottom:`10px`},children:[(0,G.jsx)(`h2`,{style:{fontSize:`28px`,fontWeight:`700`,textAlign:`center`,marginBottom:`20px`,color:`#333`},children:`Yang Kamu Dapatkan sebagai Member Fremio`}),(0,G.jsx)(`p`,{style:{textAlign:`center`,fontSize:`16px`,color:`#666`,marginBottom:`30px`},children:`Sebagai member, kamu mendapatkan akses penuh ke seluruh ekosistem Fremio:`}),(0,G.jsxs)(`div`,{className:`offer-columns`,children:[(0,G.jsxs)(`div`,{className:`offer-col`,children:[(0,G.jsx)(`div`,{className:`offer-col-title`,children:`Akses Penuh:`}),(0,G.jsxs)(`ul`,{children:[(0,G.jsx)(`li`,{children:` Unlimited ke seluruh koleksi frame Fremio`}),(0,G.jsx)(`li`,{children:` Frame baru setiap bulan`}),(0,G.jsx)(`li`,{children:` Seri khusus (Holiday, Year-End, dll)`}),(0,G.jsx)(`li`,{children:` Akses lebih awal ke seri mendatang`})]})]}),(0,G.jsxs)(`div`,{className:`offer-col`,children:[(0,G.jsx)(`div`,{className:`offer-col-title`,children:`December Series Frames:`}),(0,G.jsxs)(`ul`,{children:[(0,G.jsxs)(`li`,{children:[D.length||0,` Christmas Fremio Series frames`]}),(0,G.jsxs)(`li`,{children:[O.length||0,` Holiday Fremio Series frames`]}),(0,G.jsxs)(`li`,{children:[k.length||0,` Year-End Recap Fremio Series frames`]}),(0,G.jsxs)(`li`,{children:[`Total:`,` `,D.length+O.length+k.length,` `,`frames`]})]})]})]}),(0,G.jsx)(`p`,{style:{textAlign:`center`,fontSize:`16px`,fontStyle:`italic`,color:`#888`,marginTop:`10px`,marginBottom:`0`},children:`Tanpa perlu memilih satu per satu.`})]}),(0,G.jsxs)(`div`,{onClick:()=>{let e=document.querySelector(`.offer-cta`);e&&e.scrollIntoView({behavior:`smooth`,block:`center`})},style:{background:`linear-gradient(135deg, #e0b7a9 0%, #d4a59a 100%)`,padding:`20px 20px`,borderRadius:`12px`,color:`white`,textAlign:`center`,marginTop:`10px`,marginBottom:`10px`,boxShadow:`0 4px 12px rgba(224, 183, 169, 0.25)`,maxWidth:`400px`,margin:`15px auto`,cursor:`pointer`,transition:`transform 0.2s, box-shadow 0.2s`},onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-2px)`,e.currentTarget.style.boxShadow=`0 6px 16px rgba(224, 183, 169, 0.35)`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`0 4px 12px rgba(224, 183, 169, 0.25)`},children:[(0,G.jsx)(`h2`,{style:{fontSize:`18px`,fontWeight:`700`,marginBottom:`6px`},children:`Keanggotaan Fremio`}),(0,G.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:`600`,marginBottom:`15px`,opacity:.95},children:`fremio Member`}),(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,gap:`4px`,marginBottom:`8px`},children:[(0,G.jsx)(`span`,{style:{fontSize:`18px`,fontWeight:`600`,textDecoration:`line-through`,opacity:.85,color:`#dc2626`,letterSpacing:`-0.5px`},children:`Rp 50.000`}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`baseline`,gap:`4px`},children:[(0,G.jsx)(`span`,{style:{fontSize:`32px`,fontWeight:`800`,lineHeight:`1`},children:`Rp 10.000`}),(0,G.jsx)(`span`,{style:{fontSize:`15px`,fontWeight:`400`,opacity:.9},children:`/ bulan`})]})]}),(0,G.jsx)(`p`,{style:{fontSize:`13px`,lineHeight:`1.4`,marginTop:`12px`,opacity:.95},children:`Kontribusi ini membantu Fremio terus berkembang, menciptakan frame baru, dan menjaga ruang ekspresi ini tetap terbuka.`})]}),(0,G.jsxs)(`div`,{id:`social-belonging-section`,style:{padding:`20px 20px 15px`,textAlign:`center`,marginBottom:`5px`},children:[(0,G.jsx)(`h3`,{style:{fontSize:`20px`,fontWeight:`700`,marginBottom:`15px`,color:`#333`},children:`Kamu Tidak Sendiri di Sini`}),(0,G.jsxs)(`p`,{style:{fontSize:`15px`,lineHeight:`1.6`,color:`#666`,maxWidth:`550px`,margin:`0 auto`},children:[`Fremio digunakan oleh banyak orang dengan cerita yang berbeda-beda.`,(0,G.jsx)(`br`,{}),`Namun semuanya berbagi satu hal yang sama:`,(0,G.jsx)(`br`,{}),(0,G.jsx)(`strong`,{children:`keinginan untuk mengekspresikan momen dengan cara yang lebih bermakna.`}),(0,G.jsx)(`br`,{}),(0,G.jsx)(`br`,{}),`Setiap member adalah bagian dari perjalanan ini.`]})]})]}),!i&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{id:`membership-cta-section`,style:{textAlign:`center`,padding:`15px 20px 10px`,marginTop:`5px`},children:[(0,G.jsx)(`h3`,{style:{fontSize:`26px`,fontWeight:`700`,marginBottom:`15px`,color:`#333`},children:`Siap Menjadi Bagian dari Fremio?`}),(0,G.jsxs)(`p`,{style:{fontSize:`16px`,color:`#666`,marginBottom:`25px`},children:[`Ini bukan tentang membeli sesuatu.`,(0,G.jsx)(`br`,{}),`Ini tentang memilih untuk ikut dalam sebuah perjalanan.`]})]}),(0,G.jsxs)(`div`,{className:`pricing-terms`,children:[(0,G.jsx)(`div`,{className:`pricing-terms-title`,children:`Tentang Keanggotaan`}),(0,G.jsxs)(`ul`,{className:`pricing-terms-list`,children:[(0,G.jsx)(`li`,{children:`Keanggotaan bersifat digital dan aktif selama periode berlangganan`}),(0,G.jsx)(`li`,{children:`Akses diberikan selama status member aktif`}),(0,G.jsx)(`li`,{children:`Pembayaran bersifat final setelah berhasil diproses`}),(0,G.jsxs)(`li`,{children:[`Jika ada kendala, kamu selalu bisa menghubungi kami di`,` `,(0,G.jsx)(`a`,{className:`pricing-terms-link`,href:`mailto:fremioid@gmail.com`,children:`fremioid@gmail.com`})]})]}),(0,G.jsx)(`p`,{style:{textAlign:`center`,fontSize:`15px`,color:`#666`,marginTop:`20px`,fontStyle:`italic`},children:`Kami ingin hubungan yang jujur, sederhana, dan saling menghargai.`}),(0,G.jsxs)(`label`,{className:`pricing-terms-agree`,children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:f,onChange:e=>p(e.target.checked)}),(0,G.jsx)(`span`,{children:`Saya memahami dan menyetujui ketentuan keanggotaan Fremio`})]})]})]}),(0,G.jsx)(`button`,{className:`offer-cta ${i?`active-subscription`:n||t&&!i&&!f?`disabled`:``}`,onClick:i?()=>e(`/frames`):E,disabled:!i&&(n||t&&!i&&!f),style:{fontSize:i?`16px`:`18px`,padding:i?`12px 30px`:`16px 50px`,fontWeight:`700`,minHeight:i?`auto`:`60px`,boxShadow:i?``:`0 8px 20px rgba(224, 183, 169, 0.4)`},children:n?`Memproses...`:i?`Gunakan Frame Premium Sekarang `:`Gabung sebagai Member Fremio`}),!t&&(0,G.jsx)(`div`,{className:`offer-note`,children:`Login diperlukan untuk melanjutkan.`}),t&&!i&&u&&(0,G.jsx)(`div`,{className:`offer-note`,children:`Anda memiliki transaksi yang sedang pending. Klik "Gabung sebagai Member Fremio" untuk melanjutkan pembayaran.`}),t&&!o&&i&&(0,G.jsxs)(`div`,{className:`offer-note`,children:[`Anda dapat memperpanjang keanggotaan setelah berakhir pada`,` `,new Date(i.accessEnd).toLocaleDateString(`id-ID`,{day:`numeric`,month:`long`,year:`numeric`})]})]}),(0,G.jsxs)(`div`,{className:`payment-info`,children:[(0,G.jsx)(`h3`,{children:` Pembayaran Aman`}),(0,G.jsx)(`p`,{children:`Transaksi Anda dilindungi oleh Midtrans, payment gateway terpercaya di Indonesia`}),(0,G.jsxs)(`div`,{className:`payment-methods`,style:{display:`flex`,gap:`15px`,flexWrap:`wrap`,justifyContent:`center`,marginTop:`15px`},children:[(0,G.jsx)(`span`,{style:{padding:`8px 16px`,background:`#f0f0f0`,borderRadius:`8px`,fontSize:`14px`,fontWeight:`600`,color:`#333`},children:` Kartu Kredit/Debit`}),(0,G.jsx)(`span`,{style:{padding:`8px 16px`,background:`#f0f0f0`,borderRadius:`8px`,fontSize:`14px`,fontWeight:`600`,color:`#333`},children:` Bank Transfer`}),(0,G.jsx)(`span`,{style:{padding:`8px 16px`,background:`#f0f0f0`,borderRadius:`8px`,fontSize:`14px`,fontWeight:`600`,color:`#333`},children:` E-Wallet`}),(0,G.jsx)(`span`,{style:{padding:`8px 16px`,background:`#f0f0f0`,borderRadius:`8px`,fontSize:`14px`,fontWeight:`600`,color:`#333`},children:` Convenience Store`})]})]}),(0,G.jsxs)(`div`,{className:`faq-section`,children:[(0,G.jsx)(`h3`,{children:` Pertanyaan Umum`}),(0,G.jsxs)(`div`,{className:`faq-item`,children:[(0,G.jsx)(`h4`,{children:`Berapa lama keanggotaan berlaku?`}),(0,G.jsx)(`p`,{children:`Keanggotaan Fremio berlaku selama 30 hari sejak pembayaran berhasil diproses.`})]}),(0,G.jsxs)(`div`,{className:`faq-item`,children:[(0,G.jsx)(`h4`,{children:`Apa yang didapat sebagai member?`}),(0,G.jsx)(`p`,{children:`Akses unlimited ke semua koleksi frame Fremio, termasuk frame baru yang dirilis setiap bulan dan seri khusus (Holiday, Year-End, dll).`})]}),(0,G.jsxs)(`div`,{className:`faq-item`,children:[(0,G.jsx)(`h4`,{children:`Bisakah saya perpanjang keanggotaan sebelum 30 hari berakhir?`}),(0,G.jsx)(`p`,{children:`Saat ini perpanjangan otomatis hanya bisa dilakukan setelah masa aktif berakhir. Kami akan mengingatkan Anda mendekati tanggal berakhir.`})]}),(0,G.jsxs)(`div`,{className:`faq-item`,children:[(0,G.jsx)(`h4`,{children:`Apa yang terjadi setelah keanggotaan berakhir?`}),(0,G.jsx)(`p`,{children:`Frame premium akan terkunci kembali. Anda perlu memperpanjang keanggotaan untuk mendapatkan akses lagi ke seluruh koleksi.`})]}),(0,G.jsxs)(`div`,{className:`faq-item`,children:[(0,G.jsx)(`h4`,{children:`Bagaimana cara pembayaran?`}),(0,G.jsx)(`p`,{children:`Klik "Gabung sebagai Member Fremio", pilih metode pembayaran favorit Anda (Kartu Kredit/Debit, Bank Transfer, E-Wallet, atau Convenience Store), dan ikuti instruksi pembayaran dari Midtrans.`})]})]})]})};function _V(){let[e,t]=(0,b.useState)(``),[n,r]=(0,b.useState)(null),i=[{title:` Getting Started`,icon:``,faqs:[{question:`Bagaimana cara membuat frame pertama saya?`,answer:`Klik menu 'Frames' di navigasi atas, pilih template frame yang Anda suka, lalu klik 'Use This Frame'. Anda akan diarahkan ke halaman editor untuk menambahkan foto dan kustomisasi.`},{question:`Bagaimana cara upload foto?`,answer:`Di halaman editor, klik tombol 'Add Photo' atau area kosong di frame. Anda bisa upload foto dari device, ambil foto langsung dengan kamera, atau pilih dari galeri yang sudah ada.`},{question:`Apakah saya perlu mendaftar untuk menggunakan Fremio?`,answer:`Ya, Anda perlu membuat akun untuk menggunakan semua fitur Fremio. Registrasi gratis dan hanya memerlukan email dan password.`}]},{title:` Frames & Templates`,icon:``,faqs:[{question:`Berapa banyak slot foto yang bisa saya tambahkan?`,answer:`Jumlah slot foto tergantung template frame yang Anda pilih. Setiap frame memiliki jumlah slot yang berbeda, dari 1 hingga 10 foto.`},{question:`Bisakah saya membuat custom frame sendiri?`,answer:`Ya! Gunakan fitur 'Frame Builder' untuk membuat frame custom Anda sendiri. Anda bisa mengatur ukuran, posisi slot foto, dan menambahkan elemen dekoratif.`},{question:`Apakah saya bisa mengubah warna frame?`,answer:`Ya, di halaman editor Anda bisa mengubah warna background frame, border, dan elemen dekoratif lainnya sesuai keinginan.`}]},{title:` Photo Editing`,icon:``,faqs:[{question:`Bagaimana cara crop atau rotate foto?`,answer:`Setelah upload foto, klik foto tersebut untuk membuka editor. Anda bisa drag untuk reposition, pinch/zoom untuk resize, dan gunakan tombol rotate untuk memutar foto.`},{question:`Bisakah saya menambahkan filter ke foto?`,answer:`Ya, klik foto yang sudah di-upload, lalu pilih tab 'Filters' di panel editor. Tersedia berbagai filter seperti B&W, Sepia, Vintage, dan lainnya.`},{question:`Bagaimana cara menghapus foto dari frame?`,answer:`Klik foto yang ingin dihapus, lalu klik tombol 'Remove' atau ikon trash di toolbar editor.`}]},{title:` Saving & Exporting`,icon:``,faqs:[{question:`Bagaimana cara menyimpan project saya?`,answer:`Klik tombol 'Save as Draft' untuk menyimpan project yang sedang dikerjakan. Semua draft tersimpan otomatis di akun Anda dan bisa diakses di menu 'Drafts'.`},{question:`Format apa yang bisa saya download?`,answer:`Anda bisa download frame Anda dalam format PNG (gambar) atau MP4 (video slideshow dengan animasi).`},{question:`Berapa ukuran file maksimal untuk download?`,answer:`File PNG: maksimal 10MB. File MP4: maksimal 50MB. Anda bisa adjust kualitas output untuk mengontrol ukuran file.`}]},{title:` Account & Settings`,icon:``,faqs:[{question:`Bagaimana cara mengubah password saya?`,answer:`Masuk ke menu 'Settings', pilih tab 'Security', lalu klik 'Change Password'. Masukkan password lama dan password baru Anda.`},{question:`Bagaimana cara mengganti foto profile?`,answer:`Klik ikon profile di header, pilih 'Profile', lalu klik foto profile dan upload foto baru.`},{question:`Bisakah saya menghapus akun saya?`,answer:`Ya, masuk ke 'Settings' > 'Account' > 'Delete Account'. Perhatikan bahwa ini akan menghapus semua data Anda secara permanen.`}]},{title:` Troubleshooting`,icon:``,faqs:[{question:`Foto saya tidak bisa di-upload, kenapa?`,answer:`Pastikan foto berformat JPG, PNG, atau WEBP dengan ukuran maksimal 5MB. Cek juga koneksi internet Anda.`},{question:`Editor freeze atau lambat, bagaimana solusinya?`,answer:`Coba refresh halaman atau clear browser cache. Jika masih lambat, coba kurangi jumlah foto atau gunakan foto dengan resolusi lebih kecil.`},{question:`Tidak bisa login, apa yang harus dilakukan?`,answer:`Pastikan email dan password benar. Jika lupa password, klik 'Forgot Password' di halaman login. Jika masih bermasalah, hubungi support.`}]}].map(t=>({...t,faqs:t.faqs.filter(t=>t.question.toLowerCase().includes(e.toLowerCase())||t.answer.toLowerCase().includes(e.toLowerCase()))})).filter(e=>e.faqs.length>0),a=(e,t)=>{let i=`${e}-${t}`;r(n===i?null:i)};return(0,G.jsxs)(`section`,{className:`anchor help-center-wrap`,children:[(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsxs)(`div`,{className:`help-header`,children:[(0,G.jsx)(`h1`,{children:` Help Center`}),(0,G.jsx)(`p`,{children:`Temukan jawaban untuk pertanyaan Anda`})]}),(0,G.jsx)(`div`,{className:`help-search`,children:(0,G.jsxs)(`div`,{className:`search-box`,children:[(0,G.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`circle`,{cx:`11`,cy:`11`,r:`8`}),(0,G.jsx)(`path`,{d:`m21 21-4.35-4.35`})]}),(0,G.jsx)(`input`,{type:`text`,placeholder:`Cari pertanyaan atau topik...`,value:e,onChange:e=>t(e.target.value)})]})}),(0,G.jsxs)(`div`,{className:`quick-links`,children:[(0,G.jsx)(`h3`,{children:` Quick Links`}),(0,G.jsxs)(`div`,{className:`quick-grid`,children:[(0,G.jsxs)(tn,{to:`/frames`,className:`quick-card`,children:[(0,G.jsx)(`span`,{className:`quick-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Browse Frames`}),(0,G.jsx)(`p`,{children:`Lihat semua template`})]}),(0,G.jsxs)(tn,{to:`/create`,className:`quick-card`,children:[(0,G.jsx)(`span`,{className:`quick-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Create Frame`}),(0,G.jsx)(`p`,{children:`Mulai project baru`})]}),(0,G.jsxs)(tn,{to:`/drafts`,className:`quick-card`,children:[(0,G.jsx)(`span`,{className:`quick-icon`,children:``}),(0,G.jsx)(`h4`,{children:`My Drafts`}),(0,G.jsx)(`p`,{children:`Lihat draft Anda`})]}),(0,G.jsxs)(tn,{to:`/settings`,className:`quick-card`,children:[(0,G.jsx)(`span`,{className:`quick-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Settings`}),(0,G.jsx)(`p`,{children:`Atur preferensi`})]})]})]}),(0,G.jsxs)(`div`,{className:`faq-sections`,children:[(0,G.jsx)(`h3`,{children:` Frequently Asked Questions`}),i.length===0?(0,G.jsxs)(`div`,{className:`no-results`,children:[(0,G.jsxs)(`p`,{children:[` Tidak ada hasil untuk "`,e,`"`]}),(0,G.jsxs)(`p`,{style:{fontSize:`0.9rem`,color:`#64748b`},children:[`Coba kata kunci lain atau `,(0,G.jsx)(`a`,{href:`#contact`,children:`hubungi support`})]})]}):i.map((e,t)=>(0,G.jsxs)(`div`,{className:`faq-category`,children:[(0,G.jsxs)(`h4`,{className:`category-title`,children:[(0,G.jsx)(`span`,{className:`category-icon`,children:e.icon}),e.title]}),(0,G.jsx)(`div`,{className:`faq-list`,children:e.faqs.map((e,r)=>(0,G.jsxs)(`div`,{className:`faq-item ${n===`${t}-${r}`?`expanded`:``}`,children:[(0,G.jsxs)(`button`,{className:`faq-question`,onClick:()=>a(t,r),children:[(0,G.jsx)(`span`,{children:e.question}),(0,G.jsx)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`faq-arrow`,children:(0,G.jsx)(`polyline`,{points:`6 9 12 15 18 9`})})]}),(0,G.jsx)(`div`,{className:`faq-answer`,children:(0,G.jsx)(`p`,{children:e.answer})})]},r))})]},t))]}),(0,G.jsx)(`div`,{id:`contact`,className:`contact-support`,children:(0,G.jsxs)(`div`,{className:`contact-card`,children:[(0,G.jsx)(`h3`,{children:` Masih Butuh Bantuan?`}),(0,G.jsx)(`p`,{children:`Tim support kami siap membantu Anda!`}),(0,G.jsxs)(`div`,{className:`contact-methods`,children:[(0,G.jsx)(`a`,{href:`/call-center`,className:`contact-btn`,children:` Call Center`}),(0,G.jsx)(`a`,{href:`mailto:fremioid@gmail.com`,className:`contact-btn`,children:` Email Support`}),(0,G.jsx)(`a`,{href:`https://wa.me/6285387569977`,target:`_blank`,rel:`noopener noreferrer`,className:`contact-btn`,children:` WhatsApp`})]})]})})]}),(0,G.jsx)(`style`,{jsx:!0,children:`
        .help-center-wrap {
          min-height: calc(100vh - 200px);
          padding: 40px 0;
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .help-header {
          text-align: center;
          margin-bottom: 40px;
        }

        .help-header h1 {
          font-size: 2.5rem;
          margin-bottom: 12px;
          color: #111;
        }

        .help-header p {
          font-size: 1.1rem;
          color: #64748b;
        }

        .help-search {
          max-width: 600px;
          margin: 0 auto 50px;
        }

        .search-box {
          position: relative;
          display: flex;
          align-items: center;
          background: white;
          border: 2px solid #e2e8f0;
          border-radius: 12px;
          padding: 14px 20px;
          transition: all 0.3s;
        }

        .search-box:focus-within {
          border-color: #e0b7a9;
          box-shadow: 0 0 0 3px rgba(224, 183, 169, 0.1);
        }

        .search-box svg {
          color: #94a3b8;
          margin-right: 12px;
          flex-shrink: 0;
        }

        .search-box input {
          border: none;
          outline: none;
          width: 100%;
          font-size: 1rem;
          color: #111;
        }

        .quick-links {
          margin-bottom: 60px;
        }

        .quick-links h3 {
          font-size: 1.5rem;
          margin-bottom: 24px;
          color: #111;
        }

        .quick-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
          gap: 20px;
        }

        .quick-card {
          background: white;
          padding: 24px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          text-decoration: none;
          transition: all 0.3s;
          text-align: center;
        }

        .quick-card:hover {
          border-color: #e0b7a9;
          transform: translateY(-4px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .quick-icon {
          font-size: 2.5rem;
          display: block;
          margin-bottom: 12px;
        }

        .quick-card h4 {
          font-size: 1.1rem;
          margin-bottom: 6px;
          color: #111;
        }

        .quick-card p {
          font-size: 0.9rem;
          color: #64748b;
          margin: 0;
        }

        .faq-sections {
          margin-bottom: 60px;
        }

        .faq-sections > h3 {
          font-size: 1.5rem;
          margin-bottom: 30px;
          color: #111;
        }

        .faq-category {
          margin-bottom: 40px;
        }

        .category-title {
          font-size: 1.3rem;
          margin-bottom: 20px;
          color: #111;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .category-icon {
          font-size: 1.8rem;
        }

        .faq-list {
          display: flex;
          flex-direction: column;
          gap: 12px;
        }

        .faq-item {
          background: white;
          border: 2px solid #e2e8f0;
          border-radius: 10px;
          overflow: hidden;
          transition: all 0.3s;
        }

        .faq-item:hover {
          border-color: #cbd5e1;
        }

        .faq-item.expanded {
          border-color: #e0b7a9;
        }

        .faq-question {
          width: 100%;
          padding: 18px 20px;
          background: none;
          border: none;
          text-align: left;
          font-size: 1rem;
          font-weight: 600;
          color: #111;
          cursor: pointer;
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 16px;
          transition: all 0.3s;
        }

        .faq-question:hover {
          background: #f8f9fa;
        }

        .faq-arrow {
          flex-shrink: 0;
          transition: transform 0.3s;
        }

        .faq-item.expanded .faq-arrow {
          transform: rotate(180deg);
        }

        .faq-answer {
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.3s ease;
        }

        .faq-item.expanded .faq-answer {
          max-height: 500px;
        }

        .faq-answer p {
          padding: 0 20px 20px;
          margin: 0;
          color: #475569;
          line-height: 1.6;
        }

        .no-results {
          text-align: center;
          padding: 60px 20px;
          background: white;
          border-radius: 12px;
          border: 2px dashed #e2e8f0;
        }

        .no-results p:first-child {
          font-size: 1.1rem;
          margin-bottom: 8px;
        }

        .contact-support {
          margin-top: 60px;
        }

        .contact-card {
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          padding: 50px 30px;
          border-radius: 16px;
          text-align: center;
          color: white;
        }

        .contact-card h3 {
          font-size: 2rem;
          margin-bottom: 12px;
        }

        .contact-card > p {
          font-size: 1.1rem;
          margin-bottom: 30px;
          opacity: 0.95;
        }

        .contact-methods {
          display: flex;
          gap: 16px;
          justify-content: center;
          flex-wrap: wrap;
        }

        .contact-btn {
          padding: 14px 28px;
          background: white;
          color: #c89585;
          text-decoration: none;
          border-radius: 8px;
          font-weight: 600;
          transition: all 0.3s;
        }

        .contact-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        @media (max-width: 768px) {
          .help-header h1 {
            font-size: 2rem;
          }

          .quick-grid {
            grid-template-columns: 1fr;
          }

          .contact-methods {
            flex-direction: column;
          }

          .contact-btn {
            width: 100%;
          }
        }
      `})]})}var vV=0;function yV(){let[e,t]=(0,b.useState)([]),n=(0,b.useRef)(new Map),r=(0,b.useCallback)(e=>{let r=n.current.get(e);r&&(clearTimeout(r),n.current.delete(e)),t(t=>t.filter(t=>t.id!==e))},[]),i=(0,b.useCallback)(({type:e=`info`,title:i,message:a,duration:o=4e3,action:s,persistent:c=!1})=>{let l=++vV,u={id:l,type:e,title:i,message:a,duration:o,action:s,persistent:c};if(t(e=>[...e,u]),!c&&o>0){let e=setTimeout(()=>{r(l)},o);n.current.set(l,e)}return l},[r]),a=(0,b.useCallback)((e,t={})=>i({type:`success`,message:e,...t}),[i]),o=(0,b.useCallback)((e,t={})=>i({type:`error`,message:e,duration:6e3,...t}),[i]),s=(0,b.useCallback)((e,t={})=>i({type:`warning`,message:e,duration:5e3,...t}),[i]),c=(0,b.useCallback)((e,t={})=>i({type:`info`,message:e,...t}),[i]),l=(0,b.useCallback)(()=>{n.current.forEach(e=>clearTimeout(e)),n.current.clear(),t([])},[]);return{toasts:e,showToast:i,success:a,error:o,warning:s,info:c,removeToast:r,clearAll:l}}function bV(){let[e,t]=(0,b.useState)(``),[n,r]=(0,b.useState)({name:``,email:``,phone:``,topic:``,message:``}),[i,a]=(0,b.useState)(!1),{showToast:o}=yV(),s=e=>{let{name:t,value:n}=e.target;r(e=>({...e,[t]:n}))},c=async e=>{if(e.preventDefault(),!i){a(!0);try{console.log(` Submitting contact message:`,n);let e=await GD(n);console.log(` Message submitted successfully:`,e),console.log(` LocalStorage after submit:`,JSON.parse(localStorage.getItem(`contact_messages`)||`[]`)),o(` Pesan berhasil dikirim! Tim kami akan menghubungi Anda segera.`,`success`),r({name:``,email:``,phone:``,topic:``,message:``})}catch(e){console.error(`Error submitting message:`,e),o(` Gagal mengirim pesan. Silakan coba lagi.`,`error`)}finally{a(!1)}}},l=[{value:`technical`,label:` Technical Support`,desc:`Masalah teknis atau bug`},{value:`account`,label:` Account Issues`,desc:`Login, password, profile`},{value:`billing`,label:` Billing & Payments`,desc:`Pembayaran dan langganan`},{value:`general`,label:` General Inquiry`,desc:`Pertanyaan umum`},{value:`feedback`,label:` Feedback & Suggestions`,desc:`Saran dan masukan`}];return(0,G.jsxs)(`section`,{className:`anchor call-center-wrap`,children:[(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsxs)(`div`,{className:`cc-header`,children:[(0,G.jsx)(`h1`,{children:` Call Center`}),(0,G.jsx)(`p`,{children:`Hubungi kami untuk bantuan langsung`})]}),(0,G.jsxs)(`div`,{className:`cc-grid`,children:[(0,G.jsxs)(`div`,{className:`cc-sidebar`,children:[(0,G.jsxs)(`div`,{className:`info-card`,children:[(0,G.jsx)(`h3`,{children:` Contact Information`}),(0,G.jsxs)(`div`,{className:`contact-item`,children:[(0,G.jsx)(`div`,{className:`contact-icon`,children:``}),(0,G.jsxs)(`div`,{className:`contact-details`,children:[(0,G.jsx)(`h4`,{children:`Phone`}),(0,G.jsx)(`a`,{href:`tel:+6285387569977`,children:`+62 853 8756 9977`}),(0,G.jsx)(`p`,{children:`Senin - Jumat: 9:00 - 18:00 WIB`})]})]}),(0,G.jsxs)(`div`,{className:`contact-item`,children:[(0,G.jsx)(`div`,{className:`contact-icon`,children:``}),(0,G.jsxs)(`div`,{className:`contact-details`,children:[(0,G.jsx)(`h4`,{children:`Email`}),(0,G.jsx)(`a`,{href:`mailto:fremioid@gmail.com`,children:`fremioid@gmail.com`}),(0,G.jsx)(`p`,{children:`Response dalam 24 jam`})]})]}),(0,G.jsxs)(`div`,{className:`contact-item`,children:[(0,G.jsx)(`div`,{className:`contact-icon`,children:``}),(0,G.jsxs)(`div`,{className:`contact-details`,children:[(0,G.jsx)(`h4`,{children:`WhatsApp`}),(0,G.jsx)(`a`,{href:`https://wa.me/6285387569977`,target:`_blank`,rel:`noopener noreferrer`,children:`Chat di WhatsApp`}),(0,G.jsx)(`p`,{children:`Fast response`})]})]}),(0,G.jsxs)(`div`,{className:`contact-item`,children:[(0,G.jsx)(`div`,{className:`contact-icon`,children:``}),(0,G.jsxs)(`div`,{className:`contact-details`,children:[(0,G.jsx)(`h4`,{children:`Office`}),(0,G.jsxs)(`p`,{style:{margin:0,color:`#475569`},children:[`Jalan Asep Berlian Gang Bunga 2 no.1,`,(0,G.jsx)(`br`,{}),`Cicadas, Kota Bandung`]})]})]})]}),(0,G.jsxs)(`div`,{className:`info-card`,children:[(0,G.jsx)(`h3`,{children:` Business Hours`}),(0,G.jsxs)(`div`,{className:`hours-list`,children:[(0,G.jsxs)(`div`,{className:`hours-item`,children:[(0,G.jsx)(`span`,{children:`Senin - Jumat`}),(0,G.jsx)(`strong`,{children:`09:00 - 18:00`})]}),(0,G.jsxs)(`div`,{className:`hours-item`,children:[(0,G.jsx)(`span`,{children:`Sabtu`}),(0,G.jsx)(`strong`,{children:`10:00 - 15:00`})]}),(0,G.jsxs)(`div`,{className:`hours-item`,children:[(0,G.jsx)(`span`,{children:`Minggu & Libur`}),(0,G.jsx)(`strong`,{children:`Tutup`})]})]})]})]}),(0,G.jsxs)(`div`,{className:`cc-main`,children:[(0,G.jsxs)(`div`,{className:`form-card`,children:[(0,G.jsx)(`h3`,{children:` Send Us a Message`}),(0,G.jsx)(`p`,{children:`Isi form di bawah dan tim kami akan menghubungi Anda`}),(0,G.jsxs)(`form`,{onSubmit:c,children:[(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Nama Lengkap *`}),(0,G.jsx)(`input`,{type:`text`,name:`name`,value:n.name,onChange:s,placeholder:`John Doe`,required:!0})]}),(0,G.jsxs)(`div`,{className:`form-row`,children:[(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Email *`}),(0,G.jsx)(`input`,{type:`email`,name:`email`,value:n.email,onChange:s,placeholder:`john@example.com`,required:!0})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Phone Number *`}),(0,G.jsx)(`input`,{type:`tel`,name:`phone`,value:n.phone,onChange:s,placeholder:`+62 812 3456 7890`,required:!0})]})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Topik *`}),(0,G.jsxs)(`select`,{name:`topic`,value:n.topic,onChange:s,required:!0,children:[(0,G.jsx)(`option`,{value:``,children:`-- Pilih Topik --`}),l.map(e=>(0,G.jsxs)(`option`,{value:e.value,children:[e.label,` - `,e.desc]},e.value))]})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Pesan *`}),(0,G.jsx)(`textarea`,{name:`message`,value:n.message,onChange:s,placeholder:`Jelaskan masalah atau pertanyaan Anda di sini...`,rows:`6`,required:!0})]}),(0,G.jsx)(`button`,{type:`submit`,className:`submit-btn`,disabled:i,children:i?` Mengirim...`:` Kirim Pesan`})]})]}),(0,G.jsxs)(`div`,{className:`topics-grid`,children:[(0,G.jsx)(`h4`,{children:` Topik Populer`}),(0,G.jsx)(`div`,{className:`topics-list`,children:l.map(e=>(0,G.jsx)(`div`,{className:`topic-chip`,children:(0,G.jsx)(`span`,{children:e.label})},e.value))})]})]})]})]}),(0,G.jsx)(`style`,{children:`
        .call-center-wrap {
          min-height: calc(100vh - 200px);
          padding: 40px 0;
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .cc-header {
          text-align: center;
          margin-bottom: 50px;
        }

        .cc-header h1 {
          font-size: 2.5rem;
          margin-bottom: 12px;
          color: #111;
        }

        .cc-header p {
          font-size: 1.1rem;
          color: #64748b;
        }

        .cc-grid {
          display: grid;
          grid-template-columns: 350px 1fr;
          gap: 30px;
          align-items: start;
        }

        .info-card {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          margin-bottom: 20px;
        }

        .info-card h3 {
          font-size: 1.3rem;
          margin-bottom: 24px;
          color: #111;
        }

        .contact-item {
          display: flex;
          gap: 16px;
          margin-bottom: 24px;
          padding-bottom: 24px;
          border-bottom: 1px solid #e2e8f0;
        }

        .contact-item:last-child {
          margin-bottom: 0;
          padding-bottom: 0;
          border-bottom: none;
        }

        .contact-icon {
          font-size: 2rem;
          flex-shrink: 0;
        }

        .contact-details h4 {
          font-size: 1rem;
          margin-bottom: 6px;
          color: #111;
        }

        .contact-details a {
          color: #e0b7a9;
          text-decoration: none;
          font-weight: 600;
          display: block;
          margin-bottom: 4px;
        }

        .contact-details a:hover {
          text-decoration: underline;
        }

        .contact-details p {
          font-size: 0.85rem;
          color: #64748b;
          margin: 0;
        }

        .hours-list {
          display: flex;
          flex-direction: column;
          gap: 12px;
        }

        .hours-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 12px;
          background: #f8f9fa;
          border-radius: 8px;
        }

        .hours-item span {
          color: #64748b;
        }

        .hours-item strong {
          color: #111;
        }

        .form-card {
          background: white;
          padding: 40px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          margin-bottom: 30px;
        }

        .form-card h3 {
          font-size: 1.5rem;
          margin-bottom: 8px;
          color: #111;
        }

        .form-card > p {
          color: #64748b;
          margin-bottom: 30px;
        }

        .form-group {
          margin-bottom: 24px;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
        }

        .form-group label {
          display: block;
          margin-bottom: 8px;
          font-weight: 600;
          color: #334155;
          font-size: 0.95rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          width: 100%;
          padding: 12px 16px;
          border: 2px solid #e2e8f0;
          border-radius: 8px;
          font-size: 1rem;
          color: #111;
          transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
          outline: none;
          border-color: #e0b7a9;
          box-shadow: 0 0 0 3px rgba(224, 183, 169, 0.1);
        }

        .form-group textarea {
          resize: vertical;
          font-family: inherit;
        }

        .submit-btn {
          width: 100%;
          padding: 16px;
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 1.1rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
        }

        .submit-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(200, 149, 133, 0.3);
        }

        .submit-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
          transform: none;
        }

        .topics-grid {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
        }

        .topics-grid h4 {
          font-size: 1.2rem;
          margin-bottom: 16px;
          color: #111;
        }

        .topics-list {
          display: flex;
          flex-wrap: wrap;
          gap: 10px;
        }

        .topic-chip {
          padding: 10px 16px;
          background: #f1f5f9;
          border: 1px solid #cbd5e1;
          border-radius: 20px;
          font-size: 0.9rem;
          color: #475569;
        }

        @media (max-width: 1024px) {
          .cc-grid {
            grid-template-columns: 1fr;
          }

          .cc-sidebar {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
          }
        }

        @media (max-width: 768px) {
          .cc-header h1 {
            font-size: 2rem;
          }

          .cc-sidebar {
            grid-template-columns: 1fr;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .form-card {
            padding: 24px;
          }
        }
      `})]})}function xV(){let[e,t]=(0,b.useState)(``),[n,r]=(0,b.useState)(``),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)(!1),[c,l]=(0,b.useState)(``),u={FRM001:{id:`FRM001`,date:`2025-11-20`,status:`completed`,items:[{name:`Birthday Frame Set`,quantity:1,price:15e4},{name:`Custom Photo Print`,quantity:3,price:75e3}],total:375e3,shipping:{method:`JNE Regular`,tracking:`JNE123456789`,address:`Jl. Sudirman No. 123, Jakarta`}},FRM002:{id:`FRM002`,date:`2025-11-23`,status:`processing`,items:[{name:`Wedding Frame Premium`,quantity:1,price:25e4}],total:25e4,shipping:{method:`Gosend Same Day`,tracking:`-`,address:`Jl. Gatot Subroto No. 45, Bandung`}},FRM003:{id:`FRM003`,date:`2025-11-24`,status:`shipped`,items:[{name:`Family Portrait Frame`,quantity:2,price:18e4}],total:36e4,shipping:{method:`SiCepat Halu`,tracking:`SC987654321`,address:`Jl. Asia Afrika No. 78, Surabaya`}}},d=t=>{t.preventDefault(),l(``),s(!0),setTimeout(()=>{let t=u[e.toUpperCase()];t?a(t):(l(`Order tidak ditemukan. Pastikan Order ID benar.`),a(null)),s(!1)},1e3)},f=e=>{let t={pending:{label:`Menunggu Pembayaran`,color:`#fbbf24`,icon:``},processing:{label:`Diproses`,color:`#60a5fa`,icon:``},shipped:{label:`Dikirim`,color:`#a78bfa`,icon:``},completed:{label:`Selesai`,color:`#34d399`,icon:``},cancelled:{label:`Dibatalkan`,color:`#f87171`,icon:``}};return t[e]||t.pending},p=e=>new Intl.NumberFormat(`id-ID`,{style:`currency`,currency:`IDR`,minimumFractionDigits:0}).format(e);return(0,G.jsxs)(`section`,{className:`anchor order-status-wrap`,children:[(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsxs)(`div`,{className:`os-header`,children:[(0,G.jsx)(`h1`,{children:` Order Status`}),(0,G.jsx)(`p`,{children:`Lacak status pesanan Anda`})]}),(0,G.jsx)(`div`,{className:`search-section`,children:(0,G.jsxs)(`div`,{className:`search-card`,children:[(0,G.jsx)(`h3`,{children:` Cek Status Order`}),(0,G.jsx)(`p`,{children:`Masukkan Order ID dan email untuk melacak pesanan`}),(0,G.jsxs)(`form`,{onSubmit:d,children:[(0,G.jsxs)(`div`,{className:`form-row`,children:[(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Order ID *`}),(0,G.jsx)(`input`,{type:`text`,value:e,onChange:e=>t(e.target.value),placeholder:`Contoh: FRM001`,required:!0})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Email *`}),(0,G.jsx)(`input`,{type:`email`,value:n,onChange:e=>r(e.target.value),placeholder:`your@email.com`,required:!0})]})]}),(0,G.jsx)(`button`,{type:`submit`,className:`search-btn`,disabled:o,children:o?`Mencari...`:` Lacak Pesanan`})]}),c&&(0,G.jsxs)(`div`,{className:`error-box`,children:[` `,c]}),(0,G.jsx)(`div`,{className:`demo-hint`,children:(0,G.jsxs)(`p`,{children:[` `,(0,G.jsx)(`strong`,{children:`Demo:`}),` Coba Order ID: `,(0,G.jsx)(`code`,{children:`FRM001`}),`,`,` `,(0,G.jsx)(`code`,{children:`FRM002`}),`, atau `,(0,G.jsx)(`code`,{children:`FRM003`})]})})]})}),i&&(0,G.jsxs)(`div`,{className:`result-section`,children:[(0,G.jsxs)(`div`,{className:`order-card`,children:[(0,G.jsxs)(`div`,{className:`order-header`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`h3`,{children:[`Order #`,i.id]}),(0,G.jsxs)(`p`,{children:[`Tanggal:`,` `,new Date(i.date).toLocaleDateString(`id-ID`,{day:`numeric`,month:`long`,year:`numeric`})]})]}),(0,G.jsxs)(`div`,{className:`status-badge`,style:{background:f(i.status).color},children:[f(i.status).icon,` `,f(i.status).label]})]}),(0,G.jsxs)(`div`,{className:`order-timeline`,children:[(0,G.jsx)(`h4`,{children:` Status Timeline`}),(0,G.jsxs)(`div`,{className:`timeline`,children:[(0,G.jsxs)(`div`,{className:`timeline-item ${[`pending`,`processing`,`shipped`,`completed`].includes(i.status)?`active`:``}`,children:[(0,G.jsx)(`div`,{className:`timeline-dot`}),(0,G.jsxs)(`div`,{className:`timeline-content`,children:[(0,G.jsx)(`strong`,{children:`Order Dibuat`}),(0,G.jsx)(`p`,{children:i.date})]})]}),(0,G.jsxs)(`div`,{className:`timeline-item ${[`processing`,`shipped`,`completed`].includes(i.status)?`active`:``}`,children:[(0,G.jsx)(`div`,{className:`timeline-dot`}),(0,G.jsxs)(`div`,{className:`timeline-content`,children:[(0,G.jsx)(`strong`,{children:`Pembayaran Diterima`}),(0,G.jsx)(`p`,{children:i.status===`pending`?`Menunggu`:`Lunas`})]})]}),(0,G.jsxs)(`div`,{className:`timeline-item ${[`shipped`,`completed`].includes(i.status)?`active`:``}`,children:[(0,G.jsx)(`div`,{className:`timeline-dot`}),(0,G.jsxs)(`div`,{className:`timeline-content`,children:[(0,G.jsx)(`strong`,{children:`Pesanan Dikirim`}),(0,G.jsx)(`p`,{children:i.status===`shipped`||i.status===`completed`?`Dalam perjalanan`:`Menunggu`})]})]}),(0,G.jsxs)(`div`,{className:`timeline-item ${i.status===`completed`?`active`:``}`,children:[(0,G.jsx)(`div`,{className:`timeline-dot`}),(0,G.jsxs)(`div`,{className:`timeline-content`,children:[(0,G.jsx)(`strong`,{children:`Pesanan Diterima`}),(0,G.jsx)(`p`,{children:i.status===`completed`?`Selesai`:`Menunggu`})]})]})]})]}),(0,G.jsxs)(`div`,{className:`order-items`,children:[(0,G.jsx)(`h4`,{children:` Items`}),i.items.map((e,t)=>(0,G.jsxs)(`div`,{className:`item-row`,children:[(0,G.jsxs)(`div`,{className:`item-info`,children:[(0,G.jsx)(`strong`,{children:e.name}),(0,G.jsxs)(`p`,{children:[`Qty: `,e.quantity]})]}),(0,G.jsx)(`div`,{className:`item-price`,children:p(e.price*e.quantity)})]},t)),(0,G.jsxs)(`div`,{className:`total-row`,children:[(0,G.jsx)(`strong`,{children:`Total`}),(0,G.jsx)(`strong`,{children:p(i.total)})]})]}),(0,G.jsxs)(`div`,{className:`shipping-info`,children:[(0,G.jsx)(`h4`,{children:` Pengiriman`}),(0,G.jsxs)(`div`,{className:`shipping-grid`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`label`,children:`Metode`}),(0,G.jsx)(`p`,{className:`value`,children:i.shipping.method})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`label`,children:`Tracking Number`}),(0,G.jsx)(`p`,{className:`value`,children:i.shipping.tracking})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`label`,children:`Alamat`}),(0,G.jsx)(`p`,{className:`value`,children:i.shipping.address})]})]})]})]}),(0,G.jsxs)(`div`,{className:`help-card`,children:[(0,G.jsx)(`h4`,{children:` Butuh Bantuan?`}),(0,G.jsx)(`p`,{children:`Jika ada pertanyaan tentang pesanan Anda:`}),(0,G.jsxs)(`div`,{className:`help-buttons`,children:[(0,G.jsx)(`a`,{href:`/call-center`,className:`help-btn`,children:` Hubungi Support`}),(0,G.jsx)(`a`,{href:`mailto:fremioid@gmail.com`,className:`help-btn`,children:` Email Kami`})]})]})]})]}),(0,G.jsx)(`style`,{jsx:!0,children:`
        .order-status-wrap {
          min-height: calc(100vh - 200px);
          padding: 40px 0;
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .os-header {
          text-align: center;
          margin-bottom: 50px;
        }

        .os-header h1 {
          font-size: 2.5rem;
          margin-bottom: 12px;
          color: #111;
        }

        .os-header p {
          font-size: 1.1rem;
          color: #64748b;
        }

        .search-section {
          max-width: 700px;
          margin: 0 auto 50px;
        }

        .search-card {
          background: white;
          padding: 40px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
        }

        .search-card h3 {
          font-size: 1.5rem;
          margin-bottom: 8px;
          color: #111;
        }

        .search-card > p {
          color: #64748b;
          margin-bottom: 30px;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 24px;
        }

        .form-group label {
          display: block;
          margin-bottom: 8px;
          font-weight: 600;
          color: #334155;
        }

        .form-group input {
          width: 100%;
          padding: 12px 16px;
          border: 2px solid #e2e8f0;
          border-radius: 8px;
          font-size: 1rem;
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: #e0b7a9;
          box-shadow: 0 0 0 3px rgba(224, 183, 169, 0.1);
        }

        .search-btn {
          width: 100%;
          padding: 16px;
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 1.1rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
        }

        .search-btn:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(200, 149, 133, 0.3);
        }

        .search-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .error-box {
          margin-top: 20px;
          padding: 16px;
          background: #fee;
          border: 2px solid #fcc;
          border-radius: 8px;
          color: #c33;
        }

        .demo-hint {
          margin-top: 20px;
          padding: 16px;
          background: #f0f9ff;
          border: 1px solid #bae6fd;
          border-radius: 8px;
        }

        .demo-hint p {
          margin: 0;
          font-size: 0.9rem;
          color: #0369a1;
        }

        .demo-hint code {
          padding: 2px 8px;
          background: white;
          border: 1px solid #bae6fd;
          border-radius: 4px;
          font-family: monospace;
          margin: 0 4px;
        }

        .result-section {
          max-width: 900px;
          margin: 0 auto;
        }

        .order-card {
          background: white;
          padding: 40px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          margin-bottom: 20px;
        }

        .order-header {
          display: flex;
          justify-content: space-between;
          align-items: start;
          padding-bottom: 24px;
          border-bottom: 2px solid #e2e8f0;
          margin-bottom: 30px;
        }

        .order-header h3 {
          font-size: 1.8rem;
          margin-bottom: 6px;
          color: #111;
        }

        .order-header p {
          color: #64748b;
          margin: 0;
        }

        .status-badge {
          padding: 10px 20px;
          border-radius: 20px;
          color: white;
          font-weight: 600;
          font-size: 0.95rem;
        }

        .order-timeline {
          margin-bottom: 30px;
        }

        .order-timeline h4 {
          font-size: 1.2rem;
          margin-bottom: 20px;
          color: #111;
        }

        .timeline {
          position: relative;
        }

        .timeline-item {
          display: flex;
          gap: 16px;
          position: relative;
          padding-bottom: 30px;
        }

        .timeline-item:last-child {
          padding-bottom: 0;
        }

        .timeline-item:not(:last-child)::before {
          content: "";
          position: absolute;
          left: 12px;
          top: 30px;
          bottom: 0;
          width: 2px;
          background: #e2e8f0;
        }

        .timeline-item.active:not(:last-child)::before {
          background: #e0b7a9;
        }

        .timeline-dot {
          width: 24px;
          height: 24px;
          border-radius: 50%;
          background: #e2e8f0;
          flex-shrink: 0;
          border: 4px solid white;
          box-shadow: 0 0 0 2px #e2e8f0;
        }

        .timeline-item.active .timeline-dot {
          background: #e0b7a9;
          box-shadow: 0 0 0 2px #e0b7a9;
        }

        .timeline-content strong {
          display: block;
          margin-bottom: 4px;
          color: #111;
        }

        .timeline-content p {
          margin: 0;
          font-size: 0.9rem;
          color: #64748b;
        }

        .order-items {
          margin-bottom: 30px;
        }

        .order-items h4 {
          font-size: 1.2rem;
          margin-bottom: 16px;
          color: #111;
        }

        .item-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 16px;
          background: #f8f9fa;
          border-radius: 8px;
          margin-bottom: 10px;
        }

        .item-info strong {
          display: block;
          margin-bottom: 4px;
          color: #111;
        }

        .item-info p {
          margin: 0;
          font-size: 0.9rem;
          color: #64748b;
        }

        .item-price {
          font-weight: 600;
          color: #111;
        }

        .total-row {
          display: flex;
          justify-content: space-between;
          padding: 16px;
          background: #e0b7a9;
          color: white;
          border-radius: 8px;
          font-size: 1.1rem;
          margin-top: 10px;
        }

        .shipping-info h4 {
          font-size: 1.2rem;
          margin-bottom: 16px;
          color: #111;
        }

        .shipping-grid {
          display: grid;
          gap: 20px;
        }

        .shipping-grid .label {
          font-size: 0.85rem;
          color: #64748b;
          margin-bottom: 4px;
        }

        .shipping-grid .value {
          font-weight: 600;
          color: #111;
          margin: 0;
        }

        .help-card {
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          padding: 30px;
          border-radius: 12px;
          text-align: center;
          color: white;
        }

        .help-card h4 {
          font-size: 1.5rem;
          margin-bottom: 8px;
        }

        .help-card > p {
          margin-bottom: 20px;
          opacity: 0.95;
        }

        .help-buttons {
          display: flex;
          gap: 16px;
          justify-content: center;
          flex-wrap: wrap;
        }

        .help-btn {
          padding: 12px 24px;
          background: white;
          color: #c89585;
          text-decoration: none;
          border-radius: 8px;
          font-weight: 600;
          transition: all 0.3s;
        }

        .help-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        @media (max-width: 768px) {
          .os-header h1 {
            font-size: 2rem;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .search-card,
          .order-card {
            padding: 24px;
          }

          .order-header {
            flex-direction: column;
            gap: 16px;
          }

          .help-buttons {
            flex-direction: column;
          }

          .help-btn {
            width: 100%;
          }
        }
      `})]})}function SV(){return(0,G.jsxs)(`section`,{className:`anchor about-wrap`,children:[(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsxs)(`div`,{className:`about-hero`,children:[(0,G.jsx)(`h1`,{children:` About Fremio`}),(0,G.jsx)(`p`,{className:`tagline`,children:`Think Outside The Box!`}),(0,G.jsx)(`p`,{className:`description`,children:`Fremio adalah platform inovatif yang memudahkan siapa saja untuk membuat photo frames yang indah dan personal. Kami percaya setiap momen berharga untuk diabadikan dengan cara yang unik dan creative.`})]}),(0,G.jsxs)(`div`,{className:`mv-section`,children:[(0,G.jsxs)(`div`,{className:`mv-card`,children:[(0,G.jsx)(`div`,{className:`mv-icon`,children:``}),(0,G.jsx)(`h3`,{children:`Our Mission`}),(0,G.jsx)(`p`,{children:`Memberdayakan setiap orang untuk mengekspresikan kreativitas mereka melalui photo frames yang personal dan bermakna. Kami ingin membuat proses pembuatan frame menjadi mudah, menyenangkan, dan accessible untuk semua.`})]}),(0,G.jsxs)(`div`,{className:`mv-card`,children:[(0,G.jsx)(`div`,{className:`mv-icon`,children:``}),(0,G.jsx)(`h3`,{children:`Our Vision`}),(0,G.jsx)(`p`,{children:`Menjadi platform #1 di Indonesia untuk photo frame creation, di mana setiap orang bisa mewujudkan ide creative mereka dan membagikan memories yang berharga dengan cara yang unique dan inspiring.`})]})]}),(0,G.jsxs)(`div`,{className:`values-section`,children:[(0,G.jsx)(`h2`,{children:` Our Values`}),(0,G.jsxs)(`div`,{className:`values-grid`,children:[(0,G.jsxs)(`div`,{className:`value-card`,children:[(0,G.jsx)(`div`,{className:`value-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Innovation`}),(0,G.jsx)(`p`,{children:`Terus berinovasi untuk memberikan pengalaman terbaik`})]}),(0,G.jsxs)(`div`,{className:`value-card`,children:[(0,G.jsx)(`div`,{className:`value-icon`,children:``}),(0,G.jsx)(`h4`,{children:`User-Centric`}),(0,G.jsx)(`p`,{children:`User adalah prioritas utama dalam setiap keputusan kami`})]}),(0,G.jsxs)(`div`,{className:`value-card`,children:[(0,G.jsx)(`div`,{className:`value-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Creativity`}),(0,G.jsx)(`p`,{children:`Mendorong kreativitas tanpa batas untuk semua user`})]}),(0,G.jsxs)(`div`,{className:`value-card`,children:[(0,G.jsx)(`div`,{className:`value-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Community`}),(0,G.jsx)(`p`,{children:`Membangun komunitas yang supportive dan collaborative`})]}),(0,G.jsxs)(`div`,{className:`value-card`,children:[(0,G.jsx)(`div`,{className:`value-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Quality`}),(0,G.jsx)(`p`,{children:`Mengutamakan kualitas dalam setiap aspek produk`})]}),(0,G.jsxs)(`div`,{className:`value-card`,children:[(0,G.jsx)(`div`,{className:`value-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Growth`}),(0,G.jsx)(`p`,{children:`Bertumbuh bersama dengan komunitas dan technology`})]})]})]}),(0,G.jsxs)(`div`,{className:`timeline-section`,children:[(0,G.jsx)(`h2`,{children:` Our Journey`}),(0,G.jsx)(`div`,{className:`timeline`,children:[{year:`2023`,title:`Fremio Didirikan`,desc:`Memulai perjalanan untuk revolutionize cara orang membuat frame foto`},{year:`2024`,title:`10K+ Users`,desc:`Mencapai milestone 10.000 users aktif di seluruh Indonesia`},{year:`2024`,title:`Frame Builder Launch`,desc:`Meluncurkan fitur custom frame builder untuk kreativitas tanpa batas`},{year:`2025`,title:`AI Integration`,desc:`Mengintegrasikan AI untuk auto-detect faces dan smart frame suggestions`}].map((e,t)=>(0,G.jsxs)(`div`,{className:`timeline-item`,children:[(0,G.jsx)(`div`,{className:`timeline-year`,children:e.year}),(0,G.jsxs)(`div`,{className:`timeline-content`,children:[(0,G.jsx)(`h4`,{children:e.title}),(0,G.jsx)(`p`,{children:e.desc})]})]},t))})]}),(0,G.jsxs)(`div`,{className:`team-section`,children:[(0,G.jsx)(`h2`,{children:` Meet Our Team`}),(0,G.jsx)(`p`,{className:`team-subtitle`,children:`Tim passionate yang bekerja untuk membuat Fremio lebih baik setiap hari`}),(0,G.jsx)(`div`,{className:`team-grid`,children:[{name:`Razzaqu Raydan`,role:`Founder & CEO`,photo:``,bio:`Visioner di balik Fremio dengan passion untuk fotografi dan teknologi.`},{name:`Sarah Wijaya`,role:`Creative Director`,photo:``,bio:`Mendesain experience yang memorable untuk setiap user.`},{name:`Budi Santoso`,role:`Lead Developer`,photo:``,bio:`Membangun teknologi yang membuat Fremio semakin powerful.`},{name:`Rina Putri`,role:`Marketing Manager`,photo:``,bio:`Membawa Fremio ke lebih banyak orang di seluruh Indonesia.`}].map((e,t)=>(0,G.jsxs)(`div`,{className:`team-card`,children:[(0,G.jsx)(`div`,{className:`member-photo`,children:e.photo}),(0,G.jsx)(`h4`,{children:e.name}),(0,G.jsx)(`p`,{className:`member-role`,children:e.role}),(0,G.jsx)(`p`,{className:`member-bio`,children:e.bio})]},t))})]}),(0,G.jsx)(`div`,{className:`stats-section`,children:(0,G.jsxs)(`div`,{className:`stats-grid`,children:[(0,G.jsxs)(`div`,{className:`stat-card`,children:[(0,G.jsx)(`div`,{className:`stat-number`,children:`15K+`}),(0,G.jsx)(`div`,{className:`stat-label`,children:`Active Users`})]}),(0,G.jsxs)(`div`,{className:`stat-card`,children:[(0,G.jsx)(`div`,{className:`stat-number`,children:`50K+`}),(0,G.jsx)(`div`,{className:`stat-label`,children:`Frames Created`})]}),(0,G.jsxs)(`div`,{className:`stat-card`,children:[(0,G.jsx)(`div`,{className:`stat-number`,children:`200+`}),(0,G.jsx)(`div`,{className:`stat-label`,children:`Templates`})]}),(0,G.jsxs)(`div`,{className:`stat-card`,children:[(0,G.jsx)(`div`,{className:`stat-number`,children:`4.8`}),(0,G.jsx)(`div`,{className:`stat-label`,children:`User Rating`})]})]})}),(0,G.jsxs)(`div`,{className:`cta-section`,children:[(0,G.jsx)(`h2`,{children:` Join Us on This Journey`}),(0,G.jsx)(`p`,{children:`Mulai ciptakan frame yang amazing sekarang!`}),(0,G.jsxs)(`div`,{className:`cta-buttons`,children:[(0,G.jsx)(`a`,{href:`/frames`,className:`cta-btn primary`,children:`Explore Frames`}),(0,G.jsx)(`a`,{href:`/register`,className:`cta-btn secondary`,children:`Create Account`})]})]})]}),(0,G.jsx)(`style`,{jsx:!0,children:`
        .about-wrap {
          min-height: calc(100vh - 200px);
          padding: 60px 0;
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .about-hero {
          text-align: center;
          max-width: 800px;
          margin: 0 auto 80px;
        }

        .about-hero h1 {
          font-size: 3rem;
          margin-bottom: 16px;
          color: #111;
        }

        .tagline {
          font-size: 1.5rem;
          color: #e0b7a9;
          font-weight: 700;
          margin-bottom: 24px;
        }

        .description {
          font-size: 1.1rem;
          line-height: 1.8;
          color: #475569;
        }

        .mv-section {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 30px;
          margin-bottom: 80px;
        }

        .mv-card {
          background: white;
          padding: 40px;
          border-radius: 16px;
          border: 2px solid #e2e8f0;
          text-align: center;
        }

        .mv-icon {
          font-size: 4rem;
          margin-bottom: 20px;
        }

        .mv-card h3 {
          font-size: 1.8rem;
          margin-bottom: 16px;
          color: #111;
        }

        .mv-card p {
          font-size: 1.05rem;
          line-height: 1.7;
          color: #475569;
          margin: 0;
        }

        .values-section {
          margin-bottom: 80px;
        }

        .values-section h2 {
          font-size: 2.2rem;
          text-align: center;
          margin-bottom: 40px;
          color: #111;
        }

        .values-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 24px;
        }

        .value-card {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          text-align: center;
          transition: all 0.3s;
        }

        .value-card:hover {
          border-color: #e0b7a9;
          transform: translateY(-4px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .value-icon {
          font-size: 3rem;
          margin-bottom: 16px;
        }

        .value-card h4 {
          font-size: 1.3rem;
          margin-bottom: 10px;
          color: #111;
        }

        .value-card p {
          font-size: 0.95rem;
          color: #64748b;
          margin: 0;
        }

        .timeline-section {
          margin-bottom: 80px;
        }

        .timeline-section h2 {
          font-size: 2.2rem;
          text-align: center;
          margin-bottom: 50px;
          color: #111;
        }

        .timeline {
          max-width: 800px;
          margin: 0 auto;
          position: relative;
        }

        .timeline::before {
          content: "";
          position: absolute;
          left: 80px;
          top: 0;
          bottom: 0;
          width: 3px;
          background: linear-gradient(to bottom, #e0b7a9, #c89585);
        }

        .timeline-item {
          display: flex;
          gap: 30px;
          margin-bottom: 40px;
          position: relative;
        }

        .timeline-year {
          width: 80px;
          font-size: 1.5rem;
          font-weight: 700;
          color: #e0b7a9;
          flex-shrink: 0;
          text-align: right;
        }

        .timeline-content {
          background: white;
          padding: 24px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          flex: 1;
          position: relative;
        }

        .timeline-content::before {
          content: "";
          position: absolute;
          left: -12px;
          top: 20px;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: #e0b7a9;
          border: 4px solid white;
          box-shadow: 0 0 0 2px #e0b7a9;
        }

        .timeline-content h4 {
          font-size: 1.3rem;
          margin-bottom: 8px;
          color: #111;
        }

        .timeline-content p {
          font-size: 1rem;
          color: #64748b;
          margin: 0;
        }

        .team-section {
          margin-bottom: 80px;
        }

        .team-section h2 {
          font-size: 2.2rem;
          text-align: center;
          margin-bottom: 12px;
          color: #111;
        }

        .team-subtitle {
          text-align: center;
          font-size: 1.05rem;
          color: #64748b;
          margin-bottom: 40px;
        }

        .team-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 24px;
        }

        .team-card {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          text-align: center;
          transition: all 0.3s;
        }

        .team-card:hover {
          border-color: #e0b7a9;
          transform: translateY(-4px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .member-photo {
          font-size: 5rem;
          margin-bottom: 16px;
        }

        .team-card h4 {
          font-size: 1.2rem;
          margin-bottom: 6px;
          color: #111;
        }

        .member-role {
          font-size: 0.9rem;
          color: #e0b7a9;
          font-weight: 600;
          margin-bottom: 12px;
        }

        .member-bio {
          font-size: 0.9rem;
          color: #64748b;
          margin: 0;
        }

        .stats-section {
          margin-bottom: 80px;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 24px;
        }

        .stat-card {
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          padding: 40px 20px;
          border-radius: 12px;
          text-align: center;
          color: white;
        }

        .stat-number {
          font-size: 3rem;
          font-weight: 700;
          margin-bottom: 8px;
        }

        .stat-label {
          font-size: 1rem;
          opacity: 0.95;
        }

        .cta-section {
          background: white;
          padding: 60px;
          border-radius: 16px;
          text-align: center;
          border: 2px solid #e2e8f0;
        }

        .cta-section h2 {
          font-size: 2.2rem;
          margin-bottom: 12px;
          color: #111;
        }

        .cta-section > p {
          font-size: 1.1rem;
          color: #64748b;
          margin-bottom: 30px;
        }

        .cta-buttons {
          display: flex;
          gap: 16px;
          justify-content: center;
          flex-wrap: wrap;
        }

        .cta-btn {
          padding: 16px 32px;
          border-radius: 8px;
          text-decoration: none;
          font-weight: 600;
          font-size: 1.05rem;
          transition: all 0.3s;
        }

        .cta-btn.primary {
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          color: white;
        }

        .cta-btn.secondary {
          background: white;
          color: #e0b7a9;
          border: 2px solid #e0b7a9;
        }

        .cta-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        @media (max-width: 1024px) {
          .values-grid,
          .team-grid,
          .stats-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }

        @media (max-width: 768px) {
          .about-hero h1 {
            font-size: 2.2rem;
          }

          .mv-section {
            grid-template-columns: 1fr;
          }

          .values-grid,
          .team-grid,
          .stats-grid {
            grid-template-columns: 1fr;
          }

          .timeline::before {
            left: 60px;
          }

          .timeline-year {
            width: 60px;
            font-size: 1.2rem;
          }

          .cta-buttons {
            flex-direction: column;
          }

          .cta-btn {
            width: 100%;
          }
        }
      `})]})}function CV(){return(0,G.jsxs)(`section`,{className:`anchor investor-wrap`,children:[(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsxs)(`div`,{className:`investor-hero`,children:[(0,G.jsx)(`h1`,{children:` Investor Relations`}),(0,G.jsx)(`p`,{className:`subtitle`,children:`Join us in revolutionizing the photo frame industry`}),(0,G.jsxs)(`div`,{className:`hero-stats`,children:[(0,G.jsxs)(`div`,{className:`hero-stat`,children:[(0,G.jsx)(`div`,{className:`stat-value`,children:`$2.5M`}),(0,G.jsx)(`div`,{className:`stat-label`,children:`Total Funding Raised`})]}),(0,G.jsxs)(`div`,{className:`hero-stat`,children:[(0,G.jsx)(`div`,{className:`stat-value`,children:`150%`}),(0,G.jsx)(`div`,{className:`stat-label`,children:`YoY Growth`})]}),(0,G.jsxs)(`div`,{className:`hero-stat`,children:[(0,G.jsx)(`div`,{className:`stat-value`,children:`15K+`}),(0,G.jsx)(`div`,{className:`stat-label`,children:`Active Users`})]})]})]}),(0,G.jsxs)(`div`,{className:`section`,children:[(0,G.jsx)(`h2`,{children:` Why Invest in Fremio?`}),(0,G.jsx)(`div`,{className:`reasons-grid`,children:[{icon:``,title:`Rapid Growth`,desc:`150% YoY user growth with strong market traction in Indonesia`},{icon:``,title:`Clear Vision`,desc:`Becoming the #1 photo frame platform in Southeast Asia by 2026`},{icon:``,title:`Monetization Strategy`,desc:`Multiple revenue streams: Premium templates, subscriptions, and enterprise`},{icon:``,title:`Market Opportunity`,desc:`$500M+ addressable market in photo editing and creative tools`},{icon:``,title:`Innovation`,desc:`AI-powered features and cutting-edge technology stack`},{icon:``,title:`Strong Team`,desc:`Experienced founders with track record in tech and creative industries`}].map((e,t)=>(0,G.jsxs)(`div`,{className:`reason-card`,children:[(0,G.jsx)(`div`,{className:`reason-icon`,children:e.icon}),(0,G.jsx)(`h3`,{children:e.title}),(0,G.jsx)(`p`,{children:e.desc})]},t))})]}),(0,G.jsxs)(`div`,{className:`section`,children:[(0,G.jsx)(`h2`,{children:` Financial Highlights`}),(0,G.jsx)(`div`,{className:`financial-grid`,children:[{metric:`Revenue Growth`,value:`+150%`,period:`YoY 2024`},{metric:`Active Users`,value:`15,000+`,period:`Q4 2024`},{metric:`Monthly Recurring Revenue`,value:`$50K`,period:`November 2025`},{metric:`Customer Retention`,value:`85%`,period:`2024 Average`}].map((e,t)=>(0,G.jsxs)(`div`,{className:`financial-card`,children:[(0,G.jsx)(`div`,{className:`financial-metric`,children:e.metric}),(0,G.jsx)(`div`,{className:`financial-value`,children:e.value}),(0,G.jsx)(`div`,{className:`financial-period`,children:e.period})]},t))})]}),(0,G.jsxs)(`div`,{className:`section`,children:[(0,G.jsx)(`h2`,{children:` Revenue Streams`}),(0,G.jsx)(`div`,{className:`revenue-grid`,children:[{title:`Monthly Subscription`,price:`$9.99/mo`,features:[`Unlimited frames`,`Premium templates`,`HD exports`,`Priority support`]},{title:`Enterprise License`,price:`Custom`,features:[`White-label solution`,`API access`,`Dedicated support`,`Custom integration`]},{title:`Marketplace Revenue`,price:`30% commission`,features:[`User-created templates`,`Designer partnerships`,`Revenue sharing`,`Quality curation`]}].map((e,t)=>(0,G.jsxs)(`div`,{className:`revenue-card`,children:[(0,G.jsx)(`h3`,{children:e.title}),(0,G.jsx)(`div`,{className:`revenue-price`,children:e.price}),(0,G.jsx)(`ul`,{className:`revenue-features`,children:e.features.map((e,t)=>(0,G.jsxs)(`li`,{children:[` `,e]},t))})]},t))})]}),(0,G.jsxs)(`div`,{className:`section`,children:[(0,G.jsx)(`h2`,{children:` Growth Milestones`}),(0,G.jsx)(`div`,{className:`milestones-timeline`,children:[{quarter:`Q1 2024`,achievements:[`Launched beta version`,`Acquired first 1,000 users`,`Seed funding: $500K`]},{quarter:`Q2 2024`,achievements:[`10,000 active users`,`Premium tier launch`,`Partnerships with 5 brands`]},{quarter:`Q3 2024`,achievements:[`Series A funding: $2M`,`Team expansion to 15`,`Mobile app launch`]},{quarter:`Q4 2024`,achievements:[`15,000 active users`,`B2B enterprise offering`,`Revenue: $50K MRR`]}].map((e,t)=>(0,G.jsxs)(`div`,{className:`milestone-card`,children:[(0,G.jsx)(`div`,{className:`milestone-quarter`,children:e.quarter}),(0,G.jsx)(`ul`,{className:`milestone-achievements`,children:e.achievements.map((e,t)=>(0,G.jsx)(`li`,{children:e},t))})]},t))})]}),(0,G.jsxs)(`div`,{className:`section market-section`,children:[(0,G.jsx)(`h2`,{children:` Market Opportunity`}),(0,G.jsxs)(`div`,{className:`market-content`,children:[(0,G.jsxs)(`div`,{className:`market-text`,children:[(0,G.jsx)(`h3`,{children:`$500M+ Addressable Market`}),(0,G.jsx)(`p`,{children:`The photo editing and creative tools market in Southeast Asia is experiencing rapid growth, with 200M+ smartphone users and increasing demand for personalized digital content.`}),(0,G.jsxs)(`ul`,{className:`market-points`,children:[(0,G.jsx)(`li`,{children:` 85% mobile internet penetration in Indonesia`}),(0,G.jsx)(`li`,{children:` Growing creator economy: $104B globally`}),(0,G.jsx)(`li`,{children:` Photo editing market: 15% CAGR`}),(0,G.jsx)(`li`,{children:` Limited competition in localized frame tools`})]})]}),(0,G.jsxs)(`div`,{className:`market-chart`,children:[(0,G.jsxs)(`div`,{className:`chart-placeholder`,children:[(0,G.jsxs)(`div`,{className:`chart-bar`,style:{height:`40%`},children:[(0,G.jsx)(`span`,{children:`2023`}),(0,G.jsx)(`strong`,{children:`$200M`})]}),(0,G.jsxs)(`div`,{className:`chart-bar`,style:{height:`65%`},children:[(0,G.jsx)(`span`,{children:`2024`}),(0,G.jsx)(`strong`,{children:`$325M`})]}),(0,G.jsxs)(`div`,{className:`chart-bar`,style:{height:`100%`},children:[(0,G.jsx)(`span`,{children:`2025`}),(0,G.jsx)(`strong`,{children:`$500M`})]})]}),(0,G.jsx)(`p`,{className:`chart-label`,children:`Market Size Projection`})]})]})]}),(0,G.jsxs)(`div`,{className:`section`,children:[(0,G.jsx)(`h2`,{children:` Leadership Team`}),(0,G.jsxs)(`div`,{className:`team-credentials`,children:[(0,G.jsxs)(`div`,{className:`credential-card`,children:[(0,G.jsx)(`div`,{className:`credential-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Education`}),(0,G.jsx)(`p`,{children:`Top universities: ITB, UI, NUS`})]}),(0,G.jsxs)(`div`,{className:`credential-card`,children:[(0,G.jsx)(`div`,{className:`credential-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Experience`}),(0,G.jsx)(`p`,{children:`Ex-Gojek, Tokopedia, Google`})]}),(0,G.jsxs)(`div`,{className:`credential-card`,children:[(0,G.jsx)(`div`,{className:`credential-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Achievements`}),(0,G.jsx)(`p`,{children:`Built & scaled products to 1M+ users`})]}),(0,G.jsxs)(`div`,{className:`credential-card`,children:[(0,G.jsx)(`div`,{className:`credential-icon`,children:``}),(0,G.jsx)(`h4`,{children:`Recognition`}),(0,G.jsx)(`p`,{children:`Forbes 30 Under 30 nominees`})]})]})]}),(0,G.jsxs)(`div`,{className:`investor-cta`,children:[(0,G.jsx)(`h2`,{children:` Interested in Investing?`}),(0,G.jsx)(`p`,{children:`Get access to our investor deck and financial projections`}),(0,G.jsxs)(`div`,{className:`cta-buttons`,children:[(0,G.jsx)(`a`,{href:`mailto:investors@fremio.com`,className:`cta-btn primary`,children:`Request Investor Deck`}),(0,G.jsx)(`a`,{href:`/call-center`,className:`cta-btn secondary`,children:`Schedule a Call`})]}),(0,G.jsx)(`p`,{className:`disclaimer`,children:`* Investment opportunities are subject to regulatory compliance and accredited investor verification`})]})]}),(0,G.jsx)(`style`,{jsx:!0,children:`
        .investor-wrap {
          min-height: calc(100vh - 200px);
          padding: 60px 0;
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .investor-hero {
          text-align: center;
          margin-bottom: 80px;
        }

        .investor-hero h1 {
          font-size: 3rem;
          margin-bottom: 16px;
          color: #111;
        }

        .subtitle {
          font-size: 1.3rem;
          color: #64748b;
          margin-bottom: 40px;
        }

        .hero-stats {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 30px;
          max-width: 900px;
          margin: 0 auto;
        }

        .hero-stat {
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          padding: 30px;
          border-radius: 12px;
          color: white;
        }

        .stat-value {
          font-size: 2.5rem;
          font-weight: 700;
          margin-bottom: 8px;
        }

        .stat-label {
          font-size: 1rem;
          opacity: 0.95;
        }

        .section {
          margin-bottom: 80px;
        }

        .section h2 {
          font-size: 2.2rem;
          margin-bottom: 40px;
          color: #111;
          text-align: center;
        }

        .reasons-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 24px;
        }

        .reason-card {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          transition: all 0.3s;
        }

        .reason-card:hover {
          border-color: #e0b7a9;
          transform: translateY(-4px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .reason-icon {
          font-size: 3rem;
          margin-bottom: 16px;
        }

        .reason-card h3 {
          font-size: 1.3rem;
          margin-bottom: 10px;
          color: #111;
        }

        .reason-card p {
          font-size: 0.95rem;
          color: #64748b;
          margin: 0;
          line-height: 1.6;
        }

        .financial-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 24px;
        }

        .financial-card {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          text-align: center;
        }

        .financial-metric {
          font-size: 0.9rem;
          color: #64748b;
          margin-bottom: 16px;
          font-weight: 500;
        }

        .financial-value {
          font-size: 2.5rem;
          font-weight: 700;
          color: #e0b7a9;
          margin-bottom: 8px;
        }

        .financial-period {
          font-size: 0.85rem;
          color: #94a3b8;
        }

        .revenue-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 24px;
        }

        .revenue-card {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
        }

        .revenue-card h3 {
          font-size: 1.3rem;
          margin-bottom: 16px;
          color: #111;
        }

        .revenue-price {
          font-size: 2rem;
          font-weight: 700;
          color: #e0b7a9;
          margin-bottom: 20px;
        }

        .revenue-features {
          list-style: none;
          padding: 0;
          margin: 0;
        }

        .revenue-features li {
          padding: 8px 0;
          color: #475569;
          font-size: 0.95rem;
        }

        .milestones-timeline {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 24px;
        }

        .milestone-card {
          background: white;
          padding: 24px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
        }

        .milestone-quarter {
          font-size: 1.3rem;
          font-weight: 700;
          color: #e0b7a9;
          margin-bottom: 16px;
        }

        .milestone-achievements {
          list-style: none;
          padding: 0;
          margin: 0;
        }

        .milestone-achievements li {
          padding: 6px 0;
          color: #475569;
          font-size: 0.9rem;
          border-left: 3px solid #e0b7a9;
          padding-left: 12px;
          margin-bottom: 8px;
        }

        .market-section {
          background: white;
          padding: 50px;
          border-radius: 16px;
          border: 2px solid #e2e8f0;
        }

        .market-content {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 50px;
          align-items: center;
        }

        .market-text h3 {
          font-size: 1.8rem;
          margin-bottom: 16px;
          color: #111;
        }

        .market-text > p {
          font-size: 1.05rem;
          line-height: 1.7;
          color: #475569;
          margin-bottom: 24px;
        }

        .market-points {
          list-style: none;
          padding: 0;
          margin: 0;
        }

        .market-points li {
          padding: 10px 0;
          font-size: 1rem;
          color: #334155;
        }

        .chart-placeholder {
          display: flex;
          gap: 30px;
          align-items: flex-end;
          justify-content: center;
          height: 300px;
          padding: 20px;
          background: #f8f9fa;
          border-radius: 12px;
        }

        .chart-bar {
          flex: 1;
          background: linear-gradient(to top, #e0b7a9, #c89585);
          border-radius: 8px 8px 0 0;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-end;
          padding-bottom: 16px;
          color: white;
          position: relative;
        }

        .chart-bar span {
          position: absolute;
          bottom: -30px;
          font-size: 0.9rem;
          color: #64748b;
        }

        .chart-bar strong {
          font-size: 1.2rem;
        }

        .chart-label {
          text-align: center;
          margin-top: 40px;
          color: #64748b;
          font-size: 0.95rem;
        }

        .team-credentials {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 24px;
        }

        .credential-card {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          text-align: center;
        }

        .credential-icon {
          font-size: 3rem;
          margin-bottom: 16px;
        }

        .credential-card h4 {
          font-size: 1.2rem;
          margin-bottom: 8px;
          color: #111;
        }

        .credential-card p {
          font-size: 0.9rem;
          color: #64748b;
          margin: 0;
        }

        .investor-cta {
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          padding: 60px;
          border-radius: 16px;
          text-align: center;
          color: white;
        }

        .investor-cta h2 {
          font-size: 2.2rem;
          margin-bottom: 12px;
          color: white;
        }

        .investor-cta > p {
          font-size: 1.1rem;
          margin-bottom: 30px;
          opacity: 0.95;
        }

        .cta-buttons {
          display: flex;
          gap: 16px;
          justify-content: center;
          flex-wrap: wrap;
          margin-bottom: 24px;
        }

        .cta-btn {
          padding: 16px 32px;
          border-radius: 8px;
          text-decoration: none;
          font-weight: 600;
          font-size: 1.05rem;
          transition: all 0.3s;
        }

        .cta-btn.primary {
          background: white;
          color: #c89585;
        }

        .cta-btn.secondary {
          background: transparent;
          color: white;
          border: 2px solid white;
        }

        .cta-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .disclaimer {
          font-size: 0.8rem;
          opacity: 0.8;
          font-style: italic;
          margin: 0;
        }

        @media (max-width: 1024px) {
          .reasons-grid,
          .revenue-grid {
            grid-template-columns: repeat(2, 1fr);
          }

          .milestones-timeline,
          .team-credentials {
            grid-template-columns: repeat(2, 1fr);
          }

          .market-content {
            grid-template-columns: 1fr;
          }
        }

        @media (max-width: 768px) {
          .investor-hero h1 {
            font-size: 2.2rem;
          }

          .hero-stats {
            grid-template-columns: 1fr;
          }

          .reasons-grid,
          .financial-grid,
          .revenue-grid,
          .milestones-timeline,
          .team-credentials {
            grid-template-columns: 1fr;
          }

          .market-section {
            padding: 30px 20px;
          }

          .investor-cta {
            padding: 40px 24px;
          }

          .cta-buttons {
            flex-direction: column;
          }

          .cta-btn {
            width: 100%;
          }
        }
      `})]})}function wV(){let{showToast:e}=yV(),[t,n]=(0,b.useState)({name:``,email:``,website:``,platform:``,followers:``,niche:``,message:``}),r=[{icon:``,title:`High Commission`,desc:`Earn up to 30% commission on every sale`},{icon:``,title:`Recurring Revenue`,desc:`Earn from subscription renewals every month`},{icon:``,title:`Exclusive Bonuses`,desc:`Special rewards for top performers`},{icon:``,title:`Real-time Analytics`,desc:`Track your earnings and performance live`},{icon:``,title:`Marketing Materials`,desc:`Professional banners, templates, and assets`},{icon:``,title:`Dedicated Support`,desc:`Personal affiliate manager for assistance`}],i=[{name:`Starter`,sales:`0-10 sales/month`,commission:`20%`,features:[`Basic affiliate dashboard`,`Standard marketing materials`,`Email support`,`Weekly payouts`]},{name:`Pro`,sales:`11-50 sales/month`,commission:`25%`,features:[`Advanced analytics`,`Premium marketing kit`,`Priority support`,`Bi-weekly payouts`,`Custom discount codes`],popular:!0},{name:`Elite`,sales:`50+ sales/month`,commission:`30%`,features:[`Dedicated account manager`,`Exclusive templates access`,`24/7 support`,`Instant payouts`,`Co-marketing opportunities`,`Early feature access`]}],a=[{q:`Bagaimana cara bergabung dengan program affiliate?`,a:`Cukup isi form aplikasi di halaman ini. Tim kami akan review aplikasi Anda dalam 2-3 hari kerja dan mengirim email konfirmasi jika diterima.`},{q:`Berapa komisi yang saya dapatkan?`,a:`Komisi dimulai dari 20% untuk Starter tier, 25% untuk Pro, dan 30% untuk Elite. Anda juga mendapat komisi recurring dari subscription renewal.`},{q:`Kapan saya menerima pembayaran?`,a:`Pembayaran dilakukan setiap minggu untuk Starter, bi-weekly untuk Pro, dan instant untuk Elite tier. Minimum payout adalah Rp 500.000.`},{q:`Apakah ada biaya untuk bergabung?`,a:`Tidak ada biaya! Program affiliate Fremio 100% gratis untuk bergabung.`},{q:`Berapa lama cookie tracking berlaku?`,a:`Cookie tracking berlaku selama 30 hari. Artinya jika user klik link Anda dan membeli dalam 30 hari, Anda tetap dapat komisi.`}],o=e=>{n(t=>({...t,[e.target.name]:e.target.value}))};return(0,G.jsxs)(`section`,{className:`anchor affiliates-wrap`,children:[(0,G.jsxs)(`div`,{className:`container`,children:[(0,G.jsxs)(`div`,{className:`aff-hero`,children:[(0,G.jsx)(`h1`,{children:` Affiliate Program`}),(0,G.jsx)(`p`,{className:`subtitle`,children:`Partner dengan Fremio dan earn passive income`}),(0,G.jsxs)(`div`,{className:`hero-highlights`,children:[(0,G.jsxs)(`div`,{className:`highlight`,children:[(0,G.jsx)(`strong`,{children:`30%`}),(0,G.jsx)(`span`,{children:`Max Commission`})]}),(0,G.jsxs)(`div`,{className:`highlight`,children:[(0,G.jsx)(`strong`,{children:`30 Days`}),(0,G.jsx)(`span`,{children:`Cookie Duration`})]}),(0,G.jsxs)(`div`,{className:`highlight`,children:[(0,G.jsx)(`strong`,{children:`$50K+`}),(0,G.jsx)(`span`,{children:`Monthly Earnings Potential`})]})]})]}),(0,G.jsxs)(`div`,{className:`section`,children:[(0,G.jsx)(`h2`,{children:` Why Join Our Affiliate Program?`}),(0,G.jsx)(`div`,{className:`benefits-grid`,children:r.map((e,t)=>(0,G.jsxs)(`div`,{className:`benefit-card`,children:[(0,G.jsx)(`div`,{className:`benefit-icon`,children:e.icon}),(0,G.jsx)(`h3`,{children:e.title}),(0,G.jsx)(`p`,{children:e.desc})]},t))})]}),(0,G.jsxs)(`div`,{className:`section`,children:[(0,G.jsx)(`h2`,{children:` Commission Tiers`}),(0,G.jsx)(`div`,{className:`tiers-grid`,children:i.map((e,t)=>(0,G.jsxs)(`div`,{className:`tier-card ${e.popular?`popular`:``}`,children:[e.popular&&(0,G.jsx)(`div`,{className:`popular-badge`,children:`Most Popular`}),(0,G.jsx)(`h3`,{children:e.name}),(0,G.jsx)(`div`,{className:`tier-sales`,children:e.sales}),(0,G.jsx)(`div`,{className:`tier-commission`,children:e.commission}),(0,G.jsx)(`div`,{className:`tier-label`,children:`Commission Rate`}),(0,G.jsx)(`ul`,{className:`tier-features`,children:e.features.map((e,t)=>(0,G.jsxs)(`li`,{children:[` `,e]},t))})]},t))})]}),(0,G.jsxs)(`div`,{className:`section`,children:[(0,G.jsx)(`h2`,{children:` How It Works`}),(0,G.jsxs)(`div`,{className:`steps-grid`,children:[(0,G.jsxs)(`div`,{className:`step-card`,children:[(0,G.jsx)(`div`,{className:`step-number`,children:`1`}),(0,G.jsx)(`h4`,{children:`Apply`}),(0,G.jsx)(`p`,{children:`Fill out the application form below with your details`})]}),(0,G.jsx)(`div`,{className:`step-arrow`,children:``}),(0,G.jsxs)(`div`,{className:`step-card`,children:[(0,G.jsx)(`div`,{className:`step-number`,children:`2`}),(0,G.jsx)(`h4`,{children:`Get Approved`}),(0,G.jsx)(`p`,{children:`We review your application within 2-3 business days`})]}),(0,G.jsx)(`div`,{className:`step-arrow`,children:``}),(0,G.jsxs)(`div`,{className:`step-card`,children:[(0,G.jsx)(`div`,{className:`step-number`,children:`3`}),(0,G.jsx)(`h4`,{children:`Promote`}),(0,G.jsx)(`p`,{children:`Share your unique affiliate link and marketing materials`})]}),(0,G.jsx)(`div`,{className:`step-arrow`,children:``}),(0,G.jsxs)(`div`,{className:`step-card`,children:[(0,G.jsx)(`div`,{className:`step-number`,children:`4`}),(0,G.jsx)(`h4`,{children:`Earn`}),(0,G.jsx)(`p`,{children:`Get paid commission for every successful referral`})]})]})]}),(0,G.jsx)(`div`,{className:`section`,children:(0,G.jsxs)(`div`,{className:`form-section`,children:[(0,G.jsx)(`h2`,{children:` Apply Now`}),(0,G.jsx)(`p`,{className:`form-intro`,children:`Join hundreds of creators earning with Fremio`}),(0,G.jsxs)(`form`,{onSubmit:async r=>{r.preventDefault(),console.log(` Form submitted with data:`,t);try{let r=await aO(t);console.log(` Submit result:`,r),r.success?(e(`Terima kasih! Aplikasi Anda telah diterima. Kami akan menghubungi Anda dalam 2-3 hari kerja.`,`success`),n({name:``,email:``,website:``,platform:``,followers:``,niche:``,message:``})):e(`Gagal mengirim aplikasi. Silakan coba lagi.`,`error`)}catch(t){console.error(`Error submitting application:`,t),e(`Terjadi kesalahan. Silakan coba lagi.`,`error`)}},className:`aff-form`,children:[(0,G.jsxs)(`div`,{className:`form-row`,children:[(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Full Name *`}),(0,G.jsx)(`input`,{type:`text`,name:`name`,value:t.name,onChange:o,placeholder:`John Doe`,required:!0})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Email *`}),(0,G.jsx)(`input`,{type:`email`,name:`email`,value:t.email,onChange:o,placeholder:`john@example.com`,required:!0})]})]}),(0,G.jsxs)(`div`,{className:`form-row`,children:[(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Website/Blog URL`}),(0,G.jsx)(`input`,{type:`url`,name:`website`,value:t.website,onChange:o,placeholder:`https://yourwebsite.com`})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Main Platform *`}),(0,G.jsxs)(`select`,{name:`platform`,value:t.platform,onChange:o,required:!0,children:[(0,G.jsx)(`option`,{value:``,children:`-- Select Platform --`}),(0,G.jsx)(`option`,{value:`instagram`,children:`Instagram`}),(0,G.jsx)(`option`,{value:`youtube`,children:`YouTube`}),(0,G.jsx)(`option`,{value:`tiktok`,children:`TikTok`}),(0,G.jsx)(`option`,{value:`blog`,children:`Blog/Website`}),(0,G.jsx)(`option`,{value:`facebook`,children:`Facebook`}),(0,G.jsx)(`option`,{value:`twitter`,children:`Twitter/X`}),(0,G.jsx)(`option`,{value:`other`,children:`Other`})]})]})]}),(0,G.jsxs)(`div`,{className:`form-row`,children:[(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Followers/Subscribers *`}),(0,G.jsxs)(`select`,{name:`followers`,value:t.followers,onChange:o,required:!0,children:[(0,G.jsx)(`option`,{value:``,children:`-- Select Range --`}),(0,G.jsx)(`option`,{value:`<1k`,children:`< 1,000`}),(0,G.jsx)(`option`,{value:`1k-10k`,children:`1,000 - 10,000`}),(0,G.jsx)(`option`,{value:`10k-50k`,children:`10,000 - 50,000`}),(0,G.jsx)(`option`,{value:`50k-100k`,children:`50,000 - 100,000`}),(0,G.jsx)(`option`,{value:`>100k`,children:`> 100,000`})]})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Your Niche *`}),(0,G.jsxs)(`select`,{name:`niche`,value:t.niche,onChange:o,required:!0,children:[(0,G.jsx)(`option`,{value:``,children:`-- Select Niche --`}),(0,G.jsx)(`option`,{value:`photography`,children:`Photography`}),(0,G.jsx)(`option`,{value:`design`,children:`Design/Creative`}),(0,G.jsx)(`option`,{value:`lifestyle`,children:`Lifestyle`}),(0,G.jsx)(`option`,{value:`tech`,children:`Technology`}),(0,G.jsx)(`option`,{value:`education`,children:`Education`}),(0,G.jsx)(`option`,{value:`business`,children:`Business/Marketing`}),(0,G.jsx)(`option`,{value:`other`,children:`Other`})]})]})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Why do you want to join? *`}),(0,G.jsx)(`textarea`,{name:`message`,value:t.message,onChange:o,placeholder:`Tell us about yourself and why you'd be a great affiliate partner...`,rows:`5`,required:!0})]}),(0,G.jsx)(`button`,{type:`submit`,className:`submit-btn`,children:` Submit Application`})]})]})}),(0,G.jsxs)(`div`,{className:`section`,children:[(0,G.jsx)(`h2`,{children:` Frequently Asked Questions`}),(0,G.jsx)(`div`,{className:`faq-list`,children:a.map((e,t)=>(0,G.jsxs)(`div`,{className:`faq-item`,children:[(0,G.jsx)(`h4`,{children:e.q}),(0,G.jsx)(`p`,{children:e.a})]},t))})]}),(0,G.jsxs)(`div`,{className:`contact-cta`,children:[(0,G.jsx)(`h2`,{children:` Have Questions?`}),(0,G.jsx)(`p`,{children:`Our affiliate team is here to help you succeed`}),(0,G.jsxs)(`div`,{className:`contact-buttons`,children:[(0,G.jsx)(`a`,{href:`mailto:affiliates@fremio.com`,className:`contact-btn`,children:` Email Us`}),(0,G.jsx)(`a`,{href:`/call-center`,className:`contact-btn`,children:` Contact Support`})]})]})]}),(0,G.jsx)(`style`,{jsx:!0,children:`
        .affiliates-wrap {
          min-height: calc(100vh - 200px);
          padding: 60px 0;
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .aff-hero {
          text-align: center;
          margin-bottom: 80px;
        }

        .aff-hero h1 {
          font-size: 3rem;
          margin-bottom: 16px;
          color: #111;
        }

        .subtitle {
          font-size: 1.3rem;
          color: #64748b;
          margin-bottom: 40px;
        }

        .hero-highlights {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 30px;
          max-width: 900px;
          margin: 0 auto;
        }

        .highlight {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .highlight strong {
          font-size: 2.5rem;
          color: #e0b7a9;
          margin-bottom: 8px;
        }

        .highlight span {
          font-size: 0.95rem;
          color: #64748b;
        }

        .section {
          margin-bottom: 80px;
        }

        .section h2 {
          font-size: 2.2rem;
          text-align: center;
          margin-bottom: 40px;
          color: #111;
        }

        .benefits-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 24px;
        }

        .benefit-card {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          transition: all 0.3s;
        }

        .benefit-card:hover {
          border-color: #e0b7a9;
          transform: translateY(-4px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .benefit-icon {
          font-size: 3rem;
          margin-bottom: 16px;
        }

        .benefit-card h3 {
          font-size: 1.2rem;
          margin-bottom: 10px;
          color: #111;
        }

        .benefit-card p {
          font-size: 0.95rem;
          color: #64748b;
          margin: 0;
        }

        .tiers-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 24px;
        }

        .tier-card {
          background: white;
          padding: 40px 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          position: relative;
          transition: all 0.3s;
        }

        .tier-card.popular {
          border-color: #e0b7a9;
          box-shadow: 0 8px 30px rgba(224, 183, 169, 0.2);
        }

        .tier-card:hover {
          transform: translateY(-4px);
        }

        .popular-badge {
          position: absolute;
          top: -12px;
          left: 50%;
          transform: translateX(-50%);
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          color: white;
          padding: 6px 20px;
          border-radius: 20px;
          font-size: 0.85rem;
          font-weight: 600;
        }

        .tier-card h3 {
          font-size: 1.5rem;
          margin-bottom: 12px;
          color: #111;
          text-align: center;
        }

        .tier-sales {
          text-align: center;
          color: #64748b;
          font-size: 0.9rem;
          margin-bottom: 20px;
        }

        .tier-commission {
          font-size: 3rem;
          font-weight: 700;
          color: #e0b7a9;
          text-align: center;
          margin-bottom: 8px;
        }

        .tier-label {
          text-align: center;
          color: #94a3b8;
          font-size: 0.85rem;
          margin-bottom: 24px;
        }

        .tier-features {
          list-style: none;
          padding: 0;
          margin: 0;
        }

        .tier-features li {
          padding: 10px 0;
          color: #475569;
          font-size: 0.95rem;
        }

        .steps-grid {
          display: grid;
          grid-template-columns: 1fr auto 1fr auto 1fr auto 1fr;
          gap: 20px;
          align-items: center;
        }

        .step-card {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          text-align: center;
        }

        .step-number {
          width: 50px;
          height: 50px;
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 1.5rem;
          font-weight: 700;
          margin: 0 auto 16px;
        }

        .step-card h4 {
          font-size: 1.2rem;
          margin-bottom: 8px;
          color: #111;
        }

        .step-card p {
          font-size: 0.9rem;
          color: #64748b;
          margin: 0;
        }

        .step-arrow {
          font-size: 2rem;
          color: #e0b7a9;
          font-weight: 700;
        }

        .form-section {
          max-width: 800px;
          margin: 0 auto;
          background: white;
          padding: 50px;
          border-radius: 16px;
          border: 2px solid #e2e8f0;
        }

        .form-section h2 {
          margin-bottom: 12px;
        }

        .form-intro {
          text-align: center;
          color: #64748b;
          margin-bottom: 40px;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
        }

        .form-group {
          margin-bottom: 24px;
        }

        .form-group label {
          display: block;
          margin-bottom: 8px;
          font-weight: 600;
          color: #334155;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          width: 100%;
          padding: 12px 16px;
          border: 2px solid #e2e8f0;
          border-radius: 8px;
          font-size: 1rem;
          transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
          outline: none;
          border-color: #e0b7a9;
          box-shadow: 0 0 0 3px rgba(224, 183, 169, 0.1);
        }

        .form-group textarea {
          resize: vertical;
          font-family: inherit;
        }

        .submit-btn {
          width: 100%;
          padding: 16px;
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 1.1rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
        }

        .submit-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(200, 149, 133, 0.3);
        }

        .faq-list {
          max-width: 900px;
          margin: 0 auto;
        }

        .faq-item {
          background: white;
          padding: 30px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          margin-bottom: 16px;
        }

        .faq-item h4 {
          font-size: 1.1rem;
          margin-bottom: 12px;
          color: #111;
        }

        .faq-item p {
          font-size: 0.95rem;
          color: #475569;
          margin: 0;
          line-height: 1.6;
        }

        .contact-cta {
          background: linear-gradient(135deg, #e0b7a9 0%, #c89585 100%);
          padding: 60px;
          border-radius: 16px;
          text-align: center;
          color: white;
        }

        .contact-cta h2 {
          font-size: 2.2rem;
          margin-bottom: 12px;
          color: white;
        }

        .contact-cta > p {
          font-size: 1.1rem;
          margin-bottom: 30px;
          opacity: 0.95;
        }

        .contact-buttons {
          display: flex;
          gap: 16px;
          justify-content: center;
          flex-wrap: wrap;
        }

        .contact-btn {
          padding: 14px 28px;
          background: white;
          color: #c89585;
          text-decoration: none;
          border-radius: 8px;
          font-weight: 600;
          transition: all 0.3s;
        }

        .contact-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        @media (max-width: 1024px) {
          .benefits-grid,
          .tiers-grid {
            grid-template-columns: repeat(2, 1fr);
          }

          .steps-grid {
            grid-template-columns: 1fr;
          }

          .step-arrow {
            transform: rotate(90deg);
          }
        }

        @media (max-width: 768px) {
          .aff-hero h1 {
            font-size: 2.2rem;
          }

          .hero-highlights {
            grid-template-columns: 1fr;
          }

          .benefits-grid,
          .tiers-grid {
            grid-template-columns: 1fr;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .form-section {
            padding: 30px 20px;
          }

          .contact-buttons {
            flex-direction: column;
          }

          .contact-btn {
            width: 100%;
          }
        }
      `})]})}console.log(` VPS Mode: Supabase disabled, using VPS PostgreSQL`);var TV=`fremio_all_users`;const EV={ADMIN:`admin`,KREATOR:`kreator`,USER:`user`};async function DV(){try{{let e=MV();return console.log(` getAllUsers - LocalStorage mode:`,e.length,`users`),e}let{data:e,error:t}=await null.from(`fremio_users`).select(`*`).order(`created_at`,{ascending:!1});if(t)return console.warn(`Supabase failed, using LocalStorage:`,t.message),MV();let n=(e||[]).map(e=>({id:e.id,uid:e.uid,email:e.email,name:e.name||e.display_name,displayName:e.display_name,role:e.role||`user`,status:e.status||`active`,createdAt:e.created_at,lastLoginAt:e.last_login_at,updatedAt:e.updated_at}));return console.log(` getAllUsers - Supabase mode:`,n.length,`users`),n}catch(e){return console.error(`Error fetching all users:`,e),MV()}}async function OV(e,t,n){try{if(!Object.values(EV).includes(t))return{success:!1,message:`Invalid role`};{let n=MV(),r=n.findIndex(t=>t.id===e);return r===-1?{success:!1,message:`User not found`}:(n[r].role=t,n[r].updatedAt=new Date().toISOString(),NV(n),{success:!0,message:`User role updated to ${t}`})}let{error:n}=await null.from(`fremio_users`).update({role:t,updated_at:new Date().toISOString()}).eq(`id`,e);if(n)throw n;return{success:!0,message:`User role updated to ${t}`}}catch(e){return console.error(`Error updating user role:`,e),{success:!1,message:e.message||`Failed to update role`}}}async function kV(e,t,n=``){try{{let t=MV(),r=t.findIndex(t=>t.id===e);return r===-1?{success:!1,message:`User not found`}:(t[r].status=`banned`,t[r].banReason=n,t[r].updatedAt=new Date().toISOString(),NV(t),{success:!0,message:`User banned successfully`})}let{error:t}=await null.from(`fremio_users`).update({status:`banned`,updated_at:new Date().toISOString()}).eq(`id`,e);if(t)throw t;return{success:!0,message:`User banned successfully`}}catch(e){return console.error(`Error banning user:`,e),{success:!1,message:e.message||`Failed to ban user`}}}async function AV(e,t){try{{let t=MV(),n=t.findIndex(t=>t.id===e);return n===-1?{success:!1,message:`User not found`}:(t[n].status=`active`,t[n].banReason=null,t[n].updatedAt=new Date().toISOString(),NV(t),{success:!0,message:`User unbanned successfully`})}let{error:t}=await null.from(`fremio_users`).update({status:`active`,updated_at:new Date().toISOString()}).eq(`id`,e);if(t)throw t;return{success:!0,message:`User unbanned successfully`}}catch(e){return console.error(`Error unbanning user:`,e),{success:!1,message:e.message||`Failed to unban user`}}}async function jV(e,t){try{{let t=MV().filter(t=>t.id!==e);return NV(t),{success:!0,message:`User deleted successfully`}}let{error:t}=await null.from(`fremio_users`).delete().eq(`id`,e);if(t)throw t;return{success:!0,message:`User deleted successfully`}}catch(e){return console.error(`Error deleting user:`,e),{success:!1,message:e.message||`Failed to delete user`}}}function MV(){try{let e=localStorage.getItem(TV);if(e)return JSON.parse(e);let t=localStorage.getItem(`fremio_user`);if(t){let e=JSON.parse(t),n={id:e.uid||`user_${Date.now()}`,email:e.email,name:e.displayName||e.email?.split(`@`)[0]||``,role:EV.USER,status:`active`,createdAt:new Date().toISOString()};return NV([n]),[n]}return[]}catch(e){return console.error(`Error reading users from localStorage:`,e),[]}}function NV(e){try{localStorage.setItem(TV,JSON.stringify(e))}catch(e){console.error(`Error saving users to localStorage:`,e)}}function PV(e){try{let t=MV(),n=t.findIndex(t=>t.email===e.email||t.id===e.id),r={id:e.id||e.uid||`user_${Date.now()}`,email:e.email,name:e.name||e.displayName||``,role:e.role||EV.USER,status:e.status||`active`,createdAt:e.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};return n===-1?t.push(r):t[n]={...t[n],...r},NV(t),r}catch(e){return console.error(`Error saving user:`,e),null}}function FV(){let e=Le(),{currentUser:t}=In(),[n,r]=(0,b.useState)({totalFrames:0,totalUsers:0,totalViews:0,totalDownloads:0,totalLikes:0,unreadMessages:0,pendingAffiliates:0,totalAffiliates:0}),[i,a]=(0,b.useState)(!0),o=async(e=!1)=>{try{console.log(` AdminDashboard - Loading stats...`,e?`(force refresh)`:``),a(!0),e&&console.log(` Force refresh requested`);let t=[];try{t=await Ik.getAllFrames(),console.log(` Frames loaded:`,t?.length||0)}catch(e){console.warn(` Failed to load frames:`,e.message)}let n=[];try{n=await DV(),console.log(` Users loaded:`,n?.length||0)}catch(e){console.warn(` Failed to load users:`,e.message)}let i=0;try{i=await qD()}catch{console.warn(` Failed to load messages count`)}let o={pending:0,total:0};try{o=await lO()}catch{console.warn(` Failed to load affiliate stats`)}let s=t?.reduce((e,t)=>e+(t.views||0),0)||0,c=t?.reduce((e,t)=>e+(t.downloads||t.uses||0),0)||0,l=t?.reduce((e,t)=>e+(t.likes||0),0)||0,u={totalFrames:t?.length||0,totalUsers:n?.length||0,totalViews:s,totalDownloads:c,totalLikes:l,unreadMessages:i||0,pendingAffiliates:o?.pending||0,totalAffiliates:o?.total||0};console.log(` Final stats:`,u),r(u)}catch(e){console.error(`Error loading stats:`,e)}finally{a(!1)}};return(0,b.useEffect)(()=>{o()},[]),i?(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,children:(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`div`,{className:`inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-600 mb-4`}),(0,G.jsx)(`p`,{className:`text-gray-600`,children:`Loading dashboard...`})]})}):(0,G.jsx)(`div`,{style:{background:`linear-gradient(180deg, #fdf7f4 0%, #fff 50%, #f7f1ed 100%)`,minHeight:`100vh`,padding:`32px 0 48px`},children:(0,G.jsxs)(`div`,{style:{maxWidth:`1120px`,margin:`0 auto`,padding:`0 16px`},children:[mO()&&(0,G.jsx)(`div`,{style:{marginBottom:`24px`,background:`#dcfce7`,border:`1px solid #86efac`,borderRadius:`14px`,padding:`16px 18px`},children:(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,alignItems:`flex-start`},children:[(0,G.jsx)(dm,{size:24,style:{color:`#16a34a`,flexShrink:0,marginTop:`2px`}}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{style:{fontSize:`14px`,fontWeight:`700`,color:`#166534`,marginBottom:`4px`},children:`VPS Mode Active`}),(0,G.jsx)(`p`,{style:{fontSize:`14px`,color:`#15803d`,marginBottom:`0`},children:`Data disimpan di VPS backend dengan PostgreSQL database.`})]})]})}),(0,G.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`16px`},children:[(0,G.jsx)(`h2`,{style:{margin:0,fontSize:`18px`,fontWeight:`700`,color:`#333`},children:`Overview Stats`}),(0,G.jsxs)(`button`,{onClick:()=>o(!0),disabled:i,style:{display:`flex`,alignItems:`center`,gap:`6px`,padding:`8px 14px`,background:i?`#f0f0f0`:`#fff`,border:`1px solid #e0b7a9`,borderRadius:`8px`,fontSize:`13px`,fontWeight:`600`,color:`#e0b7a9`,cursor:i?`not-allowed`:`pointer`,transition:`all 0.2s`},children:[(0,G.jsx)(nm,{size:14,style:{animation:i?`spin 1s linear infinite`:`none`}}),i?`Loading...`:`Refresh`]})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(240px, 1fr))`,gap:`20px`,marginBottom:`32px`},children:[(0,G.jsx)(IV,{title:`Total Frames`,value:n.totalFrames,subtitle:`Custom frames uploaded`,icon:(0,G.jsx)(Mp,{size:24}),color:`#3b82f6`,onClick:()=>e(`/admin/frames`)}),(0,G.jsx)(IV,{title:`Total Users`,value:n.totalUsers,subtitle:`Registered users`,icon:(0,G.jsx)(Sm,{size:24}),color:`#a855f7`,onClick:()=>e(`/admin/analytics`)}),(0,G.jsx)(IV,{title:`Total Views`,value:n.totalViews,subtitle:`Frame views`,icon:(0,G.jsx)(jp,{size:24}),color:`#10b981`,onClick:()=>e(`/admin/analytics`)}),(0,G.jsx)(IV,{title:`Total Downloads`,value:n.totalDownloads,subtitle:`Frame downloads`,icon:(0,G.jsx)(kp,{size:24}),color:`#f59e0b`,onClick:()=>e(`/admin/analytics`)}),(0,G.jsx)(IV,{title:`Total Likes`,value:n.totalLikes,subtitle:`Frame likes`,icon:(0,G.jsx)(Lp,{size:24}),color:`#ef4444`,onClick:()=>e(`/admin/analytics`)}),(0,G.jsx)(IV,{title:`Pesan Baru`,value:n.unreadMessages,subtitle:`Pesan belum dibaca`,icon:(0,G.jsx)(Kp,{size:24}),color:`#8b5cf6`,onClick:()=>e(`/admin/messages`),badge:n.unreadMessages>0}),(0,G.jsx)(IV,{title:`Affiliate Apps`,value:n.pendingAffiliates,subtitle:`${n.totalAffiliates} total aplikasi`,icon:(0,G.jsx)(Ip,{size:24}),color:`#06b6d4`,onClick:()=>e(`/admin/affiliates`),badge:n.pendingAffiliates>0})]}),(0,G.jsxs)(`section`,{style:{background:`#ffffff`,border:`1px solid #ecdeda`,borderRadius:`14px`,marginBottom:`24px`,overflow:`hidden`},children:[(0,G.jsxs)(`div`,{style:{padding:`22px 24px`,borderBottom:`1px solid #f3ebe8`},children:[(0,G.jsx)(`h2`,{style:{margin:`0 0 4px`,fontSize:`20px`,fontWeight:`800`,color:`#333`},children:`Quick Actions`}),(0,G.jsx)(`p`,{style:{margin:0,color:`#6b6b6b`,fontSize:`14px`},children:`Manage frames and test with demo data`})]}),(0,G.jsxs)(`div`,{style:{padding:`22px 24px`},children:[n.totalFrames===0&&(0,G.jsxs)(`div`,{style:{backgroundColor:`#f0f9ff`,border:`1px solid #bfdbfe`,borderRadius:`10px`,padding:`12px 16px`,marginBottom:`16px`,display:`flex`,alignItems:`center`,gap:`10px`},children:[(0,G.jsx)(Mp,{size:20,style:{color:`#3b82f6`,flexShrink:0}}),(0,G.jsxs)(`p`,{style:{margin:0,fontSize:`13px`,color:`#1e40af`,lineHeight:`1.5`},children:[`Belum ada frame yang diupload. Klik`,` `,(0,G.jsx)(`strong`,{children:`"Upload Frame"`}),` untuk menambahkan frame custom pertama Anda!`]})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`,marginBottom:`16px`},children:[(0,G.jsxs)(`button`,{onClick:()=>e(`/admin/upload-frame`),style:{padding:`12px`,background:`linear-gradient(135deg, #e0b7a9 0%, #d4a396 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`15px`,fontWeight:`700`,cursor:`pointer`,transition:`all 0.2s`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`8px`,boxShadow:`0 2px 8px rgba(224, 183, 169, 0.3)`},onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-2px)`,e.currentTarget.style.boxShadow=`0 4px 12px rgba(224, 183, 169, 0.4)`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`0 2px 8px rgba(224, 183, 169, 0.3)`},children:[(0,G.jsx)(ym,{size:18}),`Upload Frame`]}),(0,G.jsxs)(`button`,{onClick:()=>e(`/admin/frames`),style:{padding:`12px`,background:`white`,color:`#333`,border:`2px solid #e0b7a9`,borderRadius:`10px`,fontSize:`15px`,fontWeight:`700`,cursor:`pointer`,transition:`all 0.2s`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`8px`},onMouseEnter:e=>{e.currentTarget.style.background=`#faf6f5`,e.currentTarget.style.transform=`translateY(-2px)`},onMouseLeave:e=>{e.currentTarget.style.background=`white`,e.currentTarget.style.transform=`translateY(0)`},children:[(0,G.jsx)(Mp,{size:18}),`Manage Frames`]})]})]})]}),(0,G.jsxs)(`section`,{style:{background:`#ffffff`,border:`1px solid #ecdeda`,borderRadius:`14px`,overflow:`hidden`},children:[(0,G.jsxs)(`div`,{style:{padding:`22px 24px`,borderBottom:`1px solid #f3ebe8`},children:[(0,G.jsx)(`h2`,{style:{margin:`0 0 4px`,fontSize:`20px`,fontWeight:`800`,color:`#333`},children:`Quick Actions`}),(0,G.jsx)(`p`,{style:{margin:0,color:`#6b6b6b`,fontSize:`14px`},children:`Common administrative tasks`})]}),(0,G.jsxs)(`div`,{style:{padding:`22px 24px`,display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(260px, 1fr))`,gap:`16px`},children:[(0,G.jsx)(LV,{icon:(0,G.jsx)(ym,{size:20}),label:`Upload Frame`,description:`Upload custom PNG frame`,onClick:()=>e(`/admin/upload-frame`),highlight:!0}),(0,G.jsx)(LV,{icon:(0,G.jsx)(Sm,{size:20}),label:`Manage Users`,description:`View and manage user accounts`,onClick:()=>e(`/admin/users`)}),(0,G.jsx)(LV,{icon:(0,G.jsx)(Mp,{size:20}),label:`Manage Frames`,description:`View and manage frames`,onClick:()=>e(`/admin/frames`)}),(0,G.jsx)(LV,{icon:(0,G.jsx)(Yp,{size:20}),label:`Categories`,description:`Manage frame categories`,onClick:()=>e(`/admin/categories`)}),(0,G.jsx)(LV,{icon:(0,G.jsx)(gm,{size:20}),label:`Analytics`,description:`View platform statistics`,onClick:()=>e(`/admin/analytics`)}),(0,G.jsx)(LV,{icon:(0,G.jsx)(Kp,{size:20}),label:`Messages`,description:`View contact messages`,onClick:()=>e(`/admin/messages`),badge:n.unreadMessages}),(0,G.jsx)(LV,{icon:(0,G.jsx)(cm,{size:20}),label:`Settings`,description:`Platform configuration`,onClick:()=>e(`/admin/settings`)})]})]})]})})}function IV({title:e,value:t,subtitle:n,icon:r,color:i,onClick:a,badge:o=!1}){return(0,G.jsxs)(`div`,{onClick:a,style:{background:`#ffffff`,border:`1px solid #ecdeda`,borderRadius:`14px`,padding:`20px`,cursor:`pointer`,transition:`all 0.2s`,position:`relative`},onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-2px)`,e.currentTarget.style.boxShadow=`0 4px 12px rgba(0,0,0,0.1)`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`none`},children:[o&&t>0&&(0,G.jsx)(`div`,{style:{position:`absolute`,top:`12px`,right:`12px`,background:`#ef4444`,color:`white`,borderRadius:`12px`,padding:`4px 10px`,fontSize:`0.75rem`,fontWeight:`700`,animation:`pulse 2s infinite`},children:`NEW`}),(0,G.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,marginBottom:`16px`},children:(0,G.jsx)(`div`,{style:{background:i,color:`white`,padding:`10px`,borderRadius:`10px`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:r})}),(0,G.jsx)(`h3`,{style:{fontSize:`28px`,fontWeight:`800`,color:`#222`,margin:`0 0 4px`},children:t}),(0,G.jsx)(`p`,{style:{fontSize:`14px`,fontWeight:`700`,color:`#333`,margin:`0 0 2px`},children:e}),(0,G.jsx)(`p`,{style:{fontSize:`12px`,color:`#6b6b6b`,margin:0},children:n})]})}function LV({icon:e,label:t,description:n,onClick:r,highlight:i=!1,badge:a=0}){return(0,G.jsxs)(`button`,{onClick:r,style:{display:`flex`,alignItems:`flex-start`,gap:`12px`,padding:`16px`,borderRadius:`10px`,border:i?`2px solid #e0b7a9`:`1px solid #ecdeda`,background:i?`linear-gradient(135deg, #fff5f2 0%, #ffffff 100%)`:`#ffffff`,textAlign:`left`,cursor:`pointer`,transition:`all 0.2s`,width:`100%`,boxShadow:i?`0 4px 12px rgba(224, 183, 169, 0.2)`:`none`,position:`relative`},onMouseEnter:e=>{e.currentTarget.style.background=i?`linear-gradient(135deg, #fff0ec 0%, #fef9f7 100%)`:`#faf6f5`,e.currentTarget.style.borderColor=`#e0b7a9`,e.currentTarget.style.transform=`translateY(-2px)`,e.currentTarget.style.boxShadow=`0 6px 16px rgba(224, 183, 169, 0.25)`},onMouseLeave:e=>{e.currentTarget.style.background=i?`linear-gradient(135deg, #fff5f2 0%, #ffffff 100%)`:`#ffffff`,e.currentTarget.style.borderColor=i?`#e0b7a9`:`#ecdeda`,e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=i?`0 4px 12px rgba(224, 183, 169, 0.2)`:`none`},children:[a>0&&(0,G.jsx)(`div`,{style:{position:`absolute`,top:`8px`,right:`8px`,background:`#ef4444`,color:`white`,borderRadius:`12px`,padding:`4px 8px`,fontSize:`0.7rem`,fontWeight:`700`,minWidth:`20px`,textAlign:`center`},children:a}),(0,G.jsx)(`div`,{style:{color:i?`#e0b7a9`:`var(--accent, #e0b7a9)`,flexShrink:0,marginTop:`2px`,background:i?`#e0b7a9`:`transparent`,padding:i?`8px`:`0`,borderRadius:i?`8px`:`0`},children:(0,G.jsx)(`div`,{style:{color:i?`white`:`#e0b7a9`},children:e})}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`p`,{style:{fontWeight:`700`,color:i?`#e0b7a9`:`#222`,margin:`0 0 4px`,fontSize:`15px`},children:[t,i&&(0,G.jsx)(`span`,{style:{marginLeft:`8px`,fontSize:`11px`,fontWeight:`600`,background:`#e0b7a9`,color:`white`,padding:`2px 8px`,borderRadius:`6px`},children:`NEW`})]}),(0,G.jsx)(`p`,{style:{fontSize:`13px`,color:`#6b6b6b`,margin:0},children:n})]})]})}var RV=()=>{console.log(`AdminFrames component rendering...`);let[e,t]=(0,b.useState)([]),[n,r]=(0,b.useState)(!0),[i,a]=(0,b.useState)(`all`),[o,s]=(0,b.useState)(`display-order`),[c,l]=(0,b.useState)(!1),[u,d]=(0,b.useState)(!1),[f,p]=(0,b.useState)([]),[m,h]=(0,b.useState)(null),[g,_]=(0,b.useState)(null),[v,y]=(0,b.useState)(null),x=e=>{let t=e?.flowType??e?.flow_type;return String(t||`fixed`).toLowerCase().trim()===`personalized`?`personalized`:`fixed`};(0,b.useEffect)(()=>{(async()=>{console.log(`AdminFrames loading...`),console.log(` Backend mode: ${Ik.isVPSMode()?`VPS`:`Firebase`}`);try{let e=await Ik.getAllFrames({includeHidden:!0,throwOnError:!0});console.log(`Frames loaded:`,e);let n=[...e].sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999));t(n)}catch(e){console.error(`Error:`,e),alert(`Gagal memuat frames dari server. Coba reload halaman / cek koneksi.`)}r(!1)})()},[]);let S=[...new Set(e.map(e=>e.category||`Uncategorized`))].sort();(0,b.useEffect)(()=>{if(e.length>0&&f.length===0){let t={};e.forEach(e=>{let n=e.category||`Uncategorized`,r=e.displayOrder??999;(t[n]===void 0||r<t[n])&&(t[n]=r)});let n=Object.keys(t).sort((e,n)=>t[e]-t[n]);p(n)}else if(e.length>0&&f.length>0){let t=[...new Set(e.map(e=>e.category||`Uncategorized`))],n=t.filter(e=>!f.includes(e));n.length>0&&p([...f,...n]);let r=f.filter(e=>t.includes(e));r.length!==f.length&&p(r)}},[e.length,f.length]);let C=b.useMemo(()=>{let t=[...e];return i!==`all`&&(t=t.filter(e=>(e.category||`Uncategorized`)===i)),t.sort((e,t)=>{switch(o){case`display-order`:return(e.displayOrder??999)-(t.displayOrder??999);case`category-asc`:return(e.category||`Uncategorized`).localeCompare(t.category||`Uncategorized`);case`category-desc`:return(t.category||`Uncategorized`).localeCompare(e.category||`Uncategorized`);case`name-asc`:return(e.name||``).localeCompare(t.name||``);case`name-desc`:return(t.name||``).localeCompare(e.name||``);case`newest`:return new Date(t.createdAt||0)-new Date(e.createdAt||0);case`oldest`:return new Date(e.createdAt||0)-new Date(t.createdAt||0);default:return 0}}),t},[e,i,o]),w=b.useMemo(()=>{let e={};C.forEach(t=>{let n=t.category||`Uncategorized`;e[n]||(e[n]=[]),e[n].push(t)});let t={};return f.forEach(n=>{e[n]&&(t[n]=e[n])}),Object.keys(e).forEach(n=>{t[n]||(t[n]=e[n])}),t},[C,f]),T=(n,r)=>{let i=e.filter(e=>(e.category||`Uncategorized`)===r),a=e.filter(e=>(e.category||`Uncategorized`)!==r),o=i.findIndex(e=>e.id===n);if(o<=0)return;[i[o-1],i[o]]=[i[o],i[o-1]];let s=[];f.forEach(t=>{t===r?s.push(...i):s.push(...e.filter(e=>(e.category||`Uncategorized`)===t))}),a.forEach(e=>{s.find(t=>t.id===e.id)||s.push(e)}),s.forEach((e,t)=>{e.displayOrder=t}),t(s)},E=(n,r)=>{let i=e.filter(e=>(e.category||`Uncategorized`)===r),a=i.findIndex(e=>e.id===n);if(a<0||a>=i.length-1)return;[i[a],i[a+1]]=[i[a+1],i[a]];let o=[];f.forEach(t=>{t===r?o.push(...i):o.push(...e.filter(e=>(e.category||`Uncategorized`)===t))}),e.forEach(e=>{o.find(t=>t.id===e.id)||o.push(e)}),o.forEach((e,t)=>{e.displayOrder=t}),t(o)},D=e=>{let t=f.indexOf(e);if(t<=0)return;let n=[...f];[n[t-1],n[t]]=[n[t],n[t-1]],p(n),k(n)},O=e=>{let t=f.indexOf(e);if(t<0||t>=f.length-1)return;let n=[...f];[n[t],n[t+1]]=[n[t+1],n[t]],p(n),k(n)},k=n=>{let r=[];n.forEach(t=>{let n=e.filter(e=>(e.category||`Uncategorized`)===t);n.sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999)),r.push(...n)}),e.forEach(e=>{r.find(t=>t.id===e.id)||r.push(e)}),r.forEach((e,t)=>{e.displayOrder=t}),t(r)},A=async()=>{d(!0);try{let n=e.map((e,t)=>({id:e.id,displayOrder:t}));console.log(` Saving frame orders:`,n.map(e=>`${e.id}: ${e.displayOrder}`)),await Ik.updateFramesOrder(n),console.log(` Frame orders saved successfully!`);try{let e=[...await Ik.getAllFrames({includeHidden:!0,throwOnError:!0})].sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999));e.length>0&&t(e)}catch(e){console.error(`Error reloading frames after save:`,e)}alert(`Urutan berhasil disimpan!`),l(!1)}catch(e){console.error(`Error saving order:`,e),alert(`Gagal menyimpan urutan: `+e.message)}d(!1)},j=async e=>{if(window.confirm(`Yakin ingin menghapus frame ini?`))try{let n=await Ik.deleteFrame(e);if(n.success!==!1){let e=[...await Ik.getAllFrames({includeHidden:!0})].sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999));t(e),alert(`Frame berhasil dihapus!`)}else alert(`Gagal menghapus: `+n.message)}catch(e){alert(`Gagal menghapus: `+e.message)}},M=async e=>{let n=!!(e?.isPremium??e?.is_premium);try{h(e.id);let r=await Ik.updateFrame(e.id,{is_premium:!n});if(r?.success===!1)throw Error(r?.message||`Gagal mengubah status paid/free`);let i=[...await Ik.getAllFrames({includeHidden:!0})].sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999));t(i)}catch(e){alert(`Gagal mengubah status: `+(e?.message||String(e)))}finally{h(null)}},N=async e=>{let n=!!(e?.isHidden??e?.is_hidden);try{_(e.id);let r=await Ik.updateFrame(e.id,{is_hidden:!n});if(r?.success===!1)throw Error(r?.message||`Gagal mengubah visibilitas (hide/show)`);let i=[...await Ik.getAllFrames({includeHidden:!0})].sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999));t(i)}catch(e){alert(`Gagal mengubah visibilitas: `+(e?.message||String(e)))}finally{_(null)}},P=async(e,n)=>{let r=String(n||`fixed`).toLowerCase().trim()===`personalized`?`personalized`:`fixed`,i=x(e);t(t=>(t||[]).map(t=>t?.id===e.id?{...t,flowType:r,flow_type:r}:t));try{y(e.id);let n=await Ik.updateFrame(e.id,{flow_type:r});if(n?.success===!1)throw Error(n?.message||`Gagal mengubah flow type`);let i=[...await Ik.getAllFrames({includeHidden:!0,throwOnError:!0})].sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999));t(i);let a=i.find(t=>t?.id===e.id),o=a?x(a):null;o&&o!==r&&alert(`Flow type belum tersimpan di server. Pastikan backend sudah di-deploy dan migration flow_type sudah dijalankan.`)}catch(n){t(t=>(t||[]).map(t=>t?.id===e.id?{...t,flowType:i,flow_type:i}:t)),alert(`Gagal mengubah flow type: `+(n?.message||String(n)))}finally{y(null)}};if(n)return(0,G.jsx)(`div`,{style:{padding:`20px`,textAlign:`center`},children:(0,G.jsx)(`p`,{children:`Loading frames...`})});console.log(`AdminFrames about to return JSX, frames count:`,e.length);let ee=({frame:e,index:t,category:n,categoryFrames:r})=>{let i=e.imageUrl||e.thumbnailUrl||e.imagePath,a=t===0,o=t===r.length-1,s=!!(e?.isPremium??e?.is_premium),l=!!(e?.isHidden??e?.is_hidden),u=x(e);return(0,G.jsxs)(`div`,{style:{background:`white`,borderRadius:`12px`,overflow:`hidden`,boxShadow:c?`0 4px 12px rgba(79, 70, 229, 0.2)`:`0 2px 8px rgba(0,0,0,0.1)`,border:c?`2px solid #4f46e5`:`none`,position:`relative`,opacity:l?.72:1},children:[c&&(0,G.jsx)(`div`,{style:{position:`absolute`,top:`8px`,left:`8px`,background:`#4f46e5`,color:`white`,width:`28px`,height:`28px`,borderRadius:`50%`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`12px`,fontWeight:`bold`,zIndex:10},children:t+1}),(0,G.jsx)(`div`,{style:{position:`relative`,paddingTop:`177.78%`,background:e.canvasBackground||`#f3f4f6`,overflow:`hidden`},children:i?(0,G.jsx)(`img`,{src:i,alt:e.name,style:{position:`absolute`,top:0,left:0,width:`100%`,height:`100%`,objectFit:`contain`},onError:e=>{console.error(`Image load error for:`,i),e.target.style.display=`none`}}):(0,G.jsx)(`div`,{style:{position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,color:`#9ca3af`},children:`No Image`})}),(0,G.jsxs)(`div`,{style:{padding:`12px`},children:[(0,G.jsx)(`h3`,{style:{margin:`0 0 8px 0`,fontSize:`14px`},children:e.name||`Untitled`}),(0,G.jsx)(`p`,{style:{margin:`0 0 8px 0`,fontSize:`12px`,color:`#6b7280`},children:e.category||`No category`}),!c&&(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,margin:`0 0 10px 0`},children:[(0,G.jsx)(`span`,{style:{fontSize:`12px`,color:`#334155`,fontWeight:600,whiteSpace:`nowrap`},children:`Flow`}),(0,G.jsxs)(`select`,{value:u,disabled:v===e.id,onChange:t=>P(e,t.target.value),style:{flex:1,padding:`6px`,background:u===`personalized`?`#ffedd5`:`#f1f5f9`,color:`#0f172a`,border:`1px solid #e2e8f0`,borderRadius:`6px`,cursor:v===e.id?`not-allowed`:`pointer`,fontSize:`12px`,fontWeight:700},title:`Pilih flow type: Fixed / Personalized`,children:[(0,G.jsx)(`option`,{value:`fixed`,children:`FIXED`}),(0,G.jsx)(`option`,{value:`personalized`,children:`PERSONALIZED`})]})]}),c?(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,G.jsx)(`button`,{onClick:()=>T(e.id,n),disabled:a,style:{flex:1,padding:`8px`,background:a?`#e5e7eb`:`#dbeafe`,color:a?`#9ca3af`:`#1d4ed8`,border:`none`,borderRadius:`4px`,cursor:a?`not-allowed`:`pointer`,fontSize:`16px`,fontWeight:`bold`},title:`Pindah ke atas`,children:``}),(0,G.jsx)(`button`,{onClick:()=>E(e.id,n),disabled:o,style:{flex:1,padding:`8px`,background:o?`#e5e7eb`:`#dbeafe`,color:o?`#9ca3af`:`#1d4ed8`,border:`none`,borderRadius:`4px`,cursor:o?`not-allowed`:`pointer`,fontSize:`16px`,fontWeight:`bold`},title:`Pindah ke bawah`,children:``})]}):(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,G.jsx)(`button`,{onClick:()=>M(e),disabled:m===e.id,style:{flex:1,padding:`6px`,background:s?`#ede9fe`:`#dcfce7`,color:s?`#6d28d9`:`#166534`,border:`none`,borderRadius:`4px`,cursor:m===e.id?`not-allowed`:`pointer`,fontSize:`12px`,fontWeight:600},title:`Toggle status paid/free`,children:m===e.id?`...`:s?`PAID`:`FREE`}),(0,G.jsx)(`button`,{onClick:()=>N(e),disabled:g===e.id,style:{flex:1,padding:`6px`,background:l?`#f3f4f6`:`#e0f2fe`,color:l?`#374151`:`#0369a1`,border:`none`,borderRadius:`4px`,cursor:g===e.id?`not-allowed`:`pointer`,fontSize:`12px`,fontWeight:600},title:`Hide/Show frame untuk user`,children:g===e.id?`...`:l?`HIDDEN`:`SHOW`}),(0,G.jsx)(tn,{to:`/admin/upload-frame?edit=${e.id}`,style:{flex:1,padding:`6px`,background:`#e0e7ff`,color:`#4f46e5`,borderRadius:`4px`,textAlign:`center`,textDecoration:`none`,fontSize:`12px`},children:`Edit`}),(0,G.jsx)(`button`,{onClick:()=>j(e.id),style:{flex:1,padding:`6px`,background:`#fee2e2`,color:`#dc2626`,border:`none`,borderRadius:`4px`,cursor:`pointer`,fontSize:`12px`},children:`Hapus`})]})]})]})};return(0,G.jsxs)(`div`,{style:{padding:`20px`,backgroundColor:`#fff`,minHeight:`200px`},children:[(0,G.jsx)(`h1`,{style:{color:`#111`,marginBottom:`20px`},children:` Kelola Frame`}),(0,G.jsxs)(`p`,{style:{color:`#666`,marginBottom:`20px`},children:[`Total frames: `,e.length,i!==`all`&&`  Menampilkan: ${C.length}`,c&&`  Mode Atur Urutan Aktif`]}),c&&(0,G.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #4f46e5, #7c3aed)`,color:`white`,padding:`16px 20px`,borderRadius:`12px`,marginBottom:`20px`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,flexWrap:`wrap`,gap:`12px`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`strong`,{style:{fontSize:`16px`},children:` Mode Atur Urutan`}),(0,G.jsx)(`p`,{style:{margin:`4px 0 0 0`,fontSize:`14px`,opacity:.9},children:` Gunakan tombol " Kategori" / " Kategori" untuk mengubah urutan kategori`}),(0,G.jsx)(`p`,{style:{margin:`4px 0 0 0`,fontSize:`14px`,opacity:.9},children:` Gunakan tombol   pada frame untuk mengubah urutan dalam kategori`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,G.jsx)(`button`,{onClick:()=>l(!1),style:{padding:`10px 20px`,background:`rgba(255,255,255,0.2)`,color:`white`,border:`1px solid rgba(255,255,255,0.3)`,borderRadius:`8px`,cursor:`pointer`,fontSize:`14px`},children:`Batal`}),(0,G.jsx)(`button`,{onClick:A,disabled:u,style:{padding:`10px 20px`,background:`white`,color:`#4f46e5`,border:`none`,borderRadius:`8px`,cursor:u?`not-allowed`:`pointer`,fontSize:`14px`,fontWeight:`600`},children:u?`Menyimpan...`:` Simpan Urutan`})]})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`12px`,marginBottom:`20px`,alignItems:`center`},children:[(0,G.jsx)(tn,{to:`/admin/upload-frame`,style:{display:`inline-block`,background:`#4f46e5`,color:`white`,padding:`10px 20px`,borderRadius:`8px`,textDecoration:`none`},children:`+ Upload Frame Baru`}),(0,G.jsx)(`button`,{onClick:async()=>{r(!0);try{let e=[...await Ik.getAllFrames({includeHidden:!0,throwOnError:!0})].sort((e,t)=>(e.displayOrder??999)-(t.displayOrder??999));t(e),alert(` Data berhasil dimuat ulang!`)}catch(e){alert(`Gagal memuat ulang: `+e.message)}finally{r(!1)}},style:{display:`inline-flex`,alignItems:`center`,gap:`6px`,background:`#eff6ff`,color:`#1e40af`,padding:`10px 20px`,borderRadius:`8px`,border:`1px solid #93c5fd`,cursor:`pointer`,fontSize:`14px`,fontWeight:`500`},children:` Reload Data`}),!c&&(0,G.jsx)(`button`,{onClick:()=>{l(!0),s(`display-order`),a(`all`)},style:{display:`inline-flex`,alignItems:`center`,gap:`6px`,background:`#f0fdf4`,color:`#15803d`,padding:`10px 20px`,borderRadius:`8px`,border:`1px solid #86efac`,cursor:`pointer`,fontSize:`14px`,fontWeight:`500`},children:` Atur Urutan Tampilan`}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`label`,{style:{fontSize:`14px`,color:`#374151`,fontWeight:500},children:`Filter Kategori:`}),(0,G.jsxs)(`select`,{value:i,onChange:e=>a(e.target.value),style:{padding:`8px 12px`,borderRadius:`8px`,border:`1px solid #d1d5db`,fontSize:`14px`,background:`white`,cursor:`pointer`,minWidth:`150px`},children:[(0,G.jsx)(`option`,{value:`all`,children:`Semua Kategori`}),S.map(e=>(0,G.jsx)(`option`,{value:e,children:e},e))]})]}),!c&&(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`label`,{style:{fontSize:`14px`,color:`#374151`,fontWeight:500},children:`Urutkan:`}),(0,G.jsxs)(`select`,{value:o,onChange:e=>s(e.target.value),style:{padding:`8px 12px`,borderRadius:`8px`,border:`1px solid #d1d5db`,fontSize:`14px`,background:`white`,cursor:`pointer`,minWidth:`180px`},children:[(0,G.jsx)(`option`,{value:`display-order`,children:`Urutan Tampilan`}),(0,G.jsx)(`option`,{value:`name-asc`,children:`Nama (A-Z)`}),(0,G.jsx)(`option`,{value:`name-desc`,children:`Nama (Z-A)`}),(0,G.jsx)(`option`,{value:`newest`,children:`Terbaru`}),(0,G.jsx)(`option`,{value:`oldest`,children:`Terlama`})]})]})]}),e.length===0?(0,G.jsx)(`div`,{style:{textAlign:`center`,padding:`40px`,background:`#f3f4f6`,borderRadius:`8px`},children:(0,G.jsx)(`p`,{style:{color:`#6b7280`},children:`Belum ada frame yang diupload`})}):C.length===0?(0,G.jsx)(`div`,{style:{textAlign:`center`,padding:`40px`,background:`#f3f4f6`,borderRadius:`8px`},children:(0,G.jsxs)(`p`,{style:{color:`#6b7280`},children:[`Tidak ada frame dalam kategori "`,i,`"`]})}):(0,G.jsx)(`div`,{children:Object.entries(w||{}).map(([e,t],n)=>{let r=n===0,i=n===Object.keys(w).length-1;return(0,G.jsxs)(`div`,{style:{marginBottom:`32px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,marginBottom:`16px`,paddingBottom:`8px`,borderBottom:c?`2px solid #4f46e5`:`2px solid #e5e7eb`,background:c?`#f0f9ff`:`transparent`,padding:c?`12px`:`0 0 8px 0`,borderRadius:c?`8px 8px 0 0`:`0`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[c&&(0,G.jsx)(`span`,{style:{background:`#4f46e5`,color:`white`,width:`28px`,height:`28px`,borderRadius:`50%`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`12px`,fontWeight:`bold`},children:n+1}),(0,G.jsxs)(`h2`,{style:{fontSize:`18px`,fontWeight:`600`,color:`#1f2937`,margin:0},children:[e,(0,G.jsxs)(`span`,{style:{fontSize:`14px`,fontWeight:`normal`,color:`#6b7280`,marginLeft:`8px`},children:[`(`,t.length,` frame)`]})]})]}),c&&(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,G.jsx)(`button`,{onClick:()=>D(e),disabled:r,style:{padding:`6px 12px`,background:r?`#e5e7eb`:`#dbeafe`,color:r?`#9ca3af`:`#1d4ed8`,border:`none`,borderRadius:`4px`,cursor:r?`not-allowed`:`pointer`,fontSize:`14px`,fontWeight:`bold`,display:`flex`,alignItems:`center`,gap:`4px`},title:`Pindah kategori ke atas`,children:` Kategori`}),(0,G.jsx)(`button`,{onClick:()=>O(e),disabled:i,style:{padding:`6px 12px`,background:i?`#e5e7eb`:`#dbeafe`,color:i?`#9ca3af`:`#1d4ed8`,border:`none`,borderRadius:`4px`,cursor:i?`not-allowed`:`pointer`,fontSize:`14px`,fontWeight:`bold`,display:`flex`,alignItems:`center`,gap:`4px`},title:`Pindah kategori ke bawah`,children:` Kategori`})]})]}),(0,G.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(180px, 1fr))`,gap:`20px`},children:t.map((n,r)=>(0,G.jsx)(ee,{frame:n,index:r,category:e,categoryFrames:t},n.id))})]},e)})})]})},zV=u(dN()),BV={hidden:{opacity:0,y:16},visible:{opacity:1,y:0}},VV=[`Christmas Fremio Series`,`Holiday Fremio Series`,`Year-End Recap Fremio Series`,`Fremio Series`,`Wedding`,`Birthday`,`Graduation`,`Event`,`Music`,`Custom`];function HV(){let e=Le(),[t]=un(),n=t.get(`edit`),{user:r}=In(),i=(0,b.useRef)(null),a=(0,b.useRef)(`upload`),o=(0,b.useRef)(null),s=(0,b.useRef)(null),[c,l]=(0,b.useState)(!1),[u,d]=(0,b.useState)(!1),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(null),[g,_]=(0,b.useState)(!1),[v,y]=(0,b.useState)(null),[x,S]=(0,b.useState)(!1),[C,w]=(0,b.useState)(`#667eea`),[T,E]=(0,b.useState)(`#764ba2`),[D,O]=(0,b.useState)(`9:16`),[k,A]=(0,b.useState)(!1),[j,M]=(0,b.useState)(!1),[N,P]=(0,b.useState)({maxWidth:460,maxHeight:480}),[ee,F]=(0,b.useState)(``),[I,L]=(0,b.useState)(``),[R,te]=(0,b.useState)([`Fremio Series`]),[z,B]=(0,b.useState)(!0),V=(0,b.useCallback)((e,t,n=3200)=>{o.current&&clearTimeout(o.current),h({type:e,message:t}),o.current=setTimeout(()=>{h(null),o.current=null},n)},[]),{elements:H,selectedElementId:ne,canvasBackground:re,addElement:U,addUploadElement:ie,addBackgroundPhoto:ae,updateElement:oe,selectElement:se,setCanvasBackground:ce,removeElement:le,duplicateElement:ue,toggleLock:de,resizeUploadImage:fe,bringToFront:pe,sendToBack:me,bringForward:he,sendBackward:ge,clearSelection:_e,fitBackgroundPhotoToCanvas:ve,setElements:ye}=yF(TF(e=>({elements:e.elements,selectedElementId:e.selectedElementId,canvasBackground:e.canvasBackground,addElement:e.addElement,addUploadElement:e.addUploadElement,addBackgroundPhoto:e.addBackgroundPhoto,updateElement:e.updateElement,selectElement:e.selectElement,setCanvasBackground:e.setCanvasBackground,removeElement:e.removeElement,duplicateElement:e.duplicateElement,toggleLock:e.toggleLock,resizeUploadImage:e.resizeUploadImage,bringToFront:e.bringToFront,sendToBack:e.sendToBack,bringForward:e.bringForward,sendBackward:e.sendBackward,clearSelection:e.clearSelection,fitBackgroundPhotoToCanvas:e.fitBackgroundPhotoToCanvas,setElements:e.setElements})));(0,b.useEffect)(()=>{(async()=>{if(n){p(!0),d(!0);try{let e=await Ik.getFrameById(n);if(e){F(e.name||``),L(e.description||``),B(!!(e?.isHidden??e?.is_hidden)),e.categories&&Array.isArray(e.categories)?te(e.categories):e.category&&te(e.category.split(`, `).map(e=>e.trim())),(e.canvasBackground||e.layout?.backgroundColor)&&ce(e.canvasBackground||e.layout?.backgroundColor||`#f7f1ed`);let t=[];e.slots&&Array.isArray(e.slots)&&e.slots.forEach((e,n)=>{t.push({id:e.id||`photo_${n+1}`,type:`photo`,x:e.left*UM,y:e.top*WM,width:e.width*UM,height:e.height*WM,rotation:typeof e.rotation==`number`?e.rotation:0,zIndex:1,data:{photoIndex:e.photoIndex===void 0?n:e.photoIndex,borderRadius:e.borderRadius||0}})}),e.layout?.elements&&Array.isArray(e.layout.elements)&&(console.log(` [EDIT] Restoring layout elements:`,e.layout.elements.length),e.layout.elements.forEach((e,n)=>{console.log(`  Element ${n}: type=${e.type}, id=${e.id?.substring(0,8)}, zIndex=${e.zIndex}, hasImage=${!!e.data?.image}`);let r=e.widthNorm===void 0?e.width:e.widthNorm*UM,i=e.heightNorm===void 0?e.height:e.heightNorm*WM;e.type===`upload`&&e.data?.imageAspectRatio&&(i=r/e.data.imageAspectRatio);let a=e.type===`upload`?Math.max(e.zIndex||100,100):Math.max(e.zIndex||10,10),o={...e,x:e.xNorm===void 0?e.x:e.xNorm*UM,y:e.yNorm===void 0?e.y:e.yNorm*WM,width:r,height:i,zIndex:a};delete o.xNorm,delete o.yNorm,delete o.widthNorm,delete o.heightNorm,t.push(o),console.log(`   Restored: zIndex=${a}, size=${r}x${i}`)})),console.log(` [EDIT] Total elements restored:`,t.length),ye(t),e.layout?.elements&&e.layout.elements.length>0?V(`success`,`Frame "${e.name}" dimuat dengan ${e.layout.elements.length} overlay`):V(`info`,`Frame "${e.name}" dimuat. Overlay tidak ditemukan - tambahkan ulang jika diperlukan.`)}else V(`error`,`Frame tidak ditemukan`),d(!1)}catch(e){console.error(`Error loading frame:`,e),V(`error`,`Gagal memuat frame: `+e.message),d(!1)}finally{p(!1)}}else ye([]),ce(`#f7f1ed`),_e(),d(!1)})()},[n]),(0,b.useLayoutEffect)(()=>{let e=window.matchMedia(`(max-width: 900px)`),t=e=>_(e.matches);return t(e),e.addEventListener(`change`,t),()=>e.removeEventListener(`change`,t)},[]),(0,b.useEffect)(()=>{g&&ne||y(null)},[g,ne]),(0,b.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[]);let be=(0,b.useMemo)(()=>ne===`background`?`background`:H.find(e=>e.id===ne)||null,[H,ne]),xe=be&&be!==`background`?be:null,Se=be===`background`,Ce=g&&(Se||!!xe),we=(0,b.useMemo)(()=>H.find(e=>e.type===`background-photo`)||null,[H]),Te=(0,b.useCallback)(e=>{if(typeof e!=`string`)return{width:UM,height:WM};let[t,n]=e.split(`:`).map(Number);return!t||!n?{width:UM,height:WM}:n>=t?{width:UM,height:Math.round(UM*n/t)}:{width:Math.round(WM*t/n),height:WM}},[]),Ee=e=>{te(t=>t.includes(e)?t.length===1?t:t.filter(t=>t!==e):[...t,e])},De=(0,b.useCallback)(()=>{a.current=`upload`,i.current&&(i.current.value=``,i.current.click())},[]),Oe=(0,b.useCallback)(()=>{a.current=`background`,i.current&&(i.current.value=``,i.current.click())},[]);(0,b.useEffect)(()=>{let e=()=>Oe();return window.addEventListener(`creator:request-background-upload`,e),()=>window.removeEventListener(`creator:request-background-upload`,e)},[Oe]);let ke=e=>{let t=e.target.files?.[0];if(!t)return;let n=new FileReader;n.onload=()=>{let e=n.result;if(typeof e==`string`)if(a.current===`background`){let{width:t,height:n}=Te(D);ae(e,{canvasWidth:t,canvasHeight:n}),V(`success`,`Background foto diperbarui.`,2200)}else ie(e)},n.readAsDataURL(t)},Ae=(0,b.useCallback)(()=>{A(e=>!e),V(`success`,k?`Background unlocked`:`Background locked`,1500)},[k,V]),je=(0,b.useCallback)(()=>{we&&le(we.id),ce(`#f7f1ed`),_e()},[we,le,ce,_e]),Me=(0,b.useMemo)(()=>[{id:`canvas-size`,icon:qp,label:`Ukuran Canvas`,mobileLabel:`Ukuran`,isActive:x,onClick:()=>{S(e=>!e),_e()}},{id:`background`,icon:()=>(0,G.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`}),(0,G.jsx)(`path`,{d:`M12 2a10 10 0 0 1 0 20`,fill:`currentColor`,opacity:`0.3`})]}),label:`Background`,mobileLabel:`BG`,isActive:ne===`background`,onClick:()=>{S(!1),se(`background`)}},{id:`photo`,icon:Rp,label:`Area Foto`,mobileLabel:`Foto`,isActive:!1,onClick:()=>{S(!1),M(!0),_e()}},{id:`text`,icon:vm,label:`Add Text`,mobileLabel:`Teks`,isActive:!1,onClick:()=>{S(!1),U(`text`)}},{id:`shape`,icon:lm,label:`Shape`,mobileLabel:`Shape`,isActive:!1,onClick:()=>{S(!1),U(`shape`)}},{id:`upload`,icon:Cp,label:`Unggahan`,mobileLabel:`Upload`,isActive:!1,onClick:()=>{S(!1),De()}}],[x,ne,U,se,_e,De]),Ne=(0,b.useMemo)(()=>{if(!Ce)return[];if(Se)return[{id:`background-color`,label:`Warna`,icon:Xp},{id:`background-photo`,label:we?`Foto`:`Tambah Foto`,icon:Rp}];if(!xe)return[];switch(xe.type){case`text`:return[{id:`text-edit`,label:`Edit`,icon:vm},{id:`text-font`,label:`Font`,icon:vm},{id:`text-color`,label:`Warna`,icon:Xp},{id:`text-size`,label:`Ukuran`,icon:qp},{id:`text-align`,label:`Rata`,icon:ip},{id:`layer-order`,label:`Lapisan`,icon:Bp}];case`shape`:return[{id:`shape-color`,label:`Warna`,icon:Xp},{id:`shape-size`,label:`Ukuran`,icon:qp},{id:`shape-radius`,label:`Sudut`,icon:Ep},{id:`shape-outline`,label:`Outline`,icon:pm},{id:`layer-order`,label:`Lapisan`,icon:Bp}];case`photo`:return[{id:`photo-color`,label:`Warna`,icon:Xp},{id:`photo-fit`,label:`Gaya`,icon:sm},{id:`photo-size`,label:`Ukuran`,icon:qp},{id:`photo-radius`,label:`Sudut`,icon:Ep},{id:`photo-outline`,label:`Outline`,icon:pm},{id:`layer-order`,label:`Lapisan`,icon:Bp}];case`upload`:return[{id:`photo-color`,label:`Warna`,icon:Xp},{id:`photo-fit`,label:`Gaya`,icon:sm},{id:`photo-size`,label:`Ukuran`,icon:qp},{id:`photo-radius`,label:`Sudut`,icon:Ep},{id:`upload-outline`,label:`Outline`,icon:pm},{id:`layer-order`,label:`Lapisan`,icon:Bp}];case`background-photo`:return[{id:`bg-photo-fit`,label:`Gaya`,icon:sm},{id:`bg-photo-size`,label:`Ukuran`,icon:qp},{id:`bg-photo-manage`,label:`Foto`,icon:Rp}];default:return[]}},[Ce,Se,we,xe]),Pe=(0,b.useCallback)(e=>{typeof e.onClick==`function`&&e.onClick()},[]);(0,b.useCallback)((e,t)=>{if(!xe)return;let n=Number(t);!Number.isFinite(n)||n<20||oe(xe.id,{[e]:n})},[xe,oe]);let Fe=async()=>{if(c)return;if(!localStorage.getItem(`fremio_token`)){V(`error`,`Sesi anda telah berakhir. Silakan login ulang.`),e(`/login`);return}if(!ee.trim()){V(`error`,`Nama frame harus diisi!`);return}let t=H.filter(e=>e.type===`photo`);if(t.length===0){V(`error`,`Tambahkan minimal 1 Area Foto!`);return}l(!0);try{let{width:i,height:a}=Te(D),o=async e=>{let t=localStorage.getItem(`fremio_token`)||localStorage.getItem(`auth_token`);if(!t)throw Error(`No token provided`);let n=await(async e=>{try{let t=await createImageBitmap(e),n=Math.min(1,1080/t.width,1920/t.height),r=Math.max(1,Math.round(t.width*n)),i=Math.max(1,Math.round(t.height*n)),a=document.createElement(`canvas`);a.width=r,a.height=i;let o=a.getContext(`2d`);if(!o)return e;o.drawImage(t,0,0,r,i);let s=(e,t)=>new Promise(n=>{try{a.toBlob(e=>n(e),e,t)}catch{n(null)}});return await s(`image/webp`,.82)||await s(`image/jpeg`,.82)||await s(`image/png`,.92)||e}catch{return e}})(await(await fetch(e)).blob());if(n.size>8*1024*1024)throw Error(`Overlay terlalu besar (${Math.round(n.size/1024/1024)}MB). Kecilkan dulu (resize/kompres) lalu coba lagi.`);let r=n.type||`image/webp`,i=(r.split(`/`)[1]||`webp`).replace(/[^a-z0-9]/gi,``).toLowerCase(),a=new File([n],`overlay_${Date.now()}.${i||`webp`}`,{type:r}),o=new FormData;o.append(`image`,a);let s=await fetch(`${pO}/upload/frame`,{method:`POST`,headers:{Authorization:`Bearer ${t}`},body:o}),c=(s.headers.get(`content-type`)||``).includes(`application/json`)?await s.json():await s.text();if(!s.ok){let e=c?.error||c?.message||`Upload failed with status ${s.status}`;throw Error(e)}let l=c.imagePath||c.image_path;if(!l)throw Error(`Upload succeeded but no imagePath returned`);let u=pO.replace(/\/api\/?$/,``);return l.startsWith(`http`)?l:`${u}${l}`},s=null,c=null;_e(),await new Promise(e=>setTimeout(e,100));let l=document.getElementById(`creator-canvas`);if(l)try{let e=l.querySelectorAll(`img`);await Promise.all(Array.from(e).map(e=>e.complete?Promise.resolve():new Promise(t=>{e.onload=t,e.onerror=t,setTimeout(t,3e3)}))),await new Promise(e=>setTimeout(e,200));let t=l.cloneNode(!0);t.style.position=`fixed`,t.style.top=`0`,t.style.left=`0`,t.style.transform=`none`,t.style.zIndex=`-9999`,t.style.visibility=`visible`,t.style.opacity=`1`,t.querySelectorAll([`[data-export-ignore]`,`[data-export-ignore="true"]`,`.react-rnd-handle`,`.react-rnd-handle-top`,`.react-rnd-handle-bottom`,`.react-rnd-handle-left`,`.react-rnd-handle-right`,`.react-rnd-handle-topLeft`,`.react-rnd-handle-topRight`,`.react-rnd-handle-bottomLeft`,`.react-rnd-handle-bottomRight`,`.creator-resize-wrapper`,`.creator-element--selected`,`[style*="border: 2px solid"]`].join(`, `)).forEach(e=>e.remove()),t.querySelectorAll(`div`).forEach(e=>{e.style.border&&e.style.border.includes(`solid`)&&e.style.border.includes(`#f7a998`)&&e.remove()}),document.body.appendChild(t);let n=await(0,zV.default)(t,{scale:1,useCORS:!0,allowTaint:!0,backgroundColor:null,logging:!1,imageTimeout:1e4,width:parseInt(l.style.width),height:parseInt(l.style.height)});document.body.removeChild(t);let r=n;if(n.width>540||n.height>960){let e=Math.min(540/n.width,960/n.height,1),t=document.createElement(`canvas`);t.width=Math.max(1,Math.round(n.width*e)),t.height=Math.max(1,Math.round(n.height*e));let i=t.getContext(`2d`);i&&(i.drawImage(n,0,0,t.width,t.height),r=t)}let i=(e,t)=>new Promise(n=>{try{r.toBlob(e=>n(e),e,t)}catch{n(null)}});c=await i(`image/webp`,.7)||await i(`image/jpeg`,.7)||await i(`image/png`),c||=(s=r.toDataURL(`image/png`,.8),await(await fetch(s)).blob()),c?.size&&c.size>900*1024&&(console.warn(` Thumbnail still too large for nginx, skipping thumbnail upload:`,c.size),c=null),console.log(` Canvas captured successfully, size:`,c.size)}catch(e){console.error(`Failed to capture canvas:`,e),console.warn(`Continuing without frame thumbnail`)}let d=t.map((e,t)=>({id:e.id,left:e.x/i,top:e.y/a,width:e.width/i,height:e.height/a,zIndex:1,photoIndex:t,borderRadius:e.data?.borderRadius||0,rotation:Number.isFinite(e.rotation)?e.rotation:0})),f=[];console.log(` [SAVE] All elements:`,H.length),H.forEach((e,t)=>{console.log(`  Element ${t}: type=${e.type}, id=${e.id?.substring(0,8)}, hasImage=${!!e.data?.image}, zIndex=${e.zIndex}`)});let p=H.filter(e=>e.type!==`photo`&&e.type!==`background-photo`);console.log(` [SAVE] Non-photo elements to save:`,p.length);for(let e of p){let t=e.type===`upload`,n=t?Math.max(e.zIndex||0,500):e.zIndex,r={...e,zIndex:n,xNorm:e.x/i,yNorm:e.y/a,widthNorm:e.width/i,heightNorm:e.height/a,data:{...e.data,__isOverlay:t}},s=e.data?.originalImage||e.data?.image;if(e.type===`upload`&&s&&s.startsWith(`data:`))try{let e=await o(s),{originalImage:t,...n}=r.data||{};r.data={...n,image:e,__isOverlay:!0}}catch(e){throw console.warn(`Error uploading overlay:`,e),Error(`Upload overlay gagal: ${e?.message||String(e)}. Coba ulangi (atau pakai gambar overlay yang lebih kecil).`)}f.push(r),console.log(` [SAVE] Added overlay element:`,{id:e.id?.substring(0,8),type:e.type,zIndex:r.zIndex,__isOverlay:r.data?.__isOverlay,hasImage:!!r.data?.image,imagePreview:r.data?.image?.substring(0,60)})}console.log(` [SAVE] Final otherElements count:`,f.length);let m={name:ee.trim(),description:I.trim(),category:R.join(`, `),categories:R,maxCaptures:t.length,duplicatePhotos:!1,is_hidden:z,slots:d,createdBy:r?.email||`admin`,canvasBackground:re,canvasWidth:i,canvasHeight:a,layout:{aspectRatio:D,orientation:`portrait`,backgroundColor:re,elements:f}},h;u&&n?(h=await Ik.updateFrame(n,m,c),h.success&&V(`success`,`Frame "${ee}" berhasil diupdate!`)):(h=await Ik.createFrame(m,c),h.success&&V(`success`,`Frame "${ee}" berhasil diupload!`)),h.success?(F(``),L(``),te([`Fremio Series`]),setTimeout(()=>e(`/admin/frames`),1500)):V(`error`,h.message||`Gagal menyimpan frame`)}catch(t){console.error(`Upload error:`,t),t.message.includes(`No token`)||t.message.includes(`token`)?(V(`error`,`Sesi anda telah berakhir. Silakan login ulang.`),e(`/login`)):t.message.includes(`Admin access`)?V(`error`,`Akses ditolak. Anda bukan admin.`):t.message.includes(`Load failed`)?V(`error`,`Upload gagal (Load failed). Biasanya ini terjadi karena request upload terlalu besar (413). Silakan coba upload lagi; thumbnail sudah dikompres supaya lebih kecil.`):V(`error`,`Error: `+t.message)}finally{l(!1)}},Ie=()=>{if(!v)return null;let e=``,t=null;if(Se)switch(v){case`background-color`:e=`Warna Background`,t=(0,G.jsx)(RP,{value:re,onChange:e=>ce(e),gradientColor1:C,gradientColor2:T,setGradientColor1:w,setGradientColor2:E});break;case`background-photo`:e=`Foto Background`,t=(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__actions`,children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>{Oe(),y(null)},className:`create-mobile-property-panel__action`,children:we?`Ganti foto background`:`Tambah foto background`}),we&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`button`,{type:`button`,onClick:()=>{let{width:e,height:t}=Te(D);ve({canvasWidth:e,canvasHeight:t}),y(null)},className:`create-mobile-property-panel__action`,children:`Sesuaikan ke kanvas`}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>{le(we.id),_e(),y(null)},className:`create-mobile-property-panel__action create-mobile-property-panel__action--danger`,children:`Hapus foto background`})]})]});break;default:break}else if(xe){let n=xe.data??{};switch(v){case`text-edit`:e=`Edit Teks`,t=(0,G.jsx)(`textarea`,{className:`create-mobile-property-panel__textarea`,rows:4,value:n.text??``,onChange:e=>oe(xe.id,{data:{text:e.target.value}})});break;case`text-color`:case`shape-color`:case`photo-color`:e=`Warna`,t=(0,G.jsx)(RP,{value:n.fill??n.color??`#F4D3C2`,onChange:e=>oe(xe.id,{data:xe.type===`text`?{color:e}:{fill:e}})});break;case`layer-order`:e=`Urutan Lapisan`,t=(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__actions`,style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`},children:[(0,G.jsxs)(`button`,{type:`button`,onClick:()=>pe(xe.id),className:`create-mobile-property-panel__action`,children:[(0,G.jsx)(_p,{size:18,style:{marginRight:`8px`}}),` Paling Depan`]}),(0,G.jsxs)(`button`,{type:`button`,onClick:()=>he(xe.id),className:`create-mobile-property-panel__action`,children:[(0,G.jsx)(lp,{size:18,style:{marginRight:`8px`}}),` Kedepankan`]}),(0,G.jsxs)(`button`,{type:`button`,onClick:()=>me(xe.id),className:`create-mobile-property-panel__action`,children:[(0,G.jsx)(gp,{size:18,style:{marginRight:`8px`}}),` Paling Belakang`]}),(0,G.jsxs)(`button`,{type:`button`,onClick:()=>ge(xe.id),className:`create-mobile-property-panel__action`,children:[(0,G.jsx)(sp,{size:18,style:{marginRight:`8px`}}),` Kebelakangkan`]})]});break;default:break}}return t?(0,G.jsxs)(Qf.div,{className:`create-mobile-property-panel`,initial:{opacity:0,y:32},animate:{opacity:1,y:0},exit:{opacity:0,y:32},transition:{type:`spring`,stiffness:360,damping:32},children:[(0,G.jsxs)(`div`,{className:`create-mobile-property-panel__header`,children:[(0,G.jsx)(`span`,{children:e}),(0,G.jsx)(`button`,{type:`button`,onClick:()=>y(null),className:`create-mobile-property-panel__close`,children:(0,G.jsx)(Cm,{size:18,strokeWidth:2.5})})]}),(0,G.jsx)(`div`,{className:`create-mobile-property-panel__content`,children:t})]},v):null};return(0,G.jsxs)(`div`,{className:`create-page`,children:[m&&(0,G.jsx)(Qf.div,{className:`create-toast-wrapper`,initial:{opacity:0,y:-12,scale:.94},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:.94},children:(0,G.jsxs)(`div`,{className:`create-toast ${m.type===`success`?`create-toast--success`:`create-toast--error`}`,children:[m.type===`success`?(0,G.jsx)(bp,{size:18}):(0,G.jsx)(_m,{size:18}),(0,G.jsx)(`span`,{children:m.message})]})}),(0,G.jsxs)(`div`,{className:`create-grid`,children:[!g&&(0,G.jsxs)(Qf.aside,{variants:BV,initial:`hidden`,animate:`visible`,transition:{delay:.05},className:`create-panel create-panel--tools`,style:{overflowY:`auto`,overflowX:`hidden`},children:[(0,G.jsx)(`h2`,{className:`create-panel__title`,children:`Tools`}),(0,G.jsx)(`div`,{className:`create-tools__list`,children:Me.map(e=>{let t=e.icon;return(0,G.jsxs)(`button`,{type:`button`,onClick:()=>Pe(e),className:`create-tools__button ${e.isActive?`create-tools__button--active`:``}`.trim(),children:[(0,G.jsx)(t,{size:20,strokeWidth:2}),(0,G.jsx)(`span`,{children:e.label})]},e.id)})}),(0,G.jsxs)(`div`,{style:{marginTop:`24px`,borderTop:`1px solid #f0e6e0`,paddingTop:`16px`},children:[(0,G.jsx)(`h3`,{style:{fontSize:`13px`,fontWeight:`600`,color:`#374151`,marginBottom:`12px`},children:u?` Edit Frame`:` Frame Settings`}),f&&(0,G.jsx)(`div`,{style:{padding:`12px`,background:`#f0f9ff`,borderRadius:`8px`,marginBottom:`12px`,fontSize:`13px`,color:`#0369a1`},children:` Memuat data frame...`}),(0,G.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,G.jsx)(`label`,{style:{fontSize:`12px`,color:`#6b7280`,display:`block`,marginBottom:`4px`},children:`Nama Frame *`}),(0,G.jsx)(`input`,{type:`text`,value:ee,onChange:e=>F(e.target.value),placeholder:`contoh: FremioSeries-Blue-6`,style:{width:`100%`,padding:`8px 10px`,fontSize:`13px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,boxSizing:`border-box`}})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,G.jsx)(`label`,{style:{fontSize:`12px`,color:`#6b7280`,display:`block`,marginBottom:`4px`},children:`Deskripsi`}),(0,G.jsx)(`textarea`,{value:I,onChange:e=>L(e.target.value),placeholder:`Deskripsi frame...`,rows:2,style:{width:`100%`,padding:`8px 10px`,fontSize:`13px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,resize:`none`,boxSizing:`border-box`}})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,G.jsx)(`label`,{style:{fontSize:`12px`,color:`#6b7280`,display:`block`,marginBottom:`8px`},children:`Kategori`}),(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`,padding:`8px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,backgroundColor:`#fafafa`},children:VV.map(e=>(0,G.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,cursor:`pointer`,padding:`4px 6px`,borderRadius:`6px`,backgroundColor:R.includes(e)?`#f0e6ff`:`transparent`},children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:R.includes(e),onChange:()=>Ee(e),style:{width:`16px`,height:`16px`,accentColor:`#8b5cf6`,cursor:`pointer`}}),(0,G.jsx)(`span`,{style:{fontSize:`13px`,color:`#374151`},children:e})]},e))})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,G.jsx)(`label`,{style:{fontSize:`12px`,color:`#6b7280`,display:`block`,marginBottom:`8px`},children:`Visibilitas`}),(0,G.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,cursor:`pointer`,padding:`8px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,backgroundColor:`#fafafa`},children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:z,onChange:e=>B(e.target.checked),style:{width:`16px`,height:`16px`,accentColor:`#8b5cf6`,cursor:`pointer`}}),(0,G.jsx)(`span`,{style:{fontSize:`13px`,color:`#374151`},children:`Hide setelah upload (tidak tampil di user)`})]})]})]}),(0,G.jsxs)(`button`,{type:`button`,onClick:()=>e(`/admin/frames`),style:{marginTop:`16px`,display:`flex`,alignItems:`center`,gap:`8px`,padding:`10px 16px`,fontSize:`13px`,color:`#6b7280`,background:`none`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,width:`100%`,justifyContent:`center`},children:[(0,G.jsx)(cp,{size:16}),`Kembali ke Frames`]})]}),(0,G.jsxs)(Qf.section,{variants:BV,initial:`hidden`,animate:`visible`,transition:{delay:.1},className:`create-preview`,children:[(0,G.jsx)(`h2`,{className:`create-preview__title`,children:`Preview`}),(0,G.jsx)(`div`,{className:`create-preview__body`,children:(0,G.jsx)(`div`,{ref:s,className:`create-preview__frame`,"data-canvas-ratio":D,children:(0,G.jsx)(nP,{elements:H,selectedElementId:ne,canvasBackground:re,aspectRatio:D,previewConstraints:N,onSelect:e=>{y(null),e===null?_e():se(e===`background`?`background`:e)},onUpdate:oe,onBringToFront:pe,onRemove:le,onDuplicate:ue,onToggleLock:de,onResizeUpload:fe,isBackgroundLocked:k,onToggleBackgroundLock:Ae,onResetBackground:je})})}),(0,G.jsx)(Qf.button,{type:`button`,onClick:Fe,disabled:c||f,className:`create-save`,whileTap:{scale:.97},whileHover:{y:-3},style:{background:u?`linear-gradient(135deg, #10b981 0%, #059669 100%)`:`linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%)`},children:c?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`svg`,{className:`create-save__spinner`,viewBox:`0 0 24 24`,fill:`none`,children:[(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`,opacity:`0.25`}),(0,G.jsx)(`path`,{fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z`,opacity:`0.75`})]}),u?`Menyimpan...`:`Mengupload...`]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ym,{size:18,strokeWidth:2.5}),u?`Update Frame`:`Upload Frame`]})})]}),!g&&(0,G.jsxs)(Qf.aside,{variants:BV,initial:`hidden`,animate:`visible`,transition:{delay:.15},className:`create-panel create-panel--properties`,children:[(0,G.jsx)(`h2`,{className:`create-panel__title`,children:`Properties`}),(0,G.jsx)(`div`,{className:`create-panel__body`,children:(0,G.jsx)(UP,{selectedElement:be,canvasBackground:re,onBackgroundChange:ce,onUpdateElement:oe,onDeleteElement:le,clearSelection:_e,onSelectBackgroundPhoto:()=>{if(k){V(`info`,`Background dikunci.`,2e3);return}we?se(we.id):Oe()},onFitBackgroundPhoto:ve,backgroundPhoto:we,onBringToFront:pe,onSendToBack:me,onBringForward:he,onSendBackward:ge,canvasAspectRatio:D,onCanvasAspectRatioChange:O,showCanvasSizeMode:x,gradientColor1:C,gradientColor2:T,setGradientColor1:w,setGradientColor2:E,isBackgroundLocked:k,onToggleBackgroundLock:Ae,pendingPhotoTool:j,onConfirmAddPhoto:(e=1,t=1)=>{M(!1);let n=950-(t-1)*30,r=1640-(e-1)*30,i=Math.floor(n/t),a=Math.floor(r/e),o=null;for(let n=0;n<e;n++)for(let e=0;e<t;e++){let t=65+e*(i+30),r=140+n*(a+30),s=U(`photo`,{x:t,y:r,width:i,height:a});s&&(o=s)}o&&se(o)},onCancelPhotoTool:()=>M(!1)})})]})]}),g&&(0,G.jsxs)(G.Fragment,{children:[Ie(),j?(0,G.jsxs)(`nav`,{className:`create-mobile-toolbar create-mobile-toolbar--grid`,children:[(0,G.jsxs)(`button`,{type:`button`,onClick:()=>M(!1),className:`create-mobile-toolbar__button create-mobile-toolbar__button--back`,children:[(0,G.jsx)(Cm,{size:20,strokeWidth:2.4}),(0,G.jsx)(`span`,{children:`Batal`})]}),[{id:`1x1`,rows:1,cols:1,label:`11`},{id:`2x1`,rows:2,cols:1,label:`21`},{id:`1x2`,rows:1,cols:2,label:`12`},{id:`2x2`,rows:2,cols:2,label:`22`},{id:`3x2`,rows:3,cols:2,label:`32`}].map(e=>(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{M(!1);let t=950-(e.cols-1)*30,n=1640-(e.rows-1)*30,r=Math.floor(t/e.cols),i=Math.floor(n/e.rows),a=null;for(let t=0;t<e.rows;t++)for(let n=0;n<e.cols;n++){let e=65+n*(r+30),o=140+t*(i+30),s=U(`photo`,{x:e,y:o,width:r,height:i});s&&(a=s)}a&&se(a)},className:`create-mobile-toolbar__button`,children:[(0,G.jsx)(Fp,{size:20,strokeWidth:2.4}),(0,G.jsx)(`span`,{children:e.label})]},e.id))]}):(0,G.jsx)(`nav`,{className:`create-mobile-toolbar ${Ce?`create-mobile-toolbar--properties`:``}`.trim(),children:(Ce?Ne:Me).map(e=>{let t=e.icon,n=Ce?v===e.id:!!e.isActive,r=Ce?e.label:e.mobileLabel??e.label;return(0,G.jsxs)(`button`,{type:`button`,onClick:()=>{Ce?y(t=>t===e.id?null:e.id):Pe(e)},className:`create-mobile-toolbar__button ${n?`create-mobile-toolbar__button--active`:``}`.trim(),children:[(0,G.jsx)(t,{size:20,strokeWidth:2.4}),(0,G.jsx)(`span`,{children:r})]},e.id)})})]}),(0,G.jsx)(`input`,{ref:i,type:`file`,accept:`image/*`,style:{position:`absolute`,left:`-9999px`,opacity:0},onChange:ke})]})}var UV=u(dN()),WV={hidden:{opacity:0,y:16},visible:{opacity:1,y:0}};function GV(){let e=Le(),[t]=un(),n=t.get(`edit`),{user:r}=In(),i=(0,b.useRef)(null),a=(0,b.useRef)(`upload`),o=(0,b.useRef)(null),s=(0,b.useRef)(null),[c,l]=(0,b.useState)(!1),[u,d]=(0,b.useState)(!1),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(null),[g,_]=(0,b.useState)(`9:16`),[v,y]=(0,b.useState)(!1),[x,S]=(0,b.useState)(`#667eea`),[C,w]=(0,b.useState)(`#764ba2`),[T,E]=(0,b.useState)(!1),[D,O]=(0,b.useState)(!1),[k,A]=(0,b.useState)({maxWidth:280,maxHeight:500}),[j,M]=(0,b.useState)(``),[N,P]=(0,b.useState)(``),[ee,F]=(0,b.useState)([`Fremio Series`]),I=[`Fremio Series`,`Wedding`,`Birthday`,`Graduation`,`Event`,`Music`,`Custom`],L=e=>{F(t=>t.includes(e)?t.length===1?t:t.filter(t=>t!==e):[...t,e])},{elements:R,selectedElementId:te,canvasBackground:z,addElement:B,addUploadElement:V,addBackgroundPhoto:H,updateElement:ne,selectElement:re,setCanvasBackground:U,removeElement:ie,duplicateElement:ae,toggleLock:oe,resizeUploadImage:se,bringToFront:ce,sendToBack:le,bringForward:ue,sendBackward:de,clearSelection:fe,fitBackgroundPhotoToCanvas:pe,setElements:me}=yF(TF(e=>({elements:e.elements,selectedElementId:e.selectedElementId,canvasBackground:e.canvasBackground,addElement:e.addElement,addUploadElement:e.addUploadElement,addBackgroundPhoto:e.addBackgroundPhoto,updateElement:e.updateElement,selectElement:e.selectElement,setCanvasBackground:e.setCanvasBackground,removeElement:e.removeElement,duplicateElement:e.duplicateElement,toggleLock:e.toggleLock,resizeUploadImage:e.resizeUploadImage,bringToFront:e.bringToFront,sendToBack:e.sendToBack,bringForward:e.bringForward,sendBackward:e.sendBackward,clearSelection:e.clearSelection,fitBackgroundPhotoToCanvas:e.fitBackgroundPhotoToCanvas,setElements:e.setElements})));(0,b.useEffect)(()=>{(async()=>{if(n){p(!0),d(!0);try{console.log(` Loading frame for edit:`,n);let e=await Ik.getFrameById(n);if(e){console.log(` Frame loaded:`,e),console.log(` Frame layout:`,e.layout),console.log(` Frame layout.elements:`,e.layout?.elements),M(e.name||``),P(e.description||``),e.categories&&Array.isArray(e.categories)?F(e.categories):e.category&&F(e.category.split(`, `).map(e=>e.trim())),(e.canvasBackground||e.layout?.backgroundColor)&&U(e.canvasBackground||e.layout?.backgroundColor||`#f7f1ed`);let t=[];if(e.imageUrl||e.thumbnailUrl||e.imagePath||e.image_url){let n=e.imageUrl||e.thumbnailUrl||e.imagePath||e.image_url;console.log(` Adding background photo:`,n),t.push({id:`background-photo-1`,type:`background-photo`,x:0,y:0,width:UM,height:WM,zIndex:0,data:{image:n,objectFit:`cover`,label:`Background`}})}e.slots&&Array.isArray(e.slots)&&(console.log(` Adding photo slots:`,e.slots.length),e.slots.forEach((e,n)=>{t.push({id:e.id||`photo_${n+1}`,type:`photo`,x:e.left*UM,y:e.top*WM,width:e.width*UM,height:e.height*WM,rotation:typeof e.rotation==`number`?e.rotation:0,zIndex:1,data:{photoIndex:e.photoIndex===void 0?n:e.photoIndex,borderRadius:e.borderRadius||0}})})),e.layout?.elements&&Array.isArray(e.layout.elements)?(console.log(` Restoring other elements:`,e.layout.elements.length,e.layout.elements),e.layout.elements.forEach(e=>{console.log(` Restoring element:`,e.type,e.id,`zIndex:`,e.zIndex,`aspectRatio:`,e.data?.imageAspectRatio);let n=e.widthNorm===void 0?e.width:e.widthNorm*UM,r=e.heightNorm===void 0?e.height:e.heightNorm*WM;if(e.type===`upload`&&e.data?.imageAspectRatio){let t=e.data.imageAspectRatio;r=n/t,console.log(` Recalculated dimensions:`,{width:n,height:r,aspectRatio:t})}let i={...e,x:e.xNorm===void 0?e.x:e.xNorm*UM,y:e.yNorm===void 0?e.y:e.yNorm*WM,width:n,height:r,zIndex:Math.max(e.zIndex||10,10)};delete i.xNorm,delete i.yNorm,delete i.widthNorm,delete i.heightNorm,t.push(i)})):console.log(` No layout.elements found in frame data`),console.log(` Total elements to set:`,t.length,t.map(e=>e.type)),me(t),he(`success`,`Frame "${e.name}" dimuat untuk diedit`)}else he(`error`,`Frame tidak ditemukan`),d(!1)}catch(e){console.error(` Error loading frame:`,e),he(`error`,`Gagal memuat frame: `+e.message),d(!1)}finally{p(!1)}}else me([]),U(`#f7f1ed`),fe(),d(!1)})()},[n]);let he=(0,b.useCallback)((e,t,n=3200)=>{s.current&&clearTimeout(s.current),h({type:e,message:t}),s.current=setTimeout(()=>{h(null)},n)},[]),ge=(0,b.useMemo)(()=>te===`background`?`background`:R.find(e=>e.id===te)||null,[R,te]),_e=(0,b.useMemo)(()=>R.find(e=>e.type===`background-photo`)||null,[R]),ve=(0,b.useCallback)(e=>{if(typeof e!=`string`)return{width:UM,height:WM};let[t,n]=e.split(`:`).map(Number);return!t||!n?{width:UM,height:WM}:n>=t?{width:UM,height:Math.round(UM*n/t)}:{width:Math.round(WM*t/n),height:WM}},[]),ye=(0,b.useCallback)(()=>{a.current=`upload`,i.current?.click()},[]),be=(0,b.useCallback)(()=>{a.current=`background`,i.current?.click()},[]);(0,b.useEffect)(()=>{let e=()=>{be()};return window.addEventListener(`creator:request-background-upload`,e),()=>{window.removeEventListener(`creator:request-background-upload`,e)}},[be]);let xe=e=>{let t=e.target.files?.[0];if(!t)return;let n=new FileReader;n.onload=()=>{let e=n.result;if(typeof e==`string`)if(a.current===`background`){let{width:t,height:n}=ve(g);H(e,{canvasWidth:t,canvasHeight:n}),he(`success`,`Background foto diperbarui.`,2200)}else V(e)},n.readAsDataURL(t),e.target.value=``},Se=(0,b.useCallback)(()=>{E(e=>!e),he(`success`,T?`Background unlocked`:`Background locked`,1500)},[T,he]),Ce=(0,b.useMemo)(()=>[{id:`canvas-size`,icon:qp,label:`Ukuran Canvas`,isActive:v,onClick:()=>{y(e=>!e),fe()}},{id:`background`,icon:()=>(0,G.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`}),(0,G.jsx)(`path`,{d:`M12 2a10 10 0 0 1 0 20`,fill:`currentColor`,opacity:`0.3`})]}),label:`Background`,isActive:te===`background`,onClick:()=>{y(!1),re(`background`)}},{id:`photo`,icon:Rp,label:`Area Foto`,isActive:!1,onClick:()=>{y(!1),O(!0),fe()}},{id:`text`,icon:vm,label:`Add Text`,isActive:!1,onClick:()=>{y(!1),B(`text`)}},{id:`shape`,icon:lm,label:`Shape`,isActive:!1,onClick:()=>{y(!1),B(`shape`)}},{id:`upload`,icon:Cp,label:`Unggahan`,isActive:!1,onClick:()=>{y(!1),ye()}}],[v,te,B,re,fe,ye]),we=async()=>{if(c)return;if(!j.trim()){he(`error`,`Nama frame harus diisi!`);return}let t=R.filter(e=>e.type===`photo`);if(t.length===0){he(`error`,`Tambahkan minimal 1 Area Foto!`);return}let i=R.find(e=>e.type===`background-photo`);l(!0);try{let{width:a,height:s}=ve(g),c=null,d=null,f=!1;if(i)c=i.data?.image||i.data?.src||i.src,console.log(` Background photo element:`,i),console.log(` Frame image data URL length:`,c?.length||0),f=c?.startsWith(`http`),!f&&c&&(d=await(await fetch(c)).blob(),console.log(` Frame image blob size:`,d.size,`bytes`));else if(console.log(` No background photo, capturing canvas...`),o.current)try{c=(await(0,UV.default)(o.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:z||`#ffffff`})).toDataURL(`image/png`,.9),d=await(await fetch(c)).blob(),console.log(` Canvas captured, blob size:`,d.size,`bytes`)}catch(e){console.error(` Failed to capture canvas:`,e),he(`error`,`Gagal membuat gambar frame dari canvas`),l(!1);return}let p=t.map((e,t)=>({id:e.id,left:e.x/a,top:e.y/s,width:e.width/a,height:e.height/s,zIndex:1,photoIndex:t,borderRadius:e.data?.borderRadius||0,rotation:Number.isFinite(e.rotation)?e.rotation:0})),m=[];for(let e of R.filter(e=>e.type!==`photo`&&e.type!==`background-photo`)){let t={...e,xNorm:e.x/a,yNorm:e.y/s,widthNorm:e.width/a,heightNorm:e.height/s},n=e.data?.originalImage||e.data?.image;if(e.type===`upload`&&n&&n.startsWith(`data:`)){console.log(` Uploading overlay element image to backend (/api/upload/overlay)...`),console.log(` Using original image:`,!!e.data?.originalImage);try{let r=n,i=r.match(/data:([^;]+);/),a=i?i[1]:`image/png`,o=r.split(`,`)[1],s=atob(o),c=new Uint8Array(s.length);for(let e=0;e<s.length;e++)c[e]=s.charCodeAt(e);let l=new Blob([c],{type:a});console.log(` Blob created:`,{size:l.size,type:l.type});let u=`overlay_${e.id.substring(0,8)}.png`,d=await Ik.uploadOverlayImage(l,u);if(d?.imagePath){console.log(` Overlay uploaded to backend:`,d.imagePath);let{originalImage:e,...n}=t.data||{};t.data={...n,image:d.imagePath}}else console.warn(` Failed to upload overlay, keeping data URL`)}catch(e){console.warn(` Error uploading overlay:`,e,e.stack)}}m.push(t)}console.log(` Other elements to save:`,m.length,m.map(e=>({type:e.type,id:e.id})));let h={name:j.trim(),description:N.trim(),category:ee.join(`, `),categories:ee,maxCaptures:t.length,duplicatePhotos:!1,slots:p,createdBy:r?.email||`admin`,canvasBackground:z,canvasWidth:a,canvasHeight:s,layout:{aspectRatio:g,orientation:`portrait`,backgroundColor:z,elements:m}};console.log(` Frame data to save:`,{...h,layout:{...h.layout,elementsCount:h.layout.elements.length}});let _;if(u&&n)console.log(` Updating frame:`,n),_=await Ik.updateFrame(n,h,d),_.success&&he(`success`,`Frame "${j}" berhasil diupdate!`);else{if(console.log(` Creating new frame`),!d)throw Error(`Gambar frame tidak ditemukan! Pastikan sudah upload gambar di Background.`);_=await Ik.createFrame(h,d),_.success&&he(`success`,`Frame "${j}" berhasil diupload!`)}_.success?(M(``),P(``),F([`Fremio Series`]),setTimeout(()=>e(`/admin/frames`),1500)):he(`error`,_.message||`Gagal menyimpan frame`)}catch(e){console.error(`Upload error:`,e),he(`error`,`Error: `+e.message)}finally{l(!1)}};return(0,G.jsxs)(`div`,{className:`create-page`,children:[(0,G.jsx)(`input`,{ref:i,type:`file`,accept:`image/*`,onChange:xe,style:{display:`none`}}),m&&(0,G.jsx)(Qf.div,{className:`create-toast-wrapper`,initial:{opacity:0,y:-12,scale:.94},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:.94},children:(0,G.jsxs)(`div`,{className:`create-toast ${m.type===`success`?`create-toast--success`:`create-toast--error`}`,children:[m.type===`success`?(0,G.jsx)(bp,{size:18}):(0,G.jsx)(_m,{size:18}),(0,G.jsx)(`span`,{children:m.message})]})}),(0,G.jsxs)(`div`,{className:`create-grid`,children:[(0,G.jsxs)(Qf.aside,{variants:WV,initial:`hidden`,animate:`visible`,transition:{delay:.05},className:`create-panel create-panel--tools`,children:[(0,G.jsx)(`h2`,{className:`create-panel__title`,children:`Tools`}),(0,G.jsx)(`div`,{className:`create-tools__list`,children:Ce.map(e=>{let t=e.icon;return(0,G.jsxs)(`button`,{type:`button`,onClick:e.onClick,className:`create-tools__button ${e.isActive?`create-tools__button--active`:``}`,children:[(0,G.jsx)(t,{size:20,strokeWidth:2}),(0,G.jsx)(`span`,{children:e.label})]},e.id)})}),(0,G.jsxs)(`div`,{style:{marginTop:`24px`,borderTop:`1px solid #f0e6e0`,paddingTop:`16px`},children:[(0,G.jsx)(`h3`,{style:{fontSize:`13px`,fontWeight:`600`,color:`#374151`,marginBottom:`12px`},children:u?` Edit Frame`:` Frame Settings`}),f&&(0,G.jsx)(`div`,{style:{padding:`12px`,background:`#f0f9ff`,borderRadius:`8px`,marginBottom:`12px`,fontSize:`13px`,color:`#0369a1`},children:` Memuat data frame...`}),(0,G.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,G.jsx)(`label`,{style:{fontSize:`12px`,color:`#6b7280`,display:`block`,marginBottom:`4px`},children:`Nama Frame *`}),(0,G.jsx)(`input`,{type:`text`,value:j,onChange:e=>M(e.target.value),placeholder:`contoh: FremioSeries-Blue-6`,style:{width:`100%`,padding:`8px 10px`,fontSize:`13px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,boxSizing:`border-box`}})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,G.jsx)(`label`,{style:{fontSize:`12px`,color:`#6b7280`,display:`block`,marginBottom:`4px`},children:`Deskripsi`}),(0,G.jsx)(`textarea`,{value:N,onChange:e=>P(e.target.value),placeholder:`Deskripsi frame...`,rows:2,style:{width:`100%`,padding:`8px 10px`,fontSize:`13px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,resize:`none`,boxSizing:`border-box`}})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,G.jsx)(`label`,{style:{fontSize:`12px`,color:`#6b7280`,display:`block`,marginBottom:`8px`},children:`Kategori (pilih satu atau lebih)`}),(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`,padding:`8px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,backgroundColor:`#fafafa`},children:I.map(e=>(0,G.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,cursor:`pointer`,padding:`4px 6px`,borderRadius:`6px`,backgroundColor:ee.includes(e)?`#f0e6ff`:`transparent`,transition:`background-color 0.2s`},children:[(0,G.jsx)(`input`,{type:`checkbox`,checked:ee.includes(e),onChange:()=>L(e),style:{width:`16px`,height:`16px`,accentColor:`#8b5cf6`,cursor:`pointer`}}),(0,G.jsx)(`span`,{style:{fontSize:`13px`,color:`#374151`},children:e})]},e))}),ee.length>0&&(0,G.jsx)(`div`,{style:{marginTop:`8px`,fontSize:`11px`,color:`#8b5cf6`,display:`flex`,flexWrap:`wrap`,gap:`4px`},children:ee.map(e=>(0,G.jsx)(`span`,{style:{background:`linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%)`,color:`white`,padding:`2px 8px`,borderRadius:`12px`,fontSize:`11px`},children:e},e))})]})]})]}),(0,G.jsxs)(Qf.section,{variants:WV,initial:`hidden`,animate:`visible`,transition:{delay:.1},className:`create-preview`,children:[(0,G.jsx)(`h2`,{className:`create-preview__title`,children:`Preview`}),(0,G.jsx)(`div`,{className:`create-preview__body`,children:(0,G.jsx)(`div`,{ref:o,className:`create-preview__frame`,"data-canvas-ratio":g,children:(0,G.jsx)(nP,{elements:R,selectedElementId:te,canvasBackground:z,aspectRatio:g,previewConstraints:k,onSelect:e=>{if(e===null)fe();else if(e===`background`){if(T){he(`info`,`Background dikunci.`,2e3);return}re(`background`)}else re(e)},onUpdate:ne,onBringToFront:ce,onRemove:ie,onDuplicate:ae,onToggleLock:oe,onResizeUpload:se})})}),(0,G.jsx)(Qf.button,{type:`button`,onClick:we,disabled:c||f,className:`create-save`,whileTap:{scale:.97},whileHover:{y:-3},style:{background:u?`linear-gradient(135deg, #10b981 0%, #059669 100%)`:`linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%)`},children:c?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`svg`,{className:`create-save__spinner`,viewBox:`0 0 24 24`,fill:`none`,children:[(0,G.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`,opacity:`0.25`}),(0,G.jsx)(`path`,{fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z`,opacity:`0.75`})]}),u?`Menyimpan...`:`Mengupload...`]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ym,{size:18,strokeWidth:2.5}),u?`Update Frame`:`Upload Frame`]})})]}),(0,G.jsxs)(Qf.aside,{variants:WV,initial:`hidden`,animate:`visible`,transition:{delay:.15},className:`create-panel create-panel--properties`,children:[(0,G.jsx)(`h2`,{className:`create-panel__title`,children:`Properties`}),(0,G.jsx)(`div`,{className:`create-panel__body`,children:(0,G.jsx)(UP,{selectedElement:ge,canvasBackground:z,onBackgroundChange:U,onUpdateElement:ne,onDeleteElement:ie,clearSelection:fe,onSelectBackgroundPhoto:()=>{if(T){he(`info`,`Background dikunci.`,2e3);return}_e?re(_e.id):be()},onFitBackgroundPhoto:pe,backgroundPhoto:_e,onBringToFront:ce,onSendToBack:le,onBringForward:ue,onSendBackward:de,canvasAspectRatio:g,onCanvasAspectRatioChange:_,showCanvasSizeMode:v,gradientColor1:x,gradientColor2:C,setGradientColor1:S,setGradientColor2:w,isBackgroundLocked:T,onToggleBackgroundLock:Se,pendingPhotoTool:D,onConfirmAddPhoto:(e=1,t=1)=>{O(!1);let n=950-(t-1)*30,r=1640-(e-1)*30,i=Math.floor(n/t),a=Math.floor(r/e),o=null;for(let n=0;n<e;n++)for(let e=0;e<t;e++){let t=65+e*(i+30),r=140+n*(a+30),s=B(`photo`,{x:t,y:r,width:i,height:a});s&&(o=s)}o&&re(o)},onCancelPhotoTool:()=>O(!1)})})]})]})]})}var KV=`https://fremio-api-proxy.array111103.workers.dev/api`;async function qV(e,t={}){try{let n=await fetch(`${KV}${e}`,{...t,headers:{"Content-Type":`application/json`,...t.headers}});if(!n.ok)throw Error(`API error: ${n.status}`);return await n.json()}catch(t){throw console.error(`API call failed for ${e}:`,t),t}}async function JV(){try{return(await qV(`/users`)).map(e=>({id:e.id,firebase_uid:e.firebase_uid,email:e.email,displayName:e.display_name,photoURL:e.photo_url,createdAt:e.created_at,lastLoginAt:e.last_login_at,loginCount:e.login_count}))}catch(e){return console.error(`Failed to get users:`,e),[]}}function YV(){let e=Le(),{currentUser:t}=In(),[n,r]=(0,b.useState)([]),[i,a]=(0,b.useState)([]),[o,s]=(0,b.useState)([]),[c,l]=(0,b.useState)(`emails`),[u,d]=(0,b.useState)({total:0,kreators:0,regular:0,active:0,banned:0}),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(``),[g,_]=(0,b.useState)(`all`),[v,y]=(0,b.useState)(`all`),[x,S]=(0,b.useState)(null),[C,T]=(0,b.useState)(!1),[E,D]=(0,b.useState)(!1),[O,k]=(0,b.useState)(!1),[A,j]=(0,b.useState)(``),[M,N]=(0,b.useState)(``),[P,ee]=(0,b.useState)(!1);(0,b.useEffect)(()=>{L(),F()},[]);let F=async()=>{try{console.log(` Fetching registered users from VPS...`);let e=(await JV()).map(e=>({id:e.id,email:e.email,name:e.displayName||`Unknown`,role:`user`,status:`active`,createdAt:e.createdAt,lastLoginAt:e.lastLoginAt,loginCount:e.loginCount}));console.log(` Registered emails fetched:`,e.length),s(e)}catch(e){console.error(` Error fetching registered emails:`,e)}},I=async()=>{if(!A.trim()){alert(`Please enter an email address`);return}ee(!0);try{let e=A.trim().toLowerCase(),t={id:`manual_${Date.now()}`,email:e,name:M.trim()||A.split(`@`)[0],displayName:M.trim()||A.split(`@`)[0],role:`user`,status:`active`,createdAt:new Date().toISOString()},n=JSON.parse(localStorage.getItem(`fremio_users`)||`[]`);n.push(t),localStorage.setItem(`fremio_users`,JSON.stringify(n)),console.log(` User added manually:`,A),alert(`User ${A} added successfully!`),j(``),N(``),k(!1),F(),L()}catch(e){console.error(` Error adding user:`,e),alert(`Failed to add user: `+e.message)}ee(!1)};(0,b.useEffect)(()=>{let e=[...n];if(m.trim()){let t=m.toLowerCase();e=e.filter(e=>e.name?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)||e.phone?.toLowerCase().includes(t))}g!==`all`&&(e=e.filter(e=>e.role===g)),v!==`all`&&(e=e.filter(e=>e.status===v)),a(e)},[m,g,v,n]);let L=async()=>{p(!0);try{console.log(` AdminUsers - Fetching users...`);let{getAllUsers:e,getUserStats:t}=await w(async()=>{let{getAllUsers:e,getUserStats:t}=await import(`./userService-mjujrh6i-t5WJA4h1.js`);return{getAllUsers:e,getUserStats:t}},[]),n=await e(),i=await t();console.log(` Users fetched:`,n),console.log(` Stats:`,i),r(n),a(n),d(i)}catch(e){console.error(`Error fetching users:`,e)}p(!1)},R=async()=>{try{console.log(` Initializing current user...`);let{saveUserToStorage:e}=await w(async()=>{let{saveUserToStorage:e}=await import(`./userService-mjujrh6i-t5WJA4h1.js`);return{saveUserToStorage:e}},[]);if(!t){alert(`No user logged in!`);return}let n=e({id:t.uid,uid:t.uid,email:t.email,name:t.displayName||t.email?.split(`@`)[0],displayName:t.displayName,role:t.role||`admin`,status:`active`,createdAt:new Date().toISOString()});console.log(` User initialized:`,n),alert(`Current user initialized successfully!`),L()}catch(e){console.error(`Error initializing user:`,e),alert(`Failed to initialize user`)}},te=async e=>{if(window.confirm(`Promote this user to Kreator? They will be able to create and submit frames.`))try{let{updateUserRole:n}=await w(async()=>{let{updateUserRole:e}=await import(`./userService-mjujrh6i-t5WJA4h1.js`);return{updateUserRole:e}},[]),r=await n(e,`kreator`,t.uid);r.success?(alert(`User promoted to Kreator!`),L()):alert(r.message||`Failed to promote user`)}catch(e){console.error(`Error promoting user:`,e),alert(`Failed to promote user`)}},z=async e=>{if(window.confirm(`Ban this user? They will not be able to access the platform.`))try{let{banUser:n}=await w(async()=>{let{banUser:e}=await import(`./userService-mjujrh6i-t5WJA4h1.js`);return{banUser:e}},[]),r=await n(e,t.uid,`Banned by admin`);r.success?(alert(`User banned!`),L()):alert(r.message||`Failed to ban user`)}catch(e){console.error(`Error banning user:`,e),alert(`Failed to ban user`)}},B=async e=>{if(window.confirm(`Unban this user? They will be able to access the platform again.`))try{let{unbanUser:n}=await w(async()=>{let{unbanUser:e}=await import(`./userService-mjujrh6i-t5WJA4h1.js`);return{unbanUser:e}},[]),r=await n(e,t.uid);r.success?(alert(`User unbanned!`),L()):alert(r.message||`Failed to unban user`)}catch(e){console.error(`Error unbanning user:`,e),alert(`Failed to unban user`)}},V=async e=>{if(window.confirm(`Delete this user permanently? This action cannot be undone. All their data will be deleted.`))try{let{deleteUser:n}=await w(async()=>{let{deleteUser:e}=await import(`./userService-mjujrh6i-t5WJA4h1.js`);return{deleteUser:e}},[]),r=await n(e,t.uid);r.success?(alert(`User deleted!`),L()):alert(r.message||`Failed to delete user`)}catch(e){console.error(`Error deleting user:`,e),alert(`Failed to delete user`)}};return f?(0,G.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,G.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{display:`inline-block`,width:`48px`,height:`48px`,border:`4px solid #f3f4f6`,borderTop:`4px solid var(--accent)`,borderRadius:`50%`,animation:`spin 1s linear infinite`,marginBottom:`16px`}}),(0,G.jsx)(`p`,{style:{color:`var(--text-secondary)`},children:`Loading users...`})]})}):(0,G.jsx)(`div`,{style:{background:`linear-gradient(180deg, #fdf7f4 0%, #fff 50%, #f7f1ed 100%)`,minHeight:`100vh`,padding:`32px 0 48px`},children:(0,G.jsxs)(`div`,{style:{maxWidth:`1120px`,margin:`0 auto`,padding:`0 16px`},children:[(0,G.jsxs)(`button`,{onClick:()=>e(`/admin`),className:`admin-button-secondary`,style:{display:`inline-flex`,alignItems:`center`,gap:`8px`,marginBottom:`16px`,padding:`10px 16px`},children:[(0,G.jsx)(cp,{size:18}),`Kembali ke Dashboard`]}),!isFirebaseConfigured&&(0,G.jsxs)(`div`,{className:`admin-alert`,children:[(0,G.jsx)(vp,{size:24,className:`admin-alert-icon`}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`admin-alert-title`,children:`LocalStorage Mode - UI Preview Only`}),(0,G.jsx)(`p`,{className:`admin-alert-message`,children:`Firebase is not configured. User management features are disabled. Setup Firebase to enable full functionality.`})]})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`32px`},children:[(0,G.jsx)(`h1`,{style:{fontSize:`clamp(22px, 4vw, 34px)`,fontWeight:`800`,color:`#222`,margin:`0 0 8px`},children:`User Management`}),(0,G.jsx)(`p`,{style:{margin:0,color:`var(--text-secondary)`,fontSize:`14px`},children:`Manage users, roles, and permissions`})]}),(0,G.jsxs)(`div`,{className:`admin-stats-grid`,style:{gridTemplateColumns:`repeat(auto-fit, minmax(180px, 1fr))`,marginBottom:`32px`},children:[(0,G.jsx)(XV,{title:`Registered Emails`,value:o.length,icon:(0,G.jsx)(Kp,{size:20}),color:`#8b5cf6`}),(0,G.jsx)(XV,{title:`Total Users`,value:u.total,icon:(0,G.jsx)(Sm,{size:20}),color:`#3b82f6`}),(0,G.jsx)(XV,{title:`Kreators`,value:u.kreators,icon:(0,G.jsx)(Dp,{size:20}),color:`#f59e0b`}),(0,G.jsx)(XV,{title:`Active`,value:u.active,icon:(0,G.jsx)(yp,{size:20}),color:`#06b6d4`}),(0,G.jsx)(XV,{title:`Banned`,value:u.banned,icon:(0,G.jsx)(up,{size:20}),color:`#ef4444`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`24px`,borderBottom:`2px solid #e5e7eb`,paddingBottom:`0`},children:[(0,G.jsxs)(`button`,{onClick:()=>l(`emails`),style:{padding:`12px 24px`,fontSize:`14px`,fontWeight:`600`,background:c===`emails`?`#8b5cf6`:`transparent`,color:c===`emails`?`white`:`#6b7280`,border:`none`,borderRadius:`8px 8px 0 0`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`-2px`,borderBottom:c===`emails`?`2px solid #8b5cf6`:`2px solid transparent`},children:[(0,G.jsx)(Kp,{size:16}),`Registered Emails (`,o.length,`)`]}),(0,G.jsxs)(`button`,{onClick:()=>l(`users`),style:{padding:`12px 24px`,fontSize:`14px`,fontWeight:`600`,background:c===`users`?`#3b82f6`:`transparent`,color:c===`users`?`white`:`#6b7280`,border:`none`,borderRadius:`8px 8px 0 0`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`-2px`,borderBottom:c===`users`?`2px solid #3b82f6`:`2px solid transparent`},children:[(0,G.jsx)(Sm,{size:16}),`User Management (`,u.total,`)`]})]}),c===`emails`&&(0,G.jsxs)(`div`,{className:`admin-card`,style:{marginBottom:`24px`},children:[(0,G.jsxs)(`div`,{className:`admin-card-header`,style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,flexWrap:`wrap`,gap:`12px`},children:[(0,G.jsxs)(`h3`,{style:{margin:0,display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(Kp,{size:20,color:`#8b5cf6`}),`Registered Email List`]}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,G.jsxs)(`button`,{onClick:()=>{F(),L()},style:{padding:`8px 16px`,fontSize:`13px`,fontWeight:`500`,background:`#f3f4f6`,color:`#374151`,border:`none`,borderRadius:`8px`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,G.jsx)(nm,{size:14}),`Refresh`]}),(0,G.jsxs)(`button`,{onClick:()=>{let e=o.map(e=>e.email).join(`
`);navigator.clipboard.writeText(e),D(!0),setTimeout(()=>D(!1),2e3)},style:{padding:`8px 16px`,fontSize:`13px`,fontWeight:`500`,background:E?`#10b981`:`#8b5cf6`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,G.jsx)(Tp,{size:14}),E?`Copied!`:`Copy All Emails`]}),(0,G.jsxs)(`button`,{onClick:()=>{let e=`Email,Name,Role,Status,Registered At
`+o.map(e=>`${e.email},${e.name},${e.role},${e.status},${e.createdAt||`N/A`}`).join(`
`),t=new Blob([e],{type:`text/csv`}),n=URL.createObjectURL(t),r=document.createElement(`a`);r.href=n,r.download=`registered-emails-${new Date().toISOString().split(`T`)[0]}.csv`,r.click(),URL.revokeObjectURL(n)},style:{padding:`8px 16px`,fontSize:`13px`,fontWeight:`500`,background:`#059669`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,G.jsx)(kp,{size:14}),`Export CSV`]}),(0,G.jsxs)(`button`,{onClick:()=>k(!0),style:{padding:`8px 16px`,fontSize:`13px`,fontWeight:`500`,background:`#3b82f6`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,G.jsx)(tm,{size:14}),`Add User`]})]})]}),(0,G.jsx)(`div`,{className:`admin-card-body`,children:o.length===0?(0,G.jsxs)(`div`,{style:{textAlign:`center`,padding:`48px 20px`,color:`#6b7280`},children:[(0,G.jsx)(Kp,{size:48,style:{marginBottom:`16px`,opacity:.5}}),(0,G.jsx)(`h4`,{style:{margin:`0 0 8px`,color:`#374151`},children:`No Registered Emails Yet`}),(0,G.jsx)(`p`,{style:{margin:0,fontSize:`14px`},children:`Users who register or login will appear here.`})]}):(0,G.jsx)(`div`,{style:{overflowX:`auto`},children:(0,G.jsxs)(`table`,{style:{width:`100%`,borderCollapse:`collapse`,fontSize:`14px`},children:[(0,G.jsx)(`thead`,{children:(0,G.jsxs)(`tr`,{style:{borderBottom:`2px solid #e5e7eb`},children:[(0,G.jsx)(`th`,{style:{padding:`12px 16px`,textAlign:`left`,fontWeight:`600`,color:`#374151`},children:`#`}),(0,G.jsx)(`th`,{style:{padding:`12px 16px`,textAlign:`left`,fontWeight:`600`,color:`#374151`},children:`Email`}),(0,G.jsx)(`th`,{style:{padding:`12px 16px`,textAlign:`left`,fontWeight:`600`,color:`#374151`},children:`Name`}),(0,G.jsx)(`th`,{style:{padding:`12px 16px`,textAlign:`left`,fontWeight:`600`,color:`#374151`},children:`Role`}),(0,G.jsx)(`th`,{style:{padding:`12px 16px`,textAlign:`left`,fontWeight:`600`,color:`#374151`},children:`Status`}),(0,G.jsx)(`th`,{style:{padding:`12px 16px`,textAlign:`left`,fontWeight:`600`,color:`#374151`},children:`Registered`})]})}),(0,G.jsx)(`tbody`,{children:o.map((e,t)=>(0,G.jsxs)(`tr`,{style:{borderBottom:`1px solid #f3f4f6`,transition:`background 0.2s`},onMouseEnter:e=>e.currentTarget.style.background=`#f9fafb`,onMouseLeave:e=>e.currentTarget.style.background=`transparent`,children:[(0,G.jsx)(`td`,{style:{padding:`12px 16px`,color:`#6b7280`},children:t+1}),(0,G.jsx)(`td`,{style:{padding:`12px 16px`},children:(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(Kp,{size:14,color:`#8b5cf6`}),(0,G.jsx)(`span`,{style:{fontWeight:`500`},children:e.email})]})}),(0,G.jsx)(`td`,{style:{padding:`12px 16px`,color:`#374151`},children:e.name}),(0,G.jsx)(`td`,{style:{padding:`12px 16px`},children:(0,G.jsx)(`span`,{style:{padding:`4px 10px`,borderRadius:`12px`,fontSize:`12px`,fontWeight:`500`,background:e.role===`admin`?`#fef2f2`:e.role===`kreator`?`#fef3c7`:`#f3f4f6`,color:e.role===`admin`?`#dc2626`:e.role===`kreator`?`#d97706`:`#6b7280`},children:e.role})}),(0,G.jsx)(`td`,{style:{padding:`12px 16px`},children:(0,G.jsx)(`span`,{style:{padding:`4px 10px`,borderRadius:`12px`,fontSize:`12px`,fontWeight:`500`,background:e.status===`active`?`#d1fae5`:`#fee2e2`,color:e.status===`active`?`#059669`:`#dc2626`},children:e.status})}),(0,G.jsx)(`td`,{style:{padding:`12px 16px`,color:`#6b7280`,fontSize:`13px`},children:e.createdAt?new Date(e.createdAt).toLocaleDateString(`id-ID`,{day:`numeric`,month:`short`,year:`numeric`,hour:`2-digit`,minute:`2-digit`}):`N/A`})]},e.id))})]})})})]}),c===`users`&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`div`,{className:`admin-card`,style:{marginBottom:`24px`},children:(0,G.jsx)(`div`,{className:`admin-card-body`,children:(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr auto auto`,gap:`12px`,alignItems:`center`},children:[(0,G.jsxs)(`div`,{style:{position:`relative`},children:[(0,G.jsx)(am,{size:18,style:{position:`absolute`,left:`12px`,top:`50%`,transform:`translateY(-50%)`,color:`var(--text-secondary)`}}),(0,G.jsx)(`input`,{type:`text`,value:m,onChange:e=>h(e.target.value),placeholder:`Search by name, email, or phone...`,style:{width:`100%`,padding:`10px 14px 10px 40px`,border:`1px solid var(--border)`,borderRadius:`10px`,fontSize:`14px`}})]}),(0,G.jsxs)(`select`,{value:g,onChange:e=>_(e.target.value),className:`admin-select`,style:{width:`160px`},children:[(0,G.jsx)(`option`,{value:`all`,children:`All Roles`}),(0,G.jsx)(`option`,{value:`admin`,children:`Admin`}),(0,G.jsx)(`option`,{value:`kreator`,children:`Kreator`}),(0,G.jsx)(`option`,{value:`user`,children:`User`})]}),(0,G.jsxs)(`select`,{value:v,onChange:e=>y(e.target.value),className:`admin-select`,style:{width:`160px`},children:[(0,G.jsx)(`option`,{value:`all`,children:`All Status`}),(0,G.jsx)(`option`,{value:`active`,children:`Active`}),(0,G.jsx)(`option`,{value:`banned`,children:`Banned`})]})]})})}),i.length===0?(0,G.jsx)(`div`,{className:`admin-card`,children:(0,G.jsxs)(`div`,{className:`admin-card-body`,style:{textAlign:`center`,padding:`48px 24px`},children:[(0,G.jsx)(Sm,{size:48,style:{color:`#d1d5db`,margin:`0 auto 16px`}}),(0,G.jsx)(`p`,{style:{color:`var(--text-secondary)`,marginBottom:`16px`},children:`No users found`}),(0,G.jsxs)(`div`,{style:{background:`#f0f9ff`,border:`1px solid #bfdbfe`,borderRadius:`8px`,padding:`16px`,marginBottom:`16px`,textAlign:`left`,fontSize:`13px`},children:[(0,G.jsx)(`p`,{style:{margin:`0 0 8px`,fontWeight:`600`,color:`#1e40af`},children:` Debug Info:`}),(0,G.jsxs)(`p`,{style:{margin:`4px 0`,color:`#1e3a8a`},children:[`Total users in state: `,n.length]}),(0,G.jsxs)(`p`,{style:{margin:`4px 0`,color:`#1e3a8a`},children:[`Filtered users: `,i.length]}),(0,G.jsxs)(`p`,{style:{margin:`4px 0`,color:`#1e3a8a`},children:[`Current user: `,t?.email||`Not logged in`]}),(0,G.jsx)(`p`,{style:{margin:`4px 0`,color:`#1e3a8a`,fontSize:`11px`},children:`Check browser console (F12) for detailed logs`})]}),(0,G.jsxs)(`button`,{onClick:R,style:{padding:`12px 24px`,background:`linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)`,color:`white`,border:`none`,borderRadius:`8px`,fontSize:`14px`,fontWeight:`600`,cursor:`pointer`,transition:`all 0.2s`,display:`inline-flex`,alignItems:`center`,gap:`8px`},onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-2px)`,e.currentTarget.style.boxShadow=`0 4px 12px rgba(59, 130, 246, 0.3)`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`none`},children:[(0,G.jsx)(dm,{size:16}),`Initialize Current User as Admin`]})]})}):(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`16px`},children:i.map(e=>(0,G.jsx)(ZV,{user:e,currentUserId:t?.uid,onPromoteToKreator:te,onBan:z,onUnban:B,onDelete:V},e.id))})]}),O&&(0,G.jsx)(`div`,{style:{position:`fixed`,top:0,left:0,right:0,bottom:0,background:`rgba(0,0,0,0.5)`,display:`flex`,alignItems:`center`,justifyContent:`center`,zIndex:1e4},onClick:()=>k(!1),children:(0,G.jsxs)(`div`,{style:{background:`white`,borderRadius:`16px`,padding:`24px`,width:`90%`,maxWidth:`400px`,boxShadow:`0 20px 60px rgba(0,0,0,0.3)`},onClick:e=>e.stopPropagation(),children:[(0,G.jsx)(`h3`,{style:{margin:`0 0 20px`,fontSize:`18px`,fontWeight:`600`},children:`Add Registered User`}),(0,G.jsx)(`p`,{style:{margin:`0 0 20px`,fontSize:`14px`,color:`#6b7280`},children:`Manually add an email to the registered users list.`}),(0,G.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,G.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontSize:`14px`,fontWeight:`500`},children:`Email Address *`}),(0,G.jsx)(`input`,{type:`email`,value:A,onChange:e=>j(e.target.value),placeholder:`user@example.com`,style:{width:`100%`,padding:`10px 14px`,border:`1px solid #d1d5db`,borderRadius:`8px`,fontSize:`14px`}})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,G.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontSize:`14px`,fontWeight:`500`},children:`Name (Optional)`}),(0,G.jsx)(`input`,{type:`text`,value:M,onChange:e=>N(e.target.value),placeholder:`User Name`,style:{width:`100%`,padding:`10px 14px`,border:`1px solid #d1d5db`,borderRadius:`8px`,fontSize:`14px`}})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`flex-end`},children:[(0,G.jsx)(`button`,{onClick:()=>k(!1),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:`500`,background:`#f3f4f6`,color:`#374151`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Cancel`}),(0,G.jsx)(`button`,{onClick:I,disabled:P||!A.trim(),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:`500`,background:P?`#9ca3af`:`#3b82f6`,color:`white`,border:`none`,borderRadius:`8px`,cursor:P?`not-allowed`:`pointer`},children:P?`Adding...`:`Add User`})]})]})})]})})}function XV({title:e,value:t,icon:n,color:r}){return(0,G.jsx)(`div`,{className:`admin-card`,children:(0,G.jsxs)(`div`,{className:`admin-card-body`,style:{padding:`16px`},children:[(0,G.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,marginBottom:`12px`},children:(0,G.jsx)(`div`,{style:{background:r,color:`white`,padding:`8px`,borderRadius:`8px`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:n})}),(0,G.jsx)(`p`,{className:`admin-stat-value`,style:{color:r},children:t}),(0,G.jsx)(`p`,{className:`admin-stat-label`,children:e})]})})}function ZV({user:e,currentUserId:t,onPromoteToKreator:n,onBan:r,onUnban:i,onDelete:a}){let o=e.id===t,s=e.status===`banned`;return(0,G.jsx)(`div`,{className:`admin-card`,children:(0,G.jsx)(`div`,{className:`admin-card-body`,children:(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`auto 1fr auto`,gap:`20px`,alignItems:`center`},children:[(0,G.jsx)(`div`,{style:{width:`60px`,height:`60px`,borderRadius:`50%`,background:`linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:`800`,fontSize:`20px`},children:(e.name||e.email)?.[0]?.toUpperCase()||`U`}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`6px`},children:[(0,G.jsxs)(`h3`,{style:{fontSize:`16px`,fontWeight:`700`,color:`#222`,margin:0},children:[e.name||`Unknown User`,o&&(0,G.jsx)(`span`,{style:{marginLeft:`8px`,fontSize:`11px`,color:`var(--text-secondary)`},children:`(You)`})]}),(e=>{let t={admin:{color:`#dc2626`,label:`Admin`,icon:(0,G.jsx)(dm,{size:12})},kreator:{color:`#f59e0b`,label:`Kreator`,icon:(0,G.jsx)(Dp,{size:12})},user:{color:`#6b7280`,label:`User`,icon:(0,G.jsx)(xm,{size:12})}},n=t[e]||t.user;return(0,G.jsxs)(`div`,{style:{display:`inline-flex`,alignItems:`center`,gap:`4px`,padding:`4px 10px`,borderRadius:`20px`,fontSize:`11px`,fontWeight:`600`,background:`${n.color}20`,color:n.color},children:[n.icon,n.label]})})(e.role),(e=>e===`banned`?(0,G.jsx)(`span`,{className:`admin-badge admin-badge-danger`,children:`Banned`}):(0,G.jsx)(`span`,{className:`admin-badge admin-badge-success`,children:`Active`}))(e.status)]}),(0,G.jsxs)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`12px`,fontSize:`13px`,color:`var(--text-secondary)`},children:[e.email&&(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,G.jsx)(Kp,{size:14}),(0,G.jsx)(`span`,{children:e.email})]}),e.phone&&(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,G.jsx)($p,{size:14}),(0,G.jsx)(`span`,{children:e.phone})]}),e.createdAt&&(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,G.jsx)(dp,{size:14}),(0,G.jsxs)(`span`,{children:[`Joined `,new Date(e.createdAt).toLocaleDateString()]})]})]})]}),!o&&(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[e.role===`user`&&!s&&(0,G.jsxs)(`button`,{onClick:()=>n(e.id),style:{padding:`8px 12px`,background:`#fef3c7`,border:`1px solid #fde047`,borderRadius:`8px`,color:`#92400e`,fontSize:`13px`,fontWeight:`600`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`4px`},title:`Promote to Kreator`,children:[(0,G.jsx)(Dp,{size:14}),`Promote`]}),s?(0,G.jsxs)(`button`,{onClick:()=>i(e.id),style:{padding:`8px 12px`,background:`#dcfce7`,border:`1px solid #86efac`,borderRadius:`8px`,color:`#166534`,fontSize:`13px`,fontWeight:`600`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`4px`},title:`Unban User`,children:[(0,G.jsx)(yp,{size:14}),`Unban`]}):(0,G.jsxs)(`button`,{onClick:()=>r(e.id),style:{padding:`8px 12px`,background:`#fee2e2`,border:`1px solid #fca5a5`,borderRadius:`8px`,color:`#991b1b`,fontSize:`13px`,fontWeight:`600`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`4px`},title:`Ban User`,children:[(0,G.jsx)(up,{size:14}),`Ban`]}),(0,G.jsx)(`button`,{onClick:()=>a(e.id),style:{padding:`8px 12px`,background:`#fef2f2`,border:`1px solid #fdd8d8`,borderRadius:`8px`,color:`#b42318`,fontSize:`13px`,fontWeight:`600`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`4px`},title:`Delete User`,children:(0,G.jsx)(hm,{size:14})})]})]})})})}function QV(){let{currentUser:e}=In(),[t,n]=(0,b.useState)(`Fremio`),[r,i]=(0,b.useState)(`Create beautiful photo frames`),[a,o]=(0,b.useState)(`https://fremio.com`),[s,c]=(0,b.useState)(`support@fremio.com`),[l,u]=(0,b.useState)(!0),[d,f]=(0,b.useState)(!1),[p,m]=(0,b.useState)(10),[h,g]=(0,b.useState)(50),[_,v]=(0,b.useState)(!1),[y,x]=(0,b.useState)(!0),[S,C]=(0,b.useState)(5),[w,T]=(0,b.useState)(50),[E,D]=(0,b.useState)(`jpg, jpeg, png, gif, webp`),[O,k]=(0,b.useState)(`mp4, webm, mov`),[A,j]=(0,b.useState)(!0),[M,N]=(0,b.useState)(!0),[P,ee]=(0,b.useState)(!0),[F,I]=(0,b.useState)(!0),[L,R]=(0,b.useState)(!1),[te,z]=(0,b.useState)(6),[B,V]=(0,b.useState)(24),[H,ne]=(0,b.useState)(5),[re,U]=(0,b.useState)(!1),[ie,ae]=(0,b.useState)(`0 MB`),[oe,se]=(0,b.useState)(0),[ce,le]=(0,b.useState)(0),[ue,de]=(0,b.useState)(!1),[fe,pe]=(0,b.useState)(`general`);(0,b.useEffect)(()=>{me(),he()},[]);let me=()=>{let e=localStorage.getItem(`admin_settings`);if(e){let t=JSON.parse(e);n(t.siteName||`Fremio`),i(t.siteDescription||`Create beautiful photo frames`),u(t.allowRegistration??!0)}},he=async()=>{try{let e=`https://api.fremio.id/api`.replace(/\/$/,``),t=e,n=e.endsWith(`/api`)?``:`/api`,r=await(await fetch(`${t}${n}/maintenance/status`)).json();r.success&&f(r.enabled)}catch(e){console.error(`Error loading maintenance status:`,e)}};return(0,G.jsx)(`div`,{style:{background:`linear-gradient(180deg, #fdf7f4 0%, #fff 50%, #f7f1ed 100%)`,minHeight:`100vh`,padding:`32px 0 48px`},children:(0,G.jsxs)(`div`,{style:{maxWidth:`1120px`,margin:`0 auto`,padding:`0 16px`},children:[(0,G.jsxs)(`div`,{style:{marginBottom:`32px`},children:[(0,G.jsx)(`h1`,{style:{fontSize:`clamp(22px, 4vw, 34px)`,fontWeight:`800`,color:`#222`,margin:`0 0 8px`},children:`Platform Settings`}),(0,G.jsx)(`p`,{style:{margin:0,color:`var(--text-secondary)`,fontSize:`14px`},children:`Configure platform settings and preferences`})]}),(0,G.jsxs)(`div`,{className:`admin-alert`,children:[(0,G.jsx)(vp,{size:24,className:`admin-alert-icon`}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`admin-alert-title`,children:`LocalStorage Mode`}),(0,G.jsx)(`p`,{className:`admin-alert-message`,children:`Settings are saved locally. Setup Firebase to sync settings across devices and enable advanced features.`})]})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`260px 1fr`,gap:`24px`},children:[(0,G.jsx)(`div`,{className:`admin-card`,style:{height:`fit-content`},children:(0,G.jsx)(`div`,{className:`admin-card-body`,style:{padding:`14px`},children:(0,G.jsx)(`nav`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`},children:[{id:`general`,label:`General`,icon:(0,G.jsx)(Pp,{size:18})},{id:`frames`,label:`Frames`,icon:(0,G.jsx)(Rp,{size:18})},{id:`uploads`,label:`Uploads`,icon:(0,G.jsx)(ym,{size:18})},{id:`email`,label:`Email`,icon:(0,G.jsx)(Kp,{size:18})},{id:`security`,label:`Security`,icon:(0,G.jsx)(dm,{size:18})},{id:`database`,label:`Database`,icon:(0,G.jsx)(Op,{size:18})}].map(e=>(0,G.jsxs)(`button`,{onClick:()=>pe(e.id),style:{display:`flex`,alignItems:`center`,gap:`10px`,padding:`10px 12px`,borderRadius:`10px`,border:`1px solid transparent`,background:fe===e.id?`var(--accent)`:`transparent`,color:fe===e.id?`#231f1e`:`#2a2a2a`,fontWeight:`600`,fontSize:`14px`,cursor:`pointer`,transition:`all 0.2s`,textAlign:`left`},onMouseEnter:t=>{fe!==e.id&&(t.currentTarget.style.background=`var(--bg-soft)`,t.currentTarget.style.borderColor=`var(--bg-hover)`)},onMouseLeave:t=>{fe!==e.id&&(t.currentTarget.style.background=`transparent`,t.currentTarget.style.borderColor=`transparent`)},children:[e.icon,e.label]},e.id))})})}),(0,G.jsxs)(`div`,{children:[fe===`general`&&(0,G.jsxs)(`div`,{className:`admin-card`,children:[(0,G.jsxs)(`div`,{className:`admin-card-header`,children:[(0,G.jsx)(`h2`,{className:`admin-card-title`,children:`General Settings`}),(0,G.jsx)(`p`,{className:`admin-card-subtitle`,children:`Basic platform configuration`})]}),(0,G.jsxs)(`div`,{className:`admin-card-body`,style:{display:`flex`,flexDirection:`column`,gap:`20px`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Site Name`}),(0,G.jsx)(`input`,{type:`text`,value:t,onChange:e=>n(e.target.value),className:`admin-input`,placeholder:`Fremio`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Site Description`}),(0,G.jsx)(`textarea`,{value:r,onChange:e=>i(e.target.value),className:`admin-textarea`,rows:3,placeholder:`Create beautiful photo frames`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Site URL`}),(0,G.jsx)(`input`,{type:`url`,value:a,onChange:e=>o(e.target.value),className:`admin-input`,placeholder:`https://fremio.com`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Contact Email`}),(0,G.jsx)(`input`,{type:`email`,value:s,onChange:e=>c(e.target.value),className:`admin-input`,placeholder:`support@fremio.com`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`allowRegistration`,checked:l,onChange:e=>u(e.target.checked),style:{width:`16px`,height:`16px`}}),(0,G.jsx)(`label`,{htmlFor:`allowRegistration`,style:{fontSize:`14px`,color:`var(--text-primary)`,cursor:`pointer`},children:`Allow user registration`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`maintenanceMode`,checked:d,onChange:e=>f(e.target.checked),style:{width:`16px`,height:`16px`}}),(0,G.jsx)(`label`,{htmlFor:`maintenanceMode`,style:{fontSize:`14px`,color:`var(--text-primary)`,cursor:`pointer`},children:`Maintenance mode (disable public access)`})]})]})]}),fe===`frames`&&(0,G.jsxs)(`div`,{className:`admin-card`,children:[(0,G.jsxs)(`div`,{className:`admin-card-header`,children:[(0,G.jsx)(`h2`,{className:`admin-card-title`,children:`Frame Settings`}),(0,G.jsx)(`p`,{className:`admin-card-subtitle`,children:`Configure frame creation and approval`})]}),(0,G.jsxs)(`div`,{className:`admin-card-body`,style:{display:`flex`,flexDirection:`column`,gap:`20px`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Max Frames per Regular User`}),(0,G.jsx)(`input`,{type:`number`,value:p,onChange:e=>m(parseInt(e.target.value)),className:`admin-input`,min:`0`,max:`100`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Max Frames per Kreator`}),(0,G.jsx)(`input`,{type:`number`,value:h,onChange:e=>g(parseInt(e.target.value)),className:`admin-input`,min:`0`,max:`1000`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`autoApproveFrames`,checked:_,onChange:e=>v(e.target.checked),style:{width:`16px`,height:`16px`}}),(0,G.jsx)(`label`,{htmlFor:`autoApproveFrames`,style:{fontSize:`14px`,color:`var(--text-primary)`,cursor:`pointer`},children:`Auto-approve frames from trusted kreators`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`allowDuplicateFrames`,checked:y,onChange:e=>x(e.target.checked),style:{width:`16px`,height:`16px`}}),(0,G.jsx)(`label`,{htmlFor:`allowDuplicateFrames`,style:{fontSize:`14px`,color:`var(--text-primary)`,cursor:`pointer`},children:`Allow duplicate photos in frames`})]})]})]}),fe===`uploads`&&(0,G.jsxs)(`div`,{className:`admin-card`,children:[(0,G.jsxs)(`div`,{className:`admin-card-header`,children:[(0,G.jsx)(`h2`,{className:`admin-card-title`,children:`Upload Settings`}),(0,G.jsx)(`p`,{className:`admin-card-subtitle`,children:`Configure file upload limits and formats`})]}),(0,G.jsxs)(`div`,{className:`admin-card-body`,style:{display:`flex`,flexDirection:`column`,gap:`20px`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Max Image Size (MB)`}),(0,G.jsx)(`input`,{type:`number`,value:S,onChange:e=>C(parseInt(e.target.value)),className:`admin-input`,min:`1`,max:`50`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Max Video Size (MB)`}),(0,G.jsx)(`input`,{type:`number`,value:w,onChange:e=>T(parseInt(e.target.value)),className:`admin-input`,min:`1`,max:`500`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Allowed Image Formats`}),(0,G.jsx)(`input`,{type:`text`,value:E,onChange:e=>D(e.target.value),className:`admin-input`,placeholder:`jpg, jpeg, png, gif, webp`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Allowed Video Formats`}),(0,G.jsx)(`input`,{type:`text`,value:O,onChange:e=>k(e.target.value),className:`admin-input`,placeholder:`mp4, webm, mov`})]})]})]}),fe===`email`&&(0,G.jsxs)(`div`,{className:`admin-card`,children:[(0,G.jsxs)(`div`,{className:`admin-card-header`,children:[(0,G.jsx)(`h2`,{className:`admin-card-title`,children:`Email Notifications`}),(0,G.jsx)(`p`,{className:`admin-card-subtitle`,children:`Configure email notification preferences`})]}),(0,G.jsxs)(`div`,{className:`admin-card-body`,style:{display:`flex`,flexDirection:`column`,gap:`16px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`emailNotifications`,checked:A,onChange:e=>j(e.target.checked),style:{width:`16px`,height:`16px`}}),(0,G.jsx)(`label`,{htmlFor:`emailNotifications`,style:{fontSize:`14px`,color:`var(--text-primary)`,cursor:`pointer`},children:`Enable email notifications`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`notifyOnNewUser`,checked:M,onChange:e=>N(e.target.checked),disabled:!A,style:{width:`16px`,height:`16px`}}),(0,G.jsx)(`label`,{htmlFor:`notifyOnNewUser`,style:{fontSize:`14px`,color:A?`var(--text-primary)`:`var(--text-secondary)`,cursor:`pointer`},children:`Notify on new user registration`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`notifyOnNewFrame`,checked:P,onChange:e=>ee(e.target.checked),disabled:!A,style:{width:`16px`,height:`16px`}}),(0,G.jsx)(`label`,{htmlFor:`notifyOnNewFrame`,style:{fontSize:`14px`,color:A?`var(--text-primary)`:`var(--text-secondary)`,cursor:`pointer`},children:`Notify on new frame submission`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`notifyOnNewApplication`,checked:F,onChange:e=>I(e.target.checked),disabled:!A,style:{width:`16px`,height:`16px`}}),(0,G.jsx)(`label`,{htmlFor:`notifyOnNewApplication`,style:{fontSize:`14px`,color:A?`var(--text-primary)`:`var(--text-secondary)`,cursor:`pointer`},children:`Notify on new kreator application`})]})]})]}),fe===`security`&&(0,G.jsxs)(`div`,{className:`admin-card`,children:[(0,G.jsxs)(`div`,{className:`admin-card-header`,children:[(0,G.jsx)(`h2`,{className:`admin-card-title`,children:`Security Settings`}),(0,G.jsx)(`p`,{className:`admin-card-subtitle`,children:`Configure security and authentication`})]}),(0,G.jsxs)(`div`,{className:`admin-card-body`,style:{display:`flex`,flexDirection:`column`,gap:`20px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`requireEmailVerification`,checked:L,onChange:e=>R(e.target.checked),style:{width:`16px`,height:`16px`}}),(0,G.jsx)(`label`,{htmlFor:`requireEmailVerification`,style:{fontSize:`14px`,color:`var(--text-primary)`,cursor:`pointer`},children:`Require email verification for new users`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Minimum Password Length`}),(0,G.jsx)(`input`,{type:`number`,value:te,onChange:e=>z(parseInt(e.target.value)),className:`admin-input`,min:`6`,max:`32`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Session Timeout (hours)`}),(0,G.jsx)(`input`,{type:`number`,value:B,onChange:e=>V(parseInt(e.target.value)),className:`admin-input`,min:`1`,max:`168`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Max Login Attempts`}),(0,G.jsx)(`input`,{type:`number`,value:H,onChange:e=>ne(parseInt(e.target.value)),className:`admin-input`,min:`3`,max:`10`})]})]})]}),fe===`database`&&(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`20px`},children:[(0,G.jsxs)(`div`,{className:`admin-card`,children:[(0,G.jsxs)(`div`,{className:`admin-card-header`,children:[(0,G.jsx)(`h2`,{className:`admin-card-title`,children:`Database Information`}),(0,G.jsx)(`p`,{className:`admin-card-subtitle`,children:`Database status and statistics`})]}),(0,G.jsx)(`div`,{className:`admin-card-body`,children:(0,G.jsxs)(`div`,{style:{display:`grid`,gap:`16px`},children:[(0,G.jsx)($V,{label:`Firebase Status`,value:re?`Connected`:`Not Configured`}),(0,G.jsx)($V,{label:`Database Size`,value:ie}),(0,G.jsx)($V,{label:`Total Users`,value:oe}),(0,G.jsx)($V,{label:`Total Frames`,value:ce})]})})]}),(0,G.jsxs)(`div`,{className:`admin-card`,children:[(0,G.jsxs)(`div`,{className:`admin-card-header`,children:[(0,G.jsx)(`h2`,{className:`admin-card-title`,children:`Database Actions`}),(0,G.jsx)(`p`,{className:`admin-card-subtitle`,children:`Manage database and cache`})]}),(0,G.jsxs)(`div`,{className:`admin-card-body`,style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,G.jsxs)(`button`,{onClick:()=>{alert(`Firebase not configured. This feature requires Firebase setup.`)},className:`admin-button-secondary`,style:{width:`100%`,justifyContent:`center`,display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(kp,{size:18}),`Export All Data`]}),(0,G.jsxs)(`button`,{onClick:()=>{alert(`Firebase not configured. This feature requires Firebase setup.`)},className:`admin-button-secondary`,style:{width:`100%`,justifyContent:`center`,display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(ym,{size:18}),`Import Data`]}),(0,G.jsxs)(`button`,{onClick:()=>{window.confirm(`Clear all cache? This will log you out.`)&&(localStorage.clear(),sessionStorage.clear(),window.location.href=`/login`)},style:{width:`100%`,padding:`10px 16px`,background:`#fef2f2`,border:`1px solid #fdd8d8`,borderRadius:`10px`,color:`#b42318`,fontWeight:`600`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`8px`},children:[(0,G.jsx)(hm,{size:18}),`Clear Cache`]})]})]})]}),(0,G.jsxs)(`div`,{style:{marginTop:`24px`,display:`flex`,justifyContent:`flex-end`,gap:`12px`},children:[(0,G.jsxs)(`button`,{onClick:()=>me(),className:`admin-button-secondary`,style:{padding:`12px 24px`,display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(nm,{size:18}),`Reset`]}),(0,G.jsxs)(`button`,{onClick:async()=>{de(!0);let n={siteName:t,siteDescription:r,siteUrl:a,contactEmail:s,allowRegistration:l,maintenanceMode:d,maxFramesPerUser:p,maxFramesPerKreator:h,autoApproveFrames:_,allowDuplicateFrames:y,maxImageSize:S,maxVideoSize:w,allowedImageFormats:E,allowedVideoFormats:O,emailNotifications:A,notifyOnNewUser:M,notifyOnNewFrame:P,notifyOnNewApplication:F,requireEmailVerification:L,passwordMinLength:te,sessionTimeout:B,maxLoginAttempts:H,updatedAt:new Date().toISOString(),updatedBy:e?.email};try{let e=localStorage.getItem(`fremio_token`)||localStorage.getItem(`auth_token`)||localStorage.getItem(`token`);if(!e)throw Error(`No token provided`);let t=`https://api.fremio.id/api`.replace(/\/$/,``),r=t,i=t.endsWith(`/api`)?``:`/api`;if(!(await fetch(`${r}${i}/maintenance/admin/status`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${e}`},body:JSON.stringify({enabled:d,message:d?`Fremio sedang maintenance. Silakan coba lagi nanti.`:``})})).ok)throw Error(`Failed to update maintenance mode`);localStorage.setItem(`admin_settings`,JSON.stringify(n)),alert(`Settings saved successfully!`)}catch(e){console.error(`Error saving settings:`,e),alert(`Failed to save settings: `+e.message)}de(!1)},disabled:ue,className:`admin-button-primary`,style:{padding:`12px 24px`,width:`auto`,display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(im,{size:18}),ue?`Saving...`:`Save Settings`]})]})]})]})]})})}function $V({label:e,value:t}){return(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`200px 1fr`,padding:`12px 0`,borderBottom:`1px solid #f3ebe8`},children:[(0,G.jsx)(`div`,{style:{color:`var(--text-secondary)`,fontWeight:`700`,fontSize:`14px`},children:e}),(0,G.jsx)(`div`,{style:{color:`var(--text-primary)`,fontSize:`14px`},children:t})]})}function eH(){let{currentUser:e}=In(),[t,n]=(0,b.useState)([]),[r,i]=(0,b.useState)(!1),[a,o]=(0,b.useState)(!1),[s,c]=(0,b.useState)(!1),[l,u]=(0,b.useState)(null),[d,f]=(0,b.useState)(!1),[p,m]=(0,b.useState)({id:``,name:``,icon:``,description:``,isActive:!0,order:0});(0,b.useEffect)(()=>{h()},[]);let h=async()=>{{let e=JSON.parse(localStorage.getItem(`custom_frames`)||`[]`),t=UD.map((t,n)=>{let r=e.filter(e=>e.category===t.id).length;return{...t,description:`${t.name} themed photo frames`,isActive:!0,order:n,frameCount:r}});n(t);return}i(!0);try{let e=UD.map((e,t)=>({...e,description:`${e.name} themed photo frames`,isActive:!0,order:t,frameCount:0}));n(e)}catch(e){console.error(`Error loading categories:`,e)}i(!1)},g=()=>{m({id:``,name:``,icon:``,description:``,isActive:!0,order:t.length}),o(!0)},_=e=>{u(e),m({id:e.id,name:e.name,icon:e.icon,description:e.description||``,isActive:e.isActive!==!1,order:e.order||0}),c(!0)},v=async()=>{if(!p.name.trim()){alert(`Category name is required`);return}alert(`Firebase not configured. This feature requires Firebase setup.`)},y=async e=>{if(window.confirm(`Delete this category? All frames in this category will be uncategorized.`)){alert(`Firebase not configured. This feature requires Firebase setup.`);return}},x=async(e,t)=>{alert(`Firebase not configured. This feature requires Firebase setup.`)},S=()=>{o(!1),c(!1),u(null)};return r?(0,G.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,G.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{display:`inline-block`,width:`48px`,height:`48px`,border:`4px solid #f3f4f6`,borderTop:`4px solid var(--accent)`,borderRadius:`50%`,animation:`spin 1s linear infinite`,marginBottom:`16px`}}),(0,G.jsx)(`p`,{style:{color:`var(--text-secondary)`},children:`Loading categories...`})]})}):(0,G.jsxs)(`div`,{style:{background:`linear-gradient(180deg, #fdf7f4 0%, #fff 50%, #f7f1ed 100%)`,minHeight:`100vh`,padding:`32px 0 48px`},children:[(0,G.jsxs)(`div`,{style:{maxWidth:`1120px`,margin:`0 auto`,padding:`0 16px`},children:[(0,G.jsxs)(`div`,{className:`admin-alert`,children:[(0,G.jsx)(vp,{size:24,className:`admin-alert-icon`}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`admin-alert-title`,children:`LocalStorage Mode - UI Preview Only`}),(0,G.jsx)(`p`,{className:`admin-alert-message`,children:`Firebase is not configured. Category management features are disabled. You're viewing predefined categories.`})]})]}),(0,G.jsx)(`div`,{style:{marginBottom:`32px`},children:(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,flexWrap:`wrap`,gap:`16px`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{style:{fontSize:`clamp(22px, 4vw, 34px)`,fontWeight:`800`,color:`#222`,margin:`0 0 8px`},children:`Frame Categories`}),(0,G.jsx)(`p`,{style:{color:`var(--text-secondary)`,fontSize:`15px`},children:`Organize frames into categories for better browsing experience`})]}),(0,G.jsxs)(`button`,{onClick:g,disabled:!0,style:{display:`flex`,alignItems:`center`,gap:`8px`,padding:`12px 20px`,background:`#e5e7eb`,border:`none`,borderRadius:`10px`,color:`#9ca3af`,fontSize:`14px`,fontWeight:`600`,cursor:`not-allowed`,boxShadow:`none`,transition:`all 0.2s`},onMouseEnter:e=>{},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`none`},children:[(0,G.jsx)(tm,{size:18}),(0,G.jsx)(`span`,{children:`Add Category`})]})]})}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(220px, 1fr))`,gap:`16px`,marginBottom:`32px`},children:[(0,G.jsx)(tH,{icon:(0,G.jsx)(Np,{size:24}),label:`Total Categories`,value:t.length,color:`#e0b7a9`}),(0,G.jsx)(tH,{icon:(0,G.jsx)(yp,{size:24}),label:`Active`,value:t.filter(e=>e.isActive!==!1).length,color:`#86efac`}),(0,G.jsx)(tH,{icon:(0,G.jsx)(Rp,{size:24}),label:`Total Frames`,value:t.reduce((e,t)=>e+(t.frameCount||0),0),color:`#93c5fd`})]}),(0,G.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(280px, 1fr))`,gap:`20px`},children:t.map(e=>(0,G.jsx)(nH,{category:e,onEdit:_,onDelete:y,onToggleActive:x},e.id))}),t.length===0&&(0,G.jsxs)(`div`,{style:{textAlign:`center`,padding:`60px 20px`,color:`var(--text-secondary)`},children:[(0,G.jsx)(Np,{size:48,style:{marginBottom:`16px`}}),(0,G.jsx)(`h3`,{style:{fontSize:`18px`,fontWeight:`600`,margin:`0 0 8px`},children:`No categories yet`}),(0,G.jsx)(`p`,{style:{fontSize:`14px`},children:`Add your first category to organize frames`})]})]}),(a||s)&&(0,G.jsx)(rH,{title:a?`Add New Category`:`Edit Category`,onClose:S,children:(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`16px`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Category Name *`}),(0,G.jsx)(`input`,{type:`text`,className:`admin-input`,value:p.name,onChange:e=>m({...p,name:e.target.value}),placeholder:`e.g., Birthday`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Icon (Emoji)`}),(0,G.jsx)(`input`,{type:`text`,className:`admin-input`,value:p.icon,onChange:e=>m({...p,icon:e.target.value}),placeholder:``,maxLength:`2`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Description`}),(0,G.jsx)(`textarea`,{className:`admin-textarea`,value:p.description,onChange:e=>m({...p,description:e.target.value}),placeholder:`Describe this category...`,rows:`3`})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`label`,{className:`admin-label`,children:`Display Order`}),(0,G.jsx)(`input`,{type:`number`,className:`admin-input`,value:p.order,onChange:e=>m({...p,order:parseInt(e.target.value)||0}),min:`0`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(`input`,{type:`checkbox`,id:`isActive`,checked:p.isActive,onChange:e=>m({...p,isActive:e.target.checked}),style:{width:`18px`,height:`18px`,cursor:`pointer`}}),(0,G.jsx)(`label`,{htmlFor:`isActive`,style:{fontSize:`14px`,cursor:`pointer`},children:`Active (visible to users)`})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,marginTop:`8px`,paddingTop:`16px`,borderTop:`1px solid var(--border)`},children:[(0,G.jsxs)(`button`,{onClick:v,disabled:d,className:`admin-button-primary`,style:{flex:1},children:[(0,G.jsx)(im,{size:16}),(0,G.jsx)(`span`,{children:d?`Saving...`:`Save Category`})]}),(0,G.jsxs)(`button`,{onClick:S,disabled:d,className:`admin-button-secondary`,children:[(0,G.jsx)(Cm,{size:16}),(0,G.jsx)(`span`,{children:`Cancel`})]})]})]})})]})}function tH({icon:e,label:t,value:n,color:r}){return(0,G.jsx)(`div`,{className:`admin-card`,style:{padding:`20px`},children:(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,G.jsx)(`div`,{style:{width:`48px`,height:`48px`,borderRadius:`12px`,background:`${r}20`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:r},children:e}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--text-secondary)`,marginBottom:`4px`},children:t}),(0,G.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`700`,color:`#222`},children:n})]})]})})}function nH({category:e,onEdit:t,onDelete:n,onToggleActive:r}){let i=e.isActive!==!1;return(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`20px`,opacity:i?1:.6,transition:`all 0.2s`},children:[(0,G.jsx)(`div`,{style:{marginBottom:`16px`},children:(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`start`,gap:`12px`},children:[(0,G.jsx)(`div`,{style:{fontSize:`36px`,lineHeight:1,flexShrink:0},children:e.icon}),(0,G.jsxs)(`div`,{style:{flex:1,minWidth:0},children:[(0,G.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`700`,color:`#222`,margin:`0 0 4px`},children:e.name}),(0,G.jsx)(`p`,{style:{fontSize:`13px`,color:`var(--text-secondary)`,margin:0},children:e.description||`${e.name} themed frames`})]})]})}),(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,marginBottom:`16px`,paddingTop:`16px`,borderTop:`1px solid var(--border)`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`16px`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{style:{fontSize:`11px`,color:`var(--text-secondary)`,marginBottom:`4px`},children:`Frames`}),(0,G.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`700`,color:`#222`},children:e.frameCount||0})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{style:{fontSize:`11px`,color:`var(--text-secondary)`,marginBottom:`4px`},children:`Order`}),(0,G.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:`700`,color:`#222`},children:[`#`,e.order||0]})]})]}),(0,G.jsx)(`span`,{className:`admin-badge-${i?`success`:`secondary`}`,style:{fontSize:`11px`},children:i?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(jp,{size:12}),` Active`]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Ap,{size:12}),` Inactive`]})})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,G.jsxs)(`button`,{onClick:()=>r(e.id,i),className:`admin-button-secondary`,style:{flex:1,fontSize:`13px`,padding:`8px 12px`},disabled:!0,children:[i?(0,G.jsx)(Ap,{size:14}):(0,G.jsx)(jp,{size:14}),(0,G.jsx)(`span`,{children:i?`Deactivate`:`Activate`})]}),(0,G.jsx)(`button`,{onClick:()=>t(e),className:`admin-button-secondary`,style:{padding:`8px 12px`},disabled:!0,children:(0,G.jsx)(fm,{size:14})}),(0,G.jsx)(`button`,{onClick:()=>n(e.id),className:`admin-button-danger`,style:{padding:`8px 12px`},disabled:!0,children:(0,G.jsx)(hm,{size:14})})]})]})}function rH({title:e,children:t,onClose:n}){return(0,G.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0, 0, 0, 0.5)`,display:`flex`,alignItems:`center`,justifyContent:`center`,zIndex:1e3,padding:`20px`},onClick:n,children:(0,G.jsxs)(`div`,{className:`admin-card`,style:{width:`100%`,maxWidth:`500px`,padding:`24px`,maxHeight:`90vh`,overflowY:`auto`},onClick:e=>e.stopPropagation(),children:[(0,G.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:`700`,color:`#222`,margin:`0 0 20px`},children:e}),t]})})}function iH(){let e=Le(),{currentUser:t}=In(),[n,r]=(0,b.useState)(!1),[i,a]=(0,b.useState)(`7days`),o={totalVisitors:0,uniqueVisitors:0,totalPhotosTaken:0,totalDownloads:0,totalShares:0,conversionRate:0,topFrames:[],dailyStats:[],dailyActiveUsers:0,weeklyActiveUsers:0,monthlyActiveUsers:0,funnel:{visit:0,frameView:0,frameSelect:0,photoTaken:0,downloaded:0},conversionRates:{viewToSelect:0,selectToCapture:0,captureToDownload:0,overallConversion:0},registeredUsers:0,registrationRate:0,registrations7Days:0,previousRegistrations7Days:0,avgDownloadsPerUser:0,topCreators:[]},[s,c]=(0,b.useState)(o),[l,u]=(0,b.useState)({overview:{totalViews:0,totalDownloads:0,totalLikes:0,totalFrames:0,totalUsers:0,totalKreators:0},trends:{viewsTrend:0,downloadsTrend:0,likesTrend:0,usersTrend:0},topFrames:[],topUsers:[],categoryStats:[],recentActivity:[]});(0,b.useEffect)(()=>{d()},[i]);let d=async()=>{r(!0);let e=null;try{e=await WO(),c({...o,...e,funnel:{...o.funnel,...e?.funnel||{}},conversionRates:{...o.conversionRates,...e?.conversionRates||{}}}),console.log(` Loaded metrics:`,e)}catch(e){console.error(`Error loading metrics:`,e),c(o)}if(mO()){r(!1);return}let t=JSON.parse(localStorage.getItem(`custom_frames`)||`[]`),n=JSON.parse(localStorage.getItem(`frame_usage`)||`[]`),i=JSON.parse(localStorage.getItem(`users`)||`[]`),a=JSON.parse(localStorage.getItem(`recent_activities`)||`[]`),s=n.reduce((e,t)=>e+(t.views||0),0),l=n.reduce((e,t)=>e+(t.downloads||0),0),d=n.reduce((e,t)=>e+(t.likes||0),0),f={};n.forEach(e=>{if(!f[e.frameId]){let n=t.find(t=>t.id===e.frameId);f[e.frameId]={id:e.frameId,name:n?.name||`Frame ${e.frameId}`,kreator:n?.kreatorName||`Unknown`,views:0,downloads:0,likes:0}}f[e.frameId].views+=e.views||0,f[e.frameId].downloads+=e.downloads||0,f[e.frameId].likes+=e.likes||0});let p=Object.values(f).sort((e,t)=>t.views-e.views).slice(0,3),m={};n.forEach(e=>{if(!m[e.userId]){let t=i.find(t=>t.id===e.userId);m[e.userId]={id:e.userId,name:t?.name||`User ${e.userId}`,email:t?.email||``,framesUsed:0,totalViews:0,lastActive:t?.lastActive||`Unknown`}}m[e.userId].framesUsed+=1,m[e.userId].totalViews+=e.views||0});let h=Object.values(m).sort((e,t)=>t.framesUsed-e.framesUsed).slice(0,3),g={};t.forEach(e=>{let t=e.category||`Other`;g[t]||(g[t]={category:t,frames:0,views:0}),g[t].frames+=1;let r=n.filter(t=>t.frameId===e.id).reduce((e,t)=>e+(t.views||0),0);g[t].views+=r});let _=Object.values(g).reduce((e,t)=>e+t.views,0),v=Object.values(g).map(e=>({...e,percentage:_>0?Math.round(e.views/_*100):0})).sort((e,t)=>t.views-e.views).slice(0,5),y=a.slice(0,10).map(e=>({type:e.type||`view`,user:e.userName||`User ${e.userId}`,frame:e.frameName||`Frame ${e.frameId}`,time:e.time||`Just now`})),b=new Set(n.map(e=>e.userId)),x=e?.totalUsers||b.size;u({overview:{totalViews:s,totalDownloads:l,totalLikes:d,totalFrames:t.length,totalUsers:x},trends:{viewsTrend:e?.userGrowthRate||0,downloadsTrend:0,likesTrend:0,usersTrend:e?.userGrowthRate||0},topFrames:p,topUsers:h,categoryStats:v,recentActivity:y}),r(!1)},f=e=>e>=1e6?(e/1e6).toFixed(1)+`M`:e>=1e3?(e/1e3).toFixed(1)+`K`:e.toString();return n?(0,G.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,G.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{display:`inline-block`,width:`48px`,height:`48px`,border:`4px solid #f3f4f6`,borderTop:`4px solid var(--accent)`,borderRadius:`50%`,animation:`spin 1s linear infinite`,marginBottom:`16px`}}),(0,G.jsx)(`p`,{style:{color:`var(--text-secondary)`},children:`Loading analytics...`})]})}):(0,G.jsx)(`div`,{style:{background:`linear-gradient(180deg, #fdf7f4 0%, #fff 50%, #f7f1ed 100%)`,minHeight:`100vh`,padding:`32px 0 48px`},children:(0,G.jsxs)(`div`,{style:{maxWidth:`1120px`,margin:`0 auto`,padding:`0 16px`},children:[mO()&&(0,G.jsxs)(`div`,{className:`admin-alert`,style:{background:`#e0f2fe`,borderColor:`#0ea5e9`},children:[(0,G.jsx)(Op,{size:24,className:`admin-alert-icon`,style:{color:`#0284c7`}}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h3`,{className:`admin-alert-title`,style:{color:`#0369a1`},children:`VPS Mode - PostgreSQL Database`}),(0,G.jsx)(`p`,{className:`admin-alert-message`,style:{color:`#0369a1`},children:`Analytics data is stored on your VPS server with PostgreSQL.`})]})]}),(0,G.jsxs)(`button`,{onClick:()=>e(`/admin`),className:`admin-button-secondary`,style:{display:`inline-flex`,alignItems:`center`,gap:`8px`,marginBottom:`16px`,padding:`10px 16px`},children:[(0,G.jsx)(cp,{size:18}),`Kembali ke Dashboard`]}),(0,G.jsx)(`div`,{style:{marginBottom:`32px`},children:(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,flexWrap:`wrap`,gap:`16px`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{style:{fontSize:`clamp(22px, 4vw, 34px)`,fontWeight:`800`,color:`#222`,margin:`0 0 8px`},children:`Analytics Dashboard`}),(0,G.jsx)(`p`,{style:{color:`var(--text-secondary)`,fontSize:`15px`},children:`Track performance metrics and user engagement`})]}),(0,G.jsx)(`div`,{style:{display:`flex`,gap:`8px`},children:[{value:`7days`,label:`7 Days`},{value:`30days`,label:`30 Days`},{value:`90days`,label:`90 Days`},{value:`all`,label:`All Time`}].map(e=>(0,G.jsx)(`button`,{onClick:()=>a(e.value),style:{padding:`8px 16px`,background:i===e.value?`var(--accent)`:`white`,border:`1px solid var(--border)`,borderRadius:`8px`,color:i===e.value?`white`:`#222`,fontSize:`13px`,fontWeight:`600`,cursor:`pointer`,transition:`all 0.2s`},children:e.label},e.value))})]})}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(240px, 1fr))`,gap:`16px`,marginBottom:`32px`,maxWidth:`520px`},children:[(0,G.jsx)(aH,{icon:(0,G.jsx)(Sm,{size:24}),label:`Registered Users`,value:f(l.overview.totalUsers),trend:l.trends.usersTrend,color:`#10b981`}),(0,G.jsx)(aH,{icon:(0,G.jsx)(bm,{size:24}),label:`Registration Rate`,value:s?.totalUsers>0?`${Math.round(l.overview.totalUsers/s.totalUsers*100)}%`:`0%`,subtitle:`${l.overview.totalUsers} dari ${s?.totalUsers||0} visitors`,color:`#8b5cf6`})]}),s&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{style:{marginBottom:`20px`,marginTop:`16px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,G.jsxs)(`h2`,{style:{fontSize:`20px`,fontWeight:`700`,color:`#222`,display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(mm,{size:20,style:{color:`var(--accent)`}}),`Lean Startup Metrics`]}),(0,G.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`,padding:`6px 12px`,background:s.source===`firebase`?`#dcfce7`:`#fef3c7`,borderRadius:`20px`,fontSize:`12px`,fontWeight:`600`,color:s.source===`firebase`?`#166534`:`#92400e`},children:s.source===`firebase`?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(wp,{size:14}),`Data dari Firebase (Semua User)`]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Op,{size:14}),`Data Lokal (Hanya Browser Ini)`]})})]}),(0,G.jsx)(`p`,{style:{color:`var(--text-secondary)`,fontSize:`13px`,marginTop:`4px`},children:`Actionable metrics untuk pengambilan keputusan`})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(200px, 1fr))`,gap:`16px`,marginBottom:`24px`},children:[(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`20px`,textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{width:`48px`,height:`48px`,background:`#dcfce7`,borderRadius:`12px`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 12px`},children:(0,G.jsx)(wm,{size:24,style:{color:`#22c55e`}})}),(0,G.jsxs)(`div`,{style:{fontSize:`28px`,fontWeight:`800`,color:`#222`},children:[s.activationRate,`%`]}),(0,G.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--text-secondary)`,marginTop:`4px`},children:`Activation Rate`}),(0,G.jsxs)(`div`,{style:{fontSize:`11px`,color:`#6b7280`,marginTop:`8px`},children:[s.activatedUsers,` dari `,s.totalUsers,` user download`]})]}),(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`20px`,textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{width:`48px`,height:`48px`,background:`#dbeafe`,borderRadius:`12px`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 12px`},children:(0,G.jsx)(rm,{size:24,style:{color:`#3b82f6`}})}),(0,G.jsxs)(`div`,{style:{fontSize:`28px`,fontWeight:`800`,color:`#222`},children:[s.retentionRate,`%`]}),(0,G.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--text-secondary)`,marginTop:`4px`},children:`7-Day Retention`}),(0,G.jsxs)(`div`,{style:{fontSize:`11px`,color:`#6b7280`,marginTop:`8px`},children:[s.returningUsers,` user kembali`]})]}),(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`20px`,textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{width:`48px`,height:`48px`,background:s.userGrowthRate>=0?`#dcfce7`:`#fee2e2`,borderRadius:`12px`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 12px`},children:(0,G.jsx)(gm,{size:24,style:{color:s.userGrowthRate>=0?`#22c55e`:`#ef4444`}})}),(0,G.jsxs)(`div`,{style:{fontSize:`28px`,fontWeight:`800`,color:s.userGrowthRate>=0?`#22c55e`:`#ef4444`},children:[s.userGrowthRate>=0?`+`:``,s.userGrowthRate,`%`]}),(0,G.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--text-secondary)`,marginTop:`4px`},children:`Weekly Growth`}),(0,G.jsxs)(`div`,{style:{fontSize:`11px`,color:`#6b7280`,marginTop:`8px`},children:[s.newUsersThisWeek,` new vs `,s.newUsersLastWeek,` last week`]})]}),(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`20px`,textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{width:`48px`,height:`48px`,background:`#fae8ff`,borderRadius:`12px`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 12px`},children:(0,G.jsx)(bm,{size:24,style:{color:`#a855f7`}})}),(0,G.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:`800`,color:`#222`},children:s.downloadsPerUser}),(0,G.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--text-secondary)`,marginTop:`4px`},children:`Downloads/User`}),(0,G.jsx)(`div`,{style:{fontSize:`11px`,color:`#6b7280`,marginTop:`8px`},children:`Engagement metric`})]})]}),(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`24px`,marginBottom:`24px`},children:[(0,G.jsxs)(`h3`,{style:{fontSize:`16px`,fontWeight:`700`,marginBottom:`20px`,display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,G.jsx)(fp,{size:18,style:{color:`var(--accent)`}}),`Conversion Funnel (7 Hari Terakhir)`]}),(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:[{label:`Visitors`,value:s.funnel.visit,color:`#3b82f6`},{label:`Frame Views`,value:s.funnel.frameView,color:`#8b5cf6`},{label:`Frame Selected`,value:s.funnel.frameSelect,color:`#ec4899`},{label:`Photo Taken`,value:s.funnel.photoTaken,color:`#f97316`},{label:`Downloaded`,value:s.funnel.downloaded,color:`#22c55e`}].map((e,t,n)=>{let r=Math.max(...n.map(e=>e.value),1),i=r>0?Math.round(e.value/r*100):0,a=t>0&&n[t-1].value>0?Math.round((n[t-1].value-e.value)/n[t-1].value*100):0;return(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,marginBottom:`4px`},children:[(0,G.jsx)(`span`,{style:{fontSize:`13px`,fontWeight:`500`},children:e.label}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,alignItems:`center`},children:[t>0&&a>0&&(0,G.jsxs)(`span`,{style:{fontSize:`11px`,color:`#ef4444`},children:[`-`,a,`% drop`]}),(0,G.jsx)(`span`,{style:{fontSize:`13px`,fontWeight:`600`},children:e.value})]})]}),(0,G.jsx)(`div`,{style:{height:`8px`,background:`#f3f4f6`,borderRadius:`4px`,overflow:`hidden`},children:(0,G.jsx)(`div`,{style:{height:`100%`,width:`${i}%`,background:e.color,borderRadius:`4px`,transition:`width 0.3s ease`}})})]},e.label)})}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(120px, 1fr))`,gap:`12px`,marginTop:`20px`,padding:`16px`,background:`#f9fafb`,borderRadius:`8px`},children:[(0,G.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,G.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:`700`,color:`#8b5cf6`},children:[s.conversionRates.viewToSelect,`%`]}),(0,G.jsx)(`div`,{style:{fontSize:`11px`,color:`#6b7280`},children:`View  Select`})]}),(0,G.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,G.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:`700`,color:`#ec4899`},children:[s.conversionRates.selectToCapture,`%`]}),(0,G.jsx)(`div`,{style:{fontSize:`11px`,color:`#6b7280`},children:`Select  Capture`})]}),(0,G.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,G.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:`700`,color:`#22c55e`},children:[s.conversionRates.captureToDownload,`%`]}),(0,G.jsx)(`div`,{style:{fontSize:`11px`,color:`#6b7280`},children:`Capture  Download`})]}),(0,G.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,G.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:`700`,color:`#3b82f6`},children:[s.conversionRates.overallConversion,`%`]}),(0,G.jsx)(`div`,{style:{fontSize:`11px`,color:`#6b7280`},children:`Overall`})]})]})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(3, 1fr)`,gap:`16px`,marginBottom:`32px`},children:[(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`20px`,textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`800`,color:`#3b82f6`},children:s.dailyActiveUsers}),(0,G.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--text-secondary)`},children:`DAU (Today)`})]}),(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`20px`,textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`800`,color:`#8b5cf6`},children:s.weeklyActiveUsers}),(0,G.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--text-secondary)`},children:`WAU (7 Days)`})]}),(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`20px`,textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`800`,color:`#22c55e`},children:s.monthlyActiveUsers}),(0,G.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--text-secondary)`},children:`MAU (30 Days)`})]})]})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(300px, 1fr))`,gap:`20px`,marginBottom:`32px`},children:[(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`24px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,marginBottom:`20px`},children:[(0,G.jsx)(`div`,{style:{width:`40px`,height:`40px`,borderRadius:`10px`,background:`#fef3c7`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`#f59e0b`},children:(0,G.jsx)(gm,{size:20})}),(0,G.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`700`,color:`#222`,margin:0},children:`Top Performing Frames`})]}),(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:s?.topFrames&&s.topFrames.length>0?s.topFrames.map((e,t)=>(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`12px`,background:`#faf6f5`,borderRadius:`8px`},children:[(0,G.jsx)(`div`,{style:{width:`28px`,height:`28px`,borderRadius:`6px`,background:`var(--accent)`,color:`white`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`13px`,fontWeight:`700`,flexShrink:0},children:t+1}),(0,G.jsxs)(`div`,{style:{flex:1,minWidth:0},children:[(0,G.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:`600`,color:`#222`,marginBottom:`2px`,whiteSpace:`nowrap`,overflow:`hidden`,textOverflow:`ellipsis`},children:e.name}),(0,G.jsxs)(`div`,{style:{fontSize:`12px`,color:`var(--text-secondary)`},children:[e.uniqueUsers,` users  `,e.downloads,` downloads`]})]}),(0,G.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,G.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:`700`,color:`#222`},children:f(e.views)}),(0,G.jsx)(`div`,{style:{fontSize:`11px`,color:`var(--text-secondary)`},children:`selects`})]})]},e.id)):(0,G.jsx)(`div`,{style:{padding:`24px`,textAlign:`center`,color:`var(--text-secondary)`,fontSize:`14px`},children:`Belum ada data frame. Data akan muncul setelah user memilih frame.`})})]}),(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`24px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,marginBottom:`20px`},children:[(0,G.jsx)(`div`,{style:{width:`40px`,height:`40px`,borderRadius:`10px`,background:`#e0e7ff`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`#6366f1`},children:(0,G.jsx)(pp,{size:20})}),(0,G.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`700`,color:`#222`,margin:0},children:`Category Distribution`})]}),(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:l.categoryStats.map(e=>(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,marginBottom:`6px`},children:[(0,G.jsx)(`span`,{style:{fontSize:`13px`,fontWeight:`600`,color:`#222`},children:e.category}),(0,G.jsxs)(`span`,{style:{fontSize:`13px`,color:`var(--text-secondary)`},children:[e.percentage,`%`]})]}),(0,G.jsx)(`div`,{style:{height:`8px`,background:`#f3f4f6`,borderRadius:`4px`,overflow:`hidden`},children:(0,G.jsx)(`div`,{style:{width:`${e.percentage}%`,height:`100%`,background:`linear-gradient(90deg, var(--accent) 0%, #d4a193 100%)`,transition:`width 0.3s`}})})]},e.category))})]})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(300px, 1fr))`,gap:`20px`},children:[(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`24px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,marginBottom:`20px`},children:[(0,G.jsx)(`div`,{style:{width:`40px`,height:`40px`,borderRadius:`10px`,background:`#dbeafe`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`#3b82f6`},children:(0,G.jsx)(Sm,{size:20})}),(0,G.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`700`,color:`#222`,margin:0},children:`Top Users by Frame Usage`})]}),(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:l.topUsers.map((e,t)=>(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`12px`,background:`#faf6f5`,borderRadius:`8px`},children:[(0,G.jsx)(`div`,{style:{width:`36px`,height:`36px`,borderRadius:`50%`,background:`linear-gradient(135deg, var(--accent) 0%, #d4a193 100%)`,color:`white`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`14px`,fontWeight:`700`,flexShrink:0},children:e.name.charAt(0)}),(0,G.jsxs)(`div`,{style:{flex:1,minWidth:0},children:[(0,G.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:`600`,color:`#222`,marginBottom:`2px`},children:e.name}),(0,G.jsxs)(`div`,{style:{fontSize:`12px`,color:`var(--text-secondary)`},children:[e.framesUsed,` frames used `,` `,f(e.totalViews),` views`]})]})]},e.id))})]}),(0,G.jsxs)(`div`,{className:`admin-card`,style:{padding:`24px`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,marginBottom:`20px`},children:[(0,G.jsx)(`div`,{style:{width:`40px`,height:`40px`,borderRadius:`10px`,background:`#dcfce7`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`#16a34a`},children:(0,G.jsx)(rp,{size:20})}),(0,G.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`700`,color:`#222`,margin:0},children:`Recent Activity`})]}),(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:l.recentActivity.map((e,t)=>(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`start`,gap:`12px`,padding:`12px`,background:`#faf6f5`,borderRadius:`8px`},children:[(0,G.jsxs)(`div`,{style:{width:`32px`,height:`32px`,borderRadius:`8px`,background:e.type===`view`?`#dbeafe`:e.type===`download`?`#e9d5ff`:`#fce7f3`,color:e.type===`view`?`#3b82f6`:e.type===`download`?`#8b5cf6`:`#ec4899`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0},children:[e.type===`view`&&(0,G.jsx)(jp,{size:16}),e.type===`download`&&(0,G.jsx)(kp,{size:16}),e.type===`like`&&(0,G.jsx)(Lp,{size:16})]}),(0,G.jsxs)(`div`,{style:{flex:1,minWidth:0},children:[(0,G.jsxs)(`div`,{style:{fontSize:`13px`,color:`#222`,marginBottom:`2px`},children:[(0,G.jsx)(`strong`,{children:e.user}),` `,e.type===`view`&&`viewed`,e.type===`download`&&`downloaded`,e.type===`like`&&`liked`,` `,(0,G.jsx)(`strong`,{children:e.frame})]}),(0,G.jsx)(`div`,{style:{fontSize:`11px`,color:`var(--text-secondary)`},children:e.time})]})]},t))})]})]})]})})}function aH({icon:e,label:t,value:n,trend:r,color:i,subtitle:a}){return(0,G.jsx)(`div`,{className:`admin-card`,style:{padding:`20px`},children:(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`start`,gap:`16px`},children:[(0,G.jsx)(`div`,{style:{width:`52px`,height:`52px`,borderRadius:`12px`,background:`${i}15`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:i,flexShrink:0},children:e}),(0,G.jsxs)(`div`,{style:{flex:1,minWidth:0},children:[(0,G.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--text-secondary)`,marginBottom:`6px`},children:t}),(0,G.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:`800`,color:`#222`,lineHeight:1,marginBottom:`8px`},children:n}),a&&(0,G.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--text-secondary)`,marginBottom:r===void 0?`0`:`8px`},children:a}),r!==void 0&&(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`,fontSize:`12px`,fontWeight:`600`,color:(e=>e>0?`#22c55e`:e<0?`#ef4444`:`#6b7280`)(r)},children:[(e=>e>0?(0,G.jsx)(lp,{size:14}):e<0?(0,G.jsx)(sp,{size:14}):(0,G.jsx)(Jp,{size:14}))(r),(0,G.jsxs)(`span`,{children:[Math.abs(r).toFixed(1),`% vs last period`]})]})]})]})})}function oH(){let e=Le(),{currentUser:t}=In(),{showToast:n}=yV(),[r,i]=(0,b.useState)([]),[a,o]=(0,b.useState)(!0),[s,c]=(0,b.useState)(null),[l,u]=(0,b.useState)(``),[d,f]=(0,b.useState)(`all`),[p,m]=(0,b.useState)(`all`),[h,g]=(0,b.useState)(``),_=async()=>{try{o(!0);let e=await KD();i(e)}catch(e){console.error(`Error loading messages:`,e),n(`Gagal memuat pesan`,`error`)}finally{o(!1)}};(0,b.useEffect)(()=>{_()},[]);let v=async e=>{if(c(e),e.status===`new`)try{await JD(e.id,`read`),_()}catch(e){console.error(`Error marking as read:`,e)}},y=async()=>{if(!l.trim()){n(`Reply tidak boleh kosong`,`error`);return}try{await YD(s.id,l,t?.uid),n(`Reply berhasil dikirim!`,`success`),u(``),c(null),_()}catch(e){console.error(`Error sending reply:`,e),n(`Gagal mengirim reply`,`error`)}},x=async e=>{if(confirm(`Hapus pesan ini?`))try{await XD(e),n(`Pesan berhasil dihapus`,`success`),c(null),_()}catch(e){console.error(`Error deleting message:`,e),n(`Gagal menghapus pesan`,`error`)}},S=r.filter(e=>{let t=d===`all`||e.status===d,n=p===`all`||e.topic===p,r=h===``||e.name.toLowerCase().includes(h.toLowerCase())||e.email.toLowerCase().includes(h.toLowerCase())||e.message.toLowerCase().includes(h.toLowerCase());return t&&n&&r}),C={total:r.length,new:r.filter(e=>e.status===`new`).length,read:r.filter(e=>e.status===`read`).length,replied:r.filter(e=>e.status===`replied`).length},w=e=>e?(typeof e==`string`?new Date(e):e).toLocaleDateString(`id-ID`,{day:`2-digit`,month:`short`,year:`numeric`,hour:`2-digit`,minute:`2-digit`}):``;return a?(0,G.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,G.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,G.jsx)(`div`,{style:{display:`inline-block`,width:`48px`,height:`48px`,border:`4px solid #e2e8f0`,borderTopColor:`#e0b7a9`,borderRadius:`50%`,animation:`spin 1s linear infinite`}}),(0,G.jsx)(`p`,{style:{marginTop:`16px`,color:`#64748b`},children:`Loading messages...`})]})}):(0,G.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)`,minHeight:`100vh`,padding:`40px 20px`},children:[(0,G.jsxs)(`div`,{style:{maxWidth:`1400px`,margin:`0 auto`},children:[(0,G.jsxs)(`button`,{onClick:()=>e(`/admin`),style:{display:`inline-flex`,alignItems:`center`,gap:`8px`,marginBottom:`16px`,padding:`10px 16px`,backgroundColor:`#fff`,border:`2px solid #e2e8f0`,borderRadius:`8px`,fontSize:`14px`,fontWeight:`600`,color:`#475569`,cursor:`pointer`,transition:`all 0.2s`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`#f8fafc`,e.currentTarget.style.borderColor=`#cbd5e1`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`#fff`,e.currentTarget.style.borderColor=`#e2e8f0`},children:[(0,G.jsx)(cp,{size:18}),`Kembali ke Dashboard`]}),(0,G.jsxs)(`div`,{style:{marginBottom:`32px`},children:[(0,G.jsx)(`h1`,{style:{fontSize:`2rem`,fontWeight:`800`,color:`#111`,marginBottom:`8px`},children:` Contact Messages`}),(0,G.jsx)(`p`,{style:{color:`#64748b`,fontSize:`1rem`},children:`Kelola pesan dari pengguna melalui Call Center`})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(200px, 1fr))`,gap:`16px`,marginBottom:`24px`},children:[(0,G.jsx)(sH,{label:`Total Pesan`,value:C.total,color:`#3b82f6`,icon:(0,G.jsx)(Kp,{size:20})}),(0,G.jsx)(sH,{label:`Pesan Baru`,value:C.new,color:`#ef4444`,icon:(0,G.jsx)(vp,{size:20})}),(0,G.jsx)(sH,{label:`Sudah Dibaca`,value:C.read,color:`#f59e0b`,icon:(0,G.jsx)(Gp,{size:20})}),(0,G.jsx)(sH,{label:`Sudah Dibalas`,value:C.replied,color:`#10b981`,icon:(0,G.jsx)(om,{size:20})})]}),(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 450px`,gap:`24px`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{style:{background:`white`,padding:`20px`,borderRadius:`12px`,border:`2px solid #e2e8f0`,marginBottom:`16px`},children:(0,G.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 200px 200px`,gap:`12px`},children:[(0,G.jsxs)(`div`,{style:{position:`relative`},children:[(0,G.jsx)(am,{size:18,style:{position:`absolute`,left:`12px`,top:`50%`,transform:`translateY(-50%)`,color:`#94a3b8`}}),(0,G.jsx)(`input`,{type:`text`,placeholder:`Cari nama, email, atau pesan...`,value:h,onChange:e=>g(e.target.value),style:{width:`100%`,padding:`10px 12px 10px 40px`,border:`2px solid #e2e8f0`,borderRadius:`8px`,fontSize:`0.95rem`}})]}),(0,G.jsxs)(`select`,{value:d,onChange:e=>f(e.target.value),style:{padding:`10px 12px`,border:`2px solid #e2e8f0`,borderRadius:`8px`,fontSize:`0.95rem`},children:[(0,G.jsx)(`option`,{value:`all`,children:`Semua Status`}),(0,G.jsx)(`option`,{value:`new`,children:`Baru`}),(0,G.jsx)(`option`,{value:`read`,children:`Sudah Dibaca`}),(0,G.jsx)(`option`,{value:`replied`,children:`Sudah Dibalas`}),(0,G.jsx)(`option`,{value:`closed`,children:`Ditutup`})]}),(0,G.jsxs)(`select`,{value:p,onChange:e=>m(e.target.value),style:{padding:`10px 12px`,border:`2px solid #e2e8f0`,borderRadius:`8px`,fontSize:`0.95rem`},children:[(0,G.jsx)(`option`,{value:`all`,children:`Semua Topik`}),(0,G.jsx)(`option`,{value:`technical`,children:`Technical Support`}),(0,G.jsx)(`option`,{value:`account`,children:`Account Issues`}),(0,G.jsx)(`option`,{value:`billing`,children:`Billing & Payments`}),(0,G.jsx)(`option`,{value:`general`,children:`General Inquiry`}),(0,G.jsx)(`option`,{value:`feedback`,children:`Feedback`})]})]})}),(0,G.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:S.length===0?(0,G.jsxs)(`div`,{style:{background:`white`,padding:`60px 20px`,borderRadius:`12px`,border:`2px solid #e2e8f0`,textAlign:`center`},children:[(0,G.jsx)(Kp,{size:48,style:{color:`#cbd5e1`,margin:`0 auto 16px`}}),(0,G.jsx)(`p`,{style:{color:`#64748b`,fontSize:`1rem`},children:`Tidak ada pesan yang ditemukan`})]}):S.map(e=>(0,G.jsx)(cH,{message:e,onOpen:()=>v(e),onDelete:()=>x(e.id),isSelected:s?.id===e.id},e.id))})]}),(0,G.jsx)(`div`,{style:{position:`sticky`,top:`20px`},children:s?(0,G.jsxs)(`div`,{style:{background:`white`,border:`2px solid #e2e8f0`,borderRadius:`12px`,overflow:`hidden`},children:[(0,G.jsxs)(`div`,{style:{padding:`20px`,borderBottom:`2px solid #e2e8f0`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,G.jsx)(`h3`,{style:{fontSize:`1.2rem`,fontWeight:`700`,color:`#111`},children:`Detail Pesan`}),(0,G.jsx)(`button`,{onClick:()=>c(null),style:{background:`none`,border:`none`,cursor:`pointer`,color:`#64748b`,padding:`4px`},children:(0,G.jsx)(Cm,{size:20})})]}),(0,G.jsxs)(`div`,{style:{padding:`20px`},children:[(0,G.jsxs)(`div`,{style:{marginBottom:`20px`},children:[(0,G.jsx)(`h4`,{style:{fontSize:`1.1rem`,fontWeight:`700`,color:`#111`,marginBottom:`8px`},children:s.name}),(0,G.jsxs)(`p`,{style:{color:`#64748b`,fontSize:`0.9rem`,marginBottom:`4px`},children:[` `,s.email]}),(0,G.jsxs)(`p`,{style:{color:`#64748b`,fontSize:`0.9rem`,marginBottom:`12px`},children:[` `,s.phone]}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,flexWrap:`wrap`},children:[(0,G.jsx)(lH,{status:s.status}),(0,G.jsx)(uH,{priority:s.priority}),(0,G.jsx)(`span`,{style:{padding:`4px 12px`,background:`#f1f5f9`,borderRadius:`20px`,fontSize:`0.85rem`,color:`#475569`},children:$D(s.topic)})]})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`20px`},children:[(0,G.jsx)(`h5`,{style:{fontSize:`0.9rem`,fontWeight:`600`,color:`#64748b`,marginBottom:`8px`},children:`Pesan:`}),(0,G.jsx)(`div`,{style:{background:`#f8f9fa`,padding:`16px`,borderRadius:`8px`,color:`#334155`,lineHeight:`1.6`,whiteSpace:`pre-wrap`},children:s.message})]}),s.reply&&(0,G.jsxs)(`div`,{style:{marginBottom:`20px`},children:[(0,G.jsx)(`h5`,{style:{fontSize:`0.9rem`,fontWeight:`600`,color:`#64748b`,marginBottom:`8px`},children:`Balasan:`}),(0,G.jsx)(`div`,{style:{background:`#e7f5ff`,padding:`16px`,borderRadius:`8px`,borderLeft:`4px solid #3b82f6`,color:`#334155`,lineHeight:`1.6`,whiteSpace:`pre-wrap`},children:s.reply}),(0,G.jsxs)(`p`,{style:{fontSize:`0.8rem`,color:`#94a3b8`,marginTop:`8px`},children:[` Dibalas pada `,w(s.repliedAt)]})]}),s.status!==`replied`&&s.status!==`closed`&&(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h5`,{style:{fontSize:`0.9rem`,fontWeight:`600`,color:`#64748b`,marginBottom:`8px`},children:`Balas Pesan:`}),(0,G.jsx)(`textarea`,{value:l,onChange:e=>u(e.target.value),placeholder:`Tulis balasan Anda di sini...`,rows:`5`,style:{width:`100%`,padding:`12px`,border:`2px solid #e2e8f0`,borderRadius:`8px`,fontSize:`0.95rem`,resize:`vertical`,fontFamily:`inherit`}}),(0,G.jsxs)(`button`,{onClick:y,style:{marginTop:`12px`,width:`100%`,padding:`12px`,background:`linear-gradient(135deg, #e0b7a9 0%, #c89585 100%)`,color:`white`,border:`none`,borderRadius:`8px`,fontSize:`1rem`,fontWeight:`600`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`8px`},children:[(0,G.jsx)(om,{size:18}),`Kirim Balasan`]})]}),(0,G.jsx)(`div`,{style:{marginTop:`20px`,paddingTop:`20px`,borderTop:`1px solid #e2e8f0`},children:(0,G.jsxs)(`p`,{style:{fontSize:`0.8rem`,color:`#94a3b8`,display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,G.jsx)(Sp,{size:14}),w(s.createdAt)]})})]})]}):(0,G.jsxs)(`div`,{style:{background:`white`,border:`2px solid #e2e8f0`,borderRadius:`12px`,padding:`60px 20px`,textAlign:`center`},children:[(0,G.jsx)(Kp,{size:48,style:{color:`#cbd5e1`,margin:`0 auto 16px`}}),(0,G.jsx)(`p`,{style:{color:`#64748b`},children:`Pilih pesan untuk melihat detail`})]})})]})]}),(0,G.jsx)(`style`,{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function sH({label:e,value:t,color:n,icon:r}){return(0,G.jsxs)(`div`,{style:{background:`white`,padding:`20px`,borderRadius:`12px`,border:`2px solid #e2e8f0`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,marginBottom:`8px`},children:[(0,G.jsx)(`div`,{style:{background:n,color:`white`,padding:`8px`,borderRadius:`8px`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:r}),(0,G.jsx)(`p`,{style:{fontSize:`0.9rem`,color:`#64748b`,margin:0},children:e})]}),(0,G.jsx)(`p`,{style:{fontSize:`2rem`,fontWeight:`800`,color:`#111`,margin:0},children:t})]})}function cH({message:e,onOpen:t,onDelete:n,isSelected:r}){return(0,G.jsxs)(`div`,{onClick:t,style:{background:r?`#fff5f2`:`white`,padding:`16px 20px`,borderRadius:`12px`,border:`2px solid ${r?`#e0b7a9`:`#e2e8f0`}`,cursor:`pointer`,transition:`all 0.2s`,position:`relative`},onMouseEnter:e=>{r||(e.currentTarget.style.borderColor=`#cbd5e1`,e.currentTarget.style.transform=`translateX(4px)`)},onMouseLeave:e=>{r||(e.currentTarget.style.borderColor=`#e2e8f0`,e.currentTarget.style.transform=`translateX(0)`)},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`8px`},children:[(0,G.jsxs)(`div`,{style:{flex:1},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`6px`},children:[e.status===`new`&&(0,G.jsx)(`span`,{style:{width:`8px`,height:`8px`,background:`#ef4444`,borderRadius:`50%`,flexShrink:0}}),(0,G.jsx)(`h4`,{style:{fontSize:`1rem`,fontWeight:`700`,color:`#111`,margin:0},children:e.name})]}),(0,G.jsx)(`p`,{style:{fontSize:`0.85rem`,color:`#64748b`,margin:`0 0 8px`},children:e.email})]}),(0,G.jsx)(`button`,{onClick:e=>{e.stopPropagation(),n()},style:{background:`none`,border:`none`,cursor:`pointer`,color:`#ef4444`,padding:`4px`},title:`Hapus pesan`,children:(0,G.jsx)(hm,{size:18})})]}),(0,G.jsx)(`p`,{style:{fontSize:`0.9rem`,color:`#334155`,margin:`0 0 12px`,overflow:`hidden`,textOverflow:`ellipsis`,display:`-webkit-box`,WebkitLineClamp:2,WebkitBoxOrient:`vertical`},children:e.message}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,flexWrap:`wrap`,alignItems:`center`},children:[(0,G.jsx)(lH,{status:e.status}),(0,G.jsx)(uH,{priority:e.priority}),(0,G.jsx)(`span`,{style:{padding:`4px 10px`,background:`#f1f5f9`,borderRadius:`20px`,fontSize:`0.75rem`,color:`#475569`},children:$D(e.topic)}),(0,G.jsxs)(`span`,{style:{marginLeft:`auto`,fontSize:`0.75rem`,color:`#94a3b8`,display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,G.jsx)(Sp,{size:12}),new Date(e.createdAt).toLocaleDateString(`id-ID`,{day:`2-digit`,month:`short`})]})]})]})}function lH({status:e}){return(0,G.jsx)(`span`,{style:{padding:`4px 10px`,background:eO(e),color:`white`,borderRadius:`20px`,fontSize:`0.75rem`,fontWeight:`600`},children:{new:`Baru`,read:`Dibaca`,replied:`Dibalas`,closed:`Ditutup`}[e]||e})}function uH({priority:e}){return(0,G.jsx)(`span`,{style:{padding:`4px 10px`,background:tO(e),color:`white`,borderRadius:`20px`,fontSize:`0.75rem`,fontWeight:`600`},children:{low:`Rendah`,medium:`Sedang`,high:`Tinggi`}[e]||e})}function dH(){let e=Le(),{user:t}=In(),[n,r]=(0,b.useState)([]),[i,a]=(0,b.useState)({total:0,pending:0,approved:0,rejected:0}),[o,s]=(0,b.useState)(`all`),[c,l]=(0,b.useState)(!0),[u,d]=(0,b.useState)(null);(0,b.useEffect)(()=>{f()},[]);let f=async()=>{l(!0);try{let[e,t]=await Promise.all([oO(),lO()]);r(e),a(t)}catch(e){console.error(`Error loading affiliate data:`,e)}finally{l(!1)}},p=async(e,n)=>{window.confirm(`Apakah Anda yakin ingin ${n===`approved`?`menyetujui`:`menolak`} aplikasi ini?`)&&((await sO(e,n,t.email)).success?(alert(`Aplikasi berhasil ${n===`approved`?`disetujui`:`ditolak`}!`),f(),d(null)):alert(`Gagal mengupdate status aplikasi`))},m=async e=>{window.confirm(`Apakah Anda yakin ingin menghapus aplikasi ini?`)&&((await cO(e)).success?(alert(`Aplikasi berhasil dihapus!`),f(),d(null)):alert(`Gagal menghapus aplikasi`))},h=o===`all`?n:n.filter(e=>e.status===o),g=e=>e?new Date(e).toLocaleString(`id-ID`,{day:`2-digit`,month:`short`,year:`numeric`,hour:`2-digit`,minute:`2-digit`}):`-`,_=e=>{let t={pending:{label:`Pending`,color:`#f59e0b`},approved:{label:`Approved`,color:`#10b981`},rejected:{label:`Rejected`,color:`#ef4444`}},n=t[e]||t.pending;return(0,G.jsx)(`span`,{style:{padding:`4px 12px`,borderRadius:`12px`,fontSize:`0.85rem`,fontWeight:`600`,backgroundColor:`${n.color}20`,color:n.color},children:n.label})};return c?(0,G.jsx)(`div`,{className:`admin-affiliates`,children:(0,G.jsx)(`div`,{className:`loading-state`,children:`Loading...`})}):(0,G.jsxs)(`div`,{className:`admin-affiliates`,children:[(0,G.jsxs)(`button`,{onClick:()=>e(`/admin`),style:{display:`inline-flex`,alignItems:`center`,gap:`8px`,marginBottom:`16px`,padding:`10px 16px`,backgroundColor:`#fff`,border:`2px solid #e2e8f0`,borderRadius:`8px`,fontSize:`14px`,fontWeight:`600`,color:`#475569`,cursor:`pointer`,transition:`all 0.2s`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`#f8fafc`,e.currentTarget.style.borderColor=`#cbd5e1`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`#fff`,e.currentTarget.style.borderColor=`#e2e8f0`},children:[(0,G.jsx)(cp,{size:18}),`Kembali ke Dashboard`]}),(0,G.jsxs)(`div`,{className:`page-header`,children:[(0,G.jsx)(`h1`,{children:` Affiliate Applications`}),(0,G.jsx)(`p`,{children:`Kelola aplikasi affiliate partner`})]}),(0,G.jsxs)(`div`,{className:`stats-grid`,children:[(0,G.jsxs)(`div`,{className:`stat-card`,children:[(0,G.jsx)(`div`,{className:`stat-icon`,children:``}),(0,G.jsxs)(`div`,{className:`stat-info`,children:[(0,G.jsx)(`div`,{className:`stat-value`,children:i.total}),(0,G.jsx)(`div`,{className:`stat-label`,children:`Total Applications`})]})]}),(0,G.jsxs)(`div`,{className:`stat-card`,children:[(0,G.jsx)(`div`,{className:`stat-icon`,children:``}),(0,G.jsxs)(`div`,{className:`stat-info`,children:[(0,G.jsx)(`div`,{className:`stat-value`,children:i.pending}),(0,G.jsx)(`div`,{className:`stat-label`,children:`Pending Review`})]})]}),(0,G.jsxs)(`div`,{className:`stat-card`,children:[(0,G.jsx)(`div`,{className:`stat-icon`,children:``}),(0,G.jsxs)(`div`,{className:`stat-info`,children:[(0,G.jsx)(`div`,{className:`stat-value`,children:i.approved}),(0,G.jsx)(`div`,{className:`stat-label`,children:`Approved`})]})]}),(0,G.jsxs)(`div`,{className:`stat-card`,children:[(0,G.jsx)(`div`,{className:`stat-icon`,children:``}),(0,G.jsxs)(`div`,{className:`stat-info`,children:[(0,G.jsx)(`div`,{className:`stat-value`,children:i.rejected}),(0,G.jsx)(`div`,{className:`stat-label`,children:`Rejected`})]})]})]}),(0,G.jsxs)(`div`,{className:`filter-tabs`,children:[(0,G.jsxs)(`button`,{className:o===`all`?`active`:``,onClick:()=>s(`all`),children:[`All (`,i.total,`)`]}),(0,G.jsxs)(`button`,{className:o===`pending`?`active`:``,onClick:()=>s(`pending`),children:[`Pending (`,i.pending,`)`]}),(0,G.jsxs)(`button`,{className:o===`approved`?`active`:``,onClick:()=>s(`approved`),children:[`Approved (`,i.approved,`)`]}),(0,G.jsxs)(`button`,{className:o===`rejected`?`active`:``,onClick:()=>s(`rejected`),children:[`Rejected (`,i.rejected,`)`]})]}),(0,G.jsx)(`div`,{className:`applications-section`,children:h.length===0?(0,G.jsxs)(`div`,{className:`empty-state`,children:[(0,G.jsx)(`div`,{className:`empty-icon`,children:``}),(0,G.jsxs)(`h3`,{children:[`Tidak ada aplikasi `,o===`all`?``:o]}),(0,G.jsx)(`p`,{children:`Belum ada aplikasi affiliate yang masuk`})]}):(0,G.jsx)(`div`,{className:`table-container`,children:(0,G.jsxs)(`table`,{className:`applications-table`,children:[(0,G.jsx)(`thead`,{children:(0,G.jsxs)(`tr`,{children:[(0,G.jsx)(`th`,{children:`Name`}),(0,G.jsx)(`th`,{children:`Email`}),(0,G.jsx)(`th`,{children:`Platform`}),(0,G.jsx)(`th`,{children:`Followers`}),(0,G.jsx)(`th`,{children:`Niche`}),(0,G.jsx)(`th`,{children:`Submitted`}),(0,G.jsx)(`th`,{children:`Status`}),(0,G.jsx)(`th`,{children:`Actions`})]})}),(0,G.jsx)(`tbody`,{children:h.map(e=>(0,G.jsxs)(`tr`,{children:[(0,G.jsx)(`td`,{children:(0,G.jsx)(`strong`,{children:e.name})}),(0,G.jsx)(`td`,{children:e.email}),(0,G.jsx)(`td`,{children:(0,G.jsx)(`span`,{className:`platform-badge`,children:e.platform})}),(0,G.jsx)(`td`,{children:e.followers}),(0,G.jsx)(`td`,{children:e.niche}),(0,G.jsx)(`td`,{children:g(e.submittedAt)}),(0,G.jsx)(`td`,{children:_(e.status)}),(0,G.jsx)(`td`,{children:(0,G.jsxs)(`div`,{className:`action-buttons`,children:[(0,G.jsx)(`button`,{className:`btn-view`,onClick:()=>d(e),title:`View Details`,children:``}),e.status===`pending`&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`button`,{className:`btn-approve`,onClick:()=>p(e.id,`approved`),title:`Approve`,children:``}),(0,G.jsx)(`button`,{className:`btn-reject`,onClick:()=>p(e.id,`rejected`),title:`Reject`,children:``})]}),(0,G.jsx)(`button`,{className:`btn-delete`,onClick:()=>m(e.id),title:`Delete`,children:``})]})})]},e.id))})]})})}),u&&(0,G.jsx)(`div`,{className:`modal-overlay`,onClick:()=>d(null),children:(0,G.jsxs)(`div`,{className:`modal-content`,onClick:e=>e.stopPropagation(),children:[(0,G.jsxs)(`div`,{className:`modal-header`,children:[(0,G.jsx)(`h2`,{children:`Application Details`}),(0,G.jsx)(`button`,{className:`close-btn`,onClick:()=>d(null),children:``})]}),(0,G.jsxs)(`div`,{className:`modal-body`,children:[(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Name:`}),(0,G.jsx)(`p`,{children:u.name})]}),(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Email:`}),(0,G.jsx)(`p`,{children:u.email})]}),(0,G.jsxs)(`div`,{className:`detail-row`,children:[(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Platform:`}),(0,G.jsx)(`p`,{children:u.platform})]}),(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Followers:`}),(0,G.jsx)(`p`,{children:u.followers})]})]}),(0,G.jsxs)(`div`,{className:`detail-row`,children:[(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Niche:`}),(0,G.jsx)(`p`,{children:u.niche})]}),(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Website:`}),(0,G.jsx)(`p`,{children:u.website?(0,G.jsx)(`a`,{href:u.website,target:`_blank`,rel:`noopener noreferrer`,children:u.website}):`-`})]})]}),(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Message:`}),(0,G.jsx)(`p`,{className:`message-text`,children:u.message})]}),(0,G.jsxs)(`div`,{className:`detail-row`,children:[(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Submitted:`}),(0,G.jsx)(`p`,{children:g(u.submittedAt)})]}),(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Status:`}),(0,G.jsx)(`p`,{children:_(u.status)})]})]}),u.reviewedAt&&(0,G.jsxs)(`div`,{className:`detail-row`,children:[(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Reviewed At:`}),(0,G.jsx)(`p`,{children:g(u.reviewedAt)})]}),(0,G.jsxs)(`div`,{className:`detail-group`,children:[(0,G.jsx)(`label`,{children:`Reviewed By:`}),(0,G.jsx)(`p`,{children:u.reviewedBy||`-`})]})]})]}),(0,G.jsxs)(`div`,{className:`modal-footer`,children:[u.status===`pending`&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(`button`,{className:`btn btn-approve-large`,onClick:()=>p(u.id,`approved`),children:` Approve`}),(0,G.jsx)(`button`,{className:`btn btn-reject-large`,onClick:()=>p(u.id,`rejected`),children:` Reject`})]}),(0,G.jsx)(`button`,{className:`btn btn-delete-large`,onClick:()=>m(u.id),children:` Delete`})]})]})}),(0,G.jsx)(`style`,{jsx:!0,children:`
        .admin-affiliates {
          padding: 20px;
        }

        .page-header {
          margin-bottom: 30px;
        }

        .page-header h1 {
          font-size: 2rem;
          margin-bottom: 8px;
          color: #111;
        }

        .page-header p {
          color: #64748b;
          font-size: 1rem;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 20px;
          margin-bottom: 30px;
        }

        .stat-card {
          background: white;
          padding: 20px;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          display: flex;
          gap: 16px;
          align-items: center;
        }

        .stat-icon {
          font-size: 2.5rem;
        }

        .stat-value {
          font-size: 2rem;
          font-weight: 700;
          color: #111;
        }

        .stat-label {
          font-size: 0.85rem;
          color: #64748b;
          margin-top: 4px;
        }

        .filter-tabs {
          display: flex;
          gap: 12px;
          margin-bottom: 24px;
          border-bottom: 2px solid #e2e8f0;
          padding-bottom: 0;
        }

        .filter-tabs button {
          padding: 12px 20px;
          background: none;
          border: none;
          border-bottom: 3px solid transparent;
          cursor: pointer;
          font-weight: 600;
          color: #64748b;
          transition: all 0.3s;
          margin-bottom: -2px;
        }

        .filter-tabs button:hover {
          color: #e0b7a9;
        }

        .filter-tabs button.active {
          color: #e0b7a9;
          border-bottom-color: #e0b7a9;
        }

        .applications-section {
          background: white;
          border-radius: 12px;
          border: 2px solid #e2e8f0;
          overflow: hidden;
        }

        .table-container {
          overflow-x: auto;
        }

        .applications-table {
          width: 100%;
          border-collapse: collapse;
        }

        .applications-table th {
          background: #f8f9fa;
          padding: 16px;
          text-align: left;
          font-weight: 600;
          color: #334155;
          border-bottom: 2px solid #e2e8f0;
          white-space: nowrap;
        }

        .applications-table td {
          padding: 16px;
          border-bottom: 1px solid #e2e8f0;
          color: #475569;
        }

        .applications-table tbody tr:hover {
          background: #f8f9fa;
        }

        .platform-badge {
          display: inline-block;
          padding: 4px 10px;
          background: #e0b7a9;
          color: white;
          border-radius: 8px;
          font-size: 0.85rem;
          font-weight: 600;
          text-transform: capitalize;
        }

        .action-buttons {
          display: flex;
          gap: 6px;
        }

        .action-buttons button {
          width: 32px;
          height: 32px;
          border: none;
          border-radius: 6px;
          cursor: pointer;
          font-size: 1rem;
          transition: all 0.2s;
          background: #f1f5f9;
        }

        .action-buttons button:hover {
          transform: scale(1.1);
        }

        .btn-view:hover {
          background: #dbeafe;
        }

        .btn-approve:hover {
          background: #dcfce7;
        }

        .btn-reject:hover {
          background: #fee2e2;
        }

        .btn-delete:hover {
          background: #fee2e2;
        }

        .empty-state {
          text-align: center;
          padding: 60px 20px;
        }

        .empty-icon {
          font-size: 4rem;
          margin-bottom: 16px;
        }

        .empty-state h3 {
          font-size: 1.5rem;
          margin-bottom: 8px;
          color: #111;
        }

        .empty-state p {
          color: #64748b;
        }

        .loading-state {
          text-align: center;
          padding: 60px;
          font-size: 1.2rem;
          color: #64748b;
        }

        /* Modal Styles */
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 20px;
        }

        .modal-content {
          background: white;
          border-radius: 16px;
          max-width: 700px;
          width: 100%;
          max-height: 90vh;
          overflow-y: auto;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
          padding: 24px;
          border-bottom: 2px solid #e2e8f0;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .modal-header h2 {
          font-size: 1.5rem;
          margin: 0;
          color: #111;
        }

        .close-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: #f1f5f9;
          border-radius: 8px;
          cursor: pointer;
          font-size: 1.2rem;
          color: #64748b;
          transition: all 0.2s;
        }

        .close-btn:hover {
          background: #e2e8f0;
          color: #111;
        }

        .modal-body {
          padding: 24px;
        }

        .detail-group {
          margin-bottom: 20px;
        }

        .detail-group label {
          display: block;
          font-weight: 600;
          color: #334155;
          margin-bottom: 6px;
          font-size: 0.9rem;
        }

        .detail-group p {
          margin: 0;
          color: #475569;
          font-size: 1rem;
        }

        .detail-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
        }

        .message-text {
          background: #f8f9fa;
          padding: 16px;
          border-radius: 8px;
          line-height: 1.6;
          white-space: pre-wrap;
        }

        .detail-group a {
          color: #e0b7a9;
          text-decoration: none;
        }

        .detail-group a:hover {
          text-decoration: underline;
        }

        .modal-footer {
          padding: 20px 24px;
          border-top: 2px solid #e2e8f0;
          display: flex;
          gap: 12px;
          justify-content: flex-end;
        }

        .modal-footer .btn {
          padding: 10px 20px;
          border: none;
          border-radius: 8px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .btn-approve-large {
          background: #dcfce7;
          color: #10b981;
        }

        .btn-approve-large:hover {
          background: #bbf7d0;
        }

        .btn-reject-large {
          background: #fee2e2;
          color: #ef4444;
        }

        .btn-reject-large:hover {
          background: #fecaca;
        }

        .btn-delete-large {
          background: #fee2e2;
          color: #ef4444;
        }

        .btn-delete-large:hover {
          background: #fecaca;
        }

        @media (max-width: 1024px) {
          .stats-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }

        @media (max-width: 768px) {
          .stats-grid {
            grid-template-columns: 1fr;
          }

          .filter-tabs {
            overflow-x: auto;
            flex-wrap: nowrap;
          }

          .detail-row {
            grid-template-columns: 1fr;
          }

          .modal-footer {
            flex-direction: column;
          }

          .modal-footer .btn {
            width: 100%;
          }
        }
      `})]})}var fH=()=>{let[e,t]=(0,b.useState)([]),[n,r]=(0,b.useState)([]),[i,a]=(0,b.useState)(!0),[o,s]=(0,b.useState)(!1),[c,l]=(0,b.useState)(null),[u,d]=(0,b.useState)({name:``,description:``,frameIds:[]});(0,b.useEffect)(()=>{f(),p()},[]);let f=async()=>{try{a(!0);let e=await qk.get(`/admin/packages`);t(e.data.data||[])}catch(e){console.error(`Load packages error:`,e),alert(`Failed to load packages`)}finally{a(!1)}},p=async()=>{try{let e=(await qk.get(`/frames`)).data;r(Array.isArray(e)?e:e.frames||[])}catch(e){console.error(`Load frames error:`,e)}},m=async e=>{if(e.preventDefault(),u.frameIds.length>10){alert(`Maksimal 10 frames per paket`);return}if(u.frameIds.length===0){alert(`Pilih minimal 1 frame`);return}try{s(!0),c?(await qk.put(`/admin/packages/${c.id}`,u),alert(`Paket berhasil diupdate`)):(await qk.post(`/admin/packages`,u),alert(`Paket berhasil dibuat`)),v(),f()}catch(e){console.error(`Submit error:`,e),alert(e.response?.data?.message||`Failed to save package`)}finally{s(!1)}},h=e=>{l(e),d({name:e.name,description:e.description||``,frameIds:e.frame_ids||[]})},g=async e=>{if(confirm(`Yakin ingin menghapus paket ini?`))try{await qk.delete(`/admin/packages/${e}`),alert(`Paket berhasil dihapus`),f()}catch(e){console.error(`Delete error:`,e),alert(`Failed to delete package`)}},_=async(e,t)=>{try{await qk.put(`/admin/packages/${e}`,{isActive:!t}),f()}catch(e){console.error(`Toggle active error:`,e),alert(`Failed to update status`)}},v=()=>{d({name:``,description:``,frameIds:[]}),l(null)},y=e=>{d(t=>t.frameIds.includes(e)?{...t,frameIds:t.frameIds.filter(t=>t!==e)}:t.frameIds.length>=10?(alert(`Maksimal 10 frames per paket`),t):{...t,frameIds:[...t.frameIds,e]})};return i?(0,G.jsx)(`div`,{className:`admin-packages`,children:(0,G.jsx)(`div`,{className:`loading`,children:`Loading...`})}):(0,G.jsxs)(`div`,{className:`admin-packages`,children:[(0,G.jsxs)(`div`,{className:`packages-header`,children:[(0,G.jsx)(`h1`,{children:` Manajemen Paket Frame`}),(0,G.jsx)(`p`,{children:`Kelola paket frame yang akan dijual kepada user`})]}),(0,G.jsxs)(`div`,{className:`package-form-card`,children:[(0,G.jsx)(`h2`,{children:c?` Edit Paket`:` Buat Paket Baru`}),(0,G.jsxs)(`form`,{onSubmit:m,children:[(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Nama Paket *`}),(0,G.jsx)(`input`,{type:`text`,value:u.name,onChange:e=>d({...u,name:e.target.value}),placeholder:`Contoh: Paket Premium 1`,required:!0})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsx)(`label`,{children:`Deskripsi`}),(0,G.jsx)(`textarea`,{value:u.description,onChange:e=>d({...u,description:e.target.value}),placeholder:`Deskripsi paket (opsional)`,rows:3})]}),(0,G.jsxs)(`div`,{className:`form-group`,children:[(0,G.jsxs)(`label`,{children:[`Pilih Frames (`,u.frameIds.length,`/10) *`]}),(0,G.jsx)(`div`,{className:`frames-selection`,children:n.map(e=>{let t=u.frameIds.includes(e.id);return(0,G.jsxs)(`div`,{className:`frame-item ${t?`selected`:``}`,onClick:()=>y(e.id),children:[(0,G.jsx)(`div`,{className:`frame-preview`,children:e.thumbnailUrl||e.imageUrl?(0,G.jsx)(`img`,{src:e.thumbnailUrl||e.imageUrl,alt:e.name,onError:e=>e.target.src=`/placeholder-frame.png`}):(0,G.jsx)(`div`,{className:`no-image`,children:`No Image`})}),(0,G.jsxs)(`div`,{className:`frame-info`,children:[(0,G.jsx)(`span`,{className:`frame-name`,children:e.name}),t&&(0,G.jsx)(`span`,{className:`check-mark`,children:``})]})]},e.id)})})]}),(0,G.jsxs)(`div`,{className:`form-actions`,children:[(0,G.jsx)(`button`,{type:`submit`,className:`btn-primary`,disabled:o,children:o?`Menyimpan...`:c?`Update Paket`:`Buat Paket`}),c&&(0,G.jsx)(`button`,{type:`button`,className:`btn-secondary`,onClick:v,children:`Batal`})]})]})]}),(0,G.jsxs)(`div`,{className:`packages-list`,children:[(0,G.jsxs)(`h2`,{children:[` Daftar Paket (`,e.length,`)`]}),e.length===0?(0,G.jsx)(`div`,{className:`empty-state`,children:(0,G.jsx)(`p`,{children:`Belum ada paket. Buat paket pertama Anda!`})}):(0,G.jsx)(`div`,{className:`packages-grid`,children:e.map(e=>(0,G.jsxs)(`div`,{className:`package-card ${e.is_active?``:`inactive`}`,children:[(0,G.jsxs)(`div`,{className:`package-header`,children:[(0,G.jsx)(`h3`,{children:e.name}),(0,G.jsxs)(`div`,{className:`package-actions`,children:[(0,G.jsx)(`button`,{className:`btn-toggle ${e.is_active?`active`:`inactive`}`,onClick:()=>_(e.id,e.is_active),title:e.is_active?`Nonaktifkan`:`Aktifkan`,children:e.is_active?``:``}),(0,G.jsx)(`button`,{className:`btn-edit`,onClick:()=>h(e),title:`Edit`,children:``}),(0,G.jsx)(`button`,{className:`btn-delete`,onClick:()=>g(e.id),title:`Hapus`,children:``})]})]}),e.description&&(0,G.jsx)(`p`,{className:`package-description`,children:e.description}),(0,G.jsxs)(`div`,{className:`package-stats`,children:[(0,G.jsxs)(`span`,{className:`stat`,children:[(0,G.jsx)(`strong`,{children:e.frame_ids?.length||0}),` frames`]}),(0,G.jsx)(`span`,{className:`status ${e.is_active?`active`:`inactive`}`,children:e.is_active?` Aktif`:` Nonaktif`})]}),(0,G.jsxs)(`div`,{className:`package-frames-preview`,children:[e.frame_ids?.slice(0,5).map((e,t)=>{let r=n.find(t=>t.id===e);return r?(0,G.jsx)(`div`,{className:`mini-frame`,title:r.name,children:r.thumbnailUrl||r.imageUrl?(0,G.jsx)(`img`,{src:r.thumbnailUrl||r.imageUrl,alt:r.name}):(0,G.jsx)(`div`,{className:`no-img`,children:`?`})},t):null}),e.frame_ids?.length>5&&(0,G.jsxs)(`div`,{className:`more-frames`,children:[`+`,e.frame_ids.length-5]})]})]},e.id))})]})]})};function pH(){let[e,t]=(0,b.useState)(!1),[n,r]=(0,b.useState)(`Fremio sedang maintenance. Silakan coba lagi nanti.`),[i,a]=(0,b.useState)([]),[o,s]=(0,b.useState)(``),[c,l]=(0,b.useState)(!1),[u,d]=(0,b.useState)(!1);(0,b.useEffect)(()=>{m(),h()},[]);let f=()=>localStorage.getItem(`fremio_token`)||localStorage.getItem(`auth_token`)||localStorage.getItem(`token`),p=()=>{let e=`https://api.fremio.id/api`.replace(/\/$/,``);return e.endsWith(`/api`)?{base:e,prefix:``}:{base:e,prefix:`/api`}},m=async()=>{try{l(!0);let{base:e,prefix:n}=p(),i=await(await fetch(`${e}${n}/maintenance/status`)).json();i.success&&(t(i.enabled),r(i.message||``))}catch(e){console.error(`Error loading maintenance status:`,e)}finally{l(!1)}},h=async()=>{try{let e=f();if(!e)return;let{base:t,prefix:n}=p(),r=await fetch(`${t}${n}/maintenance/admin/whitelist`,{headers:{Authorization:`Bearer ${e}`}});if(r.ok){let e=await r.json();a(e.whitelist||[])}}catch(e){console.error(`Error loading whitelist:`,e)}},g=async()=>{try{d(!0);let r=f();if(!r)throw Error(`No token provided`);let{base:i,prefix:a}=p();if(!(await fetch(`${i}${a}/maintenance/admin/status`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${r}`},body:JSON.stringify({enabled:!e,message:n})})).ok)throw Error(`Failed to update maintenance mode`);t(!e),alert(`Maintenance mode ${e?`disabled`:`enabled`} successfully!`)}catch(e){console.error(`Error toggling maintenance:`,e),alert(`Failed to toggle maintenance mode: `+e.message)}finally{d(!1)}},_=async()=>{if(o.trim())try{d(!0);let e=f();if(!e)throw Error(`No token provided`);let{base:t,prefix:n}=p();if(!(await fetch(`${t}${n}/maintenance/admin/whitelist`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${e}`},body:JSON.stringify({email:o.trim().toLowerCase()})})).ok)throw Error(`Failed to add to whitelist`);await h(),s(``),alert(`Email added to whitelist!`)}catch(e){console.error(`Error adding to whitelist:`,e),alert(`Failed to add email: `+e.message)}finally{d(!1)}},v=async e=>{if(window.confirm(`Remove ${e} from whitelist?`))try{d(!0);let t=f();if(!t)throw Error(`No token provided`);let{base:n,prefix:r}=p();if(!(await fetch(`${n}${r}/maintenance/admin/whitelist/${encodeURIComponent(e)}`,{method:`DELETE`,headers:{Authorization:`Bearer ${t}`}})).ok)throw Error(`Failed to remove from whitelist`);await h(),alert(`Email removed from whitelist!`)}catch(e){console.error(`Error removing from whitelist:`,e),alert(`Failed to remove email: `+e.message)}finally{d(!1)}};return c?(0,G.jsxs)(`div`,{className:`admin-container`,children:[(0,G.jsx)(`div`,{className:`admin-header`,children:(0,G.jsx)(`h1`,{children:`Maintenance Mode`})}),(0,G.jsx)(`div`,{className:`loading`,children:`Loading...`})]}):(0,G.jsxs)(`div`,{className:`admin-container`,children:[(0,G.jsx)(`div`,{className:`admin-header`,children:(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`h1`,{children:[(0,G.jsx)(dm,{size:28}),`Maintenance Mode`]}),(0,G.jsx)(`p`,{children:`Manage site maintenance and whitelist access`})]})}),(0,G.jsxs)(`div`,{className:`admin-card`,style:{marginBottom:`2rem`},children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`1rem`,marginBottom:`1.5rem`},children:[e?(0,G.jsx)(vp,{size:32,style:{color:`#f59e0b`}}):(0,G.jsx)(yp,{size:32,style:{color:`#10b981`}}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h2`,{style:{margin:0,fontSize:`1.5rem`},children:e?`Maintenance Active`:`Site Online`}),(0,G.jsx)(`p`,{style:{margin:`0.25rem 0 0`,color:`#6b7280`},children:e?`Public access is disabled`:`Site is accessible to all users`})]})]}),(0,G.jsxs)(`div`,{style:{marginBottom:`1rem`},children:[(0,G.jsx)(`label`,{style:{display:`block`,marginBottom:`0.5rem`,fontWeight:600},children:`Maintenance Message`}),(0,G.jsx)(`textarea`,{value:n,onChange:e=>r(e.target.value),placeholder:`Message to show users during maintenance`,rows:3,style:{width:`100%`,padding:`0.75rem`,border:`1px solid #d1d5db`,borderRadius:`0.5rem`,fontSize:`0.95rem`,fontFamily:`inherit`}})]}),(0,G.jsx)(`button`,{onClick:g,disabled:u,style:{padding:`0.75rem 1.5rem`,background:e?`#10b981`:`#f59e0b`,color:`white`,border:`none`,borderRadius:`0.5rem`,fontSize:`1rem`,fontWeight:600,cursor:u?`not-allowed`:`pointer`,opacity:u?.7:1},children:u?`Saving...`:e?`Disable Maintenance`:`Enable Maintenance`})]}),(0,G.jsxs)(`div`,{className:`admin-card`,children:[(0,G.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.75rem`,marginBottom:`1.5rem`},children:[(0,G.jsx)(Sm,{size:24}),(0,G.jsx)(`h2`,{style:{margin:0,fontSize:`1.25rem`},children:`Whitelist Management`})]}),(0,G.jsx)(`div`,{style:{background:`#f9fafb`,padding:`1rem`,borderRadius:`0.5rem`,marginBottom:`1.5rem`},children:(0,G.jsxs)(`p`,{style:{margin:0,fontSize:`0.9rem`,color:`#6b7280`},children:[(0,G.jsx)(`strong`,{children:`Note:`}),` Admin users and whitelisted emails can access the site during maintenance mode.`]})}),(0,G.jsxs)(`div`,{style:{marginBottom:`1.5rem`},children:[(0,G.jsx)(`label`,{style:{display:`block`,marginBottom:`0.5rem`,fontWeight:600},children:`Add Email to Whitelist`}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`0.75rem`},children:[(0,G.jsx)(`input`,{type:`email`,value:o,onChange:e=>s(e.target.value),placeholder:`user@example.com`,onKeyPress:e=>e.key===`Enter`&&_(),style:{flex:1,padding:`0.75rem`,border:`1px solid #d1d5db`,borderRadius:`0.5rem`,fontSize:`0.95rem`}}),(0,G.jsxs)(`button`,{onClick:_,disabled:u||!o.trim(),style:{padding:`0.75rem 1.5rem`,background:`#7c3aed`,color:`white`,border:`none`,borderRadius:`0.5rem`,fontSize:`0.95rem`,fontWeight:600,cursor:u||!o.trim()?`not-allowed`:`pointer`,opacity:u||!o.trim()?.5:1,display:`flex`,alignItems:`center`,gap:`0.5rem`},children:[(0,G.jsx)(tm,{size:18}),`Add`]})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`h3`,{style:{fontSize:`1rem`,marginBottom:`0.75rem`},children:[`Whitelisted Emails (`,i.length,`)`]}),i.length===0?(0,G.jsx)(`div`,{style:{textAlign:`center`,padding:`2rem`,color:`#9ca3af`},children:`No emails in whitelist`}):(0,G.jsx)(`div`,{style:{border:`1px solid #e5e7eb`,borderRadius:`0.5rem`,overflow:`hidden`},children:i.map((e,t)=>(0,G.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,padding:`0.75rem 1rem`,borderBottom:t<i.length-1?`1px solid #e5e7eb`:`none`,background:t%2==0?`white`:`#f9fafb`},children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`div`,{style:{fontWeight:500},children:e.email}),e.added_at&&(0,G.jsxs)(`div`,{style:{fontSize:`0.85rem`,color:`#9ca3af`},children:[`Added: `,new Date(e.added_at).toLocaleDateString()]})]}),(0,G.jsxs)(`button`,{onClick:()=>v(e.email),disabled:u,style:{padding:`0.5rem`,background:`transparent`,color:`#ef4444`,border:`1px solid #fecaca`,borderRadius:`0.375rem`,cursor:u?`not-allowed`:`pointer`,display:`flex`,alignItems:`center`,gap:`0.25rem`,fontSize:`0.85rem`},children:[(0,G.jsx)(Cm,{size:16}),`Remove`]})]},e.email))})]})]})]})}function mH(){return(0,b.useEffect)(()=>{document.title=`Maintenance - Fremio`},[]),(0,G.jsx)(`div`,{className:`min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-yellow-50 flex items-center justify-center px-4`,children:(0,G.jsxs)(`div`,{className:`max-w-md w-full`,children:[(0,G.jsxs)(`div`,{className:`bg-white rounded-3xl shadow-xl p-8 text-center`,children:[(0,G.jsx)(`div`,{className:`mb-6`,children:(0,G.jsx)(`div`,{className:`w-24 h-24 mx-auto bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center`,children:(0,G.jsxs)(`svg`,{className:`w-12 h-12 text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:[(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z`}),(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15 12a3 3 0 11-6 0 3 3 0 016 0z`})]})})}),(0,G.jsx)(`h1`,{className:`text-3xl font-bold text-gray-900 mb-3`,children:`Sedang Maintenance`}),(0,G.jsx)(`p`,{className:`text-gray-600 mb-6 leading-relaxed`,children:`Fremio sedang dalam perbaikan untuk memberikan pengalaman yang lebih baik. Silakan coba lagi dalam beberapa saat.`}),(0,G.jsx)(`div`,{className:`bg-purple-50 rounded-xl p-4 mb-6`,children:(0,G.jsx)(`p`,{className:`text-sm text-purple-700 font-medium`,children:` Perkiraan selesai: 15-30 menit`})}),(0,G.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,G.jsx)(tn,{to:`/login`,className:`inline-flex items-center justify-center rounded-xl bg-purple-600 px-4 py-3 text-sm font-semibold text-white hover:bg-purple-700`,children:`Login Admin / Whitelist`}),(0,G.jsxs)(`div`,{className:`text-sm text-gray-500`,children:[`Butuh bantuan?`,` `,(0,G.jsx)(tn,{to:`/help-center`,className:`text-purple-600 hover:text-purple-700 font-medium`,children:`Hubungi Support`})]})]})]}),(0,G.jsx)(`div`,{className:`text-center mt-6`,children:(0,G.jsx)(`p`,{className:`text-gray-500 text-sm`,children:` 2025 Fremio. All rights reserved.`})})]})})}function hH({children:e}){let t=Le(),n=Pe(),{user:r}=In(),i=e=>e===`/maintenance`||e.startsWith(`/maintenance/`)||e===`/login`||e.startsWith(`/login/`)||e===`/register`||e.startsWith(`/register/`)||e===`/reset-password`||e.startsWith(`/reset-password/`),[a,o]=(0,b.useState)(()=>!i(n.pathname)),[s,c]=(0,b.useState)(!1);(0,b.useEffect)(()=>{if(i(n.pathname)){c(!1),o(!1);return}o(!0),u()},[n.pathname]);let l=()=>{let e=`https://api.fremio.id/api`.replace(/\/$/,``);return e.endsWith(`/api`)?{base:e,prefix:``}:{base:e,prefix:`/api`}},u=async()=>{try{let{base:e,prefix:n}=l(),i=await(await fetch(`${e}${n}/maintenance/status`)).json();if(i.success&&i.enabled){if(r&&r.role===`admin`){c(!1);return}let i=localStorage.getItem(`fremio_token`)||localStorage.getItem(`auth_token`);if(i)try{let t=await(await fetch(`${e}${n}/maintenance/access`,{headers:{Authorization:`Bearer ${i}`}})).json();if(t?.success&&t?.allowed){c(!1);return}}catch{}c(!0),t(`/maintenance`,{replace:!0})}else c(!1)}catch(e){console.error(`[MaintenanceGate] Error checking maintenance:`,e),c(!1)}finally{o(!1)}};return a||s&&n.pathname!==`/maintenance`?null:e}function gH(){let[e,t]=(0,b.useState)(!1),[n,r]=(0,b.useState)(``);return(0,b.useEffect)(()=>{(()=>{let e=navigator.userAgent||navigator.vendor||window.opera,n=e.indexOf(`Instagram`)>-1,i=e.indexOf(`FBAN`)>-1||e.indexOf(`FBAV`)>-1,a=e.indexOf(`BytedanceWebview`)>-1||e.indexOf(`musical_ly`)>-1,o=e.indexOf(`Line`)>-1,s=e.indexOf(`Twitter`)>-1;n?(r(`Instagram`),t(!0)):i?(r(`Facebook`),t(!0)):a?(r(`TikTok`),t(!0)):o?(r(`Line`),t(!0)):s&&(r(`Twitter`),t(!0))})()},[]),(0,b.useEffect)(()=>{sessionStorage.getItem(`inAppBrowserDismissed`)===`true`&&t(!1)},[]),e?(0,G.jsx)(`div`,{style:{position:`fixed`,top:0,left:0,right:0,bottom:0,backgroundColor:`rgba(0, 0, 0, 0.85)`,zIndex:99999,display:`flex`,alignItems:`center`,justifyContent:`center`,padding:`20px`},children:(0,G.jsxs)(`div`,{style:{backgroundColor:`#fff`,borderRadius:`16px`,padding:`24px`,maxWidth:`360px`,width:`100%`,textAlign:`center`,boxShadow:`0 10px 40px rgba(0,0,0,0.3)`},children:[(0,G.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`16px`},children:``}),(0,G.jsx)(`h2`,{style:{color:`#5D4E47`,fontSize:`20px`,fontWeight:`700`,marginBottom:`12px`},children:`Buka di Browser`}),(0,G.jsxs)(`p`,{style:{color:`#7a6b63`,fontSize:`14px`,lineHeight:`1.5`,marginBottom:`20px`},children:[`Kamu membuka Fremio dari `,(0,G.jsx)(`strong`,{children:n}),`. Untuk pengalaman terbaik dan bisa download foto, silakan buka di browser (Safari/Chrome).`]}),(0,G.jsxs)(`div`,{style:{backgroundColor:`#f7f1ed`,borderRadius:`12px`,padding:`16px`,marginBottom:`20px`,textAlign:`left`},children:[(0,G.jsx)(`p`,{style:{color:`#5D4E47`,fontSize:`13px`,fontWeight:`600`,marginBottom:`8px`},children:`Cara membuka di browser:`}),(0,G.jsxs)(`ol`,{style:{color:`#7a6b63`,fontSize:`13px`,lineHeight:`1.6`,paddingLeft:`20px`,margin:0},children:[(0,G.jsxs)(`li`,{children:[`Tap menu `,(0,G.jsx)(`strong`,{children:``}),` (titik tiga) di pojok`]}),(0,G.jsxs)(`li`,{children:[`Pilih `,(0,G.jsx)(`strong`,{children:`"Open in Safari"`}),` atau `,(0,G.jsx)(`strong`,{children:`"Buka di Browser"`})]})]})]}),(0,G.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:[(0,G.jsx)(`button`,{onClick:()=>{let e=window.location.href;if(/iPhone|iPad|iPod/i.test(navigator.userAgent))window.location.href=`x-safari-${e}`,setTimeout(()=>{alert(`Tap menu () di kanan bawah, lalu pilih 'Open in Safari' atau 'Buka di Safari'`)},500);else if(/Android/i.test(navigator.userAgent)){let t=`intent://${e.replace(/^https?:\/\//,``)}#Intent;scheme=https;package=com.android.chrome;end`;window.location.href=t,setTimeout(()=>{alert(`Tap menu () di kanan atas, lalu pilih 'Open in Chrome' atau 'Buka di Browser'`)},500)}},style:{backgroundColor:`#E8A889`,color:`#fff`,border:`none`,borderRadius:`12px`,padding:`14px 24px`,fontSize:`15px`,fontWeight:`600`,cursor:`pointer`,width:`100%`},children:`Buka di Browser`}),(0,G.jsxs)(`button`,{onClick:()=>{t(!1),sessionStorage.setItem(`inAppBrowserDismissed`,`true`)},style:{backgroundColor:`transparent`,color:`#7a6b63`,border:`1px solid #ddd`,borderRadius:`12px`,padding:`12px 24px`,fontSize:`14px`,cursor:`pointer`,width:`100%`},children:[`Lanjutkan di `,n]})]}),(0,G.jsxs)(`p`,{style:{color:`#999`,fontSize:`11px`,marginTop:`16px`},children:[`*Download foto mungkin tidak berfungsi di browser `,n]})]})}):null}function _H(){return(0,G.jsx)(Fn,{children:(0,G.jsx)(jm,{children:(0,G.jsxs)(hH,{children:[(0,G.jsx)(gH,{}),(0,G.jsxs)(pt,{children:[(0,G.jsx)(dt,{path:`/maintenance`,element:(0,G.jsx)(mH,{})}),(0,G.jsxs)(dt,{path:`/`,element:(0,G.jsx)(mh,{}),children:[(0,G.jsx)(dt,{index:!0,element:(0,G.jsx)(YO,{})}),(0,G.jsx)(dt,{path:`login`,element:(0,G.jsx)(sV,{})}),(0,G.jsx)(dt,{path:`register`,element:(0,G.jsx)(cV,{})}),(0,G.jsx)(dt,{path:`reset-password`,element:(0,G.jsx)(lV,{})}),(0,G.jsx)(dt,{path:`help-center`,element:(0,G.jsx)(_V,{})}),(0,G.jsx)(dt,{path:`call-center`,element:(0,G.jsx)(bV,{})}),(0,G.jsx)(dt,{path:`order-status`,element:(0,G.jsx)(xV,{})}),(0,G.jsx)(dt,{path:`about-us`,element:(0,G.jsx)(SV,{})}),(0,G.jsx)(dt,{path:`investor`,element:(0,G.jsx)(CV,{})}),(0,G.jsx)(dt,{path:`affiliates`,element:(0,G.jsx)(wV,{})}),(0,G.jsx)(dt,{path:`frames`,element:(0,G.jsx)(Zk,{})}),(0,G.jsx)(dt,{path:`pricing`,element:(0,G.jsx)(gV,{})}),(0,G.jsx)(dt,{path:`create`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(rI,{})})}),(0,G.jsx)(dt,{path:`create/editor`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(HF,{})})}),(0,G.jsx)(dt,{path:`profile`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(uV,{})})}),(0,G.jsx)(dt,{path:`drafts`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(hV,{})})}),(0,G.jsx)(dt,{path:`settings`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(dV,{})})}),(0,G.jsx)(dt,{path:`change-password`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(fV,{})})}),(0,G.jsx)(dt,{path:`wishlist`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(mV,{})})}),(0,G.jsx)(dt,{path:`take-moment`,element:(0,G.jsx)(tM,{})}),(0,G.jsx)(dt,{path:`s/:shareId`,element:(0,G.jsx)(aI,{})}),(0,G.jsx)(dt,{path:`g/:shareId`,element:(0,G.jsx)(lI,{})}),(0,G.jsx)(dt,{path:`editor`,element:(0,G.jsx)(uN,{})}),(0,G.jsx)(dt,{path:`edit-photo`,element:(0,G.jsx)(zN,{})}),(0,G.jsx)(dt,{path:`frame-debug`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(UN,{})})}),(0,G.jsx)(dt,{path:`frame-builder`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(WN,{})})}),(0,G.jsx)(dt,{path:`*`,element:(0,G.jsx)(uI,{})})]}),(0,G.jsxs)(dt,{path:`/admin`,element:(0,G.jsx)(Pm,{children:(0,G.jsx)(uO,{})}),children:[(0,G.jsx)(dt,{index:!0,element:(0,G.jsx)(FV,{})}),(0,G.jsx)(dt,{path:`dashboard`,element:(0,G.jsx)(FV,{})}),(0,G.jsx)(dt,{path:`frames`,element:(0,G.jsx)(RV,{})}),(0,G.jsx)(dt,{path:`upload-frame`,element:(0,G.jsx)(HV,{})}),(0,G.jsx)(dt,{path:`frame-creator`,element:(0,G.jsx)(GV,{})}),(0,G.jsx)(dt,{path:`users`,element:(0,G.jsx)(YV,{})}),(0,G.jsx)(dt,{path:`categories`,element:(0,G.jsx)(eH,{})}),(0,G.jsx)(dt,{path:`analytics`,element:(0,G.jsx)(iH,{})}),(0,G.jsx)(dt,{path:`messages`,element:(0,G.jsx)(oH,{})}),(0,G.jsx)(dt,{path:`affiliates`,element:(0,G.jsx)(dH,{})}),(0,G.jsx)(dt,{path:`packages`,element:(0,G.jsx)(fH,{})}),(0,G.jsx)(dt,{path:`maintenance`,element:(0,G.jsx)(pH,{})}),(0,G.jsx)(dt,{path:`settings`,element:(0,G.jsx)(QV,{})})]}),(0,G.jsx)(dt,{path:`/tablet-printer`,element:(0,G.jsx)(Nm,{children:(0,G.jsx)(VN,{})})})]})]})})})}var vH=class extends b.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error(`ErrorBoundary caught an error:`,e,t)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,G.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,padding:`20px`,background:`linear-gradient(to bottom, #fdf7f4, white)`,fontFamily:`system-ui, -apple-system, sans-serif`},children:(0,G.jsxs)(`div`,{style:{maxWidth:`500px`,textAlign:`center`,padding:`40px`,background:`white`,borderRadius:`16px`,boxShadow:`0 4px 20px rgba(0,0,0,0.1)`},children:[(0,G.jsx)(`div`,{style:{fontSize:`64px`,marginBottom:`20px`},children:``}),(0,G.jsx)(`h1`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#1e293b`,marginBottom:`12px`},children:`Oops! Terjadi Kesalahan`}),(0,G.jsx)(`p`,{style:{color:`#64748b`,marginBottom:`24px`,lineHeight:1.6},children:`Maaf, terjadi kesalahan yang tidak terduga. Silakan coba muat ulang halaman atau kembali ke beranda.`}),(0,G.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`center`},children:[(0,G.jsx)(`button`,{onClick:()=>window.location.reload(),style:{padding:`12px 24px`,background:`#4f46e5`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`,fontSize:`14px`,fontWeight:`600`},children:`Muat Ulang`}),(0,G.jsx)(`button`,{onClick:()=>window.location.href=`/`,style:{padding:`12px 24px`,background:`#f1f5f9`,color:`#475569`,border:`none`,borderRadius:`8px`,cursor:`pointer`,fontSize:`14px`,fontWeight:`600`},children:`Ke Beranda`})]}),!1]})}):this.props.children}};console.log(` Fremio App v14 - Build:`,new Date().toISOString().slice(0,10)),(0,y.createRoot)(document.getElementById(`root`)).render((0,G.jsx)(b.StrictMode,{children:(0,G.jsx)(vH,{children:(0,G.jsx)(Qt,{basename:`/`.replace(/\/+$/,`/`),children:(0,G.jsx)(_H,{})})})}));export{jM as $,YI as A,mg as At,KF as B,oz as C,vD as Ct,KR as D,I_ as Dt,qR as E,z_ as Et,fI as F,hh as Ft,aN as G,DF as H,iL as I,_h as It,BM as J,iN as K,GR as L,Lz as M,pg as Mt,QL as N,Fh as Nt,eR as O,P_ as Ot,YR as P,gh as Pt,PM as Q,JR as R,XR as S,SD as St,fz as T,ID as Tt,OF as U,qF as V,oN as W,HM as X,zM as Y,DM as Z,Wz as _,jE as _t,PV as a,uM as at,YB as b,ND as bt,TR as c,dM as ct,ER as d,pM as dt,NM as et,kR as f,vM as ft,SR as g,RD as gt,gR as h,Ik as ht,DV as i,bM as it,hL as j,$h as jt,aV as k,H_ as kt,aR as l,gM as lt,AR as m,Pk as mt,kV as n,hM as nt,AV as o,fM as ot,jR as p,_M as pt,sN as q,jV as r,mM as rt,OV as s,yM as st,EV as t,VM as tt,pR as u,xM as ut,KB as v,LD as vt,UB as w,VD as wt,MR as x,FD as xt,qB as y,ME as yt,GF as z};