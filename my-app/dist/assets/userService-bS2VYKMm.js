import{A as e,C as t,F as n,I as r,L as i,M as a,N as o,P as s,R as c,S as l,j as u,k as d}from"./index-BzCOLXUm.js";async function f(){try{let t=r(e(d,l.USERS),n(`createdAt`,`desc`));return(await s(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error(`Error fetching all users:`,e),[]}}async function p(e,n,r){try{if(!Object.values(t).includes(n))return{success:!1,message:`Invalid role`};let s=a(d,l.USERS,e);return(await o(s)).exists()?(await c(s,{role:n,isKreator:n===t.KREATOR,updatedAt:i(),lastModifiedBy:r}),{success:!0,message:`User role updated to ${n}`}):{success:!1,message:`User not found`}}catch(e){return console.error(`Error updating user role:`,e),{success:!1,message:e.message||`Failed to update user role`}}}async function m(e,t,n=``){try{let r=a(d,l.USERS,e);return(await o(r)).exists()?(await c(r,{status:`banned`,banReason:n,bannedAt:i(),bannedBy:t,updatedAt:i()}),{success:!0,message:`User banned successfully`}):{success:!1,message:`User not found`}}catch(e){return console.error(`Error banning user:`,e),{success:!1,message:e.message||`Failed to ban user`}}}async function h(e,t){try{let n=a(d,l.USERS,e);return(await o(n)).exists()?(await c(n,{status:`active`,banReason:null,bannedAt:null,bannedBy:null,unbannedAt:i(),unbannedBy:t,updatedAt:i()}),{success:!0,message:`User unbanned successfully`}):{success:!1,message:`User not found`}}catch(e){return console.error(`Error unbanning user:`,e),{success:!1,message:e.message||`Failed to unban user`}}}async function g(e,n){try{let n=a(d,l.USERS,e),r=await o(n);return r.exists()?r.data().role===t.ADMIN?{success:!1,message:`Cannot delete admin users`}:(await u(n),{success:!0,message:`User deleted successfully`}):{success:!1,message:`User not found`}}catch(e){return console.error(`Error deleting user:`,e),{success:!1,message:e.message||`Failed to delete user`}}}async function _(){try{let e=await f();return{total:e.length,admins:e.filter(e=>e.role===t.ADMIN).length,kreators:e.filter(e=>e.role===t.KREATOR).length,regular:e.filter(e=>e.role===t.USER).length,active:e.filter(e=>e.status===`active`||!e.status).length,banned:e.filter(e=>e.status===`banned`).length}}catch(e){return console.error(`Error fetching user stats:`,e),{total:0,admins:0,kreators:0,regular:0,active:0,banned:0}}}export{m as banUser,g as deleteUser,f as getAllUsers,_ as getUserStats,h as unbanUser,p as updateUserRole};